/*! For license information please see noodl.deploy.js.LICENSE.txt */
(()=>{var __webpack_modules__={8979:(e,t,n)=>{const{Node:o}=n(3948),i=n(1436),r=n(9160),s=n(7363),a=n(3948),{useEffect:l}=s;function u(e){const{didMount:t,willUnmount:n}=e;return l((()=>(t(),()=>{n()})),[]),null}const d={name:"For Each",displayNodeName:"Repeater",docs:"https://docs.noodl.net/nodes/ui-controls/repeater",color:"visual",category:"Visual",dynamicports:[{name:"conditionalports/extended",condition:"templateType = explicit OR templateType NOT SET",inputs:["template"]},{name:"conditionalports/extended",condition:"templateType = dynamic",inputs:["templateScript"]}],initialize(){this._internal.itemNodes=[],this._internal.itemOutputSignals={},this._internal.itemOutputs={},this._internal.collection=r.get(),this._internal.queuedOperations=[],this._internal.mountedOperations=[],this._internal.collection.on("add",(async e=>{this._internal.target&&this._queueOperation((async()=>{const t=this._internal.target.getChildren().indexOf(this)+1;await this.addItem(e.item,t+e.index)}))})),this._internal.collection.on("remove",(e=>{this._queueOperation((()=>{this.removeItem(e.item)}))})),this._internal.onItemsCollectionChanged=()=>{a.instance.getProjectSettings().repeaterDisabledWhenUnmounted&&!this.isMounted?this._internal.mountedOperations.push((()=>{this._internal.collection.set(this._internal.items)})):this._queueOperation((()=>{this._internal.collection.set(this._internal.items)}))},this.addDeleteListener((()=>{this._deleteAllItemNodes()}))},inputs:{items:{group:"Data",displayName:"Items",type:"array",set:function(e){e&&e!==this._internal.items&&this.bindCollection(e)}},templateType:{group:"Appearance",displayName:"Template Type",type:{name:"enum",enums:[{label:"Explicit",value:"explicit"},{label:"Dynamic",value:"dynamic"}]},default:"explicit",set:function(e){this._internal.templateType=e,this.scheduleRefresh()}},template:{type:"component",displayName:"Template",group:"Appearance",set:function(e){this._internal.template=e,this.scheduleRefresh()}},templateScript:{type:{name:"string",codeeditor:"javascript",allowEditOnly:!0},displayName:"Script",group:"Appearance",default:"// Set the 'component' variable to the name of the desired component for this item.\n// Component name must start with a '/'.\n// A component in a sheet is referred to by '/#Sheet Name/Comopnent Name'.\n// The data for each item is available in a variable called 'item'\ncomponent = '/MyComponent';",set:function(e){try{this._internal.templateFunction=new Function("item","var component;"+e+";return component;")}catch(e){console.log(e),this.context.editorConnection&&this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"foreach-syntax-warning",{message:"<strong>Syntax</strong>: "+e.message})}this.scheduleRefresh()}},refresh:{group:"Appearance",displayName:"Refresh",type:"signal",valueChangedToTrue:function(){this.scheduleRefresh()}}},outputs:{itemActionItemId:{type:"string",group:"Actions",displayName:"Item Id",getter:function(){return this._internal.itemActionItemId}}},prototypeExtensions:{updateTarget:function(e){this._internal.target=e?this.nodeScope.getNodeWithId(e):void 0,this.scheduleRefresh()},setNodeModel:function(e){o.prototype.setNodeModel.call(this,e),e.parent&&this.updateTarget(e.parent.id);var t=this;e.on("parentUpdated",(function(e){t.updateTarget(e?e.id:void 0)}),this)},scheduleRefresh:function(){var e=this._internal;e.hasScheduledRefresh||(e.hasScheduledRefresh=!0,this.scheduleAfterInputsHaveUpdated((()=>{this._queueOperation((()=>{this.refresh()}))})))},unbindCurrentCollection:function(){var e=this._internal.items;e&&(r.instanceOf(e)&&e.off("change",this._internal.onItemsCollectionChanged),this._internal.items=void 0)},bindCollection:function(e){var t=this._internal;this.unbindCurrentCollection(),r.instanceOf(e)&&e.on("change",this._internal.onItemsCollectionChanged),t.items=e,this.scheduleCopyItems()},getTemplateForModel:function(e){var t=this._internal;if(void 0===t.templateType||"explicit"===t.templateType)return t.template;if(t.templateFunction){try{var n=t.templateFunction(e)}catch(e){console.log(e),this.context.editorConnection&&this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"foreach-dynamic-warning",{message:"<strong>Dynamic template</strong>: "+e.message})}if(n&&(n.startsWith("./")&&(n=this.model.component.name+n.substring(1)),n.startsWith("../"))){const e=this.model.component.name.split("/");n=e.slice(0,e.length-1).join("/")+n.substring(2)}return n}},_mapInputs:function(e,t){void 0!==this._internal.inputMapFunc&&this._internal.inputMapFunc((function(n){for(var o in n)e.hasInput(o)&&("function"==typeof n[o]?e.setInputValue(o,n[o](t)):"string"==typeof n[o]&&e.setInputValue(o,t.get(n[o])))}),t)},addItem:async function(e,t){var n=this._internal,o=this.getTemplateForModel(e);if(o){var r=await this.nodeScope.createNode(o,i(),{_forEachModel:e,_forEachNode:this});if(void 0===this._internal.inputMapFunc){for(var s in r.hasInput("Id")&&r.setInputValue("Id",e.getId()),r.hasInput("id")&&r.setInputValue("id",e.getId()),r._inputs)void 0!==e.data[s]&&r.setInputValue(s,e.data[s]);r._forEachModelChangeListener=function(e){r._inputs[e.name]&&r.setInputValue(e.name,e.value)},e.on("change",r._forEachModelChangeListener),r.componentModel.on("inputPortAdded",(t=>{"id"===t.name&&r.setInputValue("id",e.getId()),"Id"===t.name&&r.setInputValue("Id",e.getId()),void 0!==e.data[t.name]&&r.setInputValue(t.name,e.data[t.name])}),this)}else this._mapInputs(r,e),r._forEachModelChangeListener=()=>this._mapInputs(r,e),e.on("change",r._forEachModelChangeListener);r._internal.creatorCallbacks={onOutputChanged:(t,o,i)=>{!1!==i&&void 0!==i||!0!==o||!n.itemOutputSignals[t]||this.itemOutputSignalTriggered(t,e,r)}};for(var a=r.nodeScope.getNodesWithType("For Each Actions"),l=0;l<a.length;l++)a[l].signalAdded();n.itemNodes.push(r),n.target.addChild(r,t)}},removeItem:function(e){var t=this._internal;if(t.target){var n=function(){var n=t.target.getChildren();for(var o in n){var i=n[o];if(i._forEachModel===e&&!i._forEachRemoveInProgress)return i}}();if(n){var o=n.nodeScope.getNodesWithType("For Each Actions");o&&o.length>0?(n._forEachRemoveInProgress=!0,o[0].tryRemove((()=>this._deleteItem(n)))):this._deleteItem(n);var i=t.itemNodes.indexOf(n);-1!==i&&t.itemNodes.splice(i,1)}}},_deleteItem(e){e._forEachModel.off("change",e._forEachModelChangeListener),e.model&&e.model.removeListenersWithRef(this),e.componentModel&&e.componentModel.removeListenersWithRef(this);const t=e.parent;!e._deleted&&t&&(t.removeChild(e),this.nodeScope.deleteNode(e))},_deleteAllItemNodes:function(){if(this._internal.itemNodes){for(const e of this._internal.itemNodes)this._deleteItem(e);this._internal.itemNodes=[]}},refresh:async function(){var e=this._internal;if(e.hasScheduledRefresh=!1,!e.template&&!e.templateFunction||!e.items)return;if(this._deleteAllItemNodes(),!e.target)return;const t=this._internal.target.getChildren().indexOf(this)+1;for(var n=0;n<e.collection.size();n++){var o=e.collection.get(n);await this.addItem(o,t+n)}},_queueOperation(e){this._internal.queuedOperations.push(e),this._runQueueOperations()},async _runQueueOperations(){if(!this.runningOperations)if(this.runningOperations=!0,a.instance.getProjectSettings().repeaterCreateComponentsAsync){const e=async()=>{const t=performance.now();for(;this._internal.queuedOperations.length&&performance.now()-t<25;){const e=this._internal.queuedOperations.shift();await e()}this._internal.queuedOperations.length?setTimeout(e,0):this.runningOperations=!1};e()}else{for(;this._internal.queuedOperations.length;){const e=this._internal.queuedOperations.shift();await e()}this.runningOperations=!1}},_onNodeDeleted:function(){o.prototype._onNodeDeleted.call(this),this._internal.queuedOperations.length=0,this.unbindCurrentCollection()},render(){return s.createElement(u,{key:this.id,didMount:()=>this.didMount(),willUnmount:()=>this.willUnmount()})},didMount(){this.isMounted=!0;for(const e of this._internal.mountedOperations)this._queueOperation(e);this._internal.mountedOperations=[]},willUnmount(){this.isMounted=!1},getItemActionParameter:function(e){if(this._internal.itemActionParameters)return this._internal.itemActionParameters[e]},scheduleCopyItems:function(){this._internal.hasScheduledCopyItems||(this._internal.hasScheduledCopyItems=!0,this.scheduleAfterInputsHaveUpdated((()=>{this._internal.hasScheduledCopyItems=!1,void 0!==this._internal.items&&(a.instance.getProjectSettings().repeaterDisabledWhenUnmounted&&!this.isMounted?this._internal.mountedOperations.push((()=>{this._internal.collection.set(this._internal.items)})):this._internal.collection.set(this._internal.items))})))},itemOutputSignalTriggered:function(e,t,n){this._internal.itemActionItemId=t.getId(),this._internal.itemActionSignal=e,this.flagOutputDirty("itemActionItemId"),this._internal.hasScheduledTriggerItemOutputSignal||(this._internal.hasScheduledTriggerItemOutputSignal=!0,this.context.scheduleAfterUpdate((()=>{for(var e in this._internal.hasScheduledTriggerItemOutputSignal=!1,n._outputs){var t="itemOutput-"+e;this.hasOutput(t)&&(this._internal.itemOutputs[e]=n._outputs[e].value,this.flagOutputDirty(t))}this.sendSignalOnOutput("itemOutputSignal-"+this._internal.itemActionSignal)})))},getItemOutput:function(e){return this._internal.itemOutputs[e]},registerOutputIfNeeded:function(e){this.hasOutput(e)||(e.startsWith("itemOutputSignal-")?(this._internal.itemOutputSignals[e.substring(17)]=!0,this.registerOutput(e,{getter:function(){}})):e.startsWith("itemOutput-")&&this.registerOutput(e,{getter:this.getItemOutput.bind(this,e.substring(11))}))},setInputMappingScript:function(e){if(this.context.editorConnection&&this.context.editorConnection.clearWarning(this.nodeScope.componentOwner.name,this.id,"foreach-inputmapping-warning"),this._internal.inputMappingScript=e,this._internal.inputMappingScript)try{this._internal.inputMapFunc=new Function("map","object",this._internal.inputMappingScript)}catch(e){this._internal.inputMapFunc=void 0,this.context.editorConnection&&this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"foreach-inputmapping-warning",{message:"<strong>Input mapping</strong>: "+e.message})}else this._internal.inputMapFunc=void 0;this.scheduleRefresh()},registerInputIfNeeded:function(e){if(!this.hasInput(e))return"inputMappingScript"===e?this.registerInput(e,{set:this.setInputMappingScript.bind(this)}):void 0}}};function c(e){return"object"==typeof e?e.name:e}e.exports={ForEachComponent:u,node:d,setup:function(e,t){function n(n){function o(){var o=n.parameters.template;if(void 0!==o){var i=[],r=t.components[o];if(void 0!==r){for(var s in r.outputPorts)"signal"===c((u=r.outputPorts[s]).type)?i.push({name:"itemOutputSignal-"+s,displayName:s,type:"signal",plug:"output",group:"Item Signals"}):i.push({name:"itemOutput-"+s,displayName:s,type:u.type,plug:"output",group:"Item Outputs"});var a="";for(var l in r.inputPorts){var u;"signal"!==c((u=r.inputPorts[l]).type)&&(a+="\t'"+l+"': '"+l+"',\n")}i.push({name:"inputMappingScript",type:{name:"string",codeeditor:"javascript"},displayName:"Script",group:"Input Mapping",default:"// Here you add mappings between the properties of the item objects and the inputs of the components.\n// 'myComponentInput': 'myObjectProperty',\n// 'anotherComponentInput': function () { return object.get('someProperty') + ' ' + object.get('otherProp') }\n// These are the default mappings based on the selected template component.\nmap({\n{{#mappings}}})\n".replace("{{#mappings}}",a),plug:"input"}),e.editorConnection.sendDynamicPorts(n.id,i,{detectRenamed:{plug:"output",prefix:"itemOutput"}})}}}function i(e){if(void 0!==e){var n=t.components[e];void 0!==n&&(n.on("outputPortAdded",o),n.on("outputPortRemoved",o),n.on("outputPortTypesUpdated",o),n.on("inputPortTypesUpdated",o),n.on("inputPortAdded",o),n.on("inputPortRemoved",o))}}o(),i(n.parameters.template),n.on("parameterUpdated",(function(e){"template"===e.name&&(o(),i(n.parameters.template))}))}e.editorConnection&&e.editorConnection.isRunningLocally()&&t.on("editorImportComplete",(()=>{t.on("nodeAdded.For Each",(function(e){n(e)}));for(const e of t.getNodesWithType("For Each"))n(e)}))}}},5107:e=>{var t=.1,n="function"==typeof Float32Array;function o(e,t){return 1-3*t+3*e}function i(e,t){return 3*t-6*e}function r(e){return 3*e}function s(e,t,n){return((o(t,n)*e+i(t,n))*e+r(t))*e}function a(e,t,n){return 3*o(t,n)*e*e+2*i(t,n)*e+r(t)}function l(e,t,o,i){if(4===arguments.length)return new l([e,t,o,i]);if(!(this instanceof l))return new l(e);if(!e||4!==e.length)throw new Error("BezierEasing: points must contains 4 values");for(var r=0;r<4;++r)if("number"!=typeof e[r]||isNaN(e[r])||!isFinite(e[r]))throw new Error("BezierEasing: points should be integers.");if(e[0]<0||e[0]>1||e[2]<0||e[2]>1)throw new Error("BezierEasing x values must be in [0, 1] range.");this._str="BezierEasing("+e+")",this._css="cubic-bezier("+e+")",this._p=e,this._mSampleValues=n?new Float32Array(11):new Array(11),this._precomputed=!1,this.get=this.get.bind(this)}l.prototype={get:function(e){var t=this._p[0],n=this._p[1],o=this._p[2],i=this._p[3];return this._precomputed||this._precompute(),t===n&&o===i?e:0===e?0:1===e?1:s(this._getTForX(e),n,i)},getPoints:function(){return this._p},toString:function(){return this._str},toCSS:function(){return this._css},_precompute:function(){var e=this._p[0],t=this._p[1],n=this._p[2],o=this._p[3];this._precomputed=!0,e===t&&n===o||this._calcSampleValues()},_calcSampleValues:function(){for(var e=this._p[0],n=this._p[2],o=0;o<11;++o)this._mSampleValues[o]=s(o*t,e,n)},_getTForX:function(e){for(var n=this._p[0],o=this._p[2],i=this._mSampleValues,r=0,l=1;10!==l&&i[l]<=e;++l)r+=t;var u=r+(e-i[--l])/(i[l+1]-i[l])*t,d=a(u,n,o);return d>=.001?function(e,t,n,o){for(var i=0;i<4;++i){var r=a(t,n,o);if(0===r)return t;t-=(s(t,n,o)-e)/r}return t}(e,u,n,o):0===d?u:function(e,t,n,o,i){var r,a,l=0;do{(r=s(a=t+(n-t)/2,o,i)-e)>0?n=a:t=a}while(Math.abs(r)>1e-7&&++l<10);return a}(e,r,r+t,n,o)}},l.css={ease:l.ease=l(.25,.1,.25,1),linear:l.linear=l(0,0,1,1),"ease-in":l.easeIn=l(.42,0,1,1),"ease-out":l.easeOut=l(0,0,.58,1),"ease-in-out":l.easeInOut=l(.42,0,.58,1)},e.exports=l},6277:(e,t,n)=>{"use strict";function o(e){var t,n,i="";if("string"==typeof e||"number"==typeof e)i+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=o(e[t]))&&(i&&(i+=" "),i+=n);else for(t in e)e[t]&&(i&&(i+=" "),i+=t);return i}function i(){for(var e,t,n=0,i="";n<arguments.length;)(e=arguments[n++])&&(t=o(e))&&(i&&(i+=" "),i+=t);return i}n.r(t),n.d(t,{clsx:()=>i,default:()=>r});const r=i},2699:e=>{"use strict";var t,n="object"==typeof Reflect?Reflect:null,o=n&&"function"==typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function r(){r.init.call(this)}e.exports=r,e.exports.once=function(e,t){return new Promise((function(n,o){function i(n){e.removeListener(t,r),o(n)}function r(){"function"==typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}f(e,t,r,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&f(e,"error",t,{once:!0})}(e,i)}))},r.EventEmitter=r,r.prototype._events=void 0,r.prototype._eventsCount=0,r.prototype._maxListeners=void 0;var s=10;function a(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?r.defaultMaxListeners:e._maxListeners}function u(e,t,n,o){var i,r,s,u;if(a(n),void 0===(r=e._events)?(r=e._events=Object.create(null),e._eventsCount=0):(void 0!==r.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),r=e._events),s=r[t]),void 0===s)s=r[t]=n,++e._eventsCount;else if("function"==typeof s?s=r[t]=o?[n,s]:[s,n]:o?s.unshift(n):s.push(n),(i=l(e))>0&&s.length>i&&!s.warned){s.warned=!0;var d=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");d.name="MaxListenersExceededWarning",d.emitter=e,d.type=t,d.count=s.length,u=d,console&&console.warn&&console.warn(u)}return e}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function c(e,t,n){var o={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=d.bind(o);return i.listener=n,o.wrapFn=i,i}function p(e,t,n){var o=e._events;if(void 0===o)return[];var i=o[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):g(i,i.length)}function h(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function g(e,t){for(var n=new Array(t),o=0;o<t;++o)n[o]=e[o];return n}function f(e,t,n,o){if("function"==typeof e.on)o.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(r){o.once&&e.removeEventListener(t,i),n(r)}))}}Object.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),r.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},r.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},r.prototype.getMaxListeners=function(){return l(this)},r.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i="error"===e,r=this._events;if(void 0!==r)i=i&&void 0===r.error;else if(!i)return!1;if(i){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var l=r[e];if(void 0===l)return!1;if("function"==typeof l)o(l,this,t);else{var u=l.length,d=g(l,u);for(n=0;n<u;++n)o(d[n],this,t)}return!0},r.prototype.addListener=function(e,t){return u(this,e,t,!1)},r.prototype.on=r.prototype.addListener,r.prototype.prependListener=function(e,t){return u(this,e,t,!0)},r.prototype.once=function(e,t){return a(t),this.on(e,c(this,e,t)),this},r.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,c(this,e,t)),this},r.prototype.removeListener=function(e,t){var n,o,i,r,s;if(a(t),void 0===(o=this._events))return this;if(void 0===(n=o[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete o[e],o.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,r=n.length-1;r>=0;r--)if(n[r]===t||n[r].listener===t){s=n[r].listener,i=r;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(o[e]=n[0]),void 0!==o.removeListener&&this.emit("removeListener",e,s||t)}return this},r.prototype.off=r.prototype.removeListener,r.prototype.removeAllListeners=function(e){var t,n,o;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,r=Object.keys(n);for(o=0;o<r.length;++o)"removeListener"!==(i=r[o])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(o=t.length-1;o>=0;o--)this.removeListener(e,t[o]);return this},r.prototype.listeners=function(e){return p(this,e,!0)},r.prototype.rawListeners=function(e){return p(this,e,!1)},r.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):h.call(e,t)},r.prototype.listenerCount=h,r.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},2806:(e,t,n)=>{var o="__lodash_hash_undefined__",i=9007199254740991,r="[object Arguments]",s="[object Function]",a="[object GeneratorFunction]",l=/^\[object .+?Constructor\]$/,u="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,d="object"==typeof self&&self&&self.Object===Object&&self,c=u||d||Function("return this")();function p(e,t){return!(!e||!e.length)&&function(e,t,n){if(t!=t)return function(e,t,n,o){for(var i=e.length,r=-1;++r<i;)if(t(e[r],r,e))return r;return-1}(e,f);for(var o=-1,i=e.length;++o<i;)if(e[o]===t)return o;return-1}(e,t)>-1}function h(e,t,n){for(var o=-1,i=e?e.length:0;++o<i;)if(n(t,e[o]))return!0;return!1}function g(e,t){for(var n=-1,o=t.length,i=e.length;++n<o;)e[i+n]=t[n];return e}function f(e){return e!=e}function m(e,t){return e.has(t)}var y,v=Array.prototype,b=Function.prototype,S=Object.prototype,_=c["__core-js_shared__"],C=(y=/[^.]+$/.exec(_&&_.keys&&_.keys.IE_PROTO||""))?"Symbol(src)_1."+y:"",N=b.toString,w=S.hasOwnProperty,O=S.toString,x=RegExp("^"+N.call(w).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),I=c.Symbol,P=S.propertyIsEnumerable,T=v.splice,E=I?I.isConcatSpreadable:void 0,k=Math.max,D=W(c,"Map"),R=W(Object,"create");function M(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}function A(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}function V(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}function j(e){var t=-1,n=e?e.length:0;for(this.__data__=new V;++t<n;)this.add(e[t])}function F(e,t){for(var n,o,i=e.length;i--;)if((n=e[i][0])===(o=t)||n!=n&&o!=o)return i;return-1}function L(e,t,n,o,i){var r=-1,s=e.length;for(n||(n=B),i||(i=[]);++r<s;){var a=e[r];t>0&&n(a)?t>1?L(a,t-1,n,o,i):g(i,a):o||(i[i.length]=a)}return i}function U(e,t){var n,o,i=e.__data__;return("string"==(o=typeof(n=t))||"number"==o||"symbol"==o||"boolean"==o?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function W(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){if(!Y(e)||C&&C in e)return!1;var t=$(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?x:l;return t.test(function(e){if(null!=e){try{return N.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}(n)?n:void 0}function B(e){return X(e)||function(e){return G(e)&&w.call(e,"callee")&&(!P.call(e,"callee")||O.call(e)==r)}(e)||!!(E&&e&&e[E])}M.prototype.clear=function(){this.__data__=R?R(null):{}},M.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},M.prototype.get=function(e){var t=this.__data__;if(R){var n=t[e];return n===o?void 0:n}return w.call(t,e)?t[e]:void 0},M.prototype.has=function(e){var t=this.__data__;return R?void 0!==t[e]:w.call(t,e)},M.prototype.set=function(e,t){return this.__data__[e]=R&&void 0===t?o:t,this},A.prototype.clear=function(){this.__data__=[]},A.prototype.delete=function(e){var t=this.__data__,n=F(t,e);return!(n<0||(n==t.length-1?t.pop():T.call(t,n,1),0))},A.prototype.get=function(e){var t=this.__data__,n=F(t,e);return n<0?void 0:t[n][1]},A.prototype.has=function(e){return F(this.__data__,e)>-1},A.prototype.set=function(e,t){var n=this.__data__,o=F(n,e);return o<0?n.push([e,t]):n[o][1]=t,this},V.prototype.clear=function(){this.__data__={hash:new M,map:new(D||A),string:new M}},V.prototype.delete=function(e){return U(this,e).delete(e)},V.prototype.get=function(e){return U(this,e).get(e)},V.prototype.has=function(e){return U(this,e).has(e)},V.prototype.set=function(e,t){return U(this,e).set(e,t),this},j.prototype.add=j.prototype.push=function(e){return this.__data__.set(e,o),this},j.prototype.has=function(e){return this.__data__.has(e)};var z,H,q=(z=function(e,t){return G(e)?function(e,t,n,o){var i,r=-1,s=p,a=!0,l=e.length,u=[],d=t.length;if(!l)return u;n&&(t=function(e,t){for(var n=-1,o=e?e.length:0,i=Array(o);++n<o;)i[n]=t(e[n],n,e);return i}(t,(i=n,function(e){return i(e)}))),o?(s=h,a=!1):t.length>=200&&(s=m,a=!1,t=new j(t));e:for(;++r<l;){var c=e[r],g=n?n(c):c;if(c=o||0!==c?c:0,a&&g==g){for(var f=d;f--;)if(t[f]===g)continue e;u.push(c)}else s(t,g,o)||u.push(c)}return u}(e,L(t,1,G,!0)):[]},H=k(void 0===H?z.length-1:H,0),function(){for(var e=arguments,t=-1,n=k(e.length-H,0),o=Array(n);++t<n;)o[t]=e[H+t];t=-1;for(var i=Array(H+1);++t<H;)i[t]=e[t];return i[H]=o,function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}(z,this,i)}),X=Array.isArray;function G(e){return function(e){return!!e&&"object"==typeof e}(e)&&function(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=i}(e.length)&&!$(e)}(e)}function $(e){var t=Y(e)?O.call(e):"";return t==s||t==a}function Y(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}e.exports=q},3958:(e,t,n)=>{e=n.nmd(e);var o="__lodash_hash_undefined__",i=1,r=2,s=9007199254740991,a="[object Arguments]",l="[object Array]",u="[object AsyncFunction]",d="[object Boolean]",c="[object Date]",p="[object Error]",h="[object Function]",g="[object GeneratorFunction]",f="[object Map]",m="[object Number]",y="[object Null]",v="[object Object]",b="[object Promise]",S="[object Proxy]",_="[object RegExp]",C="[object Set]",N="[object String]",w="[object Undefined]",O="[object WeakMap]",x="[object ArrayBuffer]",I="[object DataView]",P=/^\[object .+?Constructor\]$/,T=/^(?:0|[1-9]\d*)$/,E={};E["[object Float32Array]"]=E["[object Float64Array]"]=E["[object Int8Array]"]=E["[object Int16Array]"]=E["[object Int32Array]"]=E["[object Uint8Array]"]=E["[object Uint8ClampedArray]"]=E["[object Uint16Array]"]=E["[object Uint32Array]"]=!0,E[a]=E[l]=E[x]=E[d]=E[I]=E[c]=E[p]=E[h]=E[f]=E[m]=E[v]=E[_]=E[C]=E[N]=E[O]=!1;var k="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,D="object"==typeof self&&self&&self.Object===Object&&self,R=k||D||Function("return this")(),M=t&&!t.nodeType&&t,A=M&&e&&!e.nodeType&&e,V=A&&A.exports===M,j=V&&k.process,F=function(){try{return j&&j.binding&&j.binding("util")}catch(e){}}(),L=F&&F.isTypedArray;function U(e,t){for(var n=-1,o=null==e?0:e.length;++n<o;)if(t(e[n],n,e))return!0;return!1}function W(e){var t=-1,n=Array(e.size);return e.forEach((function(e,o){n[++t]=[o,e]})),n}function B(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var z,H,q,X=Array.prototype,G=Function.prototype,$=Object.prototype,Y=R["__core-js_shared__"],J=G.toString,K=$.hasOwnProperty,Q=(z=/[^.]+$/.exec(Y&&Y.keys&&Y.keys.IE_PROTO||""))?"Symbol(src)_1."+z:"",Z=$.toString,ee=RegExp("^"+J.call(K).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),te=V?R.Buffer:void 0,ne=R.Symbol,oe=R.Uint8Array,ie=$.propertyIsEnumerable,re=X.splice,se=ne?ne.toStringTag:void 0,ae=Object.getOwnPropertySymbols,le=te?te.isBuffer:void 0,ue=(H=Object.keys,q=Object,function(e){return H(q(e))}),de=Ae(R,"DataView"),ce=Ae(R,"Map"),pe=Ae(R,"Promise"),he=Ae(R,"Set"),ge=Ae(R,"WeakMap"),fe=Ae(Object,"create"),me=Le(de),ye=Le(ce),ve=Le(pe),be=Le(he),Se=Le(ge),_e=ne?ne.prototype:void 0,Ce=_e?_e.valueOf:void 0;function Ne(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}function we(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}function Oe(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}function xe(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Oe;++t<n;)this.add(e[t])}function Ie(e){var t=this.__data__=new we(e);this.size=t.size}function Pe(e,t){for(var n=e.length;n--;)if(Ue(e[n][0],t))return n;return-1}function Te(e){return null==e?void 0===e?w:y:se&&se in Object(e)?function(e){var t=K.call(e,se),n=e[se];try{e[se]=void 0;var o=!0}catch(e){}var i=Z.call(e);return o&&(t?e[se]=n:delete e[se]),i}(e):function(e){return Z.call(e)}(e)}function Ee(e){return Ge(e)&&Te(e)==a}function ke(e,t,n,o,s){return e===t||(null==e||null==t||!Ge(e)&&!Ge(t)?e!=e&&t!=t:function(e,t,n,o,s,u){var h=Be(e),g=Be(t),y=h?l:je(e),b=g?l:je(t),S=(y=y==a?v:y)==v,w=(b=b==a?v:b)==v,O=y==b;if(O&&ze(e)){if(!ze(t))return!1;h=!0,S=!1}if(O&&!S)return u||(u=new Ie),h||$e(e)?De(e,t,n,o,s,u):function(e,t,n,o,s,a,l){switch(n){case I:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case x:return!(e.byteLength!=t.byteLength||!a(new oe(e),new oe(t)));case d:case c:case m:return Ue(+e,+t);case p:return e.name==t.name&&e.message==t.message;case _:case N:return e==t+"";case f:var u=W;case C:var h=o&i;if(u||(u=B),e.size!=t.size&&!h)return!1;var g=l.get(e);if(g)return g==t;o|=r,l.set(e,t);var y=De(u(e),u(t),o,s,a,l);return l.delete(e),y;case"[object Symbol]":if(Ce)return Ce.call(e)==Ce.call(t)}return!1}(e,t,y,n,o,s,u);if(!(n&i)){var P=S&&K.call(e,"__wrapped__"),T=w&&K.call(t,"__wrapped__");if(P||T){var E=P?e.value():e,k=T?t.value():t;return u||(u=new Ie),s(E,k,n,o,u)}}return!!O&&(u||(u=new Ie),function(e,t,n,o,r,s){var a=n&i,l=Re(e),u=l.length;if(u!=Re(t).length&&!a)return!1;for(var d=u;d--;){var c=l[d];if(!(a?c in t:K.call(t,c)))return!1}var p=s.get(e);if(p&&s.get(t))return p==t;var h=!0;s.set(e,t),s.set(t,e);for(var g=a;++d<u;){var f=e[c=l[d]],m=t[c];if(o)var y=a?o(m,f,c,t,e,s):o(f,m,c,e,t,s);if(!(void 0===y?f===m||r(f,m,n,o,s):y)){h=!1;break}g||(g="constructor"==c)}if(h&&!g){var v=e.constructor,b=t.constructor;v==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof v&&v instanceof v&&"function"==typeof b&&b instanceof b||(h=!1)}return s.delete(e),s.delete(t),h}(e,t,n,o,s,u))}(e,t,n,o,ke,s))}function De(e,t,n,o,s,a){var l=n&i,u=e.length,d=t.length;if(u!=d&&!(l&&d>u))return!1;var c=a.get(e);if(c&&a.get(t))return c==t;var p=-1,h=!0,g=n&r?new xe:void 0;for(a.set(e,t),a.set(t,e);++p<u;){var f=e[p],m=t[p];if(o)var y=l?o(m,f,p,t,e,a):o(f,m,p,e,t,a);if(void 0!==y){if(y)continue;h=!1;break}if(g){if(!U(t,(function(e,t){if(i=t,!g.has(i)&&(f===e||s(f,e,n,o,a)))return g.push(t);var i}))){h=!1;break}}else if(f!==m&&!s(f,m,n,o,a)){h=!1;break}}return a.delete(e),a.delete(t),h}function Re(e){return function(e,t,n){var o=t(e);return Be(e)?o:function(e,t){for(var n=-1,o=t.length,i=e.length;++n<o;)e[i+n]=t[n];return e}(o,n(e))}(e,Ye,Ve)}function Me(e,t){var n,o,i=e.__data__;return("string"==(o=typeof(n=t))||"number"==o||"symbol"==o||"boolean"==o?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function Ae(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!Xe(e)||function(e){return!!Q&&Q in e}(e))&&(He(e)?ee:P).test(Le(e))}(n)?n:void 0}Ne.prototype.clear=function(){this.__data__=fe?fe(null):{},this.size=0},Ne.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Ne.prototype.get=function(e){var t=this.__data__;if(fe){var n=t[e];return n===o?void 0:n}return K.call(t,e)?t[e]:void 0},Ne.prototype.has=function(e){var t=this.__data__;return fe?void 0!==t[e]:K.call(t,e)},Ne.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=fe&&void 0===t?o:t,this},we.prototype.clear=function(){this.__data__=[],this.size=0},we.prototype.delete=function(e){var t=this.__data__,n=Pe(t,e);return!(n<0||(n==t.length-1?t.pop():re.call(t,n,1),--this.size,0))},we.prototype.get=function(e){var t=this.__data__,n=Pe(t,e);return n<0?void 0:t[n][1]},we.prototype.has=function(e){return Pe(this.__data__,e)>-1},we.prototype.set=function(e,t){var n=this.__data__,o=Pe(n,e);return o<0?(++this.size,n.push([e,t])):n[o][1]=t,this},Oe.prototype.clear=function(){this.size=0,this.__data__={hash:new Ne,map:new(ce||we),string:new Ne}},Oe.prototype.delete=function(e){var t=Me(this,e).delete(e);return this.size-=t?1:0,t},Oe.prototype.get=function(e){return Me(this,e).get(e)},Oe.prototype.has=function(e){return Me(this,e).has(e)},Oe.prototype.set=function(e,t){var n=Me(this,e),o=n.size;return n.set(e,t),this.size+=n.size==o?0:1,this},xe.prototype.add=xe.prototype.push=function(e){return this.__data__.set(e,o),this},xe.prototype.has=function(e){return this.__data__.has(e)},Ie.prototype.clear=function(){this.__data__=new we,this.size=0},Ie.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Ie.prototype.get=function(e){return this.__data__.get(e)},Ie.prototype.has=function(e){return this.__data__.has(e)},Ie.prototype.set=function(e,t){var n=this.__data__;if(n instanceof we){var o=n.__data__;if(!ce||o.length<199)return o.push([e,t]),this.size=++n.size,this;n=this.__data__=new Oe(o)}return n.set(e,t),this.size=n.size,this};var Ve=ae?function(e){return null==e?[]:(e=Object(e),function(t,n){for(var o=-1,i=null==t?0:t.length,r=0,s=[];++o<i;){var a=t[o];l=a,ie.call(e,l)&&(s[r++]=a)}var l;return s}(ae(e)))}:function(){return[]},je=Te;function Fe(e,t){return!!(t=null==t?s:t)&&("number"==typeof e||T.test(e))&&e>-1&&e%1==0&&e<t}function Le(e){if(null!=e){try{return J.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Ue(e,t){return e===t||e!=e&&t!=t}(de&&je(new de(new ArrayBuffer(1)))!=I||ce&&je(new ce)!=f||pe&&je(pe.resolve())!=b||he&&je(new he)!=C||ge&&je(new ge)!=O)&&(je=function(e){var t=Te(e),n=t==v?e.constructor:void 0,o=n?Le(n):"";if(o)switch(o){case me:return I;case ye:return f;case ve:return b;case be:return C;case Se:return O}return t});var We=Ee(function(){return arguments}())?Ee:function(e){return Ge(e)&&K.call(e,"callee")&&!ie.call(e,"callee")},Be=Array.isArray,ze=le||function(){return!1};function He(e){if(!Xe(e))return!1;var t=Te(e);return t==h||t==g||t==u||t==S}function qe(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=s}function Xe(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Ge(e){return null!=e&&"object"==typeof e}var $e=L?function(e){return function(t){return e(t)}}(L):function(e){return Ge(e)&&qe(e.length)&&!!E[Te(e)]};function Ye(e){return null!=(t=e)&&qe(t.length)&&!He(t)?function(e,t){var n=Be(e),o=!n&&We(e),i=!n&&!o&&ze(e),r=!n&&!o&&!i&&$e(e),s=n||o||i||r,a=s?function(e,t){for(var n=-1,o=Array(e);++n<e;)o[n]=t(n);return o}(e.length,String):[],l=a.length;for(var u in e)!t&&!K.call(e,u)||s&&("length"==u||i&&("offset"==u||"parent"==u)||r&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||Fe(u,l))||a.push(u);return a}(e):function(e){if(n=(t=e)&&t.constructor,t!==("function"==typeof n&&n.prototype||$))return ue(e);var t,n,o=[];for(var i in Object(e))K.call(e,i)&&"constructor"!=i&&o.push(i);return o}(e);var t}e.exports=function(e,t){return ke(e,t)}},8262:(e,t,n)=>{"use strict";var o=n(3586);function i(){}function r(){}r.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,r,s){if(s!==o){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:r,resetWarningCache:i};return n.PropTypes=n,n}},3980:(e,t,n)=>{e.exports=n(8262)()},3586:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},1997:(e,t,n)=>{"use strict";function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraggableCore",{enumerable:!0,get:function(){return c.default}}),t.default=void 0;var i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var a=r?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(i,s,a):i[s]=e[s]}return i.default=e,n&&n.set(e,i),i}(n(7363)),r=g(n(3980)),s=g(n(1533)),a=g(n(6277)),l=n(4688),u=n(3585),d=n(136),c=g(n(3816)),p=g(n(1177)),h=["axis","bounds","children","defaultPosition","defaultClassName","defaultClassNameDragging","defaultClassNameDragged","position","positionOffset","scale"];function g(e){return e&&e.__esModule?e:{default:e}}function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function m(){return m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},m.apply(this,arguments)}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){w(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function S(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _(e,t){return _=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},_(e,t)}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N(e){return N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},N(e)}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_(e,t)}(y,e);var t,n,r,d,g,f=(d=y,g=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=N(d);if(g){var n=N(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return C(e)}(this,e)});function y(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,y),w(C(t=f.call(this,e)),"onDragStart",(function(e,n){if((0,p.default)("Draggable: onDragStart: %j",n),!1===t.props.onStart(e,(0,u.createDraggableData)(C(t),n)))return!1;t.setState({dragging:!0,dragged:!0})})),w(C(t),"onDrag",(function(e,n){if(!t.state.dragging)return!1;(0,p.default)("Draggable: onDrag: %j",n);var o,i,r=(0,u.createDraggableData)(C(t),n),s={x:r.x,y:r.y};if(t.props.bounds){var a=s.x,l=s.y;s.x+=t.state.slackX,s.y+=t.state.slackY;var d=(o=(0,u.getBoundPosition)(C(t),s.x,s.y),i=2,function(e){if(Array.isArray(e))return e}(o)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,i,r=[],s=!0,a=!1;try{for(n=n.call(e);!(s=(o=n.next()).done)&&(r.push(o.value),!t||r.length!==t);s=!0);}catch(e){a=!0,i=e}finally{try{s||null==n.return||n.return()}finally{if(a)throw i}}return r}}(o,i)||function(e,t){if(e){if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}(o,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=d[0],h=d[1];s.x=c,s.y=h,s.slackX=t.state.slackX+(a-s.x),s.slackY=t.state.slackY+(l-s.y),r.x=s.x,r.y=s.y,r.deltaX=s.x-t.state.x,r.deltaY=s.y-t.state.y}if(!1===t.props.onDrag(e,r))return!1;t.setState(s)})),w(C(t),"onDragStop",(function(e,n){if(!t.state.dragging)return!1;if(!1===t.props.onStop(e,(0,u.createDraggableData)(C(t),n)))return!1;(0,p.default)("Draggable: onDragStop: %j",n);var o={dragging:!1,slackX:0,slackY:0};if(Boolean(t.props.position)){var i=t.props.position,r=i.x,s=i.y;o.x=r,o.y=s}t.setState(o)})),t.state={dragging:!1,dragged:!1,x:e.position?e.position.x:e.defaultPosition.x,y:e.position?e.position.y:e.defaultPosition.y,prevPropsPosition:v({},e.position),slackX:0,slackY:0,isElementSVG:!1},!e.position||e.onDrag||e.onStop||console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element."),t}return t=y,r=[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.position,o=t.prevPropsPosition;return!n||o&&n.x===o.x&&n.y===o.y?null:((0,p.default)("Draggable: getDerivedStateFromProps %j",{position:n,prevPropsPosition:o}),{x:n.x,y:n.y,prevPropsPosition:v({},n)})}}],(n=[{key:"componentDidMount",value:function(){void 0!==window.SVGElement&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}},{key:"componentWillUnmount",value:function(){this.setState({dragging:!1})}},{key:"findDOMNode",value:function(){var e,t,n;return null!==(e=null===(t=this.props)||void 0===t||null===(n=t.nodeRef)||void 0===n?void 0:n.current)&&void 0!==e?e:s.default.findDOMNode(this)}},{key:"render",value:function(){var e,t=this.props,n=(t.axis,t.bounds,t.children),o=t.defaultPosition,r=t.defaultClassName,s=t.defaultClassNameDragging,d=t.defaultClassNameDragged,p=t.position,g=t.positionOffset,f=(t.scale,function(e,t){if(null==e)return{};var n,o,i=function(e,t){if(null==e)return{};var n,o,i={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(t,h)),y={},b=null,S=!Boolean(p)||this.state.dragging,_=p||o,C={x:(0,u.canDragX)(this)&&S?this.state.x:_.x,y:(0,u.canDragY)(this)&&S?this.state.y:_.y};this.state.isElementSVG?b=(0,l.createSVGTransform)(C,g):y=(0,l.createCSSTransform)(C,g);var N=(0,a.default)(n.props.className||"",r,(w(e={},s,this.state.dragging),w(e,d,this.state.dragged),e));return i.createElement(c.default,m({},f,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),i.cloneElement(i.Children.only(n),{className:N,style:v(v({},n.props.style),y),transform:b}))}}])&&S(t.prototype,n),r&&S(t,r),Object.defineProperty(t,"prototype",{writable:!1}),y}(i.Component);t.default=O,w(O,"displayName","Draggable"),w(O,"propTypes",v(v({},c.default.propTypes),{},{axis:r.default.oneOf(["both","x","y","none"]),bounds:r.default.oneOfType([r.default.shape({left:r.default.number,right:r.default.number,top:r.default.number,bottom:r.default.number}),r.default.string,r.default.oneOf([!1])]),defaultClassName:r.default.string,defaultClassNameDragging:r.default.string,defaultClassNameDragged:r.default.string,defaultPosition:r.default.shape({x:r.default.number,y:r.default.number}),positionOffset:r.default.shape({x:r.default.oneOfType([r.default.number,r.default.string]),y:r.default.oneOfType([r.default.number,r.default.string])}),position:r.default.shape({x:r.default.number,y:r.default.number}),className:d.dontSetMe,style:d.dontSetMe,transform:d.dontSetMe})),w(O,"defaultProps",v(v({},c.default.defaultProps),{},{axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1}))},3816:(e,t,n)=>{"use strict";function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var a=r?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(i,s,a):i[s]=e[s]}return i.default=e,n&&n.set(e,i),i}(n(7363)),r=c(n(3980)),s=c(n(1533)),a=n(4688),l=n(3585),u=n(136),d=c(n(1177));function c(e){return e&&e.__esModule?e:{default:e}}function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,i,r=[],s=!0,a=!1;try{for(n=n.call(e);!(s=(o=n.next()).done)&&(r.push(o.value),!t||r.length!==t);s=!0);}catch(e){a=!0,i=e}finally{try{s||null==n.return||n.return()}finally{if(a)throw i}}return r}}(e,t)||function(e,t){if(e){if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function f(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function m(e,t){return m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},m(e,t)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var S={start:"touchstart",move:"touchmove",stop:"touchend"},_={start:"mousedown",move:"mousemove",stop:"mouseup"},C=_,N=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}(p,e);var t,n,r,u,c=(r=p,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=v(r);if(u){var n=v(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return y(e)}(this,e)});function p(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return b(y(e=c.call.apply(c,[this].concat(n))),"state",{dragging:!1,lastX:NaN,lastY:NaN,touchIdentifier:null}),b(y(e),"mounted",!1),b(y(e),"handleDragStart",(function(t){if(e.props.onMouseDown(t),!e.props.allowAnyClick&&"number"==typeof t.button&&0!==t.button)return!1;var n=e.findDOMNode();if(!n||!n.ownerDocument||!n.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");var o=n.ownerDocument;if(!(e.props.disabled||!(t.target instanceof o.defaultView.Node)||e.props.handle&&!(0,a.matchesSelectorAndParentsTo)(t.target,e.props.handle,n)||e.props.cancel&&(0,a.matchesSelectorAndParentsTo)(t.target,e.props.cancel,n))){"touchstart"===t.type&&t.preventDefault();var i=(0,a.getTouchIdentifier)(t);e.setState({touchIdentifier:i});var r=(0,l.getControlPosition)(t,i,y(e));if(null!=r){var s=r.x,u=r.y,c=(0,l.createCoreData)(y(e),s,u);(0,d.default)("DraggableCore: handleDragStart: %j",c),(0,d.default)("calling",e.props.onStart),!1!==e.props.onStart(t,c)&&!1!==e.mounted&&(e.props.enableUserSelectHack&&(0,a.addUserSelectStyles)(o),e.setState({dragging:!0,lastX:s,lastY:u}),(0,a.addEvent)(o,C.move,e.handleDrag),(0,a.addEvent)(o,C.stop,e.handleDragStop))}}})),b(y(e),"handleDrag",(function(t){var n=(0,l.getControlPosition)(t,e.state.touchIdentifier,y(e));if(null!=n){var o=n.x,i=n.y;if(Array.isArray(e.props.grid)){var r=o-e.state.lastX,s=i-e.state.lastY,a=h((0,l.snapToGrid)(e.props.grid,r,s),2);if(r=a[0],s=a[1],!r&&!s)return;o=e.state.lastX+r,i=e.state.lastY+s}var u=(0,l.createCoreData)(y(e),o,i);if((0,d.default)("DraggableCore: handleDrag: %j",u),!1!==e.props.onDrag(t,u)&&!1!==e.mounted)e.setState({lastX:o,lastY:i});else try{e.handleDragStop(new MouseEvent("mouseup"))}catch(t){var c=document.createEvent("MouseEvents");c.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),e.handleDragStop(c)}}})),b(y(e),"handleDragStop",(function(t){if(e.state.dragging){var n=(0,l.getControlPosition)(t,e.state.touchIdentifier,y(e));if(null!=n){var o=n.x,i=n.y;if(Array.isArray(e.props.grid)){var r=o-e.state.lastX||0,s=i-e.state.lastY||0,u=h((0,l.snapToGrid)(e.props.grid,r,s),2);r=u[0],s=u[1],o=e.state.lastX+r,i=e.state.lastY+s}var c=(0,l.createCoreData)(y(e),o,i);if(!1===e.props.onStop(t,c)||!1===e.mounted)return!1;var p=e.findDOMNode();p&&e.props.enableUserSelectHack&&(0,a.removeUserSelectStyles)(p.ownerDocument),(0,d.default)("DraggableCore: handleDragStop: %j",c),e.setState({dragging:!1,lastX:NaN,lastY:NaN}),p&&((0,d.default)("DraggableCore: Removing handlers"),(0,a.removeEvent)(p.ownerDocument,C.move,e.handleDrag),(0,a.removeEvent)(p.ownerDocument,C.stop,e.handleDragStop))}}})),b(y(e),"onMouseDown",(function(t){return C=_,e.handleDragStart(t)})),b(y(e),"onMouseUp",(function(t){return C=_,e.handleDragStop(t)})),b(y(e),"onTouchStart",(function(t){return C=S,e.handleDragStart(t)})),b(y(e),"onTouchEnd",(function(t){return C=S,e.handleDragStop(t)})),e}return t=p,(n=[{key:"componentDidMount",value:function(){this.mounted=!0;var e=this.findDOMNode();e&&(0,a.addEvent)(e,S.start,this.onTouchStart,{passive:!1})}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var e=this.findDOMNode();if(e){var t=e.ownerDocument;(0,a.removeEvent)(t,_.move,this.handleDrag),(0,a.removeEvent)(t,S.move,this.handleDrag),(0,a.removeEvent)(t,_.stop,this.handleDragStop),(0,a.removeEvent)(t,S.stop,this.handleDragStop),(0,a.removeEvent)(e,S.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,a.removeUserSelectStyles)(t)}}},{key:"findDOMNode",value:function(){var e,t,n;return null!==(e=this.props)&&void 0!==e&&e.nodeRef?null===(t=this.props)||void 0===t||null===(n=t.nodeRef)||void 0===n?void 0:n.current:s.default.findDOMNode(this)}},{key:"render",value:function(){return i.cloneElement(i.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}])&&f(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),p}(i.Component);t.default=N,b(N,"displayName","DraggableCore"),b(N,"propTypes",{allowAnyClick:r.default.bool,disabled:r.default.bool,enableUserSelectHack:r.default.bool,offsetParent:function(e,t){if(e[t]&&1!==e[t].nodeType)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:r.default.arrayOf(r.default.number),handle:r.default.string,cancel:r.default.string,nodeRef:r.default.object,onStart:r.default.func,onDrag:r.default.func,onStop:r.default.func,onMouseDown:r.default.func,scale:r.default.number,className:u.dontSetMe,style:u.dontSetMe,transform:u.dontSetMe}),b(N,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1})},1327:(e,t,n)=>{"use strict";var o=n(1997),i=o.default,r=o.DraggableCore;e.exports=i,e.exports.default=i,e.exports.DraggableCore=r},4688:(e,t,n)=>{"use strict";function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.addClassName=h,t.addEvent=function(e,t,n,o){if(e){var i=l({capture:!0},o);e.addEventListener?e.addEventListener(t,n,i):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n}},t.addUserSelectStyles=function(e){if(e){var t=e.getElementById("react-draggable-style-el");t||((t=e.createElement("style")).type="text/css",t.id="react-draggable-style-el",t.innerHTML=".react-draggable-transparent-selection *::-moz-selection {all: inherit;}\n",t.innerHTML+=".react-draggable-transparent-selection *::selection {all: inherit;}\n",e.getElementsByTagName("head")[0].appendChild(t)),e.body&&h(e.body,"react-draggable-transparent-selection")}},t.createCSSTransform=function(e,t){var n=p(e,t,"px");return u({},(0,r.browserPrefixToKey)("transform",r.default),n)},t.createSVGTransform=function(e,t){return p(e,t,"")},t.getTouch=function(e,t){return e.targetTouches&&(0,i.findInArray)(e.targetTouches,(function(e){return t===e.identifier}))||e.changedTouches&&(0,i.findInArray)(e.changedTouches,(function(e){return t===e.identifier}))},t.getTouchIdentifier=function(e){return e.targetTouches&&e.targetTouches[0]?e.targetTouches[0].identifier:e.changedTouches&&e.changedTouches[0]?e.changedTouches[0].identifier:void 0},t.getTranslation=p,t.innerHeight=function(e){var t=e.clientHeight,n=e.ownerDocument.defaultView.getComputedStyle(e);return(t-=(0,i.int)(n.paddingTop))-(0,i.int)(n.paddingBottom)},t.innerWidth=function(e){var t=e.clientWidth,n=e.ownerDocument.defaultView.getComputedStyle(e);return(t-=(0,i.int)(n.paddingLeft))-(0,i.int)(n.paddingRight)},t.matchesSelector=c,t.matchesSelectorAndParentsTo=function(e,t,n){var o=e;do{if(c(o,t))return!0;if(o===n)return!1;o=o.parentNode}while(o);return!1},t.offsetXYFromParent=function(e,t,n){var o=t===t.ownerDocument.body?{left:0,top:0}:t.getBoundingClientRect();return{x:(e.clientX+t.scrollLeft-o.left)/n,y:(e.clientY+t.scrollTop-o.top)/n}},t.outerHeight=function(e){var t=e.clientHeight,n=e.ownerDocument.defaultView.getComputedStyle(e);return(t+=(0,i.int)(n.borderTopWidth))+(0,i.int)(n.borderBottomWidth)},t.outerWidth=function(e){var t=e.clientWidth,n=e.ownerDocument.defaultView.getComputedStyle(e);return(t+=(0,i.int)(n.borderLeftWidth))+(0,i.int)(n.borderRightWidth)},t.removeClassName=g,t.removeEvent=function(e,t,n,o){if(e){var i=l({capture:!0},o);e.removeEventListener?e.removeEventListener(t,n,i):e.detachEvent?e.detachEvent("on"+t,n):e["on"+t]=null}},t.removeUserSelectStyles=function(e){if(e)try{if(e.body&&g(e.body,"react-draggable-transparent-selection"),e.selection)e.selection.empty();else{var t=(e.defaultView||window).getSelection();t&&"Caret"!==t.type&&t.removeAllRanges()}}catch(e){}};var i=n(136),r=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=r?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(i,a,l):i[a]=e[a]}return i.default=e,n&&n.set(e,i),i}(n(2185));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d="";function c(e,t){return d||(d=(0,i.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],(function(t){return(0,i.isFunction)(e[t])}))),!!(0,i.isFunction)(e[d])&&e[d](t)}function p(e,t,n){var o=e.x,i=e.y,r="translate(".concat(o).concat(n,",").concat(i).concat(n,")");if(t){var s="".concat("string"==typeof t.x?t.x:t.x+n),a="".concat("string"==typeof t.y?t.y:t.y+n);r="translate(".concat(s,", ").concat(a,")")+r}return r}function h(e,t){e.classList?e.classList.add(t):e.className.match(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)")))||(e.className+=" ".concat(t))}function g(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)"),"g"),"")}},2185:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.browserPrefixToKey=i,t.browserPrefixToStyle=function(e,t){return t?"-".concat(t.toLowerCase(),"-").concat(e):e},t.default=void 0,t.getPrefix=o;var n=["Moz","Webkit","O","ms"];function o(){var e,t,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"transform";if("undefined"==typeof window)return"";var r=null===(e=window.document)||void 0===e||null===(t=e.documentElement)||void 0===t?void 0:t.style;if(!r)return"";if(o in r)return"";for(var s=0;s<n.length;s++)if(i(o,n[s])in r)return n[s];return""}function i(e,t){return t?"".concat(t).concat(function(e){for(var t="",n=!0,o=0;o<e.length;o++)n?(t+=e[o].toUpperCase(),n=!1):"-"===e[o]?n=!0:t+=e[o];return t}(e)):e}var r=o();t.default=r},1177:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){}},3585:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.canDragX=function(e){return"both"===e.props.axis||"x"===e.props.axis},t.canDragY=function(e){return"both"===e.props.axis||"y"===e.props.axis},t.createCoreData=function(e,t,n){var i=e.state,s=!(0,o.isNum)(i.lastX),a=r(e);return s?{node:a,deltaX:0,deltaY:0,lastX:t,lastY:n,x:t,y:n}:{node:a,deltaX:t-i.lastX,deltaY:n-i.lastY,lastX:i.lastX,lastY:i.lastY,x:t,y:n}},t.createDraggableData=function(e,t){var n=e.props.scale;return{node:t.node,x:e.state.x+t.deltaX/n,y:e.state.y+t.deltaY/n,deltaX:t.deltaX/n,deltaY:t.deltaY/n,lastX:e.state.x,lastY:e.state.y}},t.getBoundPosition=function(e,t,n){if(!e.props.bounds)return[t,n];var s=e.props.bounds;s="string"==typeof s?s:function(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}(s);var a=r(e);if("string"==typeof s){var l,u=a.ownerDocument,d=u.defaultView;if(!((l="parent"===s?a.parentNode:u.querySelector(s))instanceof d.HTMLElement))throw new Error('Bounds selector "'+s+'" could not find an element.');var c=l,p=d.getComputedStyle(a),h=d.getComputedStyle(c);s={left:-a.offsetLeft+(0,o.int)(h.paddingLeft)+(0,o.int)(p.marginLeft),top:-a.offsetTop+(0,o.int)(h.paddingTop)+(0,o.int)(p.marginTop),right:(0,i.innerWidth)(c)-(0,i.outerWidth)(a)-a.offsetLeft+(0,o.int)(h.paddingRight)-(0,o.int)(p.marginRight),bottom:(0,i.innerHeight)(c)-(0,i.outerHeight)(a)-a.offsetTop+(0,o.int)(h.paddingBottom)-(0,o.int)(p.marginBottom)}}return(0,o.isNum)(s.right)&&(t=Math.min(t,s.right)),(0,o.isNum)(s.bottom)&&(n=Math.min(n,s.bottom)),(0,o.isNum)(s.left)&&(t=Math.max(t,s.left)),(0,o.isNum)(s.top)&&(n=Math.max(n,s.top)),[t,n]},t.getControlPosition=function(e,t,n){var o="number"==typeof t?(0,i.getTouch)(e,t):null;if("number"==typeof t&&!o)return null;var s=r(n),a=n.props.offsetParent||s.offsetParent||s.ownerDocument.body;return(0,i.offsetXYFromParent)(o||e,a,n.props.scale)},t.snapToGrid=function(e,t,n){return[Math.round(t/e[0])*e[0],Math.round(n/e[1])*e[1]]};var o=n(136),i=n(4688);function r(e){var t=e.findDOMNode();if(!t)throw new Error("<DraggableCore>: Unmounted during event!");return t}},136:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dontSetMe=function(e,t,n){if(e[t])return new Error("Invalid prop ".concat(t," passed to ").concat(n," - do not set this, set it on the child."))},t.findInArray=function(e,t){for(var n=0,o=e.length;n<o;n++)if(t.apply(t,[e[n],n,e]))return e[n]},t.int=function(e){return parseInt(e,10)},t.isFunction=function(e){return"function"==typeof e||"[object Function]"===Object.prototype.toString.call(e)},t.isNum=function(e){return"number"==typeof e&&!isNaN(e)}},2681:(e,t,n)=>{"use strict";n.r(t),n.d(t,{RouterHandler:()=>s});var o=n(3948),i=n.n(o),r=function(){return r=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},s=function(){function e(){this._routers={},this._navigationQueue=[]}return e.prototype.navigate=function(e,t){var n=this;setTimeout((function(){var o=Object.keys(n._routers);if(1===o.length&&(e=o[0]),n._routers[e])for(var i=0,r=n._routers[e];i<r.length;i++)r[i].navigate(t);else n._navigationQueue.push({name:e,args:t})}),1)},e.prototype.registerRouter=function(e,t){e=e||"Main",this._routers[e]||(this._routers[e]=[]),this._routers[e].push(t);for(var n=!1,o=0;o<this._navigationQueue.length;){var i=this._navigationQueue[o];i.name===e?(t.navigate(i.args),n=!0,this._navigationQueue.splice(o,1)):o++}n||t.reset()},e.prototype.deregisterRouter=function(e,t){if(e=e||"Main",this._routers[e]){var n=this._routers[e].indexOf(t);-1!==n&&(this._routers[e].splice(n,1),0===this._routers[e].length&&delete this._routers[e])}},e.prototype.getPagesForRouter=function(e){var t=this,n=i().instance.graphModel.routerIndex.routers;if(void 0===n||0===n.length)return[];var o=void 0===e?[n[0]]:n.filter((function(t){return t.name===e})),r=new Set;return o.forEach((function(e){var t=e.pages;void 0!==t&&void 0!==t.routes&&t.routes.forEach((function(e){r.add(e)}))})),Array.from(r).map((function(e){return t.getPageInfoForComponent(String(e))})).filter((function(e){return!!e}))},e.prototype.getPageInfoForComponent=function(e){return i().instance.graphModel.routerIndex.pages.find((function(t){return t.component===e}))},e.prototype.onNavigated=function(e,t){window.Noodl.Events.emit("NoodlApp_Navigated",r({routerName:e},t))},e.instance=new e,e}()},5310:(e,t,n)=>{var o;!function(){function i(e,t,n){return e.call.apply(e.bind,arguments)}function r(e,t,n){if(!e)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,o),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function s(e,t,n){return(s=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?i:r).apply(null,arguments)}var a=Date.now||function(){return+new Date};function l(e,t){this.a=e,this.o=t||e,this.c=this.o.document}var u=!!window.FontFace;function d(e,t,n,o){if(t=e.c.createElement(t),n)for(var i in n)n.hasOwnProperty(i)&&("style"==i?t.style.cssText=n[i]:t.setAttribute(i,n[i]));return o&&t.appendChild(e.c.createTextNode(o)),t}function c(e,t,n){(e=e.c.getElementsByTagName(t)[0])||(e=document.documentElement),e.insertBefore(n,e.lastChild)}function p(e){e.parentNode&&e.parentNode.removeChild(e)}function h(e,t,n){t=t||[],n=n||[];for(var o=e.className.split(/\s+/),i=0;i<t.length;i+=1){for(var r=!1,s=0;s<o.length;s+=1)if(t[i]===o[s]){r=!0;break}r||o.push(t[i])}for(t=[],i=0;i<o.length;i+=1){for(r=!1,s=0;s<n.length;s+=1)if(o[i]===n[s]){r=!0;break}r||t.push(o[i])}e.className=t.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function g(e,t){for(var n=e.className.split(/\s+/),o=0,i=n.length;o<i;o++)if(n[o]==t)return!0;return!1}function f(e,t,n){function o(){a&&i&&r&&(a(s),a=null)}t=d(e,"link",{rel:"stylesheet",href:t,media:"all"});var i=!1,r=!0,s=null,a=n||null;u?(t.onload=function(){i=!0,o()},t.onerror=function(){i=!0,s=Error("Stylesheet failed to load"),o()}):setTimeout((function(){i=!0,o()}),0),c(e,"head",t)}function m(e,t,n,o){var i=e.c.getElementsByTagName("head")[0];if(i){var r=d(e,"script",{src:t}),s=!1;return r.onload=r.onreadystatechange=function(){s||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(s=!0,n&&n(null),r.onload=r.onreadystatechange=null,"HEAD"==r.parentNode.tagName&&i.removeChild(r))},i.appendChild(r),setTimeout((function(){s||(s=!0,n&&n(Error("Script load timeout")))}),o||5e3),r}return null}function y(){this.a=0,this.c=null}function v(e){return e.a++,function(){e.a--,S(e)}}function b(e,t){e.c=t,S(e)}function S(e){0==e.a&&e.c&&(e.c(),e.c=null)}function _(e){this.a=e||"-"}function C(e,t){this.c=e,this.f=4,this.a="n";var n=(t||"n4").match(/^([nio])([1-9])$/i);n&&(this.a=n[1],this.f=parseInt(n[2],10))}function N(e){var t=[];e=e.split(/,\s*/);for(var n=0;n<e.length;n++){var o=e[n].replace(/['"]/g,"");-1!=o.indexOf(" ")||/^\d/.test(o)?t.push("'"+o+"'"):t.push(o)}return t.join(",")}function w(e){return e.a+e.f}function O(e){var t="normal";return"o"===e.a?t="oblique":"i"===e.a&&(t="italic"),t}function x(e){var t=4,n="n",o=null;return e&&((o=e.match(/(normal|oblique|italic)/i))&&o[1]&&(n=o[1].substr(0,1).toLowerCase()),(o=e.match(/([1-9]00|normal|bold)/i))&&o[1]&&(/bold/i.test(o[1])?t=7:/[1-9]00/.test(o[1])&&(t=parseInt(o[1].substr(0,1),10)))),n+t}function I(e,t){this.c=e,this.f=e.o.document.documentElement,this.h=t,this.a=new _("-"),this.j=!1!==t.events,this.g=!1!==t.classes}function P(e){if(e.g){var t=g(e.f,e.a.c("wf","active")),n=[],o=[e.a.c("wf","loading")];t||n.push(e.a.c("wf","inactive")),h(e.f,n,o)}T(e,"inactive")}function T(e,t,n){e.j&&e.h[t]&&(n?e.h[t](n.c,w(n)):e.h[t]())}function E(){this.c={}}function k(e,t){this.c=e,this.f=t,this.a=d(this.c,"span",{"aria-hidden":"true"},this.f)}function D(e){c(e.c,"body",e.a)}function R(e){return"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+N(e.c)+";font-style:"+O(e)+";font-weight:"+e.f+"00;"}function M(e,t,n,o,i,r){this.g=e,this.j=t,this.a=o,this.c=n,this.f=i||3e3,this.h=r||void 0}function A(e,t,n,o,i,r,s){this.v=e,this.B=t,this.c=n,this.a=o,this.s=s||"BESbswy",this.f={},this.w=i||3e3,this.u=r||null,this.m=this.j=this.h=this.g=null,this.g=new k(this.c,this.s),this.h=new k(this.c,this.s),this.j=new k(this.c,this.s),this.m=new k(this.c,this.s),e=R(e=new C(this.a.c+",serif",w(this.a))),this.g.a.style.cssText=e,e=R(e=new C(this.a.c+",sans-serif",w(this.a))),this.h.a.style.cssText=e,e=R(e=new C("serif",w(this.a))),this.j.a.style.cssText=e,e=R(e=new C("sans-serif",w(this.a))),this.m.a.style.cssText=e,D(this.g),D(this.h),D(this.j),D(this.m)}_.prototype.c=function(e){for(var t=[],n=0;n<arguments.length;n++)t.push(arguments[n].replace(/[\W_]+/g,"").toLowerCase());return t.join(this.a)},M.prototype.start=function(){var e=this.c.o.document,t=this,n=a(),o=new Promise((function(o,i){!function r(){a()-n>=t.f?i():e.fonts.load(function(e){return O(e)+" "+e.f+"00 300px "+N(e.c)}(t.a),t.h).then((function(e){1<=e.length?o():setTimeout(r,25)}),(function(){i()}))}()})),i=null,r=new Promise((function(e,n){i=setTimeout(n,t.f)}));Promise.race([r,o]).then((function(){i&&(clearTimeout(i),i=null),t.g(t.a)}),(function(){t.j(t.a)}))};var V={D:"serif",C:"sans-serif"},j=null;function F(){if(null===j){var e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);j=!!e&&(536>parseInt(e[1],10)||536===parseInt(e[1],10)&&11>=parseInt(e[2],10))}return j}function L(e,t,n){for(var o in V)if(V.hasOwnProperty(o)&&t===e.f[V[o]]&&n===e.f[V[o]])return!0;return!1}function U(e){var t,n=e.g.a.offsetWidth,o=e.h.a.offsetWidth;(t=n===e.f.serif&&o===e.f["sans-serif"])||(t=F()&&L(e,n,o)),t?a()-e.A>=e.w?F()&&L(e,n,o)&&(null===e.u||e.u.hasOwnProperty(e.a.c))?W(e,e.v):W(e,e.B):function(e){setTimeout(s((function(){U(this)}),e),50)}(e):W(e,e.v)}function W(e,t){setTimeout(s((function(){p(this.g.a),p(this.h.a),p(this.j.a),p(this.m.a),t(this.a)}),e),0)}function B(e,t,n){this.c=e,this.a=t,this.f=0,this.m=this.j=!1,this.s=n}A.prototype.start=function(){this.f.serif=this.j.a.offsetWidth,this.f["sans-serif"]=this.m.a.offsetWidth,this.A=a(),U(this)};var z=null;function H(e){0==--e.f&&e.j&&(e.m?((e=e.a).g&&h(e.f,[e.a.c("wf","active")],[e.a.c("wf","loading"),e.a.c("wf","inactive")]),T(e,"active")):P(e.a))}function q(e){this.j=e,this.a=new E,this.h=0,this.f=this.g=!0}function X(e,t,n,o,i){var r=0==--e.h;(e.f||e.g)&&setTimeout((function(){var e=i||null,a=o||{};if(0===n.length&&r)P(t.a);else{t.f+=n.length,r&&(t.j=r);var l,u=[];for(l=0;l<n.length;l++){var d=n[l],c=a[d.c],p=t.a,g=d;if(p.g&&h(p.f,[p.a.c("wf",g.c,w(g).toString(),"loading")]),T(p,"fontloading",g),p=null,null===z)if(window.FontFace){g=/Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent);var f=/OS X.*Version\/10\..*Safari/.exec(window.navigator.userAgent)&&/Apple/.exec(window.navigator.vendor);z=g?42<parseInt(g[1],10):!f}else z=!1;p=z?new M(s(t.g,t),s(t.h,t),t.c,d,t.s,c):new A(s(t.g,t),s(t.h,t),t.c,d,t.s,e,c),u.push(p)}for(l=0;l<u.length;l++)u[l].start()}}),0)}function G(e,t){this.c=e,this.a=t}function $(e,t){this.c=e,this.a=t}function Y(e,t){this.c=e||J,this.a=[],this.f=[],this.g=t||""}B.prototype.g=function(e){var t=this.a;t.g&&h(t.f,[t.a.c("wf",e.c,w(e).toString(),"active")],[t.a.c("wf",e.c,w(e).toString(),"loading"),t.a.c("wf",e.c,w(e).toString(),"inactive")]),T(t,"fontactive",e),this.m=!0,H(this)},B.prototype.h=function(e){var t=this.a;if(t.g){var n=g(t.f,t.a.c("wf",e.c,w(e).toString(),"active")),o=[],i=[t.a.c("wf",e.c,w(e).toString(),"loading")];n||o.push(t.a.c("wf",e.c,w(e).toString(),"inactive")),h(t.f,o,i)}T(t,"fontinactive",e),H(this)},q.prototype.load=function(e){this.c=new l(this.j,e.context||this.j),this.g=!1!==e.events,this.f=!1!==e.classes,function(e,t,n){var o=[],i=n.timeout;!function(e){e.g&&h(e.f,[e.a.c("wf","loading")]),T(e,"loading")}(t),o=function(e,t,n){var o,i=[];for(o in t)if(t.hasOwnProperty(o)){var r=e.c[o];r&&i.push(r(t[o],n))}return i}(e.a,n,e.c);var r=new B(e.c,t,i);for(e.h=o.length,t=0,n=o.length;t<n;t++)o[t].load((function(t,n,o){X(e,r,t,n,o)}))}(this,new I(this.c,e),e)},G.prototype.load=function(e){function t(){if(r["__mti_fntLst"+o]){var n,i=r["__mti_fntLst"+o](),s=[];if(i)for(var a=0;a<i.length;a++){var l=i[a].fontfamily;null!=i[a].fontStyle&&null!=i[a].fontWeight?(n=i[a].fontStyle+i[a].fontWeight,s.push(new C(l,n))):s.push(new C(l))}e(s)}else setTimeout((function(){t()}),50)}var n=this,o=n.a.projectId,i=n.a.version;if(o){var r=n.c.o;m(this.c,(n.a.api||"https://fast.fonts.net/jsapi")+"/"+o+".js"+(i?"?v="+i:""),(function(i){i?e([]):(r["__MonotypeConfiguration__"+o]=function(){return n.a},t())})).id="__MonotypeAPIScript__"+o}else e([])},$.prototype.load=function(e){var t,n,o=this.a.urls||[],i=this.a.families||[],r=this.a.testStrings||{},s=new y;for(t=0,n=o.length;t<n;t++)f(this.c,o[t],v(s));var a=[];for(t=0,n=i.length;t<n;t++)if((o=i[t].split(":"))[1])for(var l=o[1].split(","),u=0;u<l.length;u+=1)a.push(new C(o[0],l[u]));else a.push(new C(o[0]));b(s,(function(){e(a,r)}))};var J="https://fonts.googleapis.com/css";function K(e){this.f=e,this.a=[],this.c={}}var Q={latin:"BESbswy","latin-ext":"",cyrillic:"",greek:"",khmer:"",Hanuman:""},Z={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},ee={i:"i",italic:"i",n:"n",normal:"n"},te=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;function ne(e,t){this.c=e,this.a=t}var oe={Arimo:!0,Cousine:!0,Tinos:!0};function ie(e,t){this.c=e,this.a=t}function re(e,t){this.c=e,this.f=t,this.a=[]}ne.prototype.load=function(e){var t=new y,n=this.c,o=new Y(this.a.api,this.a.text),i=this.a.families;!function(e,t){for(var n=t.length,o=0;o<n;o++){var i=t[o].split(":");3==i.length&&e.f.push(i.pop());var r="";2==i.length&&""!=i[1]&&(r=":"),e.a.push(i.join(r))}}(o,i);var r=new K(i);!function(e){for(var t=e.f.length,n=0;n<t;n++){var o=e.f[n].split(":"),i=o[0].replace(/\+/g," "),r=["n4"];if(2<=o.length){var s;if(s=[],a=o[1])for(var a,l=(a=a.split(",")).length,u=0;u<l;u++){var d;if((d=a[u]).match(/^[\w-]+$/))if(null==(c=te.exec(d.toLowerCase())))d="";else{if(d=null==(d=c[2])||""==d?"n":ee[d],null==(c=c[1])||""==c)c="4";else var c=Z[c]||(isNaN(c)?"4":c.substr(0,1));d=[d,c].join("")}else d="";d&&s.push(d)}0<s.length&&(r=s),3==o.length&&(s=[],0<(o=(o=o[2])?o.split(","):s).length&&(o=Q[o[0]])&&(e.c[i]=o))}for(e.c[i]||(o=Q[i])&&(e.c[i]=o),o=0;o<r.length;o+=1)e.a.push(new C(i,r[o]))}}(r),f(n,function(e){if(0==e.a.length)throw Error("No fonts to load!");if(-1!=e.c.indexOf("kit="))return e.c;for(var t=e.a.length,n=[],o=0;o<t;o++)n.push(e.a[o].replace(/ /g,"+"));return t=e.c+"?family="+n.join("%7C"),0<e.f.length&&(t+="&subset="+e.f.join(",")),0<e.g.length&&(t+="&text="+encodeURIComponent(e.g)),t}(o),v(t)),b(t,(function(){e(r.a,r.c,oe)}))},ie.prototype.load=function(e){var t=this.a.id,n=this.c.o;t?m(this.c,(this.a.api||"https://use.typekit.net")+"/"+t+".js",(function(t){if(t)e([]);else if(n.Typekit&&n.Typekit.config&&n.Typekit.config.fn){t=n.Typekit.config.fn;for(var o=[],i=0;i<t.length;i+=2)for(var r=t[i],s=t[i+1],a=0;a<s.length;a++)o.push(new C(r,s[a]));try{n.Typekit.load({events:!1,classes:!1,async:!0})}catch(e){}e(o)}}),2e3):e([])},re.prototype.load=function(e){var t=this.f.id,n=this.c.o,o=this;t?(n.__webfontfontdeckmodule__||(n.__webfontfontdeckmodule__={}),n.__webfontfontdeckmodule__[t]=function(t,n){for(var i=0,r=n.fonts.length;i<r;++i){var s=n.fonts[i];o.a.push(new C(s.name,x("font-weight:"+s.weight+";font-style:"+s.style)))}e(o.a)},m(this.c,(this.f.api||"https://f.fontdeck.com/s/css/js/")+function(e){return e.o.location.hostname||e.a.location.hostname}(this.c)+"/"+t+".js",(function(t){t&&e([])}))):e([])};var se=new q(window);se.a.c.custom=function(e,t){return new $(t,e)},se.a.c.fontdeck=function(e,t){return new re(t,e)},se.a.c.monotype=function(e,t){return new G(t,e)},se.a.c.typekit=function(e,t){return new ie(t,e)},se.a.c.google=function(e,t){return new ne(t,e)};var ae={load:s(se.load,se)};void 0===(o=function(){return ae}.call(t,n,t,e))||(e.exports=o)}()},3948:(e,t,n)=>{"use strict";const o=n(480),i=n(3278),r=n(511),s=n(4190),a=n(9397),l=n(3157),u=n(2487),d=n(6416),c=n(3855),p=n(6607),h=n(5627),g=n(7701);function f(e){if((e=e||{}).platform=e.platform||{},f.instance=this,this.type=e.type||"browser",this.noodlModules=[],this.eventEmitter=new h,this.updateScheduled=!1,this.rootComponent=null,this._currentLoadedData=null,this.isWaitingForExport=!0,this.graphModel=new a,this.errorHandlers=[],this.frameNumber=0,this.dontCreateRootComponent=!!e.dontCreateRootComponent,this.componentFilter=e.componentFilter,this.runningInEditor=!e.runDeployed,this.platform={requestUpdate:e.platform.requestUpdate,getCurrentTime:e.platform.getCurrentTime,webSocketOptions:e.platform.webSocketOptions,objectToString:e.platform.objectToString},!e.platform.requestUpdate)throw new Error("platform.requestUpdate must be set");if(!e.platform.getCurrentTime)throw new Error("platform.getCurrentTime must be set");var t;this.editorConnection=new i({platform:e.platform,runtimeType:this.type}),this.context=new o({runningInEditor:!e.runDeployed,editorConnection:this.editorConnection,platform:this.platform,graphModel:this.graphModel}),this.context.eventEmitter.on("scheduleUpdate",this.scheduleUpdate.bind(this)),e.runDeployed||this._setupEditorCommunication(e),this.registerGraphModelListeners(),t=this,[n(8197),n(1208),n(3734),n(6430),n(8675),n(9222),n(3690),n(9),n(6280),n(8865),n(4763),n(3421),n(1421),n(5962),n(5271),n(2474),n(9780),n(8022),n(6204),n(7383),n(4950),n(3033),n(1665),n(3113),n(6307),n(5010),n(8911),n(461),n(7820),n(2283),n(5533),n(3843),n(6969),n(7425),n(6736)].forEach((e=>t.registerNode(e)))}f.prototype.prefetchBundles=async function(e,t){await g(t,e,(async e=>{await this.context.fetchComponentBundle(e)}))},f.prototype._setupEditorCommunication=function(e){function t(e,n){if(null==e||null==n)return e===n;if(e===n)return!0;if(Array.isArray(e)&&e.length!==n.length)return!1;if(!(e instanceof Object))return!1;if(!(n instanceof Object))return!1;var o=Object.keys(e);return Object.keys(n).every((function(e){return-1!==o.indexOf(e)}))&&o.every((function(o){return t(e[o],n[o])}))}this.editorConnection.on("exportDataFull",(async e=>{if(!1!==this.graphModel.isEmpty()){if(this.isWaitingForExport=!1,!1===t(this._currentLoadedData,e)){if(this.componentFilter&&(e.components=e.components.filter((e=>this.componentFilter(e)))),await this.setData(e),e.componentIndex){const t=Object.keys(e.componentIndex);await this.prefetchBundles(t,2)}this.graphModel.emit("editorImportComplete")}}else this.reload()})),this.editorConnection.on("reload",this.reload.bind(this)),this.editorConnection.on("modelUpdate",this.onModelUpdateReceived.bind(this)),this.editorConnection.on("metadataUpdate",this.onMetaDataUpdateReceived.bind(this)),this.editorConnection.on("connected",(()=>{this.sendNodeLibrary()}))},f.prototype.setDebugInspectorsEnabled=function(e){this.context.setDebugInspectorsEnabled(e)},f.prototype.registerModule=function(e){if(e.nodes)for(let t of e.nodes)t.node||(t={node:t}),t.node.module=e.name||"Unknown Module",this.registerNode(t);this.noodlModules.push(e)},f.prototype.registerGraphModelListeners=function(){var e=this;this.graphModel.on("componentAdded",(function(t){e.context.registerComponentModel(t)}),this),this.graphModel.on("componentRemoved",(function(t){e.context.deregisterComponentModel(t)}),this)},f.prototype.reload=function(){location.reload()},f.prototype.registerNode=function(e){if(e.node){const t=l.defineNode(e.node);this.context.nodeRegister.register(t),t.setupNumberedInputDynamicPorts&&t.setupNumberedInputDynamicPorts(this.context,this.graphModel)}else this.context.nodeRegister.register(e);e.setup&&e.setup(this.context,this.graphModel)},f.prototype._setRootComponent=async function(e){this.rootComponent&&this.rootComponent.name===e||(this.rootComponent&&(this.rootComponent.model&&this.rootComponent.model.removeListenersWithRef(this),this.rootComponent=void 0),e&&(this.rootComponent=await this.context.createComponentInstanceNode(e,"rootComponent"),this.rootComponent.componentModel.on("rootAdded",(()=>this.eventEmitter.emit("rootComponentUpdated")),this),this.rootComponent.componentModel.on("rootRemoved",(()=>this.eventEmitter.emit("rootComponentUpdated")),this),this.context.setRootComponent(this.rootComponent)),this.eventEmitter.emit("rootComponentUpdated"))},f.prototype.setData=async function(e){if(!this._disableLoad){this._currentLoadedData=e,await this.graphModel.importEditorData(e);for(const e of this.noodlModules)"function"==typeof e.setup&&e.setup.apply(e);!0!==this.dontCreateRootComponent&&(await this._setRootComponent(this.graphModel.rootComponent),this.graphModel.on("rootComponentNameUpdated",(e=>{this._setRootComponent(e)})),this.graphModel.on("componentRemoved",(e=>{this.rootComponent&&this.rootComponent.name===e.name&&this._setRootComponent(null)})),this.graphModel.on("componentAdded",(e=>{setTimeout((()=>{this.rootComponent||this.graphModel.rootComponent!==e.name||this._setRootComponent(e.name)}),1)}))),this.scheduleUpdate()}},f.prototype.scheduleUpdate=function(){this.updateScheduled||(this.updateScheduled=!0,this.platform.requestUpdate(f.prototype._doUpdate.bind(this)))},f.prototype._doUpdate=function(){this.updateScheduled=!1,this.context.currentFrameTime=this.platform.getCurrentTime(),this.context.eventEmitter.emit("frameStart"),this.context.update(),this.context.eventEmitter.emit("frameEnd"),this.frameNumber++},f.prototype.setProjectSettings=function(e){this.projectSettings=e},f.prototype.getNodeLibrary=function(){var e=s.generateProjectSettings(this.graphModel.getSettings(),this.noodlModules);this.projectSettings&&(this.projectSettings.ports&&(e.ports=e.ports.concat(this.projectSettings.ports)),this.projectSettings.dynamicports&&(e.dynamicports=e.ports.concat(this.projectSettings.dynamicports)));var t=r(this.context.nodeRegister);return t.projectsettings=e,JSON.stringify(t,null,3)},f.prototype.sendNodeLibrary=function(){const e=this.getNodeLibrary();this.lastSentNodeLibrary!==e&&(this.lastSentNodeLibrary=e,this.editorConnection.sendNodeLibrary(e))},f.prototype.connectToEditor=function(e){this.editorConnection.connect(e)},f.prototype.onMetaDataUpdateReceived=function(e){this.graphModel.isEmpty()||EditorMetaDataEventsHandler.handleEvent(this.context,this.graphModel,e)},f.prototype.onModelUpdateReceived=async function(e){this.isWaitingForExport||("projectInstanceChanged"===e.type?this.reload():!1===this.graphModel.isEmpty()&&await d.handleEvent(this.context,this.graphModel,e))},f.prototype.addErrorHandler=function(e){this.errorHandlers.push(e)},f.prototype.reportError=function(e){this.errorHandlers.forEach((function(t){t(e)}))},f.prototype.getProjectSettings=function(){return this.graphModel.getSettings()},f.prototype.getMetaData=function(e){return this.graphModel.getMetaData(e)},f.Services=c,f.Node=u,f.NodeDefinition=l,f.EdgeTriggeredInput=p,e.exports=f},4497:e=>{e.exports=class{constructor({name:e,url:t}){this.name=e,this.url=t}getUrl(){return this.url}getName(){return this.name}toString(){return this.url}}},4007:(e,t,n)=>{const o=n(3948),i=n(3839),r=n(9160),s=n(4497),a=n(5627),l={_common:["_createdAt","_updatedAt","objectId"],_User:["_email_verify_token"]};function u(e,t){const n=Object.assign({},e);return l._common.forEach((e=>delete n[e])),t&&l[t]&&l[t].forEach((e=>delete n[e])),n}class d{constructor(e){this._initCloudServices(),this.events=new a,this.events.setMaxListeners(1e4),this.modelScope=e,this._fromJSON=(t,n)=>d._fromJSON(t,n,e),this._deserializeJSON=(t,n)=>d._deserializeJSON(t,n,e),this._serializeObject=(t,n)=>d._serializeObject(t,n,e)}_initCloudServices(){m=void 0;const e=o.instance.getMetaData("cloudservices");e&&(this.appId=e.appId,this.endpoint=e.endpoint);const t=o.instance.getMetaData("dbVersionMajor");this.dbVersionMajor=t}on(){this.events.on.apply(this.events,arguments)}off(){this.events.off.apply(this.events,arguments)}_makeRequest(e,t){if("undefined"==typeof _noodl_cloud_runtime_version){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4===n.readyState){var e;try{e=JSON.parse(n.response||n.responseText)}catch(e){}200===n.status||201===n.status?t.success(e):t.error(e||{error:n.responseText,status:n.status})}},n.open(t.method||"GET",this.endpoint+e,!0),n.setRequestHeader("X-Parse-Application-Id",this.appId),"undefined"!=typeof _noodl_cloudservices&&n.setRequestHeader("X-Parse-Master-Key",_noodl_cloudservices.masterKey);var o=localStorage["Parse/"+this.appId+"/currentUser"];if(void 0!==o)try{const e=JSON.parse(o);n.setRequestHeader("X-Parse-Session-Token",e.sessionToken)}catch(e){}t.onUploadProgress&&(n.upload.onprogress=e=>t.onUploadProgress(e)),t.content instanceof File?n.send(t.content):(n.setRequestHeader("Content-Type","application/json"),n.send(JSON.stringify(t.content)))}else{const n="undefined"!=typeof _noodl_cloudservices?_noodl_cloudservices.endpoint:this.endpoint,o="undefined"!=typeof _noodl_cloudservices?_noodl_cloudservices.appId:this.appId,i="undefined"!=typeof _noodl_cloudservices?_noodl_cloudservices.masterKey:void 0;fetch(n+e,{method:t.method||"GET",headers:{"X-Parse-Application-Id":o,"X-Parse-Master-Key":i,"Content-Type":"application/json"},body:JSON.stringify(t.content)}).then((e=>{200===e.status||201===e.status?"DELETE"===t.method?t.success(void 0):e.json().then((e=>t.success(e))).catch((e=>t.error({error:"CloudStore: Failed to get json result."}))):"DELETE"===t.method?t.error({error:"Failed to delete."}):e.json().then((e=>t.error(e))).catch((e=>t.error({error:"Failed to fetch."})))})).catch((e=>{t.error({error:e.message})}))}}query(e){this._makeRequest("/classes/"+e.collection,{method:"POST",content:{_method:"GET",where:e.where,limit:e.limit,skip:e.skip,include:Array.isArray(e.include)?e.include.join(","):e.include,keys:Array.isArray(e.select)?e.select.join(","):e.select,order:Array.isArray(e.sort)?e.sort.join(","):e.sort,count:e.count},success:function(t){e.success(t.results,t.count)},error:function(){e.error()}})}aggregate(e){const t=[];if(!e.group)return void e.error("You need to provide group option.");e.limit&&t.push("limit="+e.limit),e.skip&&t.push("skip="+e.skip);const n={};Object.keys(e.group).forEach((t=>{const o={},i=e.group[t];void 0!==i.avg?o.$avg="$"+i.avg:void 0!==i.sum?o.$sum="$"+i.sum:void 0!==i.max?o.$max="$"+i.max:void 0!==i.min?o.$min="$"+i.min:void 0!==i.distinct&&(o.$addToSet="$"+i.distinct),n[t]=o})),this.dbVersionMajor&&this.dbVersionMajor>4?(n._id=null,e.where&&t.push("$match="+encodeURIComponent(JSON.stringify(e.where))),t.push("$group="+JSON.stringify(n))):(n.objectId=null,e.where&&t.push("match="+encodeURIComponent(JSON.stringify(e.where))),t.push("group="+JSON.stringify(n))),this._makeRequest("/aggregate/"+e.collection+(t.length>0?"?"+t.join("&"):""),{success:function(t){const n={};t.results&&1===t.results.length?(Object.keys(e.group).forEach((e=>{n[e]=t.results[0][e]})),e.success(n)):e.success({})},error:function(){e.error()}})}count(e){const t=[];e.where&&t.push("where="+encodeURIComponent(JSON.stringify(e.where))),t.push("limit=0"),t.push("count=1"),this._makeRequest("/classes/"+e.collection+(t.length>0?"?"+t.join("&"):""),{success:function(t){e.success(t.count)},error:function(){e.error()}})}distinct(e){const t=[];e.where&&t.push("where="+encodeURIComponent(JSON.stringify(e.where))),t.push("distinct="+e.property),this._makeRequest("/aggregate/"+e.collection+(t.length>0?"?"+t.join("&"):""),{success:function(t){e.success(t.results)},error:function(){e.error()}})}fetch(e){const t=[];e.include&&t.push("include="+(Array.isArray(e.include)?e.include.join(","):e.include)),this._makeRequest("/classes/"+e.collection+"/"+e.objectId+(t.length>0?"?"+t.join("&"):""),{method:"GET",success:t=>{e.success(t),this.events.emit("fetch",{type:"fetch",objectId:e.objectId,object:t,collection:e.collection})},error:function(t){e.error(t.error)}})}create(e){this._makeRequest("/classes/"+e.collection,{method:"POST",content:Object.assign(u(p(e.data,e.collection),e.collection),{ACL:e.acl}),success:t=>{const n=Object.assign({},e.data,t);e.success(n),this.events.emit("create",{type:"create",objectId:e.objectId,object:n,collection:e.collection})},error:function(t){e.error(t.error)}})}increment(e){const t={};for(let n in e.properties)t[n]={__op:"Increment",amount:e.properties[n]};this._makeRequest("/classes/"+e.collection+"/"+e.objectId,{method:"PUT",content:t,success:t=>{e.success(t)},error:function(t){e.error(t.error)}})}save(e){const t=Object.assign({},e.data);delete t.createdAt,delete t.updatedAt,this._makeRequest("/classes/"+e.collection+"/"+e.objectId,{method:"PUT",content:Object.assign(u(p(t,e.collection),e.collection),{ACL:e.acl}),success:t=>{e.success(t),this.events.emit("save",{type:"save",objectId:e.objectId,object:Object.assign({},e.data,t),collection:e.collection})},error:function(t){e.error(t.error)}})}delete(e){this._makeRequest("/classes/"+e.collection+"/"+e.objectId,{method:"DELETE",success:()=>{e.success(),this.events.emit("delete",{type:"delete",objectId:e.objectId,collection:e.collection})},error:function(t){e.error(t.error)}})}addRelation(e){const t={};t[e.key]={__op:"AddRelation",objects:[{__type:"Pointer",objectId:e.targetObjectId,className:e.targetClass}]},this._makeRequest("/classes/"+e.collection+"/"+e.objectId,{method:"PUT",content:t,success:function(t){e.success(t)},error:function(t){e.error(t.error)}})}removeRelation(e){const t={};t[e.key]={__op:"RemoveRelation",objects:[{__type:"Pointer",objectId:e.targetObjectId,className:e.targetClass}]},this._makeRequest("/classes/"+e.collection+"/"+e.objectId,{method:"PUT",content:t,success:function(t){e.success(t)},error:function(t){e.error(t.error)}})}uploadFile(e){this._makeRequest("/files/"+e.file.name,{method:"POST",content:e.file,contentType:e.file.type,success:t=>e.success(Object.assign({},e.data,t)),error:t=>e.error(t),onUploadProgress:e.onUploadProgress})}deleteFile(e){this._makeRequest("/files/"+e.file.name,{method:"DELETE",success:t=>e.success(Object.assign({},e.data,t)),error:t=>e.error(t)})}}function c(e){if(e instanceof i){var t={};for(var n in e.data)t[n]=c(e.data[n]);return t}return e instanceof r?(t=[],e.items.forEach((e=>{t.push(c(e))})),t):e}function p(e,t,n){if(d._collections[t])var o=d._collections[t].schema;for(var a in e){var l=o&&o.properties&&o.properties[a]?o.properties[a].type:void 0;if(void 0===e[a]||null===e[a]);else if("Pointer"===l&&"string"==typeof e[a])e[a]={__type:"Pointer",className:o.properties[a].targetClass,objectId:e[a]};else if("Pointer"===l&&"object"==typeof e[a]&&(n||i).instanceOf(e[a]))e[a]={__type:"Pointer",className:o.properties[a].targetClass,objectId:e[a].getId()};else if("Date"===l&&("string"==typeof e[a]||e[a]instanceof Date))e[a]={__type:"Date",iso:e[a]instanceof Date?e[a].toISOString():e[a]};else if("File"===l&&e[a]instanceof s){const t=e[a];e[a]={__type:"File",url:t.getUrl(),name:t.getName()}}else"Array"===l&&"string"==typeof e[a]&&r.exists(e[a])?e[a]=c(r.get(e[a])):"Object"===l&&"string"==typeof e[a]&&(n||i).exists(e[a])?e[a]=c((n||i).get(e[a])):"GeoPoint"===l&&"object"==typeof e[a]?e[a]={__type:"GeoPoint",latitude:Number(e[a].latitude),longitude:Number(e[a].longitude)}:e[a]=c(e[a])}return e}function h(e,t,n){if(void 0!==e){if(null===e)return null;if("Relation"!==t||"Relation"!==e.__type){if("Pointer"===t&&"Pointer"===e.__type)return e.objectId;if("Date"===t&&"Date"===e.__type)return new Date(e.iso);if("Date"===t&&"string"==typeof e)return new Date(e);if("File"===t&&"File"===e.__type)return new s(e);if("GeoPoint"===t&&"GeoPoint"===e.__type)return{latitude:e.latitude,longitude:e.longitude};if(function(e){if(!Array.isArray(e))return!1;for(var t=0;t<e.length;t++)if("object"!=typeof e[t]||null===e[t])return!1;return!0}(e)){for(var o=[],a=0;a<e.length;a++)o.push(h(e[a],void 0,n));var l=r.get();return l.set(o),l}if(Array.isArray(e))return e;if(e&&"Object"===e.__type&&void 0!==e.className&&void 0!==e.objectId){const t=Object.assign({},e);return delete t.className,delete t.__type,g(t,e.className,n)}if("object"==typeof e&&null!==e){var u=(n||i).get();for(var d in e)u.set(d,h(e[d],void 0,n));return u}return e}}}function g(e,t,n){const o=(n||i).get(e.objectId);if(o._class=t,void 0!==t&&void 0!==d._collections[t])var r=d._collections[t].schema;for(var s in e)if("objectId"!==s&&"ACL"!==s){var a=r&&r.properties&&r.properties[s]?r.properties[s].type:void 0;o.set(s,h(e[s],a,n))}return o}var f,m;d._fromJSON=g,d._deserializeJSON=h,d._serializeObject=p,d.forScope=e=>void 0===e?d.instance:(e._cloudStore||(e._cloudStore=new d(e)),e._cloudStore),Object.defineProperty(d,"instance",{get:function(){return void 0===f&&(f=new d),f}}),Object.defineProperty(d,"_collections",{get:function(){return void 0===m&&(m={},(o.instance.getMetaData("dbCollections")||[]).forEach((e=>{m[e.name]=e})),(o.instance.getMetaData("systemCollections")||[]).forEach((e=>{m[e.name]=e}))),m}}),d.invalidateCollections=()=>{m=void 0},e.exports=d},1458:(e,t,n)=>{const o=n(3948);class i{constructor(){this.cacheDuration=9e5}_makeRequest(e,t){if("undefined"==typeof _noodl_cloud_runtime_version){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4===n.readyState){var e;try{e=JSON.parse(n.response)}catch(e){}200===n.status||201===n.status?t.success(e):t.error(e||{error:n.responseText,status:n.status})}};const i=o.instance.getMetaData("cloudservices"),r=i.appId,s=i.endpoint;n.open("GET",s+e,!0),n.setRequestHeader("X-Parse-Application-Id",r),n.send()}else{const n="undefined"!=typeof _noodl_cloudservices?_noodl_cloudservices.endpoint:this.endpoint,o="undefined"!=typeof _noodl_cloudservices?_noodl_cloudservices.appId:this.appId,i="undefined"!=typeof _noodl_cloudservices?_noodl_cloudservices.masterKey:void 0;fetch(n+e,{method:"GET",headers:{"X-Parse-Application-Id":o,"X-Parse-Master-Key":i}}).then((e=>{200===e.status||201===e.status?e.json().then((e=>t.success(e))).catch((e=>t.error({error:"Config: Failed to get json result."}))):e.json().then((e=>t.error(e))).catch((e=>t.error({error:"Failed to fetch."})))})).catch((e=>{t.error({error:e.message})}))}}_getConfig(){return new Promise(((e,t)=>{this._makeRequest("/config",{success:t=>{e(t.params||{})},error:e=>{t(e)}})}))}async getConfig(){return this.configCachePending?this.configCachePending:this.configCache?(Date.now()>this.ttl&&this._getConfig().then((e=>{this.configCache=e,this.ttl=Date.now()+this.cacheDuration})),this.configCache):(this.configCachePending=this._getConfig(),this.configCache=await this.configCachePending,delete this.configCachePending,this.ttl=Date.now()+this.cacheDuration,this.configCache)}clearCache(){delete this.configCache}}i.instance=new i,e.exports=i},5802:(e,t,n)=>{const o=n(4007),i=n(3839);function r(e){return e instanceof Date&&"function"==typeof e.toISOString?{__type:"Date",iso:e.toISOString()}:e}e.exports={convertVisualFilter:function e(t,n){var i=n.queryParameters;if(void 0!==t.combinator&&void 0!==t.rules){if(0===t.rules.length)return;if(1===t.rules.length)return e(t.rules[0],n);{const o={},i="$"+t.combinator;return o[i]=[],t.rules.forEach((t=>{var r=e(t,n);void 0!==r&&o[i].push(r)})),o}}if("related to"===t.operator){if(void 0===(s=void 0!==t.input?i[t.input]:void 0))return;return{$relatedTo:{object:{__type:"Pointer",objectId:s,className:t.relatedTo},key:t.relationProperty}}}{const e={};var r,s=void 0!==t.input?i[t.input]:t.value;if("exist"===t.operator)return e[t.property]={$exists:!0},e;if("not exist"===t.operator)return e[t.property]={$exists:!1},e;if(void 0===s)return;if(o._collections[n.collectionName])var a=o._collections[n.collectionName].schema;return"Date"===(a&&a.properties&&a.properties[t.property]?a.properties[t.property].type:void 0)&&(s instanceof Date||(s=new Date(s.toString())),s={__type:"Date",iso:s.toISOString()}),"greater than"===t.operator?r={$gt:s}:"greater than or equal to"===t.operator?r={$gte:s}:"less than"===t.operator?r={$lt:s}:"less than or equal to"===t.operator?r={$lte:s}:"equal to"===t.operator?r={$eq:s}:"not equal to"===t.operator?r={$ne:s}:"points to"===t.operator?r={$eq:{__type:"Pointer",objectId:s,className:a&&a.properties&&a.properties[t.property]?a.properties[t.property].targetClass:void 0}}:"contain"===t.operator&&(r={$regex:s,$options:"i"}),e[t.property]=r,e}},compareObjects:function(e,t,n){for(var o=0;o<e.length;o++){let i=e[o];if("-"===i[0]){let e=i.substring(1);if(t.get(e)>n.get(e))return-1;if(t.get(e)<n.get(e))return 1}else{if(t.get(i)>n.get(i))return 1;if(t.get(i)<n.get(i))return-1}}return 0},matchesQuery:function e(t,n){var o=!0;return void 0===n||(void 0!==n.$and?n.$and.forEach((n=>{o&=e(t,n)})):void 0!==n.$or?(o=!1,n.$or.forEach((n=>{o|=e(t,n)}))):Object.keys(n).forEach((e=>{if("objectId"===e)void 0!==n[e].$eq?o&=t.getId()===n[e].$eq:void 0!==n[e].$in&&(o&=-1!==n[e].$in.indexOf(t.getId()));else if("$relatedTo"===e)o=!1;else{var i=t.get(e);void 0!==n[e].$eq&&"Pointer"===n[e].$eq.__type?o&=i===n[e].$eq.objectId:void 0!==n[e].$eq?o&=i==n[e].$eq:void 0!==n[e].$ne?o&=i!=n[e].$ne:void 0!==n[e].$lt?o&=i<n[e].$lt:void 0!==n[e].$lte?o&=i<=n[e].$lt:void 0!==n[e].$gt?o&=i>n[e].$gt:void 0!==n[e].$gte?o&=i>=n[e].$gte:void 0!==n[e].$exists?o&=void 0!==i:void 0!==n[e].$in?o&=-1!==n[e].$in.indexOf(i):void 0!==n[e].$nin?o&=-1===n[e].$in.indexOf(i):void 0!==n[e].$regex&&(o&=new RegExp(n[e].$regex,n[e].$options).test(i))}})),o)},convertVisualSorting:function(e){return e.map((e=>("descending"===e.order?"-":"")+e.property))},convertFilterOp:function e(t,n){const s=Object.keys(t);if(0===s.length)return{};if(1!==s.length)return n.error("Filter must only have one key found "+s.join(","));const a={},l=s[0];if(void 0!==t.and&&Array.isArray(t.and))a.$and=t.and.map((t=>e(t,n)));else if(void 0!==t.or&&Array.isArray(t.or))a.$or=t.or.map((t=>e(t,n)));else if(void 0!==t.idEqualTo)a.objectId={$eq:t.idEqualTo};else if(void 0!==t.idContainedIn)a.objectId={$in:t.idContainedIn};else if(void 0!==t.relatedTo){var u=t.relatedTo.id;if(void 0===u)return n.error("Must provide id in relatedTo filter");var d=t.relatedTo.key;if(void 0===d)return n.error("Must provide key in relatedTo filter");var c=(n.modelScope||i).get(u);a.$relatedTo={object:{__type:"Pointer",objectId:u,className:c._class},key:d}}else if("object"==typeof t[l]){const e=t[l];if(void 0!==e.equalTo)a[l]={$eq:r(e.equalTo)};else if(void 0!==e.notEqualTo)a[l]={$ne:r(e.notEqualTo)};else if(void 0!==e.lessThan)a[l]={$lt:r(e.lessThan)};else if(void 0!==e.greaterThan)a[l]={$gt:r(e.greaterThan)};else if(void 0!==e.lessThanOrEqualTo)a[l]={$lte:r(e.lessThanOrEqualTo)};else if(void 0!==e.greaterThanOrEqualTo)a[l]={$gte:r(e.greaterThanOrEqualTo)};else if(void 0!==e.exists)a[l]={$exists:e.exists};else if(void 0!==e.containedIn)a[l]={$in:e.containedIn};else if(void 0!==e.notContainedIn)a[l]={$nin:e.notContainedIn};else if(void 0!==e.pointsTo){if(c=(n.modelScope||i).get(e.pointsTo),o._collections[n.collectionName])var p=o._collections[n.collectionName].schema;var h=p&&p.properties&&p.properties[l]?p.properties[l].targetClass:void 0;"Relation"===(p&&p.properties&&p.properties[l]?p.properties[l].type:void 0)?a[l]={__type:"Pointer",objectId:e.pointsTo,className:h}:Array.isArray(e.pointsTo)?a[l]={$in:e.pointsTo.map((e=>({__type:"Pointer",objectId:e,className:h})))}:a[l]={$eq:{__type:"Pointer",objectId:e.pointsTo,className:h}}}else if(void 0!==e.matchesRegex)a[l]={$regex:e.matchesRegex,$options:e.options};else if(void 0!==e.text&&void 0!==e.text.search){var g=e.text.search;a[l]="string"==typeof g?{$text:{$search:{$term:g,$caseSensitive:!1}}}:{$text:{$search:{$term:g.term,$language:g.language,$caseSensitive:g.caseSensitive,$diacriticSensitive:g.diacriticSensitive}}}}else void 0!==e.nearSphere?(g=e.nearSphere,a[l]={$nearSphere:{__type:"GeoPoint",latitude:g.latitude,longitude:g.longitude},$maxDistanceInMiles:g.$maxDistanceInMiles,$maxDistanceInKilometers:g.maxDistanceInKilometers,$maxDistanceInRadians:g.maxDistanceInRadians}):void 0!==e.withinBox?(g=e.withinBox,a[l]={$within:{$box:g.map((e=>({__type:"GeoPoint",latitude:e.latitude,longitude:e.longitude})))}}):void 0!==e.withinPolygon&&(g=e.withinPolygon,a[l]={$geoWithin:{$polygon:g.map((e=>({__type:"GeoPoint",latitude:e.latitude,longitude:e.longitude})))}})}else n.error("Unrecognized filter keys "+s.join(","));return a}}},4552:(e,t,n)=>{const o=n(4007),i=n(5802),r=n(3839);e.exports=function(e){let t;const n=()=>(t||(t=new o(e)),t);return{async query(t,o,r){if(void 0===t)throw new Error("'className' is undefined");return new Promise(((s,a)=>{n().query({collection:t,where:i.convertFilterOp(o||{},{collectionName:t,error:e=>a(e),modelScope:e}),limit:r?r.limit:void 0,sort:r?r.sort:void 0,skip:r?r.skip:void 0,include:r?r.include:void 0,select:r?r.select:void 0,count:r?r.count:void 0,success:(e,o)=>{const i=e.map((e=>n()._fromJSON(e,t)));s(void 0!==o?{results:i,count:o}:i)},error:e=>{a(Error(e||"Failed to query."))}})}))},async count(t,o){if(void 0===t)throw new Error("'className' is undefined");return new Promise(((r,s)=>{n().count({collection:t,where:o?i.convertFilterOp(o||{},{collectionName:t,error:e=>s(e),modelScope:e}):void 0,success:e=>{r(e)},error:e=>{s(Error(e||"Failed to query."))}})}))},async distinct(t,o,r){if(void 0===t)throw new Error("'className' is undefined");return new Promise(((s,a)=>{n().distinct({collection:t,property:o,where:r?i.convertFilterOp(r||{},{collectionName:t,error:e=>a(e),modelScope:e}):void 0,success:e=>{s(e)},error:e=>{a(Error(e||"Failed to query."))}})}))},async aggregate(t,o,r){if(void 0===t)throw new Error("'className' is undefined");return new Promise(((s,a)=>{n().aggregate({collection:t,group:o,where:r?i.convertFilterOp(r||{},{collectionName:t,error:e=>a(e),modelScope:e}):void 0,success:e=>{s(e)},error:e=>{a(Error(e||"Failed to aggregate."))}})}))},async fetch(t,o){if(void 0===t)return Promise.reject(new Error("'objectOrId' is undefined."));"string"!=typeof t&&(t=t.getId());const i=(o?o.className:void 0)||(e||r).get(t)._class;return new Promise(((e,r)=>{if(!i)return r("No class name specified");n().fetch({collection:i,objectId:t,include:o?o.include:void 0,success:function(t){var o=n()._fromJSON(t,i);e(o)},error:function(e){r(Error(e||"Failed to fetch."))}})}))},async increment(t,o,i){if(void 0===t)return Promise.reject(new Error("'objectOrId' is undefined."));"string"!=typeof t&&(t=t.getId());const s=(i?i.className:void 0)||(e||r).get(t)._class;return new Promise(((e,i)=>{if(!s)return i("No class name specified");n().increment({collection:s,objectId:t,properties:o,success:o=>{n()._fromJSON(Object.assign({objectId:t},o),s),e()},error:e=>{i(Error(e||"Failed to increment."))}})}))},async save(t,o,i){if(void 0===t)return Promise.reject(new Error("'objectOrId' is undefined."));"string"!=typeof t&&(t=t.getId());const s=(i?i.className:void 0)||(e||r).get(t)._class,a=(e||r).get(t);return o&&Object.keys(o).forEach((e=>{a.set(e,o[e])})),new Promise(((e,r)=>{if(!s)return r("No class name specified");n().save({collection:s,objectId:t,data:o||a.data,acl:i?i.acl:void 0,success:o=>{n()._fromJSON(Object.assign({objectId:t},o),s),e()},error:e=>{r(Error(e||"Failed to save."))}})}))},async create(e,t,o){if(void 0===e)throw new Error("'className' is undefined");return new Promise(((i,r)=>{n().create({collection:e,data:t,acl:o?o.acl:void 0,success:t=>{const o=n()._fromJSON(t,e);i(o)},error:e=>{r(Error(e||"Failed to insert."))}})}))},async delete(t,o){if(void 0===t)return Promise.reject(new Error("'objectOrId' is undefined."));"string"!=typeof t&&(t=t.getId());const i=(o?o.className:void 0)||(e||r).get(t)._class;return new Promise(((o,s)=>{if(!i)return s("No class name specified");n().delete({collection:i,objectId:t,success:()=>{(e||r).get(t).notify("delete"),o()},error:e=>{s(Error(e||"Failed to delete."))}})}))},async addRelation(t){const o=t.recordId||t.record.getId(),i=t.className||(e||r).get(o)._class,s=t.targetRecordId||t.targetRecord.getId(),a=t.targetClassName||(e||r).get(s)._class;return new Promise(((e,r)=>i?a?void n().addRelation({collection:i,objectId:o,key:t.key,targetObjectId:s,targetClass:a,success:t=>{e()},error:e=>{r(Error(e||"Failed to add relation."))}}):r("No target class name specified"):r("No class name specified")))},async removeRelation(t){const o=t.recordId||t.record.getId(),i=t.className||(e||r).get(o)._class,s=t.targetRecordId||t.targetRecord.getId(),a=t.targetClassName||(e||r).get(s)._class;return new Promise(((e,r)=>i?a?void n().removeRelation({collection:i,objectId:o,key:t.key,targetObjectId:s,targetClass:a,success:t=>{e()},error:e=>{r(Error(e||"Failed to add relation."))}}):r("No target class name specified"):r("No class name specified")))}}}},7701:e=>{e.exports=async function(e,t,n){const o=[],i=[];for(const r of t){const s=Promise.resolve().then((()=>n(r,t)));if(o.push(s),e<=t.length){const t=s.then((()=>i.splice(i.indexOf(t),1)));i.push(t),i.length>=e&&await Promise.race(i)}}return Promise.all(o)}},9160:(e,t,n)=>{"use strict";var o=n(3839);Object.defineProperty(Array.prototype,"items",{enumerable:!1,get(){return this},set(e){this.set(e)}}),Object.defineProperty(Array.prototype,"each",{enumerable:!1,writable:!1,value:Array.prototype.forEach}),Object.defineProperty(Array.prototype,"size",{enumerable:!1,writable:!1,value:function(){return this.length}}),Object.defineProperty(Array.prototype,"get",{enumerable:!1,writable:!1,value:function(e){return this[e]}}),Object.defineProperty(Array.prototype,"getId",{enumerable:!1,writable:!1,value:function(){return this._id}}),Object.defineProperty(Array.prototype,"id",{enumerable:!1,get(){return this.getId()}}),Object.defineProperty(Array.prototype,"set",{enumerable:!1,writable:!1,value:function(e){var t,n;if(e!==this){var i=[];for(t=(e=e||[]).length,n=0;n<t;n++){var r=e[n];o.instanceOf(r)?i.push(r):i.push(o.create(r))}var s=this.items,a=u(s),l=u(i);for(t=s.length,n=0;n<t;n++)l.hasOwnProperty(s[n].getId())||(this.removeAtIndex(n),n--,t--);for(n=0;n<Math.min(s.length,i.length);n++)s[n]!==i[n]&&(a.hasOwnProperty(i[n].getId())&&this.remove(i[n]),this.addAtIndex(i[n],n));for(n=s.length;n<i.length;n++)this.add(i[n])}function u(e){for(var t={},n=e.length,o=0;o<n;o++){var i=e[o];t[i.getId()]=i}return t}}}),Object.defineProperty(Array.prototype,"notify",{enumerable:!1,writable:!1,value:async function(e,t){if(this._listeners&&this._listeners[e])for(var n=this._listeners[e].slice(),o=0;o<n.length;o++)await n[o](t)}}),Object.defineProperty(Array.prototype,"contains",{enumerable:!1,writable:!1,value:function(e){return-1!==this.indexOf(e)}}),Object.defineProperty(Array.prototype,"add",{enumerable:!1,writable:!1,value:async function(e){this.contains(e)||(this.items.push(e),await this.notify("add",{item:e,index:this.items.length-1}),await this.notify("change"),await e.notify("add",{collection:this}))}}),Object.defineProperty(Array.prototype,"remove",{enumerable:!1,writable:!1,value:function(e){var t=this.items.indexOf(e);-1!==t&&this.removeAtIndex(t)}}),Object.defineProperty(Array.prototype,"addAtIndex",{enumerable:!1,writable:!1,value:async function(e,t){this.contains(e)||(this.items.splice(t,0,e),await this.notify("add",{item:e,index:t}),await this.notify("change"),await e.notify("add",{collection:this,index:t}))}}),Object.defineProperty(Array.prototype,"removeAtIndex",{enumerable:!1,writable:!1,value:async function(e){var t=this.items[e];this.items.splice(e,1),await this.notify("remove",{item:t,index:e}),await this.notify("change"),await t.notify("remove",{collection:this})}}),Object.defineProperty(Array.prototype,"on",{enumerable:!1,writable:!1,value:function(e,t){this._listeners||Object.defineProperty(this,"_listeners",{enumerable:!1,writable:!1,value:{}}),this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push(t)}}),Object.defineProperty(Array.prototype,"off",{enumerable:!1,writable:!1,value:function(e,t){if(this._listeners&&this._listeners[e]){var n=this._listeners[e].indexOf(t);-1!==n&&this._listeners[e].splice(n,1)}}});class i extends Array{}var r=i._collections={};i.create=function(e){const t=o.guid();return r[t]=new i,Object.defineProperty(r[t],"_id",{enumerable:!1,writable:!1,value:t}),e&&r[t].set(e),r[t]},i.get=function(e){return void 0===e&&(e=o.guid()),r[e]||(r[e]=new i,Object.defineProperty(r[e],"_id",{enumerable:!1,writable:!1,value:e})),r[e]},i.instanceOf=function(e){return e instanceof i},i.exists=function(e){return void 0!==r[e]},e.exports=i},6607:e=>{"use strict";e.exports={createSetter:function(e){var t=!1;return function(n){(n=!!n)&&!1===t&&e.valueChangedToTrue.call(this),t=n}}}},5153:e=>{e.exports=class{constructor(){this.currentWarnings=new Map}setWarning(e,t,n){if(this.currentWarnings.has(e)){const o=this.currentWarnings.get(e);return o[t]!==n&&(o[t]=n,!0)}return this.currentWarnings.set(e,{[t]:n}),!0}clearWarning(e,t){const n=this.currentWarnings.get(e);return!(!n||!n[t]||(delete n[t],0===Object.keys(n).length&&this.currentWarnings.delete(e),0))}clearWarnings(e){return!1!==this.currentWarnings.has(e)&&(this.currentWarnings.delete(e),!0)}}},3278:(e,t,n)=>{"use strict";var o=n(9092),i=n(3855),r=n(7662);const s=n(5153);function a(e){var t=e||{};o.call(this),this.runtimeType=t.runtimeType,this.platform=t.platform,this.ws=t.platform&&t.platform.webSocketClass||("undefined"!=typeof WebSocket?WebSocket:void 0),this.wsOptions=t.platform&&t.platform.webSocketOptions||void 0,this.reconnectOnClose=!0,this.enableDebugger=!1,this.lastSendTimestamp=0,this.sendQueue=[],this.sendTimer=void 0,this.activeWarnings=new s}a.prototype=Object.create(o.prototype),a.prototype.constructor=a,a.prototype.isRunningLocally=function(){return this.platform.isRunningLocally&&this.platform.isRunningLocally()||"undefined"!=typeof document&&("localhost"===document.location.hostname||"127.0.0.1"===document.location.hostname)},a.prototype.connect=function(e){this.socket=this.wsOptions?new this.ws(e,this.wsOptions):new this.ws(e);var t=this;this.socket.addEventListener("open",(function(){t.clientId=r(),t.socket.send(JSON.stringify({cmd:"register",type:"viewer",clientId:t.clientId})),t.emit("connected")})),this.socket.addEventListener("close",(function(n){t.reconnectOnClose&&t.reconnect(e),console.log("Editor connection closed",n.code,n.reason),t.emit("connectionClosed")})),this.socket.addEventListener("error",(function(e){console.log("Editor connection error, trying to reconnect")})),this.socket.addEventListener("message",(async e=>{const n="string"==typeof e.data?e.data:await e.data.text(),o=JSON.parse(n);let r;"registered"===o.cmd||("export"===o.cmd?(r=JSON.parse(o.content),"full"===o.type&&o.target===this.clientId&&t.emit("exportDataFull",r)):"hoverStart"===o.cmd?t.emit("hoverStart",o.content.id):"hoverEnd"===o.cmd?t.emit("hoverEnd",o.content.id):"refresh"===o.cmd?t.emit("reload"):"debugInspectors"===o.cmd?this.debugInspectorsEnabled&&(r=JSON.parse(o.content),t.emit("debugInspectorsUpdated",r.inspectors)):"debuggingEnabled"===o.cmd?t.isRunningLocally()&&(r=JSON.parse(o.content),t.emit("debuggingEnabledChanged",r.enabled)):"getConnectionValue"===o.cmd?t.isRunningLocally()&&(r=JSON.parse(o.content),await t.emit("getConnectionValue",{clientId:r.clientId,connectionId:r.connectionId})):"modelUpdate"===o.cmd?await t.emit("modelUpdate",o.content):"publish"===o.cmd?i.pubsub.routeMessage(o):"noodlModules"===o.cmd?t.emit("noodlModules",JSON.parse(o.content)):"mqttUpdate"===o.cmd?t.emit("mqttUpdate",o.content):"activeComponentChanged"===o.cmd?t.emit("activeComponentChanged",o.component):console.log("Command not implemented",o))}))},a.prototype.reconnect=function(e){var t=this;setTimeout((function(){t.connect(e)}),2e3)},a.prototype.isConnected=function(){return void 0!==this.socket&&this.socket.readyState===this.ws.OPEN},a.prototype.send=function(e){const t=this.platform.getCurrentTime(),n=t-this.lastSendTimestamp,o=e=>{try{this.socket.send(JSON.stringify(e))}catch(t){if(t.message&&t.message.startsWith("Converting circular"))try{this.socket.send(JSON.stringify(e,(()=>{const e=new WeakSet;return(t,n)=>{if("object"==typeof n&&null!==n){if(e.has(n))return"[Circular]";e.add(n)}return n}})()))}catch(t){console.log("failed to send message to editor",e,t)}else console.log("failed to send message to editor",e,t)}};n<200||this.sendTimer||!this.isConnected()?(this.sendQueue.push(e),this.sendTimer||(this.sendTimer=setTimeout((()=>{if(!1!==this.isConnected()){for(let e=0;e<this.sendQueue.length;e+=50){const t=this.sendQueue.slice(e,e+50);o(t)}this.sendQueue=[],this.sendTimer=void 0,this.lastSendTimestamp=this.platform.getCurrentTime()}}),100))):(this.lastSendTimestamp=t,o(e))},a.prototype.sendInspectId=function(e){this.send({cmd:"select",type:"viewer",content:JSON.stringify({id:e})})},a.prototype.sendSelectComponent=function(e){this.send({cmd:"select",type:"viewer",content:JSON.stringify({componentName:e})})},a.prototype.sendPulsingConnections=function(e){var t=[];Object.keys(e).forEach((function(n){var o=e[n];t=t.concat(o.connections)})),this.send({cmd:"connectiondebugpulse",type:"viewer",content:JSON.stringify({connectionsToPulse:t})})},a.prototype.sendDebugInspectorValues=function(e){this.send({cmd:"debuginspectorvalues",type:"viewer",content:{inspectors:e}})},a.prototype.sendConnectionValue=function(e,t){this.send({cmd:"connectionValue",type:"viewer",content:{connectionId:e,value:t}})};const l={};a.prototype.sendDynamicPorts=function(e,t,n){var o=JSON.stringify(t);if(l[e]!==o){if(l[e]&&t&&n&&n.detectRenamed){var i=Array.isArray(n.detectRenamed)?n.detectRenamed:[n.detectRenamed],r=[];i.forEach((n=>{var o=JSON.parse(l[e]),i=[].concat(t);n.prefix&&(o=o.filter((e=>e.name.startsWith(n.prefix))),i=i.filter((e=>e.name.startsWith(n.prefix)))),n.plug&&(o=o.filter((e=>e.plug===n.plug)),i=i.filter((e=>e.plug===n.plug))),i=i.map((e=>e.name.substring((n.prefix||"").length)));var s=function(e,t){if(e&&t&&e.length===t.length){for(var n={},o=0;o<e.length;o++){if(-1===t.indexOf(e[o])){if(n.before)return;n.before=e[o]}if(-1===e.indexOf(t[o])){if(n.after)return;n.after=t[o]}}return n.before&&n.after?n:void 0}}(o=o.map((e=>e.name.substring((n.prefix||"").length))),i);s&&r.push({plug:n.plug,patterns:[(n.prefix||"")+"{{*}}"],before:s.before,after:s.after})})),r.length>0&&(n.renamed=r),delete n.detectRenamed}l[e]=o,this.send({cmd:"instanceports",type:"viewer",content:JSON.stringify({nodeid:e,ports:t,options:n})})}},a.prototype.sendWarning=function(e,t,n,o){this.activeWarnings.setWarning(t,n,o)&&this.send({cmd:"showwarning",type:"viewer",content:JSON.stringify({componentName:e,nodeId:t,key:n,warning:o})})},a.prototype.clearWarning=function(e,t,n){this.activeWarnings.clearWarning(t,n)&&this.send({cmd:"showwarning",type:"viewer",content:JSON.stringify({componentName:e,nodeId:t,key:n,warning:void 0})})},a.prototype.clearWarnings=function(e,t){this.activeWarnings.clearWarnings(t)&&this.send({cmd:"clearwarnings",type:"viewer",content:JSON.stringify({componentName:e,nodeId:t})})},a.prototype.sendPatches=function(e){this.send({cmd:"patchproject",type:"viewer",content:JSON.stringify(e)})},a.prototype.requestFullExport=function(){this.send({cmd:"register",type:"viewer"})},a.prototype.requestNoodlModules=function(){this.send({cmd:"getNoodlModules",type:"viewer"})};var u={};a.prototype.sendServiceRequest=function(e,t){e.token=r(),e.clientId=this.clientId,u[e.token]=t,this.send(e)},a.prototype.close=function(){this.reconnectOnClose=!1,!1!==this.isConnected()&&this.socket.close()},a.prototype.sendNodeLibrary=function(e){this.send({cmd:"nodelibrary",type:"viewer",runtimeType:this.runtimeType,content:e,clientId:this.clientId})},a.prototype.sendComponentMetadata=function(e,t,n){this.send({cmd:"componentMetadata",type:"viewer",content:JSON.stringify({componentName:e,key:t,data:n})})},a.prototype.sendProjectMetadata=function(e,t){this.send({cmd:"projectMetadata",type:"viewer",content:JSON.stringify({key:e,data:t})})},e.exports=a},6416:e=>{"use strict";function t(e,t){const n=new Set(t);return e.filter((e=>!n.has(e)))}e.exports={handleEvent:async function(e,n,o){function i(n,o){var i={},s={};o.forEach((function(e){e&&"outputs"===e.plug&&(e.plug="output"),"input"!==e.plug&&"input/output"!==e.plug||(i[e.name]=e),"output"!==e.plug&&"input/output"!==e.plug||(s[e.name]=e)}));var a=Object.keys(n.getInputPorts()),l=t(a,Object.keys(i)),u=t(Object.keys(i),a);n.updateInputPortTypes(i),l.forEach(n.removeInputPortWithName.bind(n)),u.forEach((function(t){n.addInputPort(i[t]),n.parameters&&n.parameters.hasOwnProperty(t)&&r(e.rootComponent.nodeScope,n,t,n.parameters[t])})),n.updateOutputPortTypes(s);var d=Object.keys(n.getOutputPorts()),c=t(d,Object.keys(s)),p=t(Object.keys(s),d);c.forEach(n.removeOutputPortWithName.bind(n)),p.forEach((function(e){n.addOutputPort(s[e])}))}function r(e,t,n,o){e.getNodesWithIdRecursive(t.id).forEach((function(e){e.queueInput(n,o)}))}var s;if(!o.componentName||(s=n.getComponentWithName(o.componentName))){o.port&&"outputs"===o.port.plug&&(o.port.plug="output");var a={nodeAdded:function(e){s.importEditorNodeData(e.model,e.parentId,e.childIndex)},nodeRemoved:async function(e){s.hasNodeWithId(e.model.id)&&await s.removeNodeWithId(e.model.id)},connectionAdded:function(e){s.addConnection(e.model)},connectionRemoved:function(t){s.removeConnection(t.model);var n=s.getNodeWithId(t.model.targetId);if(0===s.getConnectionsToPort(n.id,t.model.targetId).length){var o=n.parameters[t.model.targetPort];void 0===o&&(o=e.getDefaultValueForInput(n.type,t.model.targetPort)),r(e.rootComponent.nodeScope,n,t.model.targetPort,o)}},parameterChanged:function(e){const t=s.getNodeWithId(e.nodeId);if(void 0!==t){if(e.parameters){const n=new Set(Object.keys(e.parameters).concat(Object.keys(e.oldParameters)));for(const o of n)t.setParameter(o,e.parameters[o])}e.parameterName&&t.setParameter(e.parameterName,e.parameterValue,e.state)}else console.log("parameterChanged: Unknown node id",e)},nodeAttached:function(e){s.setNodeParent(s.getNodeWithId(e.nodeId),s.getNodeWithId(e.parentId),e.childIndex)},nodeDetached:function(e){s.setNodeParent(s.getNodeWithId(e.nodeId),null),s.addRootId(e.nodeId)},componentAdded:function(e){n.importComponentFromEditorData(e.model)},componentRemoved:async function(e){await n.removeComponentWithName(e.componentName)},rootAdded:function(e){s.addRootId(e.nodeId)},portAdded:function(t){var n=s.getNodeWithId(t.nodeId);"input"!==t.port.plug&&"input/output"!==t.port.plug||(n.addInputPort(t.port),n.parameters.hasOwnProperty(t.port)&&r(e.rootComponent.nodeScope,n,t.port,n.parameters[t.port])),"output"!==t.port.plug&&"input/output"!==t.port.plug||n.addOutputPort(t.port)},portRemoved:function(e){var t=s.getNodeWithId(e.nodeId);"input"!==e.port.plug&&"input/output"!==e.port.plug||t.removeInputPortWithName(e.port.name),"output"!==e.port.plug&&"input/output"!==e.port.plug||t.removeOutputPortWithName(e.port.name)},nodePortRenamed:function(e){"input"!==e.port.plug&&"input/output"!==e.port.plug||s.renameInputPortOnNodeWithId(e.nodeId,e.oldName,e.port.name),"output"!==e.port.plug&&"input/output"!==e.port.plug||s.renameOutputPortOnNodeWithId(e.nodeId,e.oldName,e.port.name);var t=s.getNodeWithId(e.nodeId);"Component Inputs"===t.type?(s.addInputPort(e.port),n.getNodesWithType(s.name).forEach((function(t){t.component.renameInputPortOnNodeWithId(t.id,e.oldName,e.port.name)})),s.removeInputPortWithName(e.oldName)):"Component Outputs"===t.type&&(s.addOutputPort(e.port),n.getNodesWithType(s.name).forEach((function(t){t.component.renameOutputPortOnNodeWithId(t.id,e.oldName,e.port.name)})),s.removeOutputPortWithName(e.oldName))},componentPortsUpdated:function(e){i(s,e.ports)},instancePortsChanged:function(e){s.hasNodeWithId(e.nodeId)&&i(s.getNodeWithId(e.nodeId),e.ports)},componentRenamed:function(e){n.renameComponent(e.oldName,e.newName)},settingsChanged:function(e){n.setSettings(e.settings)},metadataChanged:function(e){n.setMetaData(e.key,e.data)},componentMetadataChanged:function(e){const t=n.getComponentWithName(e.componentName);t&&t.setMetadata(e.key,e.data)},variantParametersChanged:function(t){if(t.variant)n.updateVariant(t.variant);else if(n.updateVariantParameter(t.variantName,t.variantTypeName,t.parameterName,t.parameterValue,t.state),void 0===t.parameterValue){const o=n.getVariant(t.variantTypeName,t.variantName);e.rootComponent.nodeScope.getAllNodesWithVariantRecursive(o).forEach((e=>{e.queueInput(t.parameterName,e.getParameter(t.parameterName))}))}},variantDeleted:function(e){n.deleteVariant(e.variantTypeName,e.variantName)},variantChanged:function(e){const t=s.getNodeWithId(e.nodeId),o=n.getVariant(t.type,e.variantName);t.setVariant(o)},variantRenamed:function(e){const t=n.getVariant(e.variantTypeName,e.oldVariantName);t&&(t.name=t.variantName)},defaultStateTransitionChanged:function(e){s.getNodeWithId(e.nodeId).setDefaultStateTransition(e.curve,e.state)},stateTransitionsChanged:function(e){const t=s.getNodeWithId(e.nodeId);e.parameterName&&t.setStateTransitionParamter(e.parameterName,e.curve,e.state)},variantDefaultStateTransitionChanged:function(e){n.updateVariantDefaultStateTransition(e.variantName,e.variantTypeName,e.curve,e.state)},variantStateTransitionsChanged:function(e){n.updateVariantStateTransition(e)},routerIndexChanged:function(e){n.routerIndex=e.data}};a.hasOwnProperty(o.type)?(await a[o.type](o),e.scheduleUpdate()):console.log("Unknown event",o)}}}},5627:e=>{"use strict";var t,n="object"==typeof Reflect?Reflect:null,o=n&&"function"==typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function r(){r.init.call(this)}e.exports=r,e.exports.once=function(e,t){return new Promise((function(n,o){function i(n){e.removeListener(t,r),o(n)}function r(){"function"==typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}f(e,t,r,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&f(e,"error",t,{once:!0})}(e,i)}))},r.EventEmitter=r,r.prototype._events=void 0,r.prototype._eventsCount=0,r.prototype._maxListeners=void 0;var s=10;function a(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?r.defaultMaxListeners:e._maxListeners}function u(e,t,n,o){var i,r,s,u;if(a(n),void 0===(r=e._events)?(r=e._events=Object.create(null),e._eventsCount=0):(void 0!==r.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),r=e._events),s=r[t]),void 0===s)s=r[t]=n,++e._eventsCount;else if("function"==typeof s?s=r[t]=o?[n,s]:[s,n]:o?s.unshift(n):s.push(n),(i=l(e))>0&&s.length>i&&!s.warned){s.warned=!0;var d=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");d.name="MaxListenersExceededWarning",d.emitter=e,d.type=t,d.count=s.length,u=d,console&&console.warn&&console.warn(u)}return e}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function c(e,t,n){var o={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=d.bind(o);return i.listener=n,o.wrapFn=i,i}function p(e,t,n){var o=e._events;if(void 0===o)return[];var i=o[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):g(i,i.length)}function h(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function g(e,t){for(var n=new Array(t),o=0;o<t;++o)n[o]=e[o];return n}function f(e,t,n,o){if("function"==typeof e.on)o.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(r){o.once&&e.removeEventListener(t,i),n(r)}))}}Object.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),r.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},r.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},r.prototype.getMaxListeners=function(){return l(this)},r.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i="error"===e,r=this._events;if(void 0!==r)i=i&&void 0===r.error;else if(!i)return!1;if(i){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var l=r[e];if(void 0===l)return!1;if("function"==typeof l)o(l,this,t);else{var u=l.length,d=g(l,u);for(n=0;n<u;++n)o(d[n],this,t)}return!0},r.prototype.addListener=function(e,t){return u(this,e,t,!1)},r.prototype.on=r.prototype.addListener,r.prototype.prependListener=function(e,t){return u(this,e,t,!0)},r.prototype.once=function(e,t){return a(t),this.on(e,c(this,e,t)),this},r.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,c(this,e,t)),this},r.prototype.removeListener=function(e,t){var n,o,i,r,s;if(a(t),void 0===(o=this._events))return this;if(void 0===(n=o[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete o[e],o.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,r=n.length-1;r>=0;r--)if(n[r]===t||n[r].listener===t){s=n[r].listener,i=r;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(o[e]=n[0]),void 0!==o.removeListener&&this.emit("removeListener",e,s||t)}return this},r.prototype.off=r.prototype.removeListener,r.prototype.removeAllListeners=function(e){var t,n,o;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,r=Object.keys(n);for(o=0;o<r.length;++o)"removeListener"!==(i=r[o])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(o=t.length-1;o>=0;o--)this.removeListener(e,t[o]);return this},r.prototype.listeners=function(e){return p(this,e,!0)},r.prototype.rawListeners=function(e){return p(this,e,!1)},r.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):h.call(e,t)},r.prototype.listenerCount=h,r.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},9092:e=>{"use strict";function t(){this.listeners={},this.listenersWithRefs={}}t.prototype.on=function(e,t,n){n?(this.listenersWithRefs.hasOwnProperty(e)||(this.listenersWithRefs[e]=new Map),this.listenersWithRefs[e].get(n)||this.listenersWithRefs[e].set(n,[]),this.listenersWithRefs[e].get(n).push(t)):(this.listeners.hasOwnProperty(e)||(this.listeners[e]=[]),this.listeners[e].push(t))},t.prototype.removeListenersWithRef=function(e){Object.keys(this.listenersWithRefs).forEach((t=>{const n=this.listenersWithRefs[t];n.has(e)&&n.delete(e)}))},t.prototype.removeAllListeners=function(e){e?(delete this.listeners[e],delete this.listenersWithRefs[e]):(this.listeners={},this.listenersWithRefs={})},t.prototype.emit=async function(e,t){const n=this.listeners[e];if(n)for(let e=0;e<n.length;e++){const o=n[e];await Promise.resolve(o.call(null,t))}const o=this.listenersWithRefs[e];if(o)for(const[e,n]of o)for(const o of n)await Promise.resolve(o.call(e,t))},e.exports=t},7662:e=>{e.exports=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}},5995:(e,t,n)=>{"use strict";const o=n(3839),{getAbsoluteUrl:i}=n(5722);var r={};function s(e,t){this.inputs={},this.outputs={},this.error=void 0,this.code=e;const n=t?t.node:void 0;this._initializeAPIs();var o=r[e];if(!o)try{o=new Function(["define","script","Node","Component"],s.getCodePrefix()+e),r[e]=o}catch(e){this.error=e.message,console.error(e)}if(o)try{o(this.define.bind(this),this.script.bind(this),this.apis.Node,n?s.getComponentScopeForNode(n):{}),this._afterSourced()}catch(e){this.error=e.message,console.error(e)}}s.prototype.define=function(e){this.inputs=e.inputs||{},this.outputs=e.outputs||{},this.setup=e.setup,this.change=e.run||e.change,this.destroy=e.destroy,this.definedObject=e},s.prototype.script=function(e){var t=function(e){var t={inputs:e.inputs||{},outputs:e.outputs||{},setup:function(t,n){if(this.inputs=t,this.outputs=n,this.setOutputs=function(e){for(var t in e)this.outputs[t]=e[t],this.flagOutputDirty(t)},e.methods)for(var o in e.methods)this[o]=e.methods[o];e.setup&&e.setup.apply(this)},destroy:function(t,n){this.inputs=t,this.outputs=n,e.destroy&&e.destroy.apply(this)},change:function(t,n){this.inputs=t,this.outputs=n;var o=this._oldInputs||{};if(e.changed)for(var i in t)if(t[i]!==o[i]){var r=e.changed[i];"function"==typeof r&&r.apply(this,[t[i],o[i]])}this._oldInputs=Object.assign({},t)}};if(e.signals)for(var n in e.signals)t[n]=e.signals[n],t.inputs[n]="signal";return t}(e);this.inputs=t.inputs||{},this.outputs=t.outputs||{},this.setup=t.setup,this.change=t.run||t.change,this.destroy=t.destroy,this.definedObject=t},s.prototype._initializeAPIs=function(){this.apis={},this.apis.Node={Inputs:{},Outputs:{},Signals:{},Setters:{}}},s.prototype._afterSourced=function(){if(void 0===this.definedObject){var e=this.apis.Node;if(this.inputs=Object.assign({},e.Inputs||{}),this.outputs=Object.assign({},e.Outputs||{}),this.setup=function(t,n){const o=this;e.setOutputs=function(e){for(var t in e)n[t]=e[t],o.flagOutputDirty(t)},e.OnInit&&e.OnInit.apply(this)},this.destroy=e.OnDestroy||this.destory,this.change=(t,n,o)=>{for(var i in o)"function"==typeof e.Setters[i]&&e.Setters[i](t[i]);"function"==typeof e.OnInputsChanged&&e.OnInputsChanged()},this.definedObject={inputs:this.inputs,outputs:this.outputs,setup:this.setup,destroy:this.destroy,change:this.change},void 0!==e.Signals)for(var t in e.Signals)"function"==typeof e.Signals[t]&&(this.inputs[t]="signal",this.definedObject[t]=e.Signals[t])}},s.createFromCode=function(e,t){return new s(e,t)},s.createFromURL=function(e,t,n){e=i(e);var o=new window.XMLHttpRequest;o.open("GET",e,!0),o.onreadystatechange=function(){4!==this.readyState&&this.readyState!==XMLHttpRequest.DONE||t(new s(this.response))},o.onerror=function(){console.log("Failed to request",e)},o.send()},s.parseAndAddPortsFromScript=function(e,t,n){function o(e,n){if(null==e)return;const o={};for(const t of e){let e=t[1];void 0!==e&&(o[e]=!0)}Object.keys(o).forEach((e=>{var o;("string"==typeof(o={name:n.prefix+e,plug:n.plug})?void 0===t.find((e=>e.name===o)):void 0===t.find((e=>e.name===o.name&&e.plug===o.plug)))&&t.push({name:n.prefix+e,displayName:e,plug:n.plug,type:n.type,group:n.group})}))}n.skipInputs||(o(e.matchAll(/Inputs\.([A-Za-z0-9_]+)/g),{type:n.inputType||"*",plug:"input",group:n.inputGroup||"Inputs",prefix:n.inputPrefix||""}),o(e.matchAll(/Inputs\s*\[\s*(?:'|")(.*)(?:'|")\s*\]/g),{type:n.inputType||"*",plug:"inputs",group:n.inputGroup||"Inputs",prefix:n.inputPrefix||""})),n.skipOutputs||(n.skipOutputSignals||(o(e.matchAll(/Outputs\.([A-Za-z0-9]+)\s*\(\s*\)/g),{type:"signal",plug:"output",group:"Outputs",prefix:n.outputPrefix||""}),o(e.matchAll(/Outputs\s*\[\s*(?:'|")(.*)(?:'|")\s*\]\(\s*\)/g),{type:"signal",plug:"output",group:"Outputs",prefix:n.outputPrefix||""})),n.skipRegularOutputs||(o(e.matchAll(/Outputs\.([A-Za-z0-9_]+)/g),{type:"*",plug:"output",group:"Outputs",prefix:n.outputPrefix||""}),o(e.matchAll(/Outputs\s*\[\s*\"([^\"]*)\"\s*\]/g),{type:"*",plug:"output",group:"Outputs",prefix:n.outputPrefix||""})))},s.prototype.getPorts=function(){var e=[],t=this;return Object.keys(this.inputs).forEach((function(n){var o=t.inputs[n],i={name:n,plug:"input"};if("string"==typeof o)i.type={name:o},i.group="Inputs";else for(var r in o)i[r]=o[r];e.push(i)})),Object.keys(this.outputs).forEach((function(n){e.push({name:n,type:{name:t.outputs[n]},plug:"output",group:"Outputs"})})),s.parseAndAddPortsFromScript(this.code,e,{}),e};const a={};s.getComponentScopeForNode=function(e){const t=e.nodeScope.componentOwner.getInstanceId();if(void 0===a[t]){a[t]={};const n=(e.nodeScope.modelScope||o).get("componentState"+t);a[t].Object=n}const n=function(e){const t=function e(t){let n;if(t.getRoots().length>0){const e=t.getRoots()[0];e.getVisualParentNode?e.getVisualParentNode()&&(n=e.getVisualParentNode().nodeScope.componentOwner):e.parentNodeScope&&(n=t.parentNodeScope.componentOwner)}else t.parentNodeScope&&(n=t.parentNodeScope.componentOwner);if(n&&n.nodeScope&&n.nodeScope.componentOwner!==t)return n.nodeScope.getNodesWithType("net.noodl.ComponentObject").length>0||n.nodeScope.getNodesWithType("Component State").length>0?n:e(n)}(e.nodeScope.componentOwner);if(t)return"componentState"+t.getInstanceId()}(e),i=void 0!==n?(e.nodeScope.modelScope||o).get(n):void 0;return a[t].ParentObject=i,a[t].RepeaterObject=function(e){for(var t=e.nodeScope.componentOwner;void 0!==t&&void 0===t._forEachModel&&t.parentNodeScope;)t=t.parentNodeScope.componentOwner;return void 0!==t?t._forEachModel:void 0}(e),a[t]},s.getCodePrefix=function(){return"const Script = (typeof Node !== 'undefined')?Node:undefined;\n"},s.createNoodlAPI=function(){return"undefined"!=typeof window&&void 0!==window.Noodl?window.Noodl:{}},e.exports=s},3839:e=>{function t(e,t){this.id=e,this.data=t}const n=t._models={},o={},i={get:function(e,t,n){return"function"==typeof e[t]?e[t].bind(e):t in e?Reflect.get(e,t,n):e.get(t)},set:function(e,t,n){if("_class"===t)e._class=n;else{if("id"===t)return console.log(`Noodl.Object warning: id is readonly (Id is ${e.id}, trying to set to ${n})`),!0;e.set(t,n)}return!0},ownKeys:e=>Reflect.ownKeys(e.data),getOwnPropertyDescriptor:(e,t)=>Object.getOwnPropertyDescriptor(e.data,t)};function r(e){if(0===e)throw new Error("Zero-length randomString is useless.");let t="";for(let n=0;n<e;++n)t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789"[Math.floor(65536*(1+Math.random()))%62];return t}t.get=function(e){return void 0===e&&(e=t.guid()),n[e]||(n[e]=new t(e,{}),o[e]=new Proxy(n[e],i)),o[e]},t.create=function(e){var n=e||{},o=t.get(n.id);for(var i in n)"id"!==i&&o.set(i,n[i]);return o},t.exists=function(e){return void 0!==n[e]},t.instanceOf=function(e){return e instanceof t||e.target instanceof t},t.guid=function(){return r(10)},t.prototype.on=function(e,t){this.listeners||(this.listeners={}),this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},t.prototype.off=function(e,t){if(this.listeners&&this.listeners[e]){var n=this.listeners[e].indexOf(t);-1!==n&&this.listeners[e].splice(n,1)}},t.prototype.notify=function(e,t){if(this.listeners&&this.listeners[e])for(var n=this.listeners[e].slice(),o=0;o<n.length;o++)n[o](t)},t.prototype.setAll=function(e){for(var t in e)if("id"!==t&&this.data[t]!==e[t]){var n=this.data[t];this.data[t]=e[t],this.notify("change",{name:t,value:e[t],old:n})}},t.prototype.fill=function(e=null){for(const t in this.data){if("id"===t)continue;const n=this.data[t];this.data[t]=e,this.notify("change",{name:t,value:this.data[t],old:n})}},t.prototype.set=function(e,n,o){if(o&&o.resolve&&-1!==e.indexOf(".")){for(var i=e.split("."),r=this,s=0;s<i.length-1;s++){var a=r.get(i[s]);if(!t.instanceOf(a))return;r=a}return void r.set(i[i.length-1],n)}const l=o&&o.forceChange;var u=this.data[e];this.data[e]=n,(l||u!==n)&&(!o||!o.silent)&&this.notify("change",{name:e,value:n,old:u})},t.prototype.getId=function(){return this.id},t.prototype.get=function(e,n){if(n&&n.resolve&&-1!==e.indexOf(".")){for(var o=e.split("."),i=this,r=0;r<o.length-1;r++){var s=i.get(o[r]);if(!t.instanceOf(s))return;i=s}return i.get(o[o.length-1])}return this.data[e]},t.prototype.toJSON=function(){return Object.assign({},this.data,{id:this.id})},t.Scope=function(){this.models={},this.proxies={}},t.Scope.prototype.get=function(e){return void 0===e&&(e=t.guid()),this.models[e]||(this.models[e]=new t(e,{}),this.proxies[e]=new Proxy(this.models[e],i)),this.proxies[e]},t.Scope.prototype.create=function(e){var t=e||{},n=this.get(t.id);for(var o in t)"id"!==o&&n.set(o,t[o]);return n},t.Scope.prototype.exists=function(e){return void 0!==this.models[e]},t.Scope.prototype.instanceOf=function(e){return e instanceof t||e.target instanceof t},t.Scope.prototype.guid=function(){return r(10)},t.Scope.prototype.reset=function(){this.models={},this.proxies={},delete this._cloudStore},e.exports=t},7863:(e,t,n)=>{"use strict";var o=n(6371),i=n(9092);function r(e){i.call(this),this.name=e,this.nodes=[],this.connections=[],this.roots=[],this.inputPorts={},this.outputPorts={},this.metadata={}}r.prototype=Object.create(i.prototype),r.prototype.addNode=async function(e){e.component=this,this.nodes[e.id]=e,await this.emit("nodeAdded",e)},r.prototype.hasNodeWithId=function(e){return void 0!==this.getNodeWithId(e)},r.prototype.getNodeWithId=function(e){return this.nodes[e]},r.prototype.getAllNodes=function(){return Object.values(this.nodes)},r.prototype.getNodesWithType=function(e){var t=[],n=this;return Object.keys(this.nodes).forEach((function(o){var i=n.nodes[o];i.type===e&&t.push(i)})),t},r.prototype.addConnection=function(e){if(this.connections.push(e),this.emit("connectionAdded",e),e.targetId){const t=this.getNodeWithId(e.targetId);t&&t.emit("inputConnectionAdded",e)}},r.prototype.removeConnection=function(e){const t=this.connections.findIndex((t=>t.sourceId===e.sourceId&&t.sourcePort===e.sourcePort&&t.targetId===e.targetId&&t.targetPort===e.targetPort));if(-1!==t){if(this.connections.splice(t,1),this.emit("connectionRemoved",e),e.targetId){const t=this.getNodeWithId(e.targetId);t&&t.emit("inputConnectionRemoved",e)}}else console.log("Connection doesn't exist",e)},r.prototype.getConnectionsFromPort=function(e,t){return this.connections.filter((function(n){return n.sourceId===e&&n.sourcePort===t}))},r.prototype.getConnectionsToPort=function(e,t){return this.connections.filter((function(n){return n.targetId===e&&n.targetPort===t}))},r.prototype.getConnectionsFrom=function(e){return this.connections.filter((function(t){return t.sourceId===e}))},r.prototype.getConnectionsTo=function(e){return this.connections.filter((function(t){return t.targetId===e}))},r.prototype.addRootId=function(e){-1===this.roots.indexOf(e)&&(this.roots.push(e),this.emit("rootAdded",e))},r.prototype.removeRootId=function(e){const t=this.roots.indexOf(e);-1!==t&&(this.roots.splice(t,1),this.emit("rootRemoved",e))},r.prototype.getRoots=function(){return this.roots},r.prototype.removeNodeWithId=async function(e){const t=this.getNodeWithId(e);if(!t)return console.warn("ERROR: Attempted to remove non-existing node with ID:",e),!1;for(;t.children.length>0;){const e=t.children[0];await this.removeNodeWithId(e.id)||t.children.shift()}const n=this.getConnectionsTo(e).concat(this.getConnectionsFrom(e));for(let e=0;e<n.length;e++)this.removeConnection(n[e]);return this.setNodeParent(t,null),-1!==this.roots.indexOf(t.id)&&this.removeRootId(t.id),await this.emit("nodeRemoved",t),t.removeAllListeners(),delete this.nodes[e],await this.emit("nodeWasRemoved",t),!0},r.prototype.getAllConnections=function(){return this.connections},r.prototype.getInputPorts=function(){return this.inputPorts},r.prototype.getOutputPorts=function(){return this.outputPorts},r.prototype.addInputPort=function(e){this.inputPorts[e.name]=e,this.emit("inputPortAdded",e)},r.prototype.addOutputPort=function(e){this.outputPorts[e.name]=e,this.emit("outputPortAdded",e)},r.prototype.removeOutputPortWithName=function(e){if(this.outputPorts.hasOwnProperty(e)){var t=this.outputPorts[e];delete this.outputPorts[e],this.emit("outputPortRemoved",t)}},r.prototype.removeInputPortWithName=function(e){if(this.inputPorts.hasOwnProperty(e)){var t=this.inputPorts[e];delete this.inputPorts[e],this.emit("inputPortRemoved",t)}},r.prototype.updateInputPortTypes=function(e){var t=!1;for(var n in e)void 0!==this.inputPorts[n]&&(this.inputPorts[n].type=e[n].type,t=!0);t&&this.emit("inputPortTypesUpdated")},r.prototype.updateOutputPortTypes=function(e){var t=!1;for(var n in e)void 0!==this.outputPorts[n]&&(this.outputPorts[n].type=e[n].type,t=!0);t&&this.emit("outputPortTypesUpdated")},r.prototype.renameInputPortOnNodeWithId=function(e,t,n){var o=this.getConnectionsToPort(e,t);o.forEach(this.removeConnection.bind(this));var i=this.getNodeWithId(e),r={...i.getInputPort(t)};r&&(i.removeInputPortWithName(t),r.name=n,i.addInputPort(r)),o.forEach((function(e){e.targetPort=n})),o.forEach(this.addConnection.bind(this))},r.prototype.renameOutputPortOnNodeWithId=function(e,t,n){var o=this.getConnectionsFromPort(e,t);o.forEach(this.removeConnection.bind(this));var i=this.getNodeWithId(e),r={...i.getOutputPort(t)};i.removeOutputPortWithName(t),r.name=n,i.addOutputPort(r),o.forEach((function(e){e.sourcePort=n})),o.forEach(this.addConnection.bind(this))},r.prototype.setNodeParent=function(e,t,n){-1!==this.roots.indexOf(e.id)&&this.removeRootId(e.id),e.parent&&(this.emit("nodeParentWillBeRemoved",e),e.parent.removeChild(e)),e.emit("parentUpdated",t),t&&(t.addChild(e,n),this.emit("nodeParentUpdated",e))},r.prototype.importEditorNodeData=async function(e,t,n){var i=o.createFromExportData(e);if(await this.addNode(i),t&&this.setNodeParent(i,this.getNodeWithId(t),n),e.children)for(let t=0;t<e.children.length;t++){const n=e.children[t];await this.importEditorNodeData(n,i.id,t)}},r.prototype.reset=async function(){for(;this.roots.length;)await this.removeNodeWithId(this.roots[0]);for(const e of this.nodes)this.hasNodeWithId(e)&&await this.removeNodeWithId(e);if(this.nodes.length>0)throw new Error("Not all nodes were removed during a reset");if(this.connections.length>0)throw new Error("Not all connections were removed during a reset")},r.prototype.rename=function(e){var t=this.name;this.name=e,this.emit("renamed",{oldName:t,newName:e})},r.prototype.setMetadata=function(e,t){this.metadata[e]=t},r.prototype.getMetadata=function(e){return e?this.metadata[e]:this.metadata},r.createFromExportData=async function(e){var t=new r(e.name);if(e.metadata)for(const n in e.metadata)t.setMetadata(n,e.metadata[n]);if(e.ports&&e.ports.forEach((function(e){"input"!==e.plug&&"input/output"!==e.plug||t.addInputPort(e),"output"!==e.plug&&"input/output"!==e.plug||t.addOutputPort(e)})),e.nodes)for(const n of e.nodes)await t.importEditorNodeData(n);return e.connections&&e.connections.forEach((e=>t.addConnection(e))),e.roots&&e.roots.forEach((e=>t.addRootId(e))),t},e.exports=r},9397:(e,t,n)=>{"use strict";var o=n(7863),i=n(9092);function r(){i.call(this),this.components={},this.settings={},this.metadata={}}r.prototype=Object.create(i.prototype),r.prototype.importComponentFromEditorData=async function(e){var t=await o.createFromExportData(e);this.addComponent(t)},r.prototype.getBundleContainingComponent=function(e){return this.componentToBundleMap.get(e)},r.prototype.getBundlesContainingSheet=function(e){const t=new Set;for(const n of this.componentToBundleMap.keys()){const o=0!==n.indexOf("/#");(o&&"Default"===e||!o&&0===n.indexOf("/#"+e))&&t.add(this.componentToBundleMap.get(n))}return Array.from(t)},r.prototype.getBundleDependencies=function(e){const t=new Set,n=e=>{const o=this.componentIndex[e];for(const e of o.dependencies)t.has(e)||(t.add(e),n(e))};return n(e),Array.from(t)},r.prototype.importEditorData=async function(e){this.componentIndex=e.componentIndex,this.routerIndex=e.routerIndex,this.componentToBundleMap=new Map;for(const t in e.componentIndex){const n=e.componentIndex[t];for(const e of n.components)this.componentToBundleMap.set(e,t)}this.variants=e.variants||[],e.settings&&this.setSettings(e.settings),e.metadata&&this.setAllMetaData(e.metadata);for(const t of e.components)await this.importComponentFromEditorData(t);this.setRootComponentName(e.rootComponent)},r.prototype.setRootComponentName=function(e){this.rootComponent=e,this.emit("rootComponentNameUpdated",e)},r.prototype.getNodesWithType=function(e){for(var t=[],n=Object.keys(this.components),o=0;o<n.length;o++){var i=this.components[n[o]];t=t.concat(i.getNodesWithType(e))}return t},r.prototype.getComponentWithName=function(e){return this.components[e]},r.prototype.hasComponentWithName=function(e){return!!this.components[e]},r.prototype.getAllComponents=function(){return Object.keys(this.components).map((e=>this.components[e]))},r.prototype.getAllNodes=function(){for(var e=[],t=Object.keys(this.components),n=0;n<t.length;n++){var o=this.components[t[n]];e=e.concat(o.getAllNodes())}return e},r.prototype.addComponent=function(e){this.components[e.name]=e,this.getNodesWithType(e.name).forEach(this._addComponentPorts.bind(this)),e.getAllNodes().forEach(this._onNodeAdded.bind(this)),e.on("nodeAdded",this._onNodeAdded.bind(this),this),e.on("nodeRemoved",this._onNodeRemoved.bind(this),this),e.on("nodeWasRemoved",this._onNodeWasRemoved.bind(this),this),this.emit("componentAdded",e)},r.prototype.removeComponentWithName=async function(e){if(!1!==this.components.hasOwnProperty(e)){var t=this.components[e];await t.reset(),t.removeAllListeners(),delete this.components[t.name],this.emit("componentRemoved",t)}else console.error("GraphModel: Component with name "+e+" not in graph")},r.prototype.renameComponent=function(e,t){if(!1!==this.components.hasOwnProperty(e)){this.getNodesWithType(e).forEach((function(e){e.type=t}));var n=this.components[e];n.rename(t),delete this.components[e],this.components[t]=n,this.emit("componentRenamed",n)}else console.error("GraphModel: Component with name "+e+" not in graph")},r.prototype._addComponentPorts=function(e){if(this.components.hasOwnProperty(e.type)){var t=this.components[e.type];const n=t.getInputPorts(),o=t.getOutputPorts();Object.keys(n).forEach((t=>{e.addInputPort(n[t])})),Object.keys(o).forEach((t=>{e.addOutputPort(o[t])}))}},r.prototype._onNodeAdded=function(e){this._addComponentPorts(e),this.emit("nodeAdded",e),this.emit("nodeAdded."+e.type,e)},r.prototype._onNodeRemoved=function(e){this.emit("nodeRemoved",e),this.emit("nodeRemoved."+e.type,e)},r.prototype._onNodeWasRemoved=function(e){this.emit("nodeWasRemoved",e),this.emit("nodeWasRemoved."+e.type,e)},r.prototype.reset=async function(){for(const e of Object.keys(this.components))await this.removeComponentWithName(e);this.setSettings({})},r.prototype.isEmpty=function(){return 0===Object.keys(this.components).length},r.prototype.setSettings=function(e){this.settings=e,this.emit("projectSettingsChanged",e)},r.prototype.getSettings=function(){return this.settings},r.prototype.setAllMetaData=function(e){for(const t in e)this.setMetaData(t,e[t])},r.prototype.setMetaData=function(e,t){this.metadata[e]&&JSON.stringify(this.metadata[e])===JSON.stringify(t)||(this.metadata[e]=t,this.emit("metadataChanged",{key:e,data:t}),this.emit("metadataChanged."+e,t))},r.prototype.getMetaData=function(e){return e?this.metadata[e]:this.metadata},r.prototype.getVariants=function(){return this.variants||[]},r.prototype.getVariant=function(e,t){return this.variants.find((n=>n.name===t&&n.typename===e))},r.prototype.updateVariant=function(e){const t=this.variants.findIndex((t=>t.name===e.name&&t.typename===e.typename));-1!==t&&this.variants.splice(t,1),this.variants.push(e),this.emit("variantUpdated",e)},r.prototype.updateVariantParameter=function(e,t,n,o,i){const r=this.getVariant(t,e);r?(i?(r.stateParameters.hasOwnProperty(i)||(r.stateParameters[i]={}),void 0===o?delete r.stateParameters[i][n]:r.stateParameters[i][n]=o):void 0===o?delete r.parameters[n]:r.parameters[n]=o,this.emit("variantUpdated",r)):console.log("updateVariantParameter: can't find variant",e,t)},r.prototype.updateVariantDefaultStateTransition=function(e,t,n,o){const i=this.getVariant(t,e);i&&(i.defaultStateTransitions[o]=n,this.emit("variantUpdated",i))},r.prototype.updateVariantStateTransition=function(e){const{variantTypeName:t,variantName:n,state:o,parameterName:i,curve:r}=e,s=this.getVariant(t,n);s&&(s.stateTransitions[o]||(s.stateTransitions[o]={}),s.stateTransitions[o][i]=r)},r.prototype.deleteVariant=function(e,t){const n=this.variants.findIndex((n=>n.name===t&&n.typename===e));-1!==n&&this.variants.splice(n,1)},e.exports=r},6371:(e,t,n)=>{"use strict";var o=n(9092);function i(e,t){o.call(this),this.id=e,this.type=t,this.inputs=[],this.outputs=[],this.children=[],this.parameters={},this.inputPorts={},this.outputPorts={}}i.prototype=Object.create(o.prototype),i.prototype.setParameter=function(e,t,n){n?(this.stateParameters||(this.stateParameters={}),this.stateParameters[n]||(this.stateParameters[n]={}),void 0===t?delete this.stateParameters[n][e]:this.stateParameters[n][e]=t):void 0===t?delete this.parameters[e]:this.parameters[e]=t,this.emit("parameterUpdated",{name:e,value:t,state:n})},i.prototype.setParameters=function(e){Object.keys(e).forEach((t=>{this.setParameter(t,e[t])}))},i.prototype.setStateParameters=function(e){this.stateParameters=e},i.prototype.setStateTransitions=function(e){this.stateTransitions=e},i.prototype.setStateTransitionParamter=function(e,t,n){this.stateTransitions||(this.stateTransitions={}),t?this.stateTransitions[n][e]=t:delete this.stateTransitions[n][e]},i.prototype.setDefaultStateTransition=function(e,t){this.defaultStateTransitions||(this.defaultStateTransitions={}),this.defaultStateTransitions[t]=e},i.prototype.addInputPort=function(e){this.inputPorts[e.name]=e,this.emit("inputPortAdded",e)},i.prototype.getInputPort=function(e){return this.inputPorts[e]},i.prototype.getInputPorts=function(){return this.inputPorts},i.prototype.removeInputPortWithName=function(e){if(this.inputPorts.hasOwnProperty(e)){var t=this.inputPorts[e];delete this.inputPorts[e],this.emit("inputPortRemoved",t)}},i.prototype.updateInputPortTypes=function(e){var t=!1;for(var n in e)void 0!==this.inputPorts[n]&&(this.inputPorts[n].type=e[n].type,t=!0);t&&this.emit("inputPortTypesUpdated")},i.prototype.addOutputPort=function(e){this.outputPorts[e.name]=e,this.emit("outputPortAdded",e)},i.prototype.getOutputPort=function(e){return this.outputPorts[e]},i.prototype.getOutputPorts=function(){return this.outputPorts},i.prototype.removeOutputPortWithName=function(e){if(this.outputPorts.hasOwnProperty(e)){var t=this.outputPorts[e];delete this.outputPorts[e],this.emit("outputPortRemoved",t)}},i.prototype.updateOutputPortTypes=function(e){var t=!1;for(var n in e)void 0!==this.outputPorts[n]&&(this.outputPorts[n].type=e[n].type,t=!0);t&&this.emit("outputPortTypesUpdated")},i.prototype.addChild=function(e,t){e.parent=this,void 0===t?this.children.push(e):this.children.splice(t,0,e),this.emit("childAdded",e)},i.prototype.removeChild=function(e){e.parent=void 0;var t=this.children.indexOf(e);this.children.splice(t,1),this.emit("childRemoved",e)},i.prototype.reset=function(){this.removeAllListeners()},i.prototype.setVariant=function(e){this.variant=e,this.emit("variantUpdated",e)},i.createFromExportData=function(e){var t=new i(e.id,e.type);if(e.parameters&&t.setParameters(e.parameters),e.stateParameters&&t.setStateParameters(e.stateParameters),e.stateTransitions&&t.setStateTransitions(e.stateTransitions),e.defaultStateTransitions)for(const n in e.defaultStateTransitions)t.setDefaultStateTransition(e.defaultStateTransitions[n],n);return e.ports&&e.ports.forEach((function(e){"outputs"===e.plug&&(e.plug="output"),"input"!==e.plug&&"input/output"!==e.plug||t.addInputPort(e),"output"!==e.plug&&"input/output"!==e.plug||t.addOutputPort(e)})),e.variant&&t.setVariant(e.variant),t},e.exports=i},2487:(module,__unused_webpack_exports,__webpack_require__)=>{const OutputProperty=__webpack_require__(6454);function Node(e,t){this.id=t,this.context=e,this._dirty=!1,this._inputs={},this._inputValues={},this._outputs={},this._inputConnections={},this._outputList=[],this._isUpdating=!1,this._inputValuesQueue={},this._afterInputsHaveUpdatedCallbacks=[],this._internal={},this._signalsSentThisUpdate={},this._deleted=!1,this._deleteListeners=[],this._isFirstUpdate=!0,this._valuesFromConnections={},this.updateOnDirtyFlagging=!0}Node.prototype.getInputValue=function(e){return this._inputValues[e]},Node.prototype.registerInput=function(e,t){if(this.hasInput(e))throw new Error("Input property "+e+" already registered");if(this._inputs[e]=t,t.type&&t.type.units){const n=t.type.defaultUnit||t.type.units[0];this._inputValues[e]={value:t.default,type:n}}else t.hasOwnProperty("default")&&(this._inputValues[e]=t.default)},Node.prototype.deregisterInput=function(e){if(!1===this.hasInput(e))throw new Error("Input property "+e+" doesn't exist");delete this._inputs[e],delete this._inputValues[e]},Node.prototype.registerInputs=function(e){for(const t in e)this.registerInput(t,e[t])},Node.prototype.getInput=function(e){if(!1!==this.hasInput(e))return this._inputs[e];console.log("Node "+this.name+": Invalid input property "+e)},Node.prototype.hasInput=function(e){return e in this._inputs},Node.prototype.registerInputIfNeeded=function(){},Node.prototype.setInputValue=function(name,value){const input=this.getInput(name);if(!input)return void console.log("node doesn't have input",name);const currentInputValue=this._inputValues[name];if(!1===isNaN(value)&&currentInputValue&&currentInputValue.unit){const e=Object.assign({},currentInputValue);e.value=value,value=e}if(this._inputValues[name]=value,"color"===input.type&&this.context&&this.context.styles)value=this.context.styles.resolveColor(value);else if("array"===input.type&&"string"==typeof value)try{value=eval(value),this.context.editorConnection.clearWarning(this.nodeScope.componentOwner.name,this.id,"invalid-array-"+name)}catch(e){value=[],console.log(e),this.context.editorConnection&&this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"invalid-array-"+name,{showGlobally:!0,message:"Invalid array<br>"+e.toString()})}input.set.call(this,value)},Node.prototype.hasOutput=function(e){return e in this._outputs},Node.prototype.registerOutput=function(e,t){if(this.hasOutput(e))throw new Error("Output property "+e+" already registered");const n=new OutputProperty({owner:this,getter:t.get||t.getter,name:e,onFirstConnectionAdded:t.onFirstConnectionAdded,onLastConnectionRemoved:t.onLastConnectionRemoved});this._outputs[e]=n,this._outputList.push(n)},Node.prototype.deregisterOutput=function(e){if(!1===this.hasOutput(e))throw new Error("Output property "+e+" isn't registered");const t=this._outputs[e];if(t.hasConnections())throw new Error("Output property "+e+" has connections and can't be removed");delete this._outputs[e];var n=this._outputList.indexOf(t);this._outputList.splice(n,1)},Node.prototype.registerOutputs=function(e){for(var t in e)this.registerOutput(t,e[t])},Node.prototype.registerOutputIfNeeded=function(){},Node.prototype.getOutput=function(e){if(!1===this.hasOutput(e))throw new Error("Node "+this.name+" doesn't have a port named "+e);return this._outputs[e]},Node.prototype.connectInput=function(e,t,n){if(!1===this.hasInput(e))throw new Error("Invalid connection, input doesn't exist. Trying to connect from "+t.name+" output "+n+" to "+this.name+" input "+e);var o=t.getOutput(n);if(o.registerConnection(this,e),this._inputConnections[e]||(this._inputConnections[e]=[]),this._inputConnections[e].push(o),t._signalsSentThisUpdate[n])this._setValueFromConnection(e,!0),this._setValueFromConnection(e,!1);else{var i=o.value;void 0!==i&&(this._setValueFromConnection(e,i),this.context&&this.context.connectionSentValue(o,o.value))}this.flagDirty()},Node.prototype.removeInputConnection=function(e,t,n){if(!this._inputConnections[e])throw new Error("Node removeInputConnection: Input doesn't exist");const o=this._inputConnections[e];for(let i=0;i<o.length;i++){const r=o[i];if(r.owner.id===t&&r.name===n){o.splice(i,1),r.owner.getOutput(n).deregisterConnection(this,e);break}}0===o.length&&delete this._valuesFromConnections[e]},Node.prototype.isInputConnected=function(e){return!!this._inputConnections.hasOwnProperty(e)&&this._inputConnections[e].some((e=>"Component Inputs"!==e.owner.name||e.owner.nodeScope.componentOwner.isInputConnected(e.name)))},Node.prototype.update=function(){if(!this._isUpdating&&!1!==this._dirty){this._updatedAtIteration!==this.context.updateIteration&&(this._updatedAtIteration=this.context.updateIteration,this._updateIteration=0,this._cyclicLoop&&(this._cyclicLoop=!1)),this._isUpdating=!0;try{for(;this._dirty&&!this._cyclicLoop;){this._updateDependencies(),this._dirty=!1;const e=Object.keys(this._inputValuesQueue);let t=!0;for(;t&&!this._cyclicLoop;){t=!1;for(let n=0;n<e.length;n++){const o=e[n],i=this._inputValuesQueue[o];i.length>0&&(this.setInputValue(o,i.shift()),i.length>0&&(t=!0))}const n=this._afterInputsHaveUpdatedCallbacks;this._afterInputsHaveUpdatedCallbacks=[];for(let e=0;e<n.length;e++)n[e].call(this)}this._updateIteration++,this._updateIteration>=100&&(this._cyclicLoop=!0)}}catch(e){throw this._isUpdating=!1,e}this._cyclicLoop&&(this.context.scheduleNextFrame((()=>{this.context.nodeIsDirty(this)})),this.context.editorConnection&&!this._cyclicWarningSent&&this.context.isWarningTypeEnabled("cyclicLoops")&&(this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"cyclic-loop",{showGlobally:!0,message:"Cyclic loop detected"}),this._cyclicWarningSent=!0,console.log("cycle detected",{id:this.id,name:this.name,component:this.nodeScope.componentOwner.name}))),this._isFirstUpdate=!1,this._isUpdating=!1}},Node.prototype._updateDependencies=function(){for(var e in this._inputConnections)for(var t=this._inputConnections[e],n=0;n<t.length;++n)t[n].owner.update()},Node.prototype.flagDirty=function(){this._dirty||(this._dirty=!0,this.updateOnDirtyFlagging&&this._performDirtyUpdate())},Node.prototype._performDirtyUpdate=function(){this.context&&this.context.nodeIsDirty(this);for(var e=0;e<this._outputList.length;++e)this._outputList[e].flagDependeesDirty()},Node.prototype.sendValue=function(e,t){if(!1===this.hasOutput(e))return void console.log("Error: Node",this.name,"doesn't have a output named",e);if(void 0===t)return;const n=this.getOutput(e);n.sendValue(t),this.context&&this.context.connectionSentValue(n,t)},Node.prototype.flagOutputDirty=function(e){const t=this.getOutput(e);this.sendValue(e,t.value)},Node.prototype.flagAllOutputsDirty=function(){for(const e of this._outputList)this.sendValue(e.name,e.value)},Node.prototype.sendSignalOnOutput=function(e){if(!1===this.hasOutput(e))return void console.log("Error: Node",this.name,"doesn't have a output named",e);const t=this.getOutput(e);t.sendValue(!0),t.sendValue(!1),this._signalsSentThisUpdate[e]=!0,this.scheduleAfterInputsHaveUpdated((function(){this._signalsSentThisUpdate[e]=!1})),this.context&&this.context.connectionSentSignal(t)},Node.prototype._setValueFromConnection=function(e,t){this._valuesFromConnections[e]=t,this.queueInput(e,t)},Node.prototype._hasInputBeenSetFromAConnection=function(e){return this._valuesFromConnections.hasOwnProperty(e)},Node.prototype.queueInput=function(e,t){if(this._inputValuesQueue[e]||(this._inputValuesQueue[e]=[]),this._isFirstUpdate){const n=this._inputValuesQueue[e][0];!0===n||(n instanceof Object&&n.unit&&t instanceof Object==0&&(t={value:t,unit:n.unit}),this._inputValuesQueue[e].length=0)}this._inputValuesQueue[e].push(t),this.flagDirty()},Node.prototype.scheduleAfterInputsHaveUpdated=function(e){this._afterInputsHaveUpdatedCallbacks.push(e),this.flagDirty()},Node.prototype.setNodeModel=function(e){this.model=e,e.on("parameterUpdated",this._onNodeModelParameterUpdated,this),e.on("variantUpdated",this._onNodeModelVariantUpdated,this),e.on("inputPortRemoved",(e=>{this.hasInput(e.name)&&this.deregisterInput(e.name)}),this),e.on("outputPortRemoved",(e=>{this.hasOutput(e.name)&&this.deregisterOutput(e.name)}),this)},Node.prototype.addDeleteListener=function(e){this._deleteListeners.push(e)},Node.prototype._onNodeDeleted=function(){this.model&&(this.model.removeListenersWithRef(this),this.model=void 0),this._deleted=!0;for(const e of this._deleteListeners)e.call(this)},Node.prototype._onNodeModelParameterUpdated=function(e){if(this.registerInputIfNeeded(e.name),void 0!==e.value)if(e.state){if(!this._getVisualStates)return void console.log("Node has nos visual states, but got a parameter for state",e.state);-1!==this._getVisualStates().indexOf(e.state)&&this.queueInput(e.name,e.value)}else this.queueInput(e.name,e.value);else{let t;const n=this.variant;e.state?n&&n.stateParameters.hasOwnProperty(e.state)&&n.stateParameters[e.state].hasOwnProperty(e.name)?t=n.stateParameters[e.state][e.name]:this.model.parameters.hasOwnProperty(e.name)?t=this.model.parameters[e.name]:n&&n.parameters.hasOwnProperty(e.name)&&(t=n.parameters[e.name]):n&&n.parameters.hasOwnProperty(e.name)&&(t=n.parameters[e.name]),void 0===t&&(t=this.context.getDefaultValueForInput(this.model.type,e.name),this._resetReactVirtualDOM&&this._resetReactVirtualDOM()),this.queueInput(e.name,t)}},Node.prototype._onNodeModelVariantUpdated=function(e){this.setVariant(e)},module.exports=Node},480:(e,t,n)=>{"use strict";var o=n(5627),i=n(6365),r=n(3187);const s=n(84);function a(e){(e=e||{}).runningInEditor=!!e.hasOwnProperty("runningInEditor")&&e.runningInEditor,this._dirtyNodes=[],this.callbacksAfterUpdate=[],this.graphModel=e.graphModel,this.platform=e.platform,this.eventEmitter=new o,this.eventEmitter.setMaxListeners(1e6),this.eventSenderEmitter=new o,this.eventSenderEmitter.setMaxListeners(1e6),this.globalValues={},this.globalsEventEmitter=new o,this.globalsEventEmitter.setMaxListeners(1e6),this.runningInEditor=e.runningInEditor,this.currentFrameTime=0,this.frameNumber=0,this.updateIteration=0,this.nodeRegister=new i(this),this.timerScheduler=new r(this.scheduleUpdate.bind(this)),this.componentModels={},this.debugInspectorsEnabled=!1,this.connectionsToPulse={},this.connectionsToPulseChanged=!1,this.debugInspectors={},this.connectionPulsingCallbackScheduled=!1,this.editorConnection=e.editorConnection,this.rootComponent=void 0,this._outputHistory={},this._signalHistory={},this.warningTypes={},this.bundleFetchesInFlight=new Map,this.variants=new s({graphModel:this.graphModel,getNodeScope:()=>this.rootComponent?this.rootComponent.nodeScope:null}),this.editorConnection&&(this.editorConnection.on("debugInspectorsUpdated",(e=>{this.onDebugInspectorsUpdated(e)})),this.editorConnection.on("getConnectionValue",(({clientId:e,connectionId:t})=>{if(this.editorConnection.clientId!==e)return;const n=this._outputHistory[t];this.editorConnection.sendConnectionValue(t,n?n.value:void 0)})))}a.prototype.setRootComponent=function(e){this.rootComponent=e},a.prototype.getCurrentTime=function(){return this.platform.getCurrentTime()},a.prototype.onDebugInspectorsUpdated=function(e){this.debugInspectorsEnabled&&(e=e.map((e=>{if("connection"===e.type){const t=e.connection;e.id=t.fromId+t.fromProperty}else"node"===e.type&&(e.id=e.nodeId);return e})),this.debugInspectors={},e.forEach((e=>this.debugInspectors[e.id]=e)),this.sendDebugInspectorValues())},a.prototype.updateDirtyNodes=function(){var e,t,n=!0,o=0;for(this.updateIteration++,this.isUpdating=!0;n&&o<10;){var i=this._dirtyNodes;for(this._dirtyNodes=[],e=0,t=i.length;e<t;++e)try{i[e]._deleted||i[e].update()}catch(e){console.error(e,e.stack)}var r=this.callbacksAfterUpdate;for(this.callbacksAfterUpdate=[],e=0,t=r.length;e<t;e++)try{r[e]()}catch(e){console.error(e)}n=this.callbacksAfterUpdate.length>0||this._dirtyNodes.length>0,o++}this.isUpdating=!1},a.prototype.update=function(){this.frameNumber++,this.updateDirtyNodes(),this.timerScheduler.hasPendingTimers()&&(this.scheduleUpdate(),this.timerScheduler.runTimers(this.currentFrameTime)),this.debugInspectorsEnabled&&this.sendDebugInspectorValues()},a.prototype.reset=function(){this.eventEmitter.emit("applicationDataReloaded");var e=this.eventEmitter;["frameStart","frameEnd"].forEach((function(t){e.removeAllListeners(t)})),this.globalValues={},this._dirtyNodes.length=0,this.callbacksAfterUpdate.length=0,this.timerScheduler.runningTimers=[],this.timerScheduler.newTimers=[],this.rootComponent=void 0,this.clearDebugInspectors()},a.prototype.nodeIsDirty=function(e){this._dirtyNodes.push(e),this.scheduleUpdate()},a.prototype.scheduleUpdate=function(){this.eventEmitter.emit("scheduleUpdate")},a.prototype.scheduleAfterUpdate=function(e){this.callbacksAfterUpdate.push(e),this.scheduleUpdate()},a.prototype.scheduleNextFrame=function(e){this.eventEmitter.once("frameStart",e),this.scheduleUpdate()},a.prototype.setGlobalValue=function(e,t){this.globalValues[e]=t,this.globalsEventEmitter.emit(e)},a.prototype.getGlobalValue=function(e){return this.globalValues[e]},a.prototype.registerComponentModel=function(e){if(this.componentModels.hasOwnProperty(e.name))throw new Error("Duplicate component name "+e.name);this.componentModels[e.name]=e;var t=this;e.on("renamed",(function(n){delete t.componentModels[n.oldName],t.componentModels[n.newName]=e}),this)},a.prototype.deregisterComponentModel=function(e){this.componentModels.hasOwnProperty(e.name)&&(this.componentModels[e.name].removeListenersWithRef(this),delete this.componentModels[e.name])},a.prototype.fetchComponentBundle=async function(e){const t=async e=>{let t=`${Noodl.Env.BaseUrl||"/"}noodl_bundles/${e}.json`;const n=await fetch(t);if(404===n.status)throw new Error("Component not found "+e);const o=await n.json();for(const e of o)!1===this.graphModel.hasComponentWithName(e.name)&&await this.graphModel.importComponentFromEditorData(e)};if(this.bundleFetchesInFlight.has(e))await this.bundleFetchesInFlight.get(e);else{const n=t(e);this.bundleFetchesInFlight.set(e,n),await n}},a.prototype.getComponentModel=async function(e){if(!e)throw new Error("Component instance must have a name");if(!1===this.componentModels.hasOwnProperty(e)){const t=this.graphModel.getBundleContainingComponent(e);if(!t)throw new Error("Can't find component model for "+e);for(const e of this.graphModel.getBundleDependencies(t))this.fetchComponentBundle(e);await this.fetchComponentBundle(t)}return this.componentModels[e]},a.prototype.hasComponentModelWithName=function(e){return this.componentModels.hasOwnProperty(e)},a.prototype.createComponentInstanceNode=async function(e,t,o,i){var r=new(n(3657))(this,t,o);r.name=e;for(const e in i)r[e]=i[e];const s=await this.getComponentModel(e);return await r.setComponentModel(s),r},a.prototype._formatConnectionValue=function(e){if("object"==typeof e&&e&&e.constructor&&"Node"===e.constructor.name)e="<Node> "+e.name;else if("object"==typeof e&&"undefined"!=typeof window&&e instanceof HTMLElement)e=`DOM Node <${e.tagName}>`;else{if("string"==typeof e&&!e.startsWith("[Signal]"))return'"'+e+'"';if(Number.isNaN(e))return"NaN"}return e},a.prototype.connectionSentValue=function(e,t){if(!this.editorConnection||!this.editorConnection.isConnected()||!this.debugInspectorsEnabled)return;const n=this.getCurrentTime();if(this._outputHistory[e.id]={value:t,timestamp:n},this.connectionsToPulse.hasOwnProperty(e.id))return void(this.connectionsToPulse[e.id].timestamp=n);const o=[];e.connections.forEach((t=>{o.push(e.owner.id+e.name+t.node.id+t.inputPortName)})),this.connectionsToPulse[e.id]={timestamp:n,connections:o},this.connectionsToPulseChanged=!0,!1===this.connectionPulsingCallbackScheduled&&(this.connectionPulsingCallbackScheduled=!0,setTimeout(this.clearOldConnectionPulsing.bind(this),100))},a.prototype.connectionSentSignal=function(e){const t=e.id;this._signalHistory.hasOwnProperty(t)||(this._signalHistory[t]={count:0}),this._signalHistory[t].count++,this.connectionSentValue(e,"[Signal] Trigger count "+this._signalHistory[t].count)},a.prototype.clearDebugInspectors=function(){this.debugInspectors={},this.connectionsToPulse={},this.editorConnection.sendPulsingConnections(this.connectionsToPulse)},a.prototype.clearOldConnectionPulsing=function(){this.connectionPulsingCallbackScheduled=!1;var e=this.getCurrentTime(),t=this;Object.keys(this.connectionsToPulse).forEach((function(n){var o=t.connectionsToPulse[n];e-o.timestamp>100&&(t.connectionsToPulseChanged=!0,delete t.connectionsToPulse[n])})),this.connectionsToPulseChanged&&(this.connectionsToPulseChanged=!1,this.editorConnection.sendPulsingConnections(this.connectionsToPulse)),Object.keys(this.connectionsToPulse).length>0&&(this.connectionPulsingCallbackScheduled=!0,setTimeout(this.clearOldConnectionPulsing.bind(this),500))},a.prototype._getDebugInspectorValueForNode=function(e){if(!this.rootComponent)return;const t=this.rootComponent.nodeScope.getNodesWithIdRecursive(e),n=t[t.length-1];if(n&&n.getInspectInfo){const t=n.getInspectInfo();if(void 0!==t)return{type:"node",id:e,value:t}}},a.prototype.sendDebugInspectorValues=function(){const e=[];for(const t in this.debugInspectors){const n=this.debugInspectors[t];if("connection"===n.type&&this._outputHistory.hasOwnProperty(t)){const n=this._outputHistory[t].value;e.push({type:"connection",id:t,value:this._formatConnectionValue(n)})}else if("node"===n.type){const n=this._getDebugInspectorValueForNode(t);n&&e.push(n)}}e.length>0&&this.editorConnection.sendDebugInspectorValues(e),this.connectionsToPulseChanged&&(this.connectionsToPulseChanged=!1,this.editorConnection.sendPulsingConnections(this.connectionsToPulse))},a.prototype.setDebugInspectorsEnabled=function(e){this.debugInspectorsEnabled=e,this.editorConnection.debugInspectorsEnabled=e,e&&this.sendDebugInspectorValues()},a.prototype.sendGlobalEventFromEventSender=function(e,t){this.eventSenderEmitter.emit(e,t)},a.prototype.setPopupCallbacks=function({onShow:e,onClose:t}){this.onShowPopup=e,this.onClosePopup=t},a.prototype.showPopup=async function(e,t,n){if(!this.onShowPopup)return;const o=this.rootComponent.nodeScope,i=await o.createNode(e);for(const e in t)i.setInputValue(e,t[e]);i.popupParent=n?.senderNode||null;const r=o.createPrimitiveNode("Group");r.setInputValue("flexDirection","node"),r.setInputValue("cssClassName","noodl-popup");const s=this.graphModel.getSettings().bodyScroll;r.setInputValue("position",s?"fixed":"absolute");var a=i.nodeScope.getNodesWithType("NavigationClosePopup");if(a&&a.length>0)for(var l=0;l<a.length;l++)a[l]._setCloseCallback(((e,t)=>{this.scheduleNextFrame((()=>{o.hasNodeWithId(r.id)&&(this.onClosePopup(r),o.deleteNode(r),n&&n.onClosePopup&&n.onClosePopup(e,t))}))}));this.onShowPopup(r),requestAnimationFrame((()=>{r.addChild(i)}))},a.prototype.setWarningTypes=function(e){Object.assign(this.warningTypes,e)},a.prototype.isWarningTypeEnabled=function(e){return!this.warningTypes.hasOwnProperty(e)||!!this.warningTypes[e]},a.prototype.getDefaultValueForInput=function(e,t){if(!1===this.nodeRegister.hasNode(e))return;const n=this.nodeRegister.getNodeMetadata(e).inputs[t];return n?n.type.defaultUnit?{value:n.default,unit:n.type.defaultUnit}:n.default:void 0},e.exports=a},3157:(e,t,n)=>{const o=n(2487),i=n(6607);function r(e,t,n){const o=e.registerInputIfNeeded;e.registerInputIfNeeded=function(i){if(o&&o.call(e,i),e.hasInput(i)||!i.startsWith(t))return;const r=Number(i.slice(t.length+1));e.registerInput(i,{type:n.type,set:n.createSetter.call(e,r)})}}e.exports={defineNode:function(e){if(!e.category)throw new Error("Node must have a category");if(!e.name)throw new Error("Node must have a name");const t={inputs:{},outputs:{},category:e.category,dynamicports:e.dynamicports,exportDynamicPorts:e.exportDynamicPorts,useVariants:e.useVariants,allowChildren:e.allowChildren,allowChildrenWithCategory:e.allowChildrenWithCategory,singleton:e.singleton,connectionPanel:e.connectionPanel,allowAsChild:e.allowAsChild,visualStates:e.visualStates,panels:e.panels,color:e.color,usePortAsLabel:e.usePortAsLabel,portLabelTruncationMode:e.portLabelTruncationMode,name:e.name,displayNodeName:e.displayNodeName||e.displayName,deprecated:e.deprecated,haveComponentPorts:e.haveComponentPorts,version:e.version,module:e.module,docs:e.docs,allowAsExportRoot:e.allowAsExportRoot,nodeDoubleClickAction:e.nodeDoubleClickAction,searchTags:e.searchTags};e._internal=e._internal||{},e.prototypeExtensions=e.methods||e.prototypeExtensions||{},e.inputs=e.inputs||{},e.outputs=e.outputs||{},e.initialize=e.initialize||function(){};let n={};function s(e,t){o.call(this,e,t)}(function(e,t,n){Object.keys(n).forEach((function(o){!function(e,t,n,o){if(e.hasOwnProperty(n))throw new Error("Input property "+n+" already registered");o.set||o.valueChangedToTrue||(o.set=()=>{}),o.set&&(e[n]={set:o.set},["color","textStyle","array"].forEach((t=>{!o.type||o.type!==t&&o.type.name!==t||(e[n].type=t)}))),o.setUnitType&&(e[n].setUnitType=o.setUnitType),t.inputs[n]={displayName:o.displayName,editorName:o.editorName,group:o.group,type:o.type,default:o.default,index:o.index,exportToEditor:!o.hasOwnProperty("exportToEditor")||o.exportToEditor,inputPriority:o.inputPriority||0,tooltip:o.tooltip,tab:o.tab,popout:o.popout,allowVisualStates:o.allowVisualStates,nodeDoubleClickAction:o.nodeDoubleClickAction},o.valueChangedToTrue&&(t.inputs[n].type={name:"signal",allowConnectionsOnly:!0})}(e,t,o,n[o])}))})(n,t,e.inputs),function(e,t){Object.keys(t).forEach((function(n){var o=t[n];e.outputs[n]={displayName:o.displayName,editorName:o.editorName,group:o.group,type:o.type,index:o.index,exportToEditor:!o.hasOwnProperty("exportToEditor")||o.exportToEditor}}))}(t,e.outputs),Object.keys(e.prototypeExtensions).forEach((function(t){e.prototypeExtensions[t].value||(e.prototypeExtensions[t]={value:e.prototypeExtensions[t]})})),s.prototype=Object.create(o.prototype,e.prototypeExtensions),Object.defineProperty(s.prototype,"name",{value:e.name}),e.getInspectInfo&&(s.prototype.getInspectInfo=e.getInspectInfo),e.nodeScopeDidInitialize&&(s.prototype.nodeScopeDidInitialize=e.nodeScopeDidInitialize);const a=function(o,a,l){const u=new s(o,a);var d,c;return u._inputs=Object.create(n),Object.keys(e.inputs).forEach((function(t){var n=e.inputs[t];n.valueChangedToTrue&&(u._inputs[t]={set:i.createSetter({valueChangedToTrue:n.valueChangedToTrue})})})),Object.keys(e.outputs).forEach((function(t){var n=e.outputs[t];"signal"===n.type?u.registerOutput(t,{getter:function(){}}):u.registerOutput(t,n)})),e.numberedInputs&&function(e,t){for(const n of Object.keys(t))r(e,n,t[n])}(u,e.numberedInputs),u.nodeScope=l,d=u._inputValues,c=t.inputs,Object.keys(c).forEach((e=>{const t=c[e].default;void 0!==t&&(c[e].type.defaultUnit?d[e]={unit:c[e].type.defaultUnit,value:t}:d[e]=t)})),e.initialize.call(u),u};return a.metadata=t,e.numberedInputs&&function(e,t,n){const o=Object.keys(n);o.length&&(e.setupNumberedInputDynamicPorts=function(e,i){const r=e.editorConnection;function s(e){const t=o.map((t=>function(e,t,n){const o=e.component.getConnectionsTo(e.id).map((e=>e.targetPort)),i=Object.keys(e.parameters).concat(o).filter((e=>e.startsWith(t+" "))),r=(i.length?1+Math.max(...i.map((e=>Number(e.slice(t.length+1))))):0)+1,s=[];for(let e=0;e<r;e++){const o={name:t+" "+e,displayName:(n.displayPrefix||t)+" "+e,type:n.type,plug:"input",group:n.group};n.hasOwnProperty("index")&&(o.index=n.index+e),s.push(o)}return s}(e,t,n[t]))).flat();r.sendDynamicPorts(e.id,t)}r&&r.isRunningLocally()&&i.on("nodeAdded."+t,(e=>{s(e),e.on("parameterUpdated",(()=>{s(e)})),e.on("inputConnectionAdded",(()=>{s(e)})),e.on("inputConnectionRemoved",(()=>{s(e)}))}))})}(a,e.name,e.numberedInputs),a},extend:function e(t,n){for(var o in n)if("initialize"===o&&t.initialize){var i=t.initialize;t.initialize=function(){i.call(this),n.initialize.call(this)}}else n[o]&&n[o].constructor===Object?t[o]=e(t[o]||{},n[o]):n[o]&&n[o].constructor===Array&&t[o]&&t[o].constructor==Array?t[o]=t[o].concat(n[o]):t[o]=n[o];return t}}},511:e=>{"use strict";function t(e,t,n){var o={name:e,type:t.type,plug:n};return t.group&&(o.group=t.group),t.displayName&&(o.displayName=t.displayName),t.description&&(o.description=t.description),t.editorName&&(o.editorName=t.editorName),void 0!==t.default&&(o.default=t.default),t.hasOwnProperty("index")&&(o.index=t.index),t.tooltip&&(o.tooltip=t.tooltip),t.tab&&(o.tab=t.tab),t.popout&&(o.popout=t.popout),t.allowVisualStates&&(o.allowVisualStates=t.allowVisualStates),o}e.exports=function(e){var n={typecasts:[{from:"string",to:["number","boolean","image","color","enum","textStyle","dimension","array","object"]},{from:"boolean",to:["number","string","signal"]},{from:"number",to:["boolean","string","dimension"]},{from:"date",to:["string"]},{from:"signal",to:["boolean","number"]},{from:"image",to:[]},{from:"cloudfile",to:["string","image"]},{from:"color",to:[]},{from:"enum",to:[]},{from:"object",to:[]},{from:"domelement",to:[]},{from:"reference",to:[]},{from:"font",to:[]},{from:"textStyle",to:["string"]},{from:"collection",to:["array"]},{from:"array",to:["collection"]}],dynamicports:[{type:"conditionalports",name:"basic"},{type:"expand",name:"basic"}],colors:{nodes:{component:{base:"#643D8B",baseHighlighted:"#79559b",header:"#4E2877",headerHighlighted:"#643d8b",outline:"#4E2877",outlineHighlighted:"#b58900",text:"#dbd0e4"},visual:{base:"#315272",baseHighlighted:"#4d6784",header:"#173E5D",headerHighlighted:"#315272",outline:"#173E5D",outlineHighlighted:"#b58900",text:"#cfd5de"},data:{base:"#465524",baseHighlighted:"#5b6a37",header:"#314110",headerHighlighted:"#465524",outline:"#314110",outlineHighlighted:"#b58900",text:"#d2d6c5"},javascript:{base:"#7E3660",baseHighlighted:"#944e74",header:"#67214B",headerHighlighted:"#7e3660",outline:"#67214B",outlineHighlighted:"#d57bab",text:"#e4cfd9"},default:{base:"#4C4F59",baseHighlighted:"#62656e",header:"#373B45",headerHighlighted:"#4c4f59",outline:"#373B45",outlineHighlighted:"#b58900",text:"#d3d4d6"}},connections:{signal:{normal:"#006f82",highlighted:"#7ec2cf",pulsing:"#ffffff"},default:{normal:"#875d00",highlighted:"#e5ae32",pulsing:"#ffffff"}}},nodetypes:[{name:"Component Children",shortDesc:"This node is a placeholder for where children of this component will be inserted.",docs:"https://docs.noodl.net/nodes/component-utilities/component-children",color:"component",allowAsChild:!0,category:"Visual",haveComponentChildren:["Visual"]}]},o=Object.keys(e._constructors);o.forEach((function(o){var i=e._constructors[o].metadata,r={name:o,searchTags:i.searchTags};n.nodetypes.push(r),i.version&&(r.version=i.version),i.displayNodeName&&(r.displayNodeName=i.displayNodeName),i.nodeDoubleClickAction&&(r.nodeDoubleClickAction=i.nodeDoubleClickAction),i.shortDesc&&(r.shortDesc=i.shortDesc),i.module&&(r.module=i.module),i.deprecated&&(r.deprecated=!0),i.haveComponentPorts&&(r.haveComponentPorts=!0),"Visual"===i.category&&(r.allowAsChild=!0,r.allowAsExportRoot=!0,r.color="visual"),void 0!==i.allowAsExportRoot&&(r.allowAsExportRoot=i.allowAsExportRoot),i.allowChildren&&(r.allowChildrenWithCategory=["Visual"],r.color="visual"),i.allowChildrenWithCategory&&(r.allowChildrenWithCategory=i.allowChildrenWithCategory),i.singleton&&(r.singleton=!0),i.allowAsChild&&(r.allowAsChild=!0),i.docs&&(r.docs=i.docs),i.shortDocs?r.shortDocs=i.shortDocs:i.docs&&0===i.docs.indexOf("https://docs.noodl.net")&&(r.shortDocs=i.docs.replace("/#","")+"-short.md"),r.category=i.category,i.panels&&(r.panels=i.panels),i.usePortAsLabel&&(r.usePortAsLabel=i.usePortAsLabel,r.portLabelTruncationMode=i.portLabelTruncationMode),i.color&&(r.color=i.color),i.dynamicports&&(r.dynamicports=function(e){const n=[];for(const o of e.dynamicports)if(o.ports||o.template||o.port||o.channelPort)n.push(o);else if(o.inputs||o.outputs){const i=[];if(o.inputs)for(const n of o.inputs)i.push(t(n,e.inputs[n],"input"));if(o.outputs)for(const n of o.outputs)i.push(t(n,e.outputs[n],"output"));const r={name:o.name||"conditionalports/basic",condition:o.condition,ports:i};n.push(r)}return n}(i)),i.exportDynamicPorts&&(r.exportDynamicPorts=i.exportDynamicPorts),i.visualStates&&(r.visualStates=i.visualStates),i.useVariants&&(r.useVariants=i.useVariants),i.connectionPanel&&(r.connectionPanel=i.connectionPanel),r.ports=[];var s=r.dynamicports||[],a={},l={};s.filter((e=>void 0!==e.channelPort)).forEach((e=>{l[e.channelPort.plug+"/"+e.channelPort.name]=!0})),s.length&&(r.dynamicports=s),Object.keys(i.inputs).forEach((function(e){if(!a.hasOwnProperty("input/"+e)&&!l.hasOwnProperty("input/"+e)){var n=i.inputs[e];!1!==n.exportToEditor&&r.ports.push(t(e,n,"input"))}})),Object.keys(i.outputs).forEach((function(e){var t,n,o;a.hasOwnProperty("output/"+e)||l.hasOwnProperty("output/"+e)||(t=e,n=i.outputs[e],o={name:t,type:n.type,plug:"output"},n.group&&(o.group=n.group),n.displayName&&(o.displayName=n.displayName),n.editorName&&(o.editorName=n.editorName),n.hasOwnProperty("index")&&(o.index=n.index),r.ports.push(o))}))})),n.nodeIndex={coreNodes:[{name:"UI Elements",description:"Buttons, inputs, containers, media",type:"visual",subCategories:[{name:"Basic Elements",items:["Group","net.noodl.visual.columns","Text","Image","Video","Circle","net.noodl.visual.icon"]},{name:"UI Controls",items:["net.noodl.controls.button","net.noodl.controls.checkbox","net.noodl.controls.options","net.noodl.controls.radiobutton","Radio Button Group","net.noodl.controls.range","net.noodl.controls.textinput"]}]},{name:"Navigation & Popups",description:"Page routing, navigation, popups",type:"logic",subCategories:[{name:"Navigation",items:["Router","RouterNavigate","PageInputs","net.noodl.externallink","PageStackNavigateToPath"]},{name:"Component Stack",items:["Page Stack","PageStackNavigate","PageStackNavigateBack"]},{name:"Popups",items:["NavigationShowPopup","NavigationClosePopup"]}]},{name:"Logic & Utilities",description:"Logic, events, string manipulation",type:"logic",subCategories:[{name:"General Utils",items:["States","Value Changed","Timer","Color Blend","Number Remapper","Counter","Drag","net.noodl.animatetovalue"]},{name:"Logic",items:["Boolean To String","Switch","And","Or","Condition","Inverter"]},{name:"Events",items:["Event Sender","Event Receiver"]},{name:"String Manipulation",items:["Substring","String Mapper","String Format","Date To String","Unique Id"]},{name:"System",items:["Screen Resolution","Open File Picker"]},{name:"Variables",items:["String","Boolean","Color","Number"]}]},{name:"Component Utilities",description:"Component inputs, outputs & object",type:"component",subCategories:[{name:"",items:["Component Inputs","Component Outputs","Component Children","net.noodl.ComponentObject","net.noodl.ParentComponentObject","net.noodl.SetComponentObjectProperties","net.noodl.SetParentComponentObjectProperties"]}]},{name:"Read & Write Data",description:"Arrays, objects, cloud data",type:"data",subCategories:[{name:"",items:["RunTasks","For Each","For Each Actions","Model2","SetModelProperties","NewModel","Set Variable","Variable2"]},{name:"Array",items:["Collection2","CollectionNew","CollectionRemove","CollectionClear","CollectionInsert","Filter Collection","Map Collection","Static Data"]},{name:"Cloud Data",items:["DbModel2","NewDbModelProperties","FilterDBModels","SetDbModelProperties","DbCollection2","DeleteDbModelProperties","AddDbModelRelation","RemoveDbModelRelation","Cloud File","Upload File","CloudFunction2","DbConfig"]},{name:"User",items:["net.noodl.user.LogIn","net.noodl.user.LogOut","net.noodl.user.SignUp","net.noodl.user.User","net.noodl.user.SetUserProperties","net.noodl.user.VerifyEmail","net.noodl.user.SendEmailVerification","net.noodl.user.ResetPassword","net.noodl.user.RequestPasswordReset"]},{name:"External Data",items:["REST2"]}]},{name:"Custom Code",description:"Custom JavaScript and CSS",type:"javascript",subCategories:[{name:"",items:["Expression","JavaScriptFunction","Javascript2","CSS Definition"]}]},{name:"Cloud Functions",description:"Nodes to be used in cloud functions",type:"data",subCategories:[{name:"",items:["noodl.cloud.request","noodl.cloud.response"]},{name:"Cloud Data",items:["noodl.cloud.aggregate"]}]}]};const i=[];return o.forEach((t=>{e._constructors[t].metadata.module&&i.push(t)})),i.length&&(n.nodeIndex.moduleNodes=[{name:"",items:i}]),n}},6365:e=>{"use strict";function t(e){this._constructors={},this.context=e}t.prototype.register=function(e){var t=e.metadata.name;this._constructors[t]=e},t.prototype.createNode=function(e,t,n){if(!1===this._constructors.hasOwnProperty(e))throw new Error("Unknown node type with name "+e);return this._constructors[e](this.context,t,n)},t.prototype.getNodeMetadata=function(e){if(!1===this._constructors.hasOwnProperty(e))throw new Error("Unknown node type with name "+e);return this._constructors[e].metadata},t.prototype.hasNode=function(e){return this._constructors.hasOwnProperty(e)},t.prototype.getInputType=function(e,t){const n=this.getNodeMetadata(e);return n.inputs[t]&&n.inputs[t].type},e.exports=t},8197:e=>{"use strict";e.exports={node:{name:"Component Inputs",shortDesc:"This node is used to define the inputs of a component.",docs:"https://docs.noodl.net/nodes/component-utilities/component-inputs",panels:[{name:"PortEditor",context:["select","connectFrom"],title:"Inputs",plug:"output",type:{name:"*"},canArrangeInGroups:!0},{name:"PropertyEditor",hidden:!0}],getInspectInfo(){return{type:"value",value:this.nodeScope.componentOwner._internal.inputValues}},color:"component",haveComponentPorts:!0,category:"Component Utilities",methods:{registerOutputIfNeeded:function(e){this.hasOutput(e)||this.registerOutput(e,{getter:function(){return this.nodeScope.componentOwner._internal.inputValues[e]}})},_updateDependencies:function(){this.nodeScope.componentOwner.update()}}}}},3657:(e,t,n)=>{"use strict";var o=n(2487),i=n(61);let r=0;function s(e,t,n){o.call(this,e,t),this.nodeScope=new i(e,this),this.parentNodeScope=n,this._internal.childRoot=null,this._internal.componentOutputValues={},this._internal.componentOutputs=[],this._internal.componentInputs=[],this._internal.inputValues={},this._internal.roots=[],this._internal.instanceId="__$ndl_componentInstaceId"+r,this.nodeScope.modelScope=n?n.modelScope:void 0,r++}s.prototype=Object.create(o.prototype,{setComponentModel:{value:async function(e){this.componentModel=e;var t=this;await this.nodeScope.setComponentModel(e),this._internal.componentInputs=this.nodeScope.getNodesWithType("Component Inputs"),this._internal.componentOutputs=this.nodeScope.getNodesWithType("Component Outputs"),Object.values(e.getInputPorts()).forEach(this.registerComponentInputPort.bind(this)),Object.values(e.getOutputPorts()).forEach(this.registerComponentOutputPort.bind(this));const n=e.roots||[];this._internal.roots=n.map((e=>this.nodeScope.getNodeWithId(e))),e.on("rootAdded",(e=>{this._internal.roots.push(this.nodeScope.getNodeWithId(e)),this.forceUpdate()}),this),e.on("rootRemoved",(function(e){const t=this._internal.roots.findIndex((t=>t.id===e));-1!==t&&this._internal.roots.splice(t,1),this.forceUpdate()}),this),e.on("inputPortAdded",this.registerComponentInputPort.bind(this),this),e.on("outputPortAdded",this.registerComponentOutputPort.bind(this),this),e.on("inputPortRemoved",(function(e){t.hasInput(e.name)&&t.deregisterInput(e.name)}),this),e.on("outputPortRemoved",(function(e){this.hasOutput(e.name)&&t.deregisterOutput(e.name)}),this),e.on("nodeAdded",(function(e){"Component Inputs"===e.type?t._internal.componentInputs.push(t.nodeScope.getNodeWithId(e.id)):"Component Outputs"===e.type&&t._internal.componentOutputs.push(t.nodeScope.getNodeWithId(e.id))}),this),e.on("nodeRemoved",(function(e){function n(e,t){return e.filter((e=>e.id!==t))}"Component Inputs"===e.type?t._internal.componentInputs=n(t._internal.componentInputs,e.id):"Component Outputs"===e.type&&(t._internal.componentOutputs=n(t._internal.componentOutputs,e.id))}),this),e.on("renamed",(function(e){t.name=e.newName}),this)}},_onNodeDeleted:{value:function(){this.componentModel&&(this.componentModel.removeListenersWithRef(this),this.componentModel=void 0),this.nodeScope.reset(),o.prototype._onNodeDeleted.call(this)}},registerComponentInputPort:{value:function(e){this.registerInput(e.name,{set:function(t){this._internal.inputValues[e.name]=t,this._internal.componentInputs.forEach((function(t){t.registerOutputIfNeeded(e.name),t.flagOutputDirty(e.name)}))}})}},registerComponentOutputPort:{value:function(e){this.registerOutput(e.name,{getter:function(){return this._internal.componentOutputValues[e.name]}})}},setOutputFromComponentOutput:{value:function(e,t){!1!==this.hasOutput(e)&&(this._internal.creatorCallbacks&&this._internal.creatorCallbacks.onOutputChanged&&this._internal.creatorCallbacks.onOutputChanged(e,t,this._internal.componentOutputValues[e]),this._internal.componentOutputValues[e]=t,this.flagOutputDirty(e))}},setChildRoot:{value:function(e){const t=this._internal.childRoot,n=e;if(this._internal.childRoot=n,this.model&&this.model.children){const e=this.parentNodeScope,o=this.model.children.filter((e=>"Component Children"!==e.type)).map((t=>e.getNodeWithId(t.id)));if(t)for(let e=0;e<o.length;e++)t.isChild(o[e])&&t.removeChild(o[e]);if(n)for(let e=0;e<o.length;e++){const t=o[e],n=t.model.parent.children.indexOf(t.model);this.addChild(t,n)}}}},getChildRootIndex:{value:function(){if(!this._internal.childRoot||!this._internal.childRoot.model||!this._internal.childRoot.model.children)return 0;for(var e=this._internal.childRoot.model.children,t=0;t<e.length;t++)if("Component Children"===e[t].type)return t;return 0}},getChildRoot:{value:function(){return this._internal.childRoot?this._internal.childRoot:null}},getRoots:{value:function(){return this._internal.roots}},triggerDidMount:{value:function(){this._internal.roots.forEach((e=>{e.triggerDidMount&&e.triggerDidMount()}))}},render:{value:function(){return 0===this._internal.roots.length?null:this._internal.roots[0].render()}},setChildIndex:{value:function(e){this.getRoots().forEach((t=>t.setChildIndex&&t.setChildIndex(e)))}},addChild:{value:function(e,t){this.getChildRoot().addChild(e,t+this.getChildRootIndex())}},removeChild:{value:function(e){this.getChildRoot().removeChild(e)}},getChildren:{value:function(e){const t=this.getChildRoot();return t?t.getChildren():[]}},isChild:{value:function(e){return!!this.getChildRoot()&&this.getChildRoot().isChild(e)}},contains:{value:function(e){return this.getRoots().some((t=>t.contains&&t.contains(e)))}},_performDirtyUpdate:{value:function(){o.prototype._performDirtyUpdate.call(this);for(var e=this._internal.componentInputs,t=0,n=e.length;t<n;t++)e[t].flagDirty();this._internal.componentOutputs.forEach((function(e){e.flagDirty()}))}},getRef:{value:function(){const e=this._internal.roots[0];return e?e.getRef():void 0}},update:{value:function(){o.prototype.update.call(this),this._internal.componentOutputs.forEach((function(e){e.update()}))}},forceUpdate:{value:function(){this.parent&&(this.parent.cachedChildren=void 0,this.parent.forceUpdate())}},getInstanceId:{value(){return this._internal.instanceId}}}),s.prototype.constructor=s,e.exports=s},1208:e=>{"use strict";e.exports={node:{category:"Component Utilities",name:"Component Outputs",shortDesc:"This node is used to define the outputs of a component.",docs:"https://docs.noodl.net/nodes/component-utilities/component-outputs",panels:[{name:"PortEditor",context:["select","connectTo"],title:"Outputs",plug:"input",type:{name:"*"},canArrangeInGroups:!0},{name:"PropertyEditor",hidden:!0}],color:"component",haveComponentPorts:!0,prototypeExtensions:{registerInputIfNeeded:function(e){this.hasInput(e)||this.registerInput(e,{set:function(t){this.nodeScope.componentOwner.setOutputFromComponentOutput(e,t)}})}}}}},3113:e=>{"use strict";const t={name:"And",docs:"https://docs.noodl.net/nodes/logic/and",category:"Logic",initialize:function(){this._internal.inputs=[]},getInspectInfo(){return n(this._internal.inputs)},numberedInputs:{input:{displayPrefix:"Input",type:"boolean",createSetter:e=>function(t){if(t=!!t,this._internal.inputs[e]===t)return;this._internal.inputs[e]=t;const o=n(this._internal.inputs);this._internal.result!==o&&(this._internal.result=o,this.flagOutputDirty("result"))}}},outputs:{result:{type:"boolean",displayName:"Result",get(){return this._internal.result}}}};function n(e){return e.length>0&&!1===e.some((e=>!e))}e.exports={node:t}},5010:e=>{"use strict";e.exports={node:{name:"Boolean To String",docs:"https://docs.noodl.net/nodes/utilities/boolean-to-string",category:"Utilities",initialize:function(){this._internal.inputs=[],this._internal.currentSelectedIndex=0,this._internal.indexChanged=!1,this._internal.trueString="",this._internal.falseString=""},inputs:{trueString:{displayName:"String for true",type:"string",set:function(e){this._internal.trueString!==e&&(this._internal.trueString=e,this._internal.currentInput&&this.flagOutputDirty("currentValue"))}},falseString:{displayName:"String for false",type:"string",set:function(e){this._internal.falseString!==e&&(this._internal.falseString=e,this._internal.currentInput||this.flagOutputDirty("currentValue"))}},input:{type:{name:"boolean"},displayName:"Selector",set:function(e){this._internal.currentInput!==e&&(this._internal.currentInput=e,this.flagOutputDirty("currentValue"),this.sendSignalOnOutput("inputChanged"))}}},outputs:{currentValue:{type:"string",displayName:"Current Value",group:"Value",getter:function(){return this._internal.currentInput?this._internal.trueString:this._internal.falseString}},inputChanged:{type:"signal",displayName:"Selector Changed",group:"Signals"}}}}},1665:e=>{"use strict";const t={name:"Condition",docs:"https://docs.noodl.net/nodes/utilities/logic/condition",category:"Logic",initialize:function(){},getInspectInfo(){const e=this.getInputValue("condition");let t;return void 0===e&&(t="[No input]"),t=e,[{type:"value",value:t}]},inputs:{condition:{type:"boolean",displayName:"Condition",group:"General",set(e){this.isInputConnected("eval")||this.scheduleEvaluate()}},eval:{type:"signal",displayName:"Evaluate",group:"Actions",valueChangedToTrue(){this.scheduleEvaluate()}}},outputs:{ontrue:{type:"signal",displayName:"On True",group:"Events"},onfalse:{type:"signal",displayName:"On False",group:"Events"},result:{type:"boolean",displayName:"Is True",group:"Booleans",get(){return!!this.getInputValue("condition")}},isfalse:{type:"boolean",displayName:"Is False",group:"Booleans",get(){return!this.getInputValue("condition")}}},methods:{scheduleEvaluate(){this.scheduleAfterInputsHaveUpdated((()=>{this.flagOutputDirty("result"),this.flagOutputDirty("isfalse");const e=this.getInputValue("condition");this.sendSignalOnOutput(e?"ontrue":"onfalse")}))}}};e.exports={node:t}},3843:e=>{"use strict";const t={name:"Counter",docs:"https://docs.noodl.net/nodes/math/counter",category:"Math",initialize:function(){this._internal.currentValue=0,this._internal.startValue=0,this._internal.startValueSet=!1,this._internal.limitsEnabled=!1,this._internal.limitsMin=0,this._internal.limitsMax=0},getInspectInfo(){return"Count: "+this._internal.currentValue},inputs:{increase:{group:"Actions",displayName:"Increase Count",valueChangedToTrue:function(){this._internal.limitsEnabled&&this._internal.currentValue>=this._internal.limitsMax||(this._internal.currentValue++,this.flagOutputDirty("currentCount"),this.sendSignalOnOutput("countChanged"))}},decrease:{group:"Actions",displayName:"Decrease Count",valueChangedToTrue:function(){this._internal.limitsEnabled&&this._internal.currentValue<=this._internal.limitsMin||(this._internal.currentValue--,this.flagOutputDirty("currentCount"),this.sendSignalOnOutput("countChanged"))}},reset:{group:"Actions",displayName:"Reset To Start",valueChangedToTrue:function(){0!==this.currentValue&&(this._internal.currentValue=this._internal.startValue,this.flagOutputDirty("currentCount"),this.sendSignalOnOutput("countChanged"))}},startValue:{type:"number",displayName:"Start Value",default:0,set:function(e){this._internal.startValue=Number(e),!1===this._internal.startValueSet&&(this._internal.startValueSet=!0,this._internal.currentValue=this._internal.startValue,this.flagOutputDirty("currentCount"),this.sendSignalOnOutput("countChanged"))}},limitsMin:{type:{name:"number"},displayName:"Min Value",group:"Limits",default:0,set:function(e){this._internal.limitsMin=Number(e)}},limitsMax:{type:{name:"number"},displayName:"Max Value",group:"Limits",default:0,set:function(e){this._internal.limitsMax=Number(e)}},limitsEnabled:{type:{name:"boolean"},displayName:"Limits Enabled",group:"Limits",default:!1,set:function(e){this._internal.limitsEnabled=!!e}}},outputs:{currentCount:{displayName:"Current Count",type:"number",getter:function(){return this._internal.currentValue}},countChanged:{displayName:"Count Changed",type:"signal"}}};e.exports={node:t}},8022:(e,t,n)=>{const o=n(4497),i={name:"Cloud File",docs:"https://docs.noodl.net/nodes/data/cloud-data/cloud-file",category:"Cloud Services",color:"data",getInspectInfo(){return this._internal.cloudFile&&this._internal.cloudFile.getUrl()},outputs:{url:{type:"string",displayName:"URL",group:"General",get(){return this._internal.cloudFile&&this._internal.cloudFile.getUrl()}},name:{type:"string",displayName:"Name",group:"General",get(){if(!this._internal.cloudFile)return;const e=this._internal.cloudFile.getName().split("_");return 1===e.length?e[0]:e.slice(1).join("_")}}},inputs:{file:{type:"cloudfile",displayName:"Cloud File",group:"General",set(e){e instanceof o!=0&&(this._internal.cloudFile=e,this.flagOutputDirty("name"),this.flagOutputDirty("url"))}}}};e.exports={node:i}},3690:(e,t,n)=>{const{Node:o,EdgeTriggeredInput:i}=n(3948),r=n(3839),s=n(9160),a=n(4007),l=n(5995),u=n(5802);var d={name:"DbCollection2",docs:"https://docs.noodl.net/nodes/data/cloud-data/query-records",displayName:"Query Records",category:"Cloud Services",usePortAsLabel:"collectionName",color:"data",initialize:function(){var e=this;this._internal.queryParameters={};var t=!1;this._internal.collectionChangedCallback=function(){t||(t=!0,e.scheduleAfterInputsHaveUpdated((function(){e.flagOutputDirty("count"),e.flagOutputDirty("firstItemId"),t=!1})))},this._internal.cloudStoreEvents=function(t){if(!0!==e.isInputConnected("storageFetch")&&void 0!==e._internal.collection&&t.collection===e._internal.name)if("create"===t.type){const o=r.get(t.object.objectId);void 0!==o&&u.matchesQuery(o,e._internal.currentQuery.where)&&n(o)}else if("save"===t.type){const o=r.get(t.objectId);if(void 0!==o){const t=u.matchesQuery(o,e._internal.currentQuery.where);!t&&e._internal.collection.contains(o)?(e._internal.collection.remove(o),e.flagOutputDirty("items"),e.flagOutputDirty("count"),e.flagOutputDirty("firstItemId")):t&&!e._internal.collection.contains(o)&&n(o)}}else if("delete"===t.type){const n=r.get(t.objectId);void 0!==n&&(e._internal.collection.remove(n),e.flagOutputDirty("items"),e.flagOutputDirty("count"),e.flagOutputDirty("firstItemId"))}function n(t){if(void 0!==e._internal.currentQuery.sort){for(var n=0;n<e._internal.collection.size()&&!(u.compareObjects(e._internal.currentQuery.sort,e._internal.collection.get(n),t)>0);n++);e._internal.collection.addAtIndex(t,n)}else e._internal.collection.add(t);let o=e._internal.collection.size();void 0!==e._internal.currentQuery.limit&&o>e._internal.currentQuery.limit&&e._internal.collection.remove(e._internal.collection.get(void 0!==e._internal.currentQuery.sort&&"-"===e._internal.currentQuery.sort[0][0]?o-1:0)),e.flagOutputDirty("items"),e.flagOutputDirty("count"),e.flagOutputDirty("firstItemId")}};const n=a.forScope(this.nodeScope.modelScope);n.on("save",this._internal.cloudStoreEvents),n.on("create",this._internal.cloudStoreEvents),n.on("delete",this._internal.cloudStoreEvents),this._internal.storageSettings={}},getInspectInfo(){const e=this._internal.collection;return e?[{type:"value",value:e.items}]:{type:"text",value:"[Not executed yet]"}},inputs:{},outputs:{items:{type:"array",displayName:"Items",group:"General",getter:function(){return this._internal.collection}},firstItemId:{type:"string",displayName:"First Record Id",group:"General",getter:function(){if(this._internal.collection){var e=this._internal.collection.get(0);if(void 0!==e)return e.getId()}}},count:{type:"number",displayName:"Count",group:"General",getter:function(){return this._internal.collection?this._internal.collection.size():0}},fetched:{group:"Events",type:"signal",displayName:"Success"},failure:{group:"Events",type:"signal",displayName:"Failure"},error:{type:"string",displayName:"Error",group:"Error",getter:function(){return this._internal.error}}},prototypeExtensions:{setCollectionName:function(e){this._internal.name=e,!1===this.isInputConnected("storageFetch")&&this.scheduleFetch()},setCollection:function(e){this.bindCollection(e),this.flagOutputDirty("firstItemId"),this.flagOutputDirty("items"),this.flagOutputDirty("count")},unbindCurrentCollection:function(){var e=this._internal.collection;e&&(e.off("change",this._internal.collectionChangedCallback),this._internal.collection=void 0)},bindCollection:function(e){this.unbindCurrentCollection(),this._internal.collection=e,e&&e.on("change",this._internal.collectionChangedCallback)},_onNodeDeleted:function(){o.prototype._onNodeDeleted.call(this),this.unbindCurrentCollection();const e=a.forScope(this.nodeScope.modelScope);e.off("insert",this._internal.cloudStoreEvents),e.off("delete",this._internal.cloudStoreEvents),e.off("save",this._internal.cloudStoreEvents)},setError:function(e){this._internal.err=e,this.flagOutputDirty("error"),this.sendSignalOnOutput("failure")},scheduleFetch:function(){var e=this._internal;e.fetchScheduled||(e.fetchScheduled=!0,this.scheduleAfterInputsHaveUpdated((()=>{e.fetchScheduled=!1,this.fetch()})))},fetch:function(){this.context.editorConnection&&(void 0===this._internal.name?this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"query-collection",{message:"No collection specified for query"}):this.context.editorConnection.clearWarning(this.nodeScope.componentOwner.name,this.id,"query-collection"));const e=s.get(),t=this.getStorageFilter(),n=this.getStorageLimit(),o=this.getStorageSkip(),i=this.getStorageFetchTotalCount();this._internal.currentQuery={where:t.where,sort:t.sort,limit:n,skip:o},a.forScope(this.nodeScope.modelScope).query({collection:this._internal.name,where:t.where,sort:t.sort,limit:n,skip:o,count:i,success:(t,n)=>{void 0!==t&&e.set(t.map((e=>a._fromJSON(e,this._internal.name,this.nodeScope.modelScope)))),void 0!==n&&(this._internal.storageSettings.storageTotalCount=n,this.hasOutput("storageTotalCount")&&this.flagOutputDirty("storageTotalCount")),this.setCollection(e),this.sendSignalOnOutput("fetched")},error:t=>{this.setCollection(e),this.setError(t||"Failed to fetch.")}})},getStorageFilter:function(){const e=this._internal.storageSettings;if(void 0===e.storageFilterType||"simple"===e.storageFilterType)return{where:void 0!==this._internal.visualFilter?u.convertVisualFilter(this._internal.visualFilter,{queryParameters:this._internal.queryParameters,collectionName:this._internal.name}):void 0,sort:void 0!==this._internal.visualSorting?u.convertVisualSorting(this._internal.visualSorting):void 0};if("json"===e.storageFilterType){if(!this._internal.filterFunc)try{var t=e.storageJSONFilter;t=t.replace(/\/\*[\s\S]*?\*\/|\/\/.*/g,""),this._internal.filterVariables=t.match(/\$[A-Za-z0-9]+/g)||[];var n=["filter","where","sort","Inputs"].concat(this._internal.filterVariables).concat([t]);this._internal.filterFunc=Function.apply(null,n)}catch(e){this._internal.filterFunc=void 0,console.log("Error while parsing filter script: "+e)}if(!this._internal.filterFunc)return;var o={},i=[],r=this,s=function(e){o=u.convertFilterOp(e,{collectionName:r._internal.name,error:function(e){r.context.editorConnection.sendWarning(r.nodeScope.componentOwner.name,r.id,"query-collection-filter",{message:e})}})};const l={};for(let t in e)t.startsWith("storageFilterValue-")&&(l[t.substring(19)]=e[t]);var a=[s,s,function(e){i=e},l];this._internal.filterVariables.forEach((t=>{a.push(e["storageFilterValue-"+t.substring(1)])}));try{this._internal.filterFunc.apply(this,a)}catch(e){console.log("Error while running filter script: "+e)}return{where:o,sort:i}}},getStorageLimit:function(){const e=this._internal.storageSettings;return e.storageEnableLimit?e.storageLimit||10:void 0},getStorageSkip:function(){const e=this._internal.storageSettings;return e.storageEnableLimit?e.storageSkip||0:void 0},getStorageFetchTotalCount:function(){return!!this._internal.storageSettings.storageEnableCount},registerOutputIfNeeded:function(e){this.hasOutput(e)||this.registerOutput(e,{getter:c.bind(this,e)})},setVisualFilter:function(e){this._internal.visualFilter=e,!1===this.isInputConnected("storageFetch")&&this.scheduleFetch()},setVisualSorting:function(e){this._internal.visualSorting=e,!1===this.isInputConnected("storageFetch")&&this.scheduleFetch()},setQueryParameter:function(e,t){this._internal.queryParameters[e]=t,!1===this.isInputConnected("storageFetch")&&this.scheduleFetch()},registerInputIfNeeded:function(e){if(this.hasInput(e))return;if(e.startsWith("qp-"))return this.registerInput(e,{set:this.setQueryParameter.bind(this,e.substring(3))});const t={storageFetch:this.scheduleFetch.bind(this)};if(t[e])return this.registerInput(e,{set:i.createSetter({valueChangedToTrue:t[e]})});const n={collectionName:this.setCollectionName.bind(this),visualFilter:this.setVisualFilter.bind(this),visualSort:this.setVisualSorting.bind(this)};if(n[e])return this.registerInput(e,{set:n[e]});this.registerInput(e,{set:p.bind(this,e)})}}};function c(e){return this._internal.storageSettings[e]}function p(e,t){this._internal.storageSettings[e]=t,!1===this.isInputConnected("storageFetch")&&this.scheduleFetch()}function h(e,t,n,o){var i=[];const r=o.getMetaData("dbCollections"),s=o.getMetaData("systemCollections");if(i.push({name:"collectionName",type:{name:"enum",enums:[{label:"User",value:"_User"},{label:"Role",value:"_Role"}].concat(void 0!==r?r.map((e=>({value:e.name,label:e.name}))):[]),allowEditOnly:!0},displayName:"Class",plug:"input",group:"General"}),i.push({name:"storageFilterType",type:{name:"enum",allowEditOnly:!0,enums:[{value:"simple",label:"Visual"},{value:"json",label:"Javascript"}]},displayName:"Filter",default:"simple",plug:"input",group:"General"}),i.push({type:"boolean",plug:"input",group:"Limit",name:"storageEnableLimit",displayName:"Use limit"}),t.storageEnableLimit&&(i.push({type:"number",default:10,plug:"input",group:"Limit",name:"storageLimit",displayName:"Limit"}),i.push({type:"number",default:0,plug:"input",group:"Limit",name:"storageSkip",displayName:"Skip"})),i.push({type:"signal",plug:"input",group:"Actions",name:"storageFetch",displayName:"Do"}),i.push({type:"boolean",plug:"input",group:"Total Count",name:"storageEnableCount",displayName:"Fetch total count"}),t.storageEnableCount&&i.push({type:"number",plug:"output",group:"General",name:"storageTotalCount",displayName:"Total Count"}),void 0===t.storageFilterType||"simple"===t.storageFilterType){if(void 0!==t.collectionName){var a=r&&r.find((e=>e.name===t.collectionName));if(void 0===a&&s&&(a=s.find((e=>e.name===t.collectionName))),a&&a.schema&&a.schema.properties){const p=JSON.parse(JSON.stringify(a.schema));function u(e){if(void 0!==e.schema&&void 0!==e.schema.properties)for(var n in e.schema.properties){var o=e.schema.properties[n];"Relation"===o.type&&o.targetClass===t.collectionName&&(void 0===p.relations&&(p.relations={}),void 0===p.relations[e.name]&&(p.relations[e.name]=[]),p.relations[e.name].push({property:n}))}}r&&r.forEach(u),s&&s.forEach(u),i.push({name:"visualFilter",plug:"input",type:{name:"query-filter",schema:p,allowEditOnly:!0},displayName:"Filter",group:"Filter"}),i.push({name:"visualSort",plug:"input",type:{name:"query-sorting",schema:p,allowEditOnly:!0},displayName:"Sort",group:"Sorting"})}if(void 0!==t.visualFilter){const h={};!function e(t){void 0!==t&&(void 0!==t.rules?t.rules.forEach((t=>e(t))):void 0!==t.input&&(h[t.input]=!0))}(t.visualFilter),Object.keys(h).forEach((e=>{i.push({name:"qp-"+e,plug:"input",type:"*",displayName:e,group:"Query Parameters"})}))}}}else if("json"===t.storageFilterType){i.push({type:{name:"string",allowEditOnly:!0,codeeditor:"javascript"},plug:"input",group:"Filter",name:"storageJSONFilter",default:"// Write your query script here, check out the reference documentation for examples\nwhere({ })\n",displayName:"Filter"});var d=t.storageJSONFilter;if(d){var c=(d=d.replace(/\/\*[\s\S]*?\*\/|\/\/.*/g,"")).match(/\$[A-Za-z0-9]+/g);if(c){const g={};c.forEach((e=>{g[e]=!0})),Object.keys(g).forEach((e=>{i.push({name:"storageFilterValue-"+e.substring(1),displayName:e.substring(1),group:"Filter Values",plug:"input",type:{name:"*",allowConnectionsOnly:!0}})}))}l.parseAndAddPortsFromScript(d,i,{inputPrefix:"storageFilterValue-",inputGroup:"Filter Values",inputType:{name:"*",allowConnectionsOnly:!0},skipOutputs:!0})}}n.sendDynamicPorts(e,i)}e.exports={node:d,setup:function(e,t){function n(n){h(n.id,n.parameters,e.editorConnection,t),n.on("parameterUpdated",(function(o){(o.name.startsWith("storage")||"visualFilter"===o.name||"collectionName"===o.name)&&h(n.id,n.parameters,e.editorConnection,t)})),t.on("metadataChanged.dbCollections",(function(o){a.invalidateCollections(),h(n.id,n.parameters,e.editorConnection,t)})),t.on("metadataChanged.systemCollections",(function(o){a.invalidateCollections(),h(n.id,n.parameters,e.editorConnection,t)})),t.on("metadataChanged.cloudservices",(function(e){a.instance._initCloudServices()}))}e.editorConnection&&e.editorConnection.isRunningLocally()&&t.on("editorImportComplete",(()=>{t.on("nodeAdded.DbCollection2",(function(e){n(e)}));for(const e of t.getNodesWithType("DbCollection2"))n(e)}))}}},6204:(e,t,n)=>{"use strict";const o=n(1458);var i={name:"DbConfig",docs:"https://docs.noodl.net/nodes/data/cloud-data/config",displayNodeName:"Config",category:"Cloud Services",usePortAsLabel:"configKey",color:"data",initialize:function(){var e=this._internal;o.instance.getConfig().then((t=>{e.config=t,this.hasOutput("value")&&this.flagOutputDirty("value")}))},getInspectInfo(){const e=this.getValue();return void 0===e?"[No Value]":[{type:"value",value:e}]},inputs:{},outputs:{},methods:{getValue:function(){const e=this._internal;return e.useDevValue&&this.context.editorConnection&&this.context.editorConnection.isRunningLocally()?e.devValue:void 0!==e.config&&void 0!==e.configKey?e.config[e.configKey]:void 0},setInternal:function(e,t){this._internal[e]=t,this.hasOutput("value")&&this.flagOutputDirty("value")},registerOutputIfNeeded:function(e){if(!this.hasOutput(e))return"value"===e?this.registerOutput(e,{getter:this.getValue.bind(this)}):void 0},registerInputIfNeeded:function(e){if(!this.hasInput(e))return"configKey"===e||"useDevValue"===e||"devValue"===e?this.registerInput(e,{set:this.setInternal.bind(this,e)}):void 0}}};e.exports={node:i,setup:function(e,t){function n(n){var o=[];e.editorConnection.clearWarning(n.component.name,n.id,"dbconfig-warning");const i=t.getMetaData("dbConfigSchema");let r;if(i){const t="undefined"!=typeof _noodl_cloud_runtime_version;o.push({name:"configKey",displayName:"Parameter",group:"General",type:{name:"enum",enums:Object.keys(i).filter((e=>t||!i[e].masterKeyOnly)).map((e=>({value:e,label:e}))),allowEditOnly:!0},plug:"input"}),void 0!==n.parameters.configKey&&i&&i[n.parameters.configKey]?(r=i[n.parameters.configKey].type,"string"!==r&&"boolean"!==r&&"number"!==r&&"object"!==r&&"array"!==r||(o.push({name:"useDevValue",displayName:"Enable",group:"Local Override",type:"boolean",default:!1,plug:"input"}),!0===n.parameters.useDevValue&&o.push({name:"devValue",displayName:"Value",group:"Local Override",type:r,plug:"input"}))):void 0!==n.parameters.configKey&&e.editorConnection.sendWarning(n.component.name,n.id,"dbconfig-warning",{showGlobally:!0,message:n.parameters.configKey+" config parameter is missing, add it to your cloud service."})}else e.editorConnection.sendWarning(n.component.name,n.id,"dbconfig-warning",{showGlobally:!0,message:"You need an active cloud service."});o.push({name:"value",displayName:"Value",group:"General",type:r||"*",plug:"output"}),e.editorConnection.sendDynamicPorts(n.id,o)}function i(e){n(e),e.on("parameterUpdated",(function(t){n(e)})),t.on("metadataChanged.dbConfigSchema",(function(t){o.instance.clearCache(),n(e)}))}e.editorConnection&&e.editorConnection.isRunningLocally()&&t.on("editorImportComplete",(()=>{t.on("nodeAdded.DbConfig",(function(e){i(e)}));for(const e of t.getNodesWithType("DbConfig"))i(e)}))}}},464:(e,t,n)=>{"use strict";const o=n(3839),i=n(4007);e.exports={addInputProperties:function(e){var t={node:Object.assign({},e.node),setup:e.setup},n=Object.assign({},e.node.methods);Object.assign(e.node,{inputs:e.node.inputs||{},outputs:e.node.outputs||{},methods:e.node.methods||{}}),Object.assign(e.node,{initialize:function(){this._internal.inputValues={},t.node.initialize&&t.node.initialize.call(this)}}),Object.assign(e.node.outputs,{}),Object.assign(e.node.inputs,{}),Object.assign(e.node.methods,{registerInputIfNeeded:function(e){this.hasInput(e)||(e.startsWith("prop-")&&this.registerInput(e,{set:this._setInputValue.bind(this,e.substring(5))}),n&&n.registerInputIfNeeded&&n.registerInputIfNeeded.call(this,e))},_setInputValue:function(e,t){this._internal.inputValues[e]=t}})},addModelId:function(e,t){Object.assign({},e.node),e.setup;var n=Object.assign({},e.node.methods);const i=void 0===t||t.includeInputs,r=void 0===t||t.includeOutputs;Object.assign(e.node,{inputs:e.node.inputs||{},outputs:e.node.outputs||{},methods:e.node.methods||{}}),i&&(Object.assign(e.node,{usePortAsLabel:"collectionName"}),e.node.dynamicports=(e.node.dynamicports||[]).concat([{name:"conditionalports/extended",condition:"idSource = explicit OR idSource NOT SET",inputs:["modelId"]}]),Object.assign(e.node.inputs,{idSource:{type:{name:"enum",enums:[{label:"Specify explicitly",value:"explicit"},{label:"From repeater",value:"foreach"}],allowEditOnly:!0},default:"explicit",displayName:"Id Source",group:"General",tooltip:"Choose if you want to specify the Id explicitly, \n or if you want it to be that of the current record in a repeater.",set:function(e){"foreach"===e&&this.scheduleAfterInputsHaveUpdated((()=>{for(var e=this.nodeScope.componentOwner;void 0!==e&&void 0===e._forEachModel&&e.parentNodeScope;)e=e.parentNodeScope.componentOwner;this.setModel(void 0!==e?e._forEachModel:void 0)}))}},modelId:{type:{name:"string",identifierOf:"ModelName",identifierDisplayName:"Object Ids"},displayName:"Id",group:"General",set:function(e){e instanceof o&&(e=e.getId()),this._internal.modelId=e,this.setModelID(e)}}})),r&&Object.assign(e.node.outputs,{id:{type:"string",displayName:"Id",group:"General",getter:function(){return this._internal.model?this._internal.model.getId():this._internal.modelId}}}),Object.assign(e.node.methods,{setCollectionID:function(e){this._internal.collectionId=e,this.clearWarnings()},setModelID:function(e){var t=(this.nodeScope.modelScope||o).get(e);this.setModel(t)},setModel:function(e){this._internal.model=e,this.flagOutputDirty("id")},registerInputIfNeeded:function(e){this.hasInput(e)||("collectionName"===e&&this.registerInput(e,{set:this.setCollectionID.bind(this)}),n&&n.registerInputIfNeeded&&n.registerInputIfNeeded.call(this,e))}})},addBaseInfo:function(e,t){const n=void 0===t||t.includeInputProperties,o=void 0!==t&&t.includeRelations;Object.assign(e.node,{category:"Data",color:"data",inputs:e.node.inputs||{},outputs:e.node.outputs||{},methods:e.node.methods||{}}),Object.assign(e.node.outputs,{failure:{type:"signal",displayName:"Failure",group:"Events"},error:{type:"string",displayName:"Error",group:"Error",getter:function(){return this._internal.error}}}),Object.assign(e.node.methods,{scheduleOnce:function(e,t){const n=this,o="hasScheduled"+e;this._internal[o]||(this._internal[o]=!0,this.scheduleAfterInputsHaveUpdated((function(){n._internal[o]=!1,t()})))},checkWarningsBeforeCloudOp(){return this.clearWarnings(),!!this._internal.collectionId||(this.setError("No class name specified"),!1)},setError:function(e){this._internal.error=e,this.flagOutputDirty("error"),this.sendSignalOnOutput("failure"),this.context.editorConnection&&this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"storage-op-warning",{message:e,showGlobally:!0})},clearWarnings(){this.context.editorConnection&&this.context.editorConnection.clearWarning(this.nodeScope.componentOwner.name,this.id,"storage-op-warning")}}),Object.assign(e,{setup:function(t,r){function s(s){function a(){var i=[];const a=r.getMetaData("dbCollections"),l=r.getMetaData("systemCollections"),u=s.parameters;if(i.push({name:"collectionName",displayName:"Class",group:"General",type:{name:"enum",enums:[{label:"User",value:"_User"},{label:"Role",value:"_Role"}].concat(void 0!==a?a.map((e=>({value:e.name,label:e.name}))):[]),allowEditOnly:!0},plug:"input"}),o&&u.collectionName&&a&&(void 0===(d=a.find((e=>e.name===u.collectionName)))&&l&&(d=l.find((e=>e.name===u.collectionName))),d&&d.schema&&d.schema.properties)){const e=d.schema.properties,t=Object.keys(e).filter((t=>"Relation"===e[t].type)).map((e=>({label:e,value:e})));i.push({name:"relationProperty",displayName:"Relation",group:"General",type:{name:"enum",enums:t,allowEditOnly:!0},plug:"input"})}if(n&&u.collectionName&&a){const e={String:"string",Boolean:"boolean",Number:"number",Date:"date"};var d;if(void 0===(d=a.find((e=>e.name===u.collectionName)))&&l&&(d=l.find((e=>e.name===u.collectionName))),d&&d.schema&&d.schema.properties){var c=d.schema.properties;for(var p in c){var h=c[p];i.find((e=>e.name===p))||i.push({type:{name:e[h.type]?e[h.type]:"*"},plug:"input",group:"Properties",name:"prop-"+p,displayName:p})}}}e._additionalDynamicPorts&&e._additionalDynamicPorts(s,i,r),t.editorConnection.sendDynamicPorts(s.id,i)}a(),s.on("parameterUpdated",(function(e){a()})),r.on("metadataChanged.dbCollections",(function(e){i.invalidateCollections(),a()})),r.on("metadataChanged.systemCollections",(function(e){i.invalidateCollections(),a()}))}t.editorConnection&&t.editorConnection.isRunningLocally()&&r.on("editorImportComplete",(()=>{r.on("nodeAdded."+e.node.name,(function(e){s(e)}));for(const t of r.getNodesWithType(e.node.name))s(t)}))}})},addRelationProperty:function(e){Object.assign({},e.node),e.setup;var t=Object.assign({},e.node.methods);Object.assign(e.node,{inputs:e.node.inputs||{},outputs:e.node.outputs||{},methods:e.node.methods||{}}),Object.assign(e.node.inputs,{targetId:{type:{name:"string",allowConnectionsOnly:!0},displayName:"Target Record Id",group:"General",set:function(e){this._internal.targetModelId=e}}}),Object.assign(e.node.methods,{registerInputIfNeeded:function(e){this.hasInput(e)||("relationProperty"===e&&this.registerInput(e,{set:this.setRelationProperty.bind(this)}),t&&t.registerInputIfNeeded&&t.registerInputIfNeeded.call(this,e))},setRelationProperty:function(e){this._internal.relationProperty=e}})},addAccessControl:function(e){var t={node:Object.assign({},e.node),setup:e.setup},n=Object.assign({},e.node.methods);Object.assign(e.node,{inputs:e.node.inputs||{},outputs:e.node.outputs||{},methods:e.node.methods||{}}),Object.assign(e.node,{initialize:function(){this._internal.accessControl={},t.node.initialize&&t.node.initialize.call(this)}}),Object.assign(e.node.inputs,{accessControl:{type:{name:"proplist",autoName:"Rule",allowEditOnly:!0},index:1e3,displayName:"Access Control Rules",group:"Access Control Rules",set:function(e){this._internal.accessControlRules=e}}});const o=e._additionalDynamicPorts;e._additionalDynamicPorts=function(e,t,n){void 0!==e.parameters.accessControl&&e.parameters.accessControl.length>0&&e.parameters.accessControl.forEach((n=>{const o="acl-"+n.id;t.push({name:o+"-target",displayName:"Target",editorName:n.label+" | Target",plug:"input",type:{name:"enum",enums:[{value:"user",label:"User"},{value:"everyone",label:"Everyone"},{value:"role",label:"Role"}],allowEditOnly:!0},group:n.label+" Access Rule",default:"user",parent:"accessControl",parentItemId:n.id}),"role"===e.parameters[o+"-target"]?t.push({name:o+"-role",displayName:"Role",editorName:n.label+" | Role",group:n.label+" Access Rule",plug:"input",type:"string",parent:"accessControl",parentItemId:n.id}):void 0!==e.parameters[o+"-target"]&&"user"!==e.parameters[o+"-target"]||t.push({name:o+"-userid",displayName:"User Id",group:n.label+" Access Rule",editorName:n.label+" | User Id",plug:"input",type:{name:"string",allowConnectionsOnly:!0},parent:"accessControl",parentItemId:n.id}),t.push({name:o+"-read",displayName:"Read",editorName:n.label+" | Read",group:n.label+" Access Rule",plug:"input",type:{name:"boolean"},default:!0,parent:"accessControl",parentItemId:n.id}),t.push({name:o+"-write",displayName:"Write",editorName:n.label+" | Write",group:n.label+" Access Rule",plug:"input",type:{name:"boolean"},default:!0,parent:"accessControl",parentItemId:n.id})})),o&&o(e,t,n)},Object.assign(e.node.methods,{registerInputIfNeeded:function(e){this.hasInput(e)||(e.startsWith("acl-")&&this.registerInput(e,{set:this.setAccessControl.bind(this,e)}),n&&n.registerInputIfNeeded&&n.registerInputIfNeeded.call(this,e))},_getACL:function(){let e={};function t(e){return{read:void 0===e.read||e.read,write:void 0===e.write||e.write}}const n=function(e){if("undefined"!=typeof _noodl_cloud_runtime_version)return e.get("Request").UserId;var t=localStorage["Parse/"+i.instance.appId+"/currentUser"];if(void 0!==t){let e;try{e=JSON.parse(t)}catch(e){}return void 0!==e?e.objectId:void 0}}(this.nodeScope.modelScope);return void 0!==this._internal.accessControlRules&&this._internal.accessControlRules.forEach((o=>{const i=this._internal.accessControl[o.id];if(void 0===i)void 0!==n&&(e[n]={write:!0,read:!0});else if("everyone"===i.target)e["*"]=t(i);else if("user"===i.target){const o=i.userid||n;e[o]=t(i)}else"role"===i.target&&(e["role:"+i.role]=t(i))})),Object.keys(e).length>0?e:void 0},setAccessControl:function(e,t){const n=e.split("-");void 0===this._internal.accessControl[n[1]]&&(this._internal.accessControl[n[1]]={}),this._internal.accessControl[n[1]][n[2]]=t}})}}},3421:(e,t,n)=>{"use strict";var o=n(3839),i=n(464);const r=n(4007);var s={node:{name:"AddDbModelRelation",docs:"https://docs.noodl.net/nodes/data/cloud-data/add-record-relation",displayNodeName:"Add Record Relation",usePortAsLabel:"collectionName",inputs:{store:{displayName:"Do",group:"Actions",valueChangedToTrue:function(){this.scheduleAddRelation()}}},outputs:{relationAdded:{type:"signal",displayName:"Success",group:"Events"}},methods:{validateInputs:function(){if(!this.context.editorConnection)return;const e=e=>{this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"add-relation",{message:e})};void 0===this._internal.collectionId?e("No class specified"):void 0===this._internal.relationProperty?e("No relation property specified"):void 0===this._internal.targetModelId?e("No target record Id (the record to add a relation to) specified"):void 0===this._internal.model?e("No record Id specified (the record that should get the relation)"):this.context.editorConnection.clearWarning(this.nodeScope.componentOwner.name,this.id,"add-relation")},scheduleAddRelation:function(e){const t=this,n=this._internal;this.scheduleOnce("StorageAddRelation",(function(){if(t.validateInputs(),n.model){var e=n.model,i=n.targetModelId;void 0!==i&&r.forScope(t.nodeScope.modelScope).addRelation({collection:n.collectionId,objectId:e.getId(),key:n.relationProperty,targetObjectId:i,targetClass:(t.nodeScope.modelScope||o).get(i)._class,success:function(n){for(var o in n)e.set(o,n[o]);t.sendSignalOnOutput("relationAdded")},error:function(e){t.setError(e||"Failed to add relation.")}})}}))}}}};i.addBaseInfo(s,{includeRelations:!0}),i.addModelId(s),i.addRelationProperty(s),e.exports=s},1421:(e,t,n)=>{"use strict";var o=n(3839),i=n(464);const r=n(4007);var s={node:{name:"RemoveDbModelRelation",docs:"https://docs.noodl.net/nodes/data/cloud-data/remove-record-relation",displayName:"Remove Record Relation",usePortAsLabel:"collectionName",inputs:{store:{displayName:"Do",group:"Actions",valueChangedToTrue:function(){this.scheduleRemoveRelation()}}},outputs:{relationRemoved:{type:"signal",displayName:"Success",group:"Events"}},methods:{validateInputs:function(){if(!this.context.editorConnection)return;const e=e=>{this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"add-relation",{message:e})};void 0===this._internal.collectionId?e("No class specified"):void 0===this._internal.relationProperty?e("No relation property specified"):void 0===this._internal.targetModelId?e("No target record Id (the record to add a relation to) specified"):void 0===this._internal.model?e("No record Id specified (the record that should get the relation)"):this.context.editorConnection.clearWarning(this.nodeScope.componentOwner.name,this.id,"add-relation")},scheduleRemoveRelation:function(e){const t=this,n=this._internal;this.scheduleOnce("StorageRemoveRelation",(function(){if(t.validateInputs(),n.model){var e=n.model,i=n.targetModelId;void 0!==i&&r.forScope(t.nodeScope.modelScope).removeRelation({collection:n.collectionId,objectId:e.getId(),key:n.relationProperty,targetObjectId:i,targetClass:(t.nodeScope.modelScope||o).get(i)._class,success:function(n){for(var o in n)e.set(o,n[o]);t.sendSignalOnOutput("relationRemoved")},error:function(e){t.setError(e||"Failed to remove relation.")}})}}))}}}};i.addBaseInfo(s,{includeRelations:!0}),i.addModelId(s),i.addRelationProperty(s),e.exports=s},9:(e,t,n)=>{"use strict";const{Node:o,EdgeTriggeredInput:i}=n(3948);var r=n(3839);const s=n(4007);var a={name:"DbModel2",docs:"https://docs.noodl.net/nodes/data/cloud-data/record",displayNodeName:"Record",shortDesc:"Database model",category:"Cloud Services",usePortAsLabel:"collectionName",color:"data",dynamicports:[{name:"conditionalports/extended",condition:"idSource = explicit OR idSource NOT SET",inputs:["modelId"]}],initialize:function(){var e=this._internal;e.inputValues={},e.relationModelIds={};var t=this;this._internal.onModelChangedCallback=function(e){t.isInputConnected("fetch")||(t.hasOutput("prop-"+e.name)&&t.flagOutputDirty("prop-"+e.name),t.hasOutput("changed-"+e.name)&&t.sendSignalOnOutput("changed-"+e.name),t.sendSignalOnOutput("changed"))}},getInspectInfo(){const e=this._internal.model;return e?[{type:"text",value:"Id: "+e.getId()},{type:"value",value:e.data}]:"[No Record]"},outputs:{id:{type:"string",displayName:"Id",group:"General",getter:function(){return this._internal.model?this._internal.model.getId():this._internal.modelId}},fetched:{type:"signal",displayName:"Fetched",group:"Events"},changed:{type:"signal",displayName:"Changed",group:"Events"},failure:{type:"signal",displayName:"Failure",group:"Events"},error:{type:"string",displayName:"Error",group:"Error",getter:function(){return this._internal.error}}},inputs:{idSource:{type:{name:"enum",enums:[{label:"Specify explicitly",value:"explicit"},{label:"From repeater",value:"foreach"}],allowEditOnly:!0},default:"explicit",displayName:"Id Source",group:"General",set:function(e){"foreach"===e&&this.scheduleAfterInputsHaveUpdated((()=>{for(var e=this.nodeScope.componentOwner;void 0!==e&&void 0===e._forEachModel&&e.parentNodeScope;)e=e.parentNodeScope.componentOwner;this.setModel(void 0!==e?e._forEachModel:void 0)}))}},modelId:{type:{name:"string",allowConnectionsOnly:!0},displayName:"Id",group:"General",set:function(e){e instanceof r?e=e.getId():"object"==typeof e&&(e=r.create(e).getId()),this._internal.modelId=e,!1===this.isInputConnected("fetch")?this.setModelID(e):this.flagOutputDirty("id")}},fetch:{displayName:"Fetch",group:"Actions",valueChangedToTrue:function(){this.scheduleFetch()}}},methods:{setCollectionID:function(e){this._internal.collectionId=e},setModelID:function(e){var t=(this.nodeScope.modelScope||r).get(e);this.setModel(t)},setModel:function(e){for(var t in this._internal.model&&this._internal.model.off("change",this._internal.onModelChangedCallback),this._internal.model=e,this.flagOutputDirty("id"),e.on("change",this._internal.onModelChangedCallback),e.data)this.hasOutput("prop-"+t)&&this.flagOutputDirty("prop-"+t);this.sendSignalOnOutput("fetched")},_onNodeDeleted:function(){o.prototype._onNodeDeleted.call(this),this._internal.model&&this._internal.model.off("change",this._internal.onModelChangedCallback)},scheduleOnce:function(e,t){const n=this,o="hasScheduled"+e;this._internal[o]||(this._internal[o]=!0,this.scheduleAfterInputsHaveUpdated((function(){n._internal[o]=!1,t()})))},setError:function(e){this._internal.error=e,this.flagOutputDirty("error"),this.sendSignalOnOutput("failure"),this.context.editorConnection&&this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"storage-op-warning",{message:e,showGlobally:!0})},clearWarnings(){this.context.editorConnection&&this.context.editorConnection.clearWarning(this.nodeScope.componentOwner.name,this.id,"storage-op-warning")},scheduleFetch:function(){var e=this;const t=this._internal;this.scheduleOnce("Fetch",(function(){if(void 0===t.modelId||""===t.modelId)return void e.setError("Missing Id.");const n=s.forScope(e.nodeScope.modelScope);n.fetch({collection:t.collectionId,objectId:t.modelId,success:function(o){var i=n._fromJSON(o,t.collectionId);for(var r in t.model!==i&&(t.model&&t.model.off("change",t.onModelChangedCallback),t.model=i,i.on("change",t.onModelChangedCallback)),e.flagOutputDirty("id"),delete o.objectId,o)e.hasOutput("prop-"+r)&&e.flagOutputDirty("prop-"+r);e.sendSignalOnOutput("fetched")},error:function(t){e.setError(t||"Failed to fetch.")}})}))},scheduleStore:function(){var e=this._internal;e.model&&this.scheduleOnce("Store",(function(){for(var t in e.inputValues)e.model.set(t,e.inputValues[t],{resolve:!0})}))},registerOutputIfNeeded:function(e){this.hasOutput(e)||e.startsWith("prop-")&&this.registerOutput(e,{getter:l.bind(this,e.substring(5))})},registerInputIfNeeded:function(e){if(this.hasInput(e))return;const t={};if(t[e])return this.registerInput(e,{set:i.createSetter({valueChangedToTrue:t[e]})});const n={collectionName:this.setCollectionID.bind(this)};if(n[e])return this.registerInput(e,{set:n[e]});e.startsWith("prop-")&&this.registerInput(e,{set:u.bind(this,e.substring(5))})}}};function l(e){return this._internal.model?this._internal.model.get(e,{resolve:!0}):void 0}function u(e,t){this._internal.inputValues[e]=t}function d(e,t,n,o){var i=[];const r=o.getMetaData("dbCollections"),s=o.getMetaData("systemCollections");if(i.push({name:"collectionName",displayName:"Class",group:"General",type:{name:"enum",enums:[{label:"User",value:"_User"},{label:"Role",value:"_Role"}].concat(void 0!==r?r.map((e=>({value:e.name,label:e.name}))):[]),allowEditOnly:!0},plug:"input"}),t.collectionName&&r){var a=r.find((e=>e.name===t.collectionName));if(void 0===a&&s&&(a=s.find((e=>e.name===t.collectionName))),a&&a.schema&&a.schema.properties){var l=a.schema.properties;for(var u in l){var d=l[u];if(!i.find((e=>e.name===u)))if("Relation"===d.type);else{const e={String:"string",Boolean:"boolean",Number:"number",Date:"date"};i.push({type:{name:e[d.type]?e[d.type]:"*"},plug:"output",group:"Properties",name:"prop-"+u,displayName:u}),i.push({type:"signal",plug:"output",group:"Changed Events",displayName:u+" Changed",name:"changed-"+u})}}}}n.sendDynamicPorts(e,i)}e.exports={node:a,setup:function(e,t){function n(n){d(n.id,n.parameters,e.editorConnection,t),n.on("parameterUpdated",(function(o){d(n.id,n.parameters,e.editorConnection,t)})),t.on("metadataChanged.dbCollections",(function(o){s.invalidateCollections(),d(n.id,n.parameters,e.editorConnection,t)})),t.on("metadataChanged.systemCollections",(function(o){s.invalidateCollections(),d(n.id,n.parameters,e.editorConnection,t)}))}e.editorConnection&&e.editorConnection.isRunningLocally()&&t.on("editorImportComplete",(()=>{t.on("nodeAdded.DbModel2",(function(e){n(e)}));for(const e of t.getNodesWithType("DbModel2"))n(e)}))}}},8865:(e,t,n)=>{"use strict";var o=n(464);const i=n(4007);var r={node:{name:"DeleteDbModelProperties",docs:"https://docs.noodl.net/nodes/data/cloud-data/delete-record",displayNodeName:"Delete Record",shortDesc:"Stores any amount of properties and can be used standalone or together with Collections and For Each nodes.",inputs:{store:{displayName:"Do",group:"Actions",valueChangedToTrue:function(){this.storageDelete()}}},outputs:{deleted:{type:"signal",displayName:"Success",group:"Events"}},methods:{storageDelete:function(){const e=this,t=this._internal;this.checkWarningsBeforeCloudOp()&&this.scheduleOnce("StorageDelete",(function(){t.model?i.forScope(e.nodeScope.ModelScope).delete({collection:t.collectionId,objectId:t.model.getId(),success:function(){t.model.notify("delete"),e.sendSignalOnOutput("deleted")},error:function(t){e.setError(t||"Failed to delete.")}}):e.setError("Missing Record Id")}))}}}};o.addBaseInfo(r,{includeInputProperties:!1}),o.addModelId(r),e.exports=r},5962:(e,t,n)=>{"use strict";const{Node:o}=n(3948),i=n(9160),r=n(3839),s=n(4007),a=n(5802);var l={name:"FilterDBModels",docs:"https://docs.noodl.net/nodes/data/cloud-data/filter-records",displayNodeName:"Filter Records",shortDesc:"Filter, sort and limit array",category:"Data",color:"data",initialize:function(){var e=this;this._internal.collectionChangedCallback=function(){!0!==e.isInputConnected("filter")&&e.scheduleFilter()},this._internal.cloudStoreEvents=function(t){!0!==e.isInputConnected("filter")&&void 0!==e._internal.visualFilter&&void 0!==e._internal.collection&&t.collection===e._internal.collectionName&&void 0!==t.objectId&&e._internal.collection.contains(r.get(t.objectId))&&e.scheduleFilter()},s.instance.on("save",this._internal.cloudStoreEvents),this._internal.enabled=!0,this._internal.filterSettings={},this._internal.filterParameters={}},getInspectInfo(){const e=this._internal.filteredCollection;return e?[{type:"text",value:"Id: "+e.getId()},{type:"value",value:e.items}]:{type:"text",value:"[Not executed yet]"}},inputs:{items:{type:"array",displayName:"Items",group:"General",set(e){this.bindCollection(e),!1===this.isInputConnected("filter")&&this.scheduleFilter()}},enabled:{type:"boolean",group:"General",displayName:"Enabled",default:!0,set:function(e){this._internal.enabled=e,!1===this.isInputConnected("filter")&&this.scheduleFilter()}},filter:{type:"signal",group:"Actions",displayName:"Filter",valueChangedToTrue:function(){this.scheduleFilter()}}},outputs:{items:{type:"array",displayName:"Items",group:"General",getter:function(){return this._internal.filteredCollection}},firstItemId:{type:"string",displayName:"First Record Id",group:"General",getter:function(){if(void 0!==this._internal.filteredCollection){const e=this._internal.filteredCollection.get(0);if(void 0!==e)return e.getId()}}},count:{type:"number",displayName:"Count",group:"General",getter:function(){return this._internal.filteredCollection?this._internal.filteredCollection.size():0}},modified:{group:"Events",type:"signal",displayName:"Filtered"}},prototypeExtensions:{unbindCurrentCollection:function(){var e=this._internal.collection;e&&(e.off("change",this._internal.collectionChangedCallback),this._internal.collection=void 0)},bindCollection:function(e){this.unbindCurrentCollection(),this._internal.collection=e,e&&e.on("change",this._internal.collectionChangedCallback)},_onNodeDeleted:function(){o.prototype._onNodeDeleted.call(this),this.unbindCurrentCollection(),s.instance.off("save",this._internal.cloudStoreEvents)},getLimit:function(){const e=this._internal.filterSettings;return e.filterEnableLimit?e.filterLimit||10:void 0},getSkip:function(){const e=this._internal.filterSettings;return e.filterEnableLimit?e.filterSkip||0:void 0},scheduleFilter:function(){this.collectionChangedScheduled||(this.collectionChangedScheduled=!0,this.scheduleAfterInputsHaveUpdated((()=>{if(this.collectionChangedScheduled=!1,this._internal.collection){var e=[].concat(this._internal.collection.items);if(this._internal.enabled){const i=this._internal.visualFilter;if(void 0!==i){var t=a.convertVisualFilter(i,{queryParameters:this._internal.filterParameters,collectionName:this._internal.collectionName});t&&(e=e.filter((e=>a.matchesQuery(e,t))))}var n=this._internal.visualSorting;if(void 0!==n&&n.length>0)var o=a.convertVisualSorting(n);o&&e.sort(a.compareObjects.bind(this,o));var r=this.getSkip();r&&(e=e.slice(r,e.length));var s=this.getLimit();s&&(e=e.slice(0,s))}this._internal.filteredCollection=i.create(e),this.sendSignalOnOutput("modified"),this.flagOutputDirty("firstItemId"),this.flagOutputDirty("items"),this.flagOutputDirty("count")}})))},setCollectionName:function(e){this._internal.collectionName=e},setVisualFilter:function(e){this._internal.visualFilter=e,!1===this.isInputConnected("filter")&&this.scheduleFilter()},setVisualSorting:function(e){this._internal.visualSorting=e,!1===this.isInputConnected("filter")&&this.scheduleFilter()},setFilterParameter:function(e,t){this._internal.filterParameters[e]=t,!1===this.isInputConnected("filter")&&this.scheduleFilter()},registerInputIfNeeded:function(e){if(!this.hasInput(e))return"collectionName"===e?this.registerInput(e,{set:this.setCollectionName.bind(this)}):"visualFilter"===e?this.registerInput(e,{set:this.setVisualFilter.bind(this)}):"visualSorting"===e?this.registerInput(e,{set:this.setVisualSorting.bind(this)}):e.startsWith("fp-")?this.registerInput(e,{set:this.setFilterParameter.bind(this,e.substring(3))}):void this.registerInput(e,{set:u.bind(this,e)})}}};function u(e,t){this._internal.filterSettings[e]=t,!1===this.isInputConnected("filter")&&this.scheduleFilter()}function d(e,t,n,o){var i=[];if(i.push({name:"collectionName",type:{name:"enum",enums:void 0!==o?o.map((e=>({value:e.name,label:e.name}))):[],allowEditOnly:!0},displayName:"Class",plug:"input",group:"General"}),i.push({type:"boolean",plug:"input",group:"Limit",name:"filterEnableLimit",displayName:"Use limit"}),t.filterEnableLimit&&(i.push({type:"number",default:10,plug:"input",group:"Limit",name:"filterLimit",displayName:"Limit"}),i.push({type:"number",default:0,plug:"input",group:"Limit",name:"filterSkip",displayName:"Skip"})),void 0!==t.collectionName){var r=o.find((e=>e.name===t.collectionName));if(r&&r.schema&&r.schema.properties){const a=JSON.parse(JSON.stringify(r.schema)),l={Boolean:!0,String:!0,Date:!0,Number:!0,Pointer:!0};for(var s in a.properties)l[a.properties[s].type]||delete a.properties[s];i.push({name:"visualFilter",plug:"input",type:{name:"query-filter",schema:a,allowEditOnly:!0},displayName:"Filter",group:"Filter"}),i.push({name:"visualSorting",plug:"input",type:{name:"query-sorting",schema:a,allowEditOnly:!0},displayName:"Sorting",group:"Sorting"})}if(void 0!==t.visualFilter){const u={};function d(e){void 0!==e&&(void 0!==e.rules?e.rules.forEach((e=>d(e))):void 0!==e.input&&(u[e.input]=!0))}d(t.visualFilter),Object.keys(u).forEach((e=>{i.push({name:"fp-"+e,plug:"input",type:"*",displayName:e,group:"Filter Parameters"})}))}}n.sendDynamicPorts(e,i)}e.exports={node:l,setup:function(e,t){e.editorConnection&&e.editorConnection.isRunningLocally()&&t.on("nodeAdded.FilterDBModels",(function(n){d(n.id,n.parameters,e.editorConnection,t.getMetaData("dbCollections")),n.on("parameterUpdated",(function(o){d(n.id,n.parameters,e.editorConnection,t.getMetaData("dbCollections"))})),t.on("metadataChanged.dbCollections",(function(t){s.invalidateCollections(),d(n.id,n.parameters,e.editorConnection,t)})),t.on("metadataChanged.systemCollections",(function(t){s.invalidateCollections(),d(n.id,n.parameters,e.editorConnection,t)}))}))}}},9672:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";const Collection=__webpack_require__(9160),Model=__webpack_require__(3839);function _addBaseInfo(e){Object.assign(e.node,{category:"Data",color:"data"})}function _addModelId(e,t){const n=void 0===t||t.includeInputs,o=void 0===t||t.includeOutputs;Object.assign(e.node,{inputs:e.node.inputs||{},outputs:e.node.outputs||{},methods:e.node.methods||{}}),n&&(Object.assign(e.node,{usePortAsLabel:"modelId"}),e.node.dynamicports=(e.node.dynamicports||[]).concat([{name:"conditionalports/extended",condition:"idSource = explicit OR idSource NOT SET",inputs:["modelId"]}]),Object.assign(e.node.inputs,{idSource:{type:{name:"enum",enums:[{label:"Specify explicitly",value:"explicit"},{label:"From repeater",value:"foreach"}],allowEditOnly:!0},default:"explicit",displayName:"Id Source",group:"General",set:function(e){"foreach"===e&&this.scheduleAfterInputsHaveUpdated((()=>{for(var e=this.nodeScope.componentOwner;void 0!==e&&void 0===e._forEachModel&&e.parentNodeScope;)e=e.parentNodeScope.componentOwner;this.setModel(void 0!==e?e._forEachModel:void 0)}))}},modelId:{type:{name:"string",identifierOf:"ModelName",identifierDisplayName:"Object Ids"},displayName:"Id",group:"General",set:function(e){e instanceof Model&&(e=e.getId()),this._internal.modelId=e,this.setModelID(e)}}})),o&&Object.assign(e.node.outputs,{id:{type:"string",displayName:"Id",group:"General",getter:function(){return this._internal.model?this._internal.model.getId():this._internal.modelId}}}),Object.assign(e.node.methods,{setModelID:function(e){var t=(this.nodeScope.modelScope||Model).get(e);this.setModel(t)},setModel:function(e){this._internal.model=e,this.flagOutputDirty("id")}}),e.node.getInspectInfo||(e.node.getInspectInfo=function(){const e=this._internal.model;return e?[{type:"text",value:"Id: "+e.getId()},{type:"value",value:e.data}]:"[No Object]"})}function _addInputProperties(def){var _def={node:Object.assign({},def.node),setup:def.setup},_methods=Object.assign({},def.node.methods);Object.assign(def.node,{inputs:def.node.inputs||{},outputs:def.node.outputs||{},methods:def.node.methods||{}}),Object.assign(def,{setup:function(e,t){e.editorConnection&&e.editorConnection.isRunningLocally()&&(t.on("nodeAdded."+def.node.name,(function(t){function n(){var n=[];const o=[{label:"String",value:"string"},{label:"Boolean",value:"boolean"},{label:"Number",value:"number"},{label:"Date",value:"date"},{label:"Array",value:"array"},{label:"Object",value:"object"},{label:"Any",value:"*"}];var i=t.parameters.properties;if(i)for(var r in i=i?i.split(","):void 0){var s=i[r];n.push({type:{name:void 0===t.parameters["type-"+s]?"*":t.parameters["type-"+s]},plug:"input",group:"Property Values",displayName:s,name:"prop-"+s}),n.push({type:{name:"enum",enums:o,allowEditOnly:!0},plug:"input",group:"Property Types",displayName:s,default:"*",name:"type-"+s})}e.editorConnection.sendDynamicPorts(t.id,n,{detectRenamed:{plug:"input"}})}n(),t.on("parameterUpdated",(function(e){n()}))})),_def.setup&&_def.setup(e,t))}}),Object.assign(def.node,{initialize:function(){var e=this._internal;e.inputValues={},e.inputTypes={},_def.node.initialize&&_def.node.initialize.call(this)}}),Object.assign(def.node.outputs,{}),Object.assign(def.node.inputs,{properties:{type:{name:"stringlist",allowEditOnly:!0},displayName:"Properties",group:"Properties to set",set:function(e){}}}),Object.assign(def.node.methods,{_pushInputValues:function(model){var internal=this._internal;const _defaultValueForType={boolean:!1,string:"",number:0,date:new Date},_allKeys={};for(const e in internal.inputTypes)_allKeys[e]=!0;for(const e in internal.inputValues)_allKeys[e]=!0;const properties=this.model.parameters.properties||"",validProperties=properties.split(","),keysToSet=Object.keys(_allKeys).filter((e=>-1!==validProperties.indexOf(e)));for(const i of keysToSet){var value=internal.inputValues[i];if(void 0!==value){if(void 0!==internal.inputTypes[i]&&"array"===internal.inputTypes[i]&&"string"==typeof value){this.context.editorConnection.clearWarning(this.nodeScope.componentOwner.name,this.id,"invalid-array-"+i);try{value=eval(value)}catch(e){-1!==value.indexOf("[")||-1!==value.indexOf("{")?(this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"invalid-array-"+i,{showGlobally:!0,message:"Invalid array<br>"+e.toString()}),value=[]):value=Collection.get(value)}}void 0!==internal.inputTypes[i]&&"object"===internal.inputTypes[i]&&"string"==typeof value&&(value=(this.nodeScope.modelScope||Model).get(value)),model.set(i,value,{resolve:!0})}else model.set(i,_defaultValueForType[internal.inputTypes[i]],{resolve:!0})}},scheduleStore:function(){if(!this.hasScheduledStore){this.hasScheduledStore=!0;var e=this._internal;this.scheduleAfterInputsHaveUpdated((()=>{this.hasScheduledStore=!1,e.model&&(this._pushInputValues(e.model),this.sendSignalOnOutput("stored"))}))}},registerInputIfNeeded:function(e){this.hasInput(e)||(e.startsWith("prop-")&&this.registerInput(e,{set:this._setInputValue.bind(this,e.substring(5))}),e.startsWith("type-")&&this.registerInput(e,{set:this._setInputType.bind(this,e.substring(5))}),_methods&&_methods.registerInputIfNeeded&&_def.node.methods.registerInputIfNeeded.call(this,e))},_setInputValue:function(e,t){this._internal.inputValues[e]=t},_setInputType:function(e,t){this._internal.inputTypes[e]=t}})}module.exports={addInputProperties:_addInputProperties,addModelId:_addModelId,addBaseInfo:_addBaseInfo}},5271:(e,t,n)=>{"use strict";const{Node:o}=n(3948);var i=n(3839),r={name:"Model2",docs:"https://docs.noodl.net/nodes/data/object/object-node",displayNodeName:"Object",shortDesc:"Stores any amount of properties and can be used standalone or together with Collections and For Each nodes.",category:"Data",usePortAsLabel:"modelId",color:"data",dynamicports:[{name:"conditionalports/extended",condition:"idSource = explicit OR idSource NOT SET",inputs:["modelId"]}],initialize:function(){var e=this._internal;e.inputValues={},e.dirtyValues={};var t=this;this._internal.onModelChangedCallback=function(e){!0!==t.isInputConnected("fetch")&&(t.hasOutput("prop-"+e.name)&&t.flagOutputDirty("prop-"+e.name),t.hasOutput("changed-"+e.name)&&t.sendSignalOnOutput("changed-"+e.name),t.sendSignalOnOutput("changed"))}},getInspectInfo(){const e=this._internal.model;return e?[{type:"text",value:"Id: "+e.getId()},{type:"value",value:e.data}]:"[No Object]"},outputs:{id:{type:"string",displayName:"Id",group:"General",getter:function(){return this._internal.model?this._internal.model.getId():this._internal.modelId}},changed:{type:"signal",displayName:"Changed",group:"Events"},fetched:{type:"signal",displayName:"Fetched",group:"Events"}},inputs:{idSource:{type:{name:"enum",enums:[{label:"Specify explicitly",value:"explicit"},{label:"From repeater",value:"foreach"}],allowEditOnly:!0},default:"explicit",displayName:"Get Id from",group:"General",set:function(e){"foreach"===e&&this.scheduleAfterInputsHaveUpdated((()=>{for(var e=this.nodeScope.componentOwner;void 0!==e&&void 0===e._forEachModel&&e.parentNodeScope;)e=e.parentNodeScope.componentOwner;this.setModel(void 0!==e?e._forEachModel:void 0)}))}},modelId:{type:{name:"string",identifierOf:"ModelName",identifierDisplayName:"Object Ids"},displayName:"Id",group:"General",set:function(e){e instanceof i?e=e.getId():"object"==typeof e&&(e=i.create(e).getId()),this._internal.modelId=e,!1===this.isInputConnected("fetch")?this.setModelID(e):this.flagOutputDirty("id")}},properties:{type:{name:"stringlist",allowEditOnly:!0},displayName:"Properties",group:"Properties",set:function(e){}},fetch:{displayName:"Fetch",group:"Actions",valueChangedToTrue:function(){this.scheduleSetModel()}}},prototypeExtensions:{scheduleStore:function(){if(!this.hasScheduledStore){this.hasScheduledStore=!0;var e=this._internal;this.scheduleAfterInputsHaveUpdated((()=>{if(this.hasScheduledStore=!1,e.model){for(var t in e.dirtyValues)e.model.set(t,e.inputValues[t],{resolve:!0});e.dirtyValues={}}}))}},scheduleSetModel:function(){this.hasScheduledSetModel||(this.hasScheduledSetModel=!0,this._internal,this.scheduleAfterInputsHaveUpdated((()=>{this.hasScheduledSetModel=!1,this.setModelID(this._internal.modelId)})))},setModelID:function(e){var t=(this.nodeScope.modelScope||i).get(e);this.setModel(t),this.sendSignalOnOutput("fetched")},setModel:function(e){if(this._internal.model&&this._internal.model.off("change",this._internal.onModelChangedCallback),this._internal.model=e,this.flagOutputDirty("id"),e)for(var t in e.on("change",this._internal.onModelChangedCallback),e.data)this.hasOutput("prop-"+t)&&this.flagOutputDirty("prop-"+t)},_onNodeDeleted:function(){o.prototype._onNodeDeleted.call(this),this._internal.model&&this._internal.model.off("change",this._internal.onModelChangedCallback)},registerOutputIfNeeded:function(e){this.hasOutput(e)||e.startsWith("prop-")&&this.registerOutput(e,{getter:s.bind(this,e.substring(5))})},registerInputIfNeeded:function(e){this.hasInput(e)||e.startsWith("prop-")&&this.registerInput(e,{set:a.bind(this,e.substring(5))})}}};function s(e){return this._internal.model?this._internal.model.get(e,{resolve:!0}):void 0}function a(e,t){this._internal.inputValues[e]=t;const n=this._internal.model;(!n||n.get(e)!==t)&&(this._internal.dirtyValues[e]=!0,this.scheduleStore())}function l(e,t,n){var o=[],i=t.properties;if(i)for(var r in i=i?i.split(","):void 0){var s=i[r];o.push({type:{name:"*",allowConnectionsOnly:!0},plug:"input/output",group:"Properties",name:"prop-"+s,displayName:s}),o.push({type:"signal",plug:"output",group:"Changed Events",displayName:s+" Changed",name:"changed-"+s})}n.sendDynamicPorts(e,o,{detectRenamed:{plug:"input/output"}})}e.exports={node:r,setup:function(e,t){e.editorConnection&&e.editorConnection.isRunningLocally()&&t.on("nodeAdded.Model2",(function(t){l(t.id,t.parameters,e.editorConnection),t.on("parameterUpdated",(function(n){l(t.id,t.parameters,e.editorConnection)}))}))}}},4763:(e,t,n)=>{"use strict";var o=n(3839),i=n(464);const r=n(4007);var s={node:{name:"NewDbModelProperties",docs:"https://docs.noodl.net/nodes/data/cloud-data/create-new-record",displayName:"Create New Record",usePortAsLabel:"collectionName",inputs:{store:{displayName:"Do",group:"Actions",valueChangedToTrue:function(){this.storageInsert()}},sourceObjectId:{type:{name:"string",allowConnectionsOnly:!0},displayName:"Source Object Id",group:"General",set:function(e){e instanceof o&&(e=e.getId()),this._internal.sourceObjectId=e}}},outputs:{created:{type:"signal",displayName:"Success",group:"Events"}},methods:{storageInsert:function(){const e=this._internal;this.checkWarningsBeforeCloudOp()&&this.scheduleOnce("StorageInsert",(()=>{const t=Object.assign({},e.sourceObjectId?(this.nodeScope.modelScope||o).get(e.sourceObjectId).data:{},e.inputValues),n=r.forScope(this.nodeScope.modelScope);n.create({collection:e.collectionId,data:t,acl:this._getACL(),success:t=>{const o=n._fromJSON(t,e.collectionId);this.setModel(o),this.sendSignalOnOutput("created")},error:e=>{this.setError(e||"Failed to insert.")}})}))}}}};i.addBaseInfo(s),i.addModelId(s,{includeOutputs:!0}),i.addInputProperties(s),i.addAccessControl(s),e.exports=s},9780:(e,t,n)=>{"use strict";var o=n(3839),i=n(9672),r={node:{name:"NewModel",docs:"https://docs.noodl.net/nodes/data/object/create-new-object",displayNodeName:"Create New Object",inputs:{new:{displayName:"Do",group:"Actions",valueChangedToTrue:function(){this.scheduleNew()}}},outputs:{created:{type:"signal",displayName:"Done",group:"Events"}},methods:{scheduleNew:function(){this.hasScheduledNew||(this.hasScheduledNew=!0,this.scheduleAfterInputsHaveUpdated((()=>{this.hasScheduledNew=!1;const e=(this.nodeScope.modelScope||o).get();this._pushInputValues(e),this.setModel(e),this.sendSignalOnOutput("created")})))}}}};i.addBaseInfo(r),i.addModelId(r,{includeOutputs:!0}),i.addInputProperties(r),e.exports=r},6430:e=>{var t={name:"REST2",displayNodeName:"REST",docs:"https://docs.noodl.net/nodes/data/rest",category:"Data",color:"data",searchTags:["http","request","fetch"],initialize:function(){this._internal.inputValues={},this._internal.outputValues={},this._internal.outputValuesProxy=new Proxy(this._internal.outputValues,{set:(e,t,n)=>(n!==this._internal.outputValues[t]&&(this.registerOutputIfNeeded("out-"+t),this._internal.outputValues[t]=n,this.flagOutputDirty("out-"+t)),!0)}),this._internal.self={}},getInspectInfo(){return this._internal.inspectData?{type:"value",value:this._internal.inspectData}:{type:"text",value:"[Not executed yet]"}},inputs:{resource:{type:"string",displayName:"Resource",group:"Request",default:"/",set:function(e){this._internal.resource=e}},method:{type:{name:"enum",enums:[{label:"GET",value:"GET"},{label:"POST",value:"POST"},{label:"PUT",value:"PUT"},{label:"PATCH",value:"PATCH"},{label:"DELETE",value:"DELETE"}]},displayName:"Method",group:"Request",default:"GET",set:function(e){this._internal.method=e}},requestScript:{type:{name:"string",allowEditOnly:!0,codeeditor:"javascript"},displayName:"Request",default:"//Add custom code to setup the request object before the request\n//is made.\n//\n//*Request.resource     contains the resource path of the request.\n//*Request.method       contains the method, GET, POST, PUT or DELETE.\n//*Request.headers      is a map where you can add additional headers.\n//*Request.parameters   is a map the parameters that will be appended\n//                      to the url.\n//*Request.content      contains the content of the request as a javascript\n//                      object.\n//\n",group:"Scripts",set:function(e){try{this._internal.requestFunc=new Function("Inputs","Outputs","Request",e)}catch(e){console.log(e)}}},responseScript:{type:{name:"string",allowEditOnly:!0,codeeditor:"javascript"},displayName:"Response",default:"// Add custom code to convert the response content to outputs\n//\n//*Response.status    The status code of the response\n//*Response.content   The content of the response as a javascript\n//                    object.\n//*Response.request   The request object that resulted in the response.\n//\n//*Inputs and *Outputs contain the inputs and outputs of the node.\n",group:"Scripts",set:function(e){try{this._internal.responseFunc=new Function("Inputs","Outputs","Response",e)}catch(e){console.log(e)}}},fetch:{type:"signal",displayName:"Fetch",group:"Actions",valueChangedToTrue:function(){this.scheduleFetch()}},cancel:{type:"signal",displayName:"Cancel",group:"Actions",valueChangedToTrue:function(){this.cancelFetch()}}},outputs:{failure:{type:"signal",displayName:"Failure",group:"Events"},success:{type:"signal",displayName:"Success",group:"Events"},canceled:{type:"signal",displayName:"Canceled",group:"Events"}},prototypeExtensions:{getScriptOutputValue:function(e){return this._internal.outputValues[e]},setScriptInputValue:function(e,t){return this._internal.inputValues[e]=t},registerOutputIfNeeded:function(e){if(!this.hasOutput(e))return e.startsWith("out-")?this.registerOutput(e,{getter:this.getScriptOutputValue.bind(this,e.substring(4))}):void 0},registerInputIfNeeded:function(e){if(!this.hasInput(e))return e.startsWith("in-")?this.registerInput(e,{set:this.setScriptInputValue.bind(this,e.substring(3))}):void 0},scheduleFetch:function(){var e=this._internal;e.hasScheduledFetch||(e.hasScheduledFetch=!0,this.scheduleAfterInputsHaveUpdated(this.doFetch.bind(this)))},doResponse:function(e,t,n){this._internal.responseFunc&&this._internal.responseFunc.apply(this._internal.self,[this._internal.inputValues,this._internal.outputValuesProxy,{status:e,content:t,request:n}]),this._internal.inspectData={status:e,content:t},e>=200&&e<300?this.sendSignalOnOutput("success"):this.sendSignalOnOutput("failure")},doExternalFetch:function(e){var t=e.resource;if(Object.keys(e.parameters).length>0){var n=Object.keys(e.parameters).map((function(t){return t+"="+encodeURIComponent(e.parameters[t])}));t+="?"+n.join("&")}if("undefined"==typeof _noodl_cloud_runtime_version){var o=this,i=new window.XMLHttpRequest;for(var r in this._xhr=i,i.open(e.method,t,!0),e.headers)i.setRequestHeader(r,e.headers[r]);i.onreadystatechange=function(){var t=!1;if(4===this.readyState||this.readyState===XMLHttpRequest.DONE){var n=this.status,i=this.getResponseHeader("content-type"),r=this.response;if(delete this._xhr,i){const s=-1!==(i=i.toLowerCase()).indexOf("json")?JSON.parse(r):r;o.doResponse(n,s,e),t=!0}!1===t&&o.doResponse(n,r,e)}},i.onerror=function(e){delete this._xhr,o.sendSignalOnOutput("failure")},i.onabort=function(){delete this._xhr,o.sendSignalOnOutput("canceled")},e.content?(i.setRequestHeader("Content-Type","application/json"),i.send(JSON.stringify(e.content))):i.send()}else{const n=Object.assign({},e.headers,e.content?{"Content-Type":"application/json"}:{});fetch(t,{method:e.method,headers:n,body:e.content?JSON.stringify(e.content):void 0}).then((t=>{const n=t.headers.get("content-type");n?-1!==n.indexOf("/json")?t.json().then((n=>{this.doResponse(t.status,n,e)})):this.context.editorConnection&&this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"rest-run-waring-",{message:"REST only supports json content type in response."}):t.text().then((n=>{this.doResponse(t.status,n,e)}))})).catch((e=>{console.log("REST: Failed to request",t),console.log(e),this.sendSignalOnOutput("failure")}))}},doFetch:function(){this._internal.hasScheduledFetch=!1;var e=this._internal.resource;if(e)for(var t in this._internal.inputValues)e=e.replace("{"+t+"}",this._internal.inputValues[t]);var n={resource:e,headers:{},method:void 0!==this._internal.method?this._internal.method:"GET",parameters:{}};this._internal.requestFunc&&this._internal.requestFunc.apply(this._internal.self,[this._internal.inputValues,this._internal.outputValuesProxy,n]),this.doExternalFetch(n)},cancelFetch:function(){"undefined"==typeof _noodl_cloud_runtime_version?this._xhr&&this._xhr.abort():this.context.editorConnection&&this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"rest-run-waring-",{message:"REST doesn't support cancel in cloud functions."})}}};function n(e,t,n,o,i,r){if(i.editorConnection.clearWarning(o.component.name,o.id,"rest-run-waring-"+n),void 0===e)return void i.editorConnection.clearWarning(o.component.name,o.id,"rest-parse-waring-"+n);try{new Function(...t,e),i.editorConnection.clearWarning(o.component.name,o.id,"rest-parse-waring-"+n)}catch(e){i.editorConnection.sendWarning(o.component.name,o.id,"rest-parse-waring-"+n,{message:"<strong>"+n+"</strong>: "+e.message,showGlobally:!0})}function s(e){return void 0!==r.find((t=>t.name===e))}const a=e.replace(/\/\*[\s\S]*?\*\/|\/\/.*/g,""),l=a.match(/Inputs\.[A-Za-z0-9]+/g);if(l){const e={};l.forEach((t=>{e[t.substring(7)]=!0})),Object.keys(e).forEach((e=>{s("in-"+e)||r.push({name:"in-"+e,displayName:e,plug:"input",type:"*",group:"Inputs"})}))}const u=a.match(/Outputs\.[A-Za-z0-9]+/g);if(u){const e={};u.forEach((t=>{e[t.substring(8)]=!0})),Object.keys(e).forEach((e=>{s("out-"+e)||r.push({name:"out-"+e,displayName:e,plug:"output",type:"*",group:"Outputs"})}))}}e.exports={node:t,setup:function(e,t){function o(t){function o(){if(t.parameters){var o=[];if(t.parameters.resource){var i=t.parameters.resource.match(/\{[A-Za-z0-9_]*\}/g);for(var r in i){var s=i[r].replace("{","").replace("}","");a("in-"+s)||o.push({name:"in-"+s,displayName:s,type:"string",plug:"input",group:"Inputs"})}}t.parameters.requestScript&&n(t.parameters.requestScript,["Inputs","Outputs","Request"],"Request script",t,e,o),t.parameters.responseScript&&n(t.parameters.responseScript,["Inputs","Outputs","Response"],"Response script",t,e,o),e.editorConnection.sendDynamicPorts(t.id,o)}function a(e){for(var t=0;t<o.length;t++)if(o[t].name===e&&"input"===o[t].plug)return!0;return!1}}o(),t.on("parameterUpdated",(function(){o()}))}e.editorConnection&&t.on("editorImportComplete",(()=>{t.on("nodeAdded.REST2",(function(e){o(e)}));for(const e of t.getNodesWithType("REST2"))o(e)}))}}},6280:(e,t,n)=>{"use strict";var o=n(464);const i=n(4007);var r={node:{name:"SetDbModelProperties",docs:"https://docs.noodl.net/nodes/data/cloud-data/set-record-properties",displayNodeName:"Set Record Properties",usePortAsLabel:"collectionName",dynamicports:[{name:"conditionalports/extended",condition:"storeType = cloud OR storeType NOT SET",inputs:["storeProperties"]}],inputs:{store:{displayName:"Do",group:"Actions",valueChangedToTrue:function(){void 0===this._internal.storeType||"cloud"===this._internal.storeType?this.scheduleSave():this.scheduleStore()}},storeProperties:{displayName:"Properties to  store",group:"General",type:{name:"enum",enums:[{label:"Only specified",value:"specified"},{label:"All",value:"all"}]},default:"specified",set:function(e){this._internal.storeProperties=e}},storeType:{displayName:"Store to",group:"General",type:{name:"enum",enums:[{label:"Cloud and local",value:"cloud"},{label:"Local only",value:"local"}]},default:"cloud",set:function(e){this._internal.storeType=e}}},outputs:{stored:{type:"signal",displayName:"Success",group:"Events"}},methods:{scheduleSave:function(){const e=this,t=this._internal;this.checkWarningsBeforeCloudOp()&&this.scheduleOnce("StorageSave",(function(){if(!t.model)return void e.setError("Missing Record Id");const n=t.model;for(const e in t.inputValues)n.set(e,t.inputValues[e],{resolve:!0});i.forScope(e.nodeScope.modelScope).save({collection:t.collectionId,objectId:n.getId(),data:"all"===t.storeProperties?n.data:t.inputValues,acl:e._getACL(),success:function(t){for(var o in t)n.set(o,t[o]);e.sendSignalOnOutput("stored")},error:function(t){e.setError(t||"Failed to save.")}})}))},scheduleStore:function(){if(!this.hasScheduledStore){this.hasScheduledStore=!0;var e=this._internal;this.scheduleAfterInputsHaveUpdated((()=>{if(this.hasScheduledStore=!1,e.model){for(var t in e.inputValues)e.model.set(t,e.inputValues[t],{resolve:!0});this.sendSignalOnOutput("stored")}}))}}}}};o.addBaseInfo(r),o.addModelId(r),o.addInputProperties(r),o.addAccessControl(r),e.exports=r},2474:(e,t,n)=>{"use strict";var o=n(9672),i={node:{name:"SetModelProperties",docs:"https://docs.noodl.net/nodes/data/object/set-object-properties",displayNodeName:"Set Object Properties",inputs:{store:{displayName:"Do",group:"Actions",valueChangedToTrue:function(){this.scheduleStore()}}},outputs:{stored:{type:"signal",displayName:"Done",group:"Events"}}}};o.addBaseInfo(i),o.addModelId(i),o.addInputProperties(i),e.exports=i},8911:e=>{"use strict";const t={name:"Date To String",docs:"https://docs.noodl.net/nodes/utilities/date-to-string",category:"Utilities",initialize:function(){this._internal.formatString="{year}-{month}-{date}"},inputs:{formatString:{displayName:"Format",type:"string",default:"{year}-{month}-{date}",set:function(e){this._internal.formatString!==e&&(this._internal.formatString=e,void 0!==this._internal.currentInput&&(this._format(),this.flagOutputDirty("currentValue")))}},input:{type:{name:"date"},displayName:"Date",set:function(e){const t="string"==typeof e?new Date(e):e;this._internal.currentInput!==t&&(this._internal.currentInput=t,this._format(),this.flagOutputDirty("currentValue"),this.sendSignalOnOutput("inputChanged"))}}},outputs:{currentValue:{type:"string",displayName:"Date String",group:"Value",getter:function(){return this._internal.dateString}},inputChanged:{type:"signal",displayName:"Date Changed",group:"Signals"}},methods:{_format(){const e=this._internal.currentInput,t=this._internal.formatString,n=("0"+e.getDate()).slice(-2),o=("0"+(e.getMonth()+1)).slice(-2),i=new Intl.DateTimeFormat("en-US",{month:"short"}).format(e),r=e.getFullYear(),s=r.toString().substring(2),a=("0"+e.getHours()).slice(-2),l=("0"+e.getMinutes()).slice(-2),u=("0"+e.getSeconds()).slice(-2);this._internal.dateString=t.replace(/\{date\}/g,n).replace(/\{month\}/g,o).replace(/\{monthShort\}/g,i).replace(/\{year\}/g,r).replace(/\{yearShort\}/g,s).replace(/\{hours\}/g,a).replace(/\{minutes\}/g,l).replace(/\{seconds\}/g,u)}}};e.exports={node:t}},8675:(e,t,n)=>{"use strict";const o=n(2806),i={name:"Expression",docs:"https://docs.noodl.net/nodes/math/expression",usePortAsLabel:"expression",category:"CustomCode",color:"javascript",nodeDoubleClickAction:{focusPort:"Expression"},searchTags:["javascript"],initialize:function(){var e=this._internal;e.scope={},e.hasScheduledEvaluation=!1,e.code=void 0,e.cachedValue=0,e.currentExpression="",e.compiledFunction=void 0,e.inputNames=[],e.inputValues=[]},getInspectInfo(){return this._internal.cachedValue},inputs:{expression:{group:"General",inputPriority:1,type:{name:"string",allowEditOnly:!0,codeeditor:"javascript"},displayName:"Expression",set:function(e){var t=this._internal;t.currentExpression=r+"return ("+e+");",t.compiledFunction=void 0;var n=l(e),i=o(n,t.inputNames),s=o(t.inputNames,n),a=this;s.forEach((function(e){a.deregisterInput(e),delete t.scope[e]})),i.forEach((function(e){a.hasInput(e)||(a.registerInput(e,{set:function(n){t.scope[e]=n,this.isInputConnected("run")||this._scheduleEvaluateExpression()}}),t.scope[e]=0,a._inputValues[e]=0)})),t.inputNames=Object.keys(t.scope),this.isInputConnected("run")||this._scheduleEvaluateExpression()}},run:{group:"Actions",displayName:"Run",type:"signal",valueChangedToTrue:function(){this._scheduleEvaluateExpression()}}},outputs:{result:{group:"Result",type:"*",displayName:"Result",getter:function(){return this._internal.currentExpression?this._internal.cachedValue:0}},isTrue:{group:"Result",type:"boolean",displayName:"Is True",getter:function(){return!!this._internal.currentExpression&&!!this._internal.cachedValue}},isFalse:{group:"Result",type:"boolean",displayName:"Is False",getter:function(){return!this._internal.currentExpression||!this._internal.cachedValue}},isTrueEv:{group:"Events",type:"signal",displayName:"On True"},isFalseEv:{group:"Events",type:"signal",displayName:"On False"}},prototypeExtensions:{registerInputIfNeeded:{value:function(e){this.hasInput(e)||(this._internal.scope[e]=0,this._inputValues[e]=0,this.registerInput(e,{set:function(t){this._internal.scope[e]=t,this.isInputConnected("run")||this._scheduleEvaluateExpression()}}))}},_scheduleEvaluateExpression:{value:function(){var e=this._internal;!1===e.hasScheduledEvaluation&&(e.hasScheduledEvaluation=!0,this.flagDirty(),this.scheduleAfterInputsHaveUpdated((function(){var t=e.cachedValue;e.cachedValue=this._calculateExpression(),t!==e.cachedValue&&(this.flagOutputDirty("result"),this.flagOutputDirty("isTrue"),this.flagOutputDirty("isFalse")),e.cachedValue?this.sendSignalOnOutput("isTrueEv"):this.sendSignalOnOutput("isFalseEv"),e.hasScheduledEvaluation=!1})))}},_calculateExpression:{value:function(){var e=this._internal;e.compiledFunction||(e.compiledFunction=this._compileFunction());for(var t=0;t<e.inputNames.length;++t){var n=e.scope[e.inputNames[t]];e.inputValues[t]=n}try{return e.compiledFunction.apply(null,e.inputValues)}catch(e){console.error("Error in expression:",e.message)}return 0}},_compileFunction:{value:function(){var e=this._internal.currentExpression,t=Object.keys(this._internal.scope),n=e+t.join(" ");if(!1===s.hasOwnProperty(n)){t.push(e);try{s[n]=function(e,t){function n(){return e.apply(this,t)}return n.prototype=e.prototype,new n}(Function,t)}catch(e){console.error("Failed to compile JS function",e.message)}}return s[n]}}}};var r=["var min = Math.min,    max = Math.max,    cos = Math.cos,    sin = Math.sin,    tan = Math.tan,    sqrt = Math.sqrt,    pi = Math.PI,    round = Math.round,    floor = Math.floor,    ceil = Math.ceil,    abs = Math.abs,    random = Math.random;"].join(""),s={},a=["min","max","cos","sin","tan","sqrt","pi","round","floor","ceil","abs","random","Math","window","document","undefined","Vars","true","false","null","Boolean"];function l(e){var t=[];function n(e){-1===a.indexOf(e)&&(t.some((function(t){return t===e}))||t.push(e))}var o=(e=e.replace(/\"([^\"]*)\"/g,"").replace(/\'([^\']*)\'/g,"")).matchAll(/[a-zA-Z\_\$][a-zA-Z0-9\.\_\$]*/g);for(const e of o){var i=e[0];-1!==i.indexOf(".")&&(i=i.split(".")[0]),n(i)}return t}function u(e,t,n){var o=l(t).map((function(e){return{group:"Parameters",name:e,type:{name:"*",editAsType:"string"},plug:"input"}}));n.sendDynamicPorts(e,o)}function d(e,t){try{new Function(t.parameters.expression),e.clearWarning(t.component.name,t.id,"expression-compile-error")}catch(n){e.sendWarning(t.component.name,t.id,"expression-compile-error",{message:n.message})}}e.exports={node:i,setup:function(e,t){e.editorConnection&&e.editorConnection.isRunningLocally()&&t.on("nodeAdded.Expression",(function(t){t.parameters.expression&&(u(t.id,t.parameters.expression,e.editorConnection),d(e.editorConnection,t)),t.on("parameterUpdated",(function(n){"expression"===n.name&&(u(t.id,t.parameters.expression,e.editorConnection),d(e.editorConnection,t))}))}))}}},7820:e=>{"use strict";function t(e){if(void 0!==e)return!e}const n={name:"Inverter",docs:"https://docs.noodl.net/nodes/logic/inverter",category:"Logic",initialize:function(){this._internal.currentValue=void 0},getInspectInfo(){return String(t(this._internal.currentValue))},inputs:{value:{type:{name:"boolean"},displayName:"Value",set:function(e){this._internal.currentValue=e,this.flagOutputDirty("result")}}},outputs:{result:{type:"boolean",displayName:"Result",getter:function(){return t(this._internal.currentValue)}}}};e.exports={node:n}},6307:e=>{"use strict";const t={name:"Or",docs:"https://docs.noodl.net/nodes/logic/or",category:"Logic",initialize:function(){this._internal.inputs=[]},getInspectInfo(){return this._internal.inputs.some(n)},numberedInputs:{input:{type:"boolean",displayPrefix:"Input",createSetter:e=>function(t){this._internal.inputs[e]!==t&&(this._internal.inputs[e]=t,this.flagOutputDirty("result"))}}},outputs:{result:{type:"boolean",displayName:"Result",getter:function(){return this._internal.inputs.some(n)}}}};function n(e){return!!e}e.exports={node:t}},3734:(e,t,n)=>{const{Node:o}=n(3948),i=n(7662),r=n(3839),s={name:"RunTasks",displayNodeName:"Run Tasks",docs:"https://docs.noodl.net/nodes/data/run-tasks",color:"data",category:"Data",initialize(){this._internal.queuedOperations=[],this._internal.state="idle",this._internal.maxRunningTasks=10,this._internal.activeTasks=new Map},inputs:{items:{group:"Data",displayName:"Items",type:"array",set:function(e){e&&e!==this._internal.items&&(this._internal.items=e)}},stopOnFailure:{group:"General",displayName:"Stop On Failure",type:"boolean",default:!1,set:function(e){this._internal.stopOnFailure=e}},maxRunningTasks:{group:"General",displayName:"Max Running Tasks",type:"number",default:10,set:function(e){this._internal.maxRunningTasks=e}},taskTemplate:{type:"component",displayName:"Template",group:"General",set:function(e){this._internal.template=e}},run:{group:"General",displayName:"Do",type:"signal",valueChangedToTrue:function(){this.scheduleRun()}},abort:{group:"General",displayName:"Abort",type:"signal",valueChangedToTrue:function(){this.scheduleAbort()}}},outputs:{success:{type:"signal",group:"Events",displayName:"Success"},failure:{type:"signal",group:"Events",displayName:"Failure"},done:{type:"signal",group:"Events",displayName:"Done"},aborted:{type:"signal",group:"Events",displayName:"Aborted"}},methods:{scheduleRun(){var e=this._internal;e.hasScheduledRun||(e.hasScheduledRun=!0,this.scheduleAfterInputsHaveUpdated((()=>{this._queueOperation((()=>{e.hasScheduledRun=!1,this.run()}))})))},scheduleAbort(){var e=this._internal;e.hasScheduledAbort||(e.hasScheduledAbort=!0,this.scheduleAfterInputsHaveUpdated((()=>{this._queueOperation((()=>{e.hasScheduledAbort=!1,this.abort()}))})))},async createTaskComponent(e){const t=this._internal,n=(this.nodeScope.modelScope||r).create(e);var o=await this.nodeScope.createNode(t.template,i(),{_forEachModel:n,_forEachNode:this});const s=o.isInputConnected.bind(o);for(var a in o.isInputConnected=e=>"Do"===e||s(e),o.hasInput("Id")&&o.setInputValue("Id",n.getId()),o.hasInput("id")&&o.setInputValue("id",n.getId()),o._inputs)void 0!==n.data[a]&&o.setInputValue(a,n.data[a]);return o._internal.creatorCallbacks={onOutputChanged:(e,t,i)=>{!1!==i&&void 0!==i||!0!==t||this.itemOutputSignalTriggered(e,n,o)}},o},async startTask(e){const t=this._internal;try{const o=await this.createTaskComponent(e);t.runningTasks++,"Do",(n=o).queueInput("Do",!0),n.queueInput("Do",!1),t.activeTasks.set(o.id,o)}catch(e){console.log(e)}var n},async run(){const e=this._internal;if(this.context.editorConnection&&("idle"!==e.state?this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"run-tasks",{message:"Cannot start when not in idle mode"}):e.template?e.items?this.context.editorConnection.clearWarning(this.nodeScope.componentOwner.name,this.id,"run-tasks"):this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"run-tasks",{message:"No items array provided."}):this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"run-tasks",{message:"No task template specified."})),"idle"===e.state&&e.template&&e.items){e.state="running",e.numTasks=e.items.length,e.failedTasks=0,e.completedTasks=0,e.queuedTasks=[].concat(e.items),e.runningTasks=0,0===e.items.length&&(this.sendSignalOnOutput("success"),e.state="idle");for(let t=0;t<Math.min(e.maxRunningTasks,e.queuedTasks.length);t++){const t=e.queuedTasks.shift();if(!t)break;this.startTask(t)}}},abort:function(){this._internal.state="aborted"},itemOutputSignalTriggered:function(e,t,n){const o=this._internal;if("idle"===o.state)return;const i=()=>{if("aborted"===o.state)return this.sendSignalOnOutput("aborted"),void(o.state="idle");if(o.completedTasks===o.numTasks)0===o.failedTasks?this.sendSignalOnOutput("success"):this.sendSignalOnOutput("failure"),this.sendSignalOnOutput("done"),o.state="idle";else if(o.stopOnFailure)if(0===o.failedTasks){o.runningTasks++;const e=o.queuedTasks.shift();e&&this.startTask(e)}else this.sendSignalOnOutput("failure"),this.sendSignalOnOutput("aborted");else{o.runningTasks++;const e=o.queuedTasks.shift();e&&this.startTask(e)}};"Success"===e?(o.completedTasks++,o.runningTasks--,i()):"Failure"===e&&(o.completedTasks++,o.failedTasks++,o.runningTasks--,i()),o.activeTasks.delete(n.id),this.nodeScope.deleteNode(n)},_queueOperation(e){this._internal.queuedOperations.push(e),this._runQueueOperations()},async _runQueueOperations(){if(!this.runningOperations){for(this.runningOperations=!0;this._internal.queuedOperations.length;){const e=this._internal.queuedOperations.shift();await e()}this.runningOperations=!1}}},_deleteAllTasks(){for(const e of this._internal.activeTasks)this.nodeScope.deleteNode(e);this._internal.activeTasks.clear()},_onNodeDeleted:function(){o.prototype._onNodeDeleted.call(this),this._deleteAllTasks()}};e.exports={node:s}},9222:(e,t,n)=>{const o=n(5995),{logJavaScriptNodeError:i}=n(5722),r={name:"JavaScriptFunction",displayNodeName:"Function",docs:"https://docs.noodl.net/nodes/javascript/function",category:"CustomCode",color:"javascript",nodeDoubleClickAction:{focusPort:"Script"},searchTags:["javascript"],exportDynamicPorts:!0,initialize:function(){this._internal.inputValues={},this._internal.outputValues={},this._internal.outputValuesProxy=new Proxy(this._internal.outputValues,{set:(e,t,n)=>{if(!this._deleted)return n!==this._internal.outputValues[t]&&(this.registerOutputIfNeeded("out-"+t),this._internal.outputValues[t]=n,this.flagOutputDirty("out-"+t)),!0}}),this._internal._this={}},getInspectInfo(){return[{type:"value",value:{inputs:this._internal.inputValues,outputs:this._internal.outputValues}}]},inputs:{scriptInputs:{type:{name:"proplist",allowEditOnly:!0},group:"Script Inputs",set(e){}},scriptOutputs:{type:{name:"proplist",allowEditOnly:!0},group:"Script Outputs",set(e){}},functionScript:{displayName:"Script",plug:"input",type:{name:"string",allowEditOnly:!0,codeeditor:"javascript"},group:"General",set(e){void 0!==e?(this._internal.func=this.parseScript(e),this.isInputConnected("run")||this.scheduleRun()):this._internal.func=void 0}},run:{type:"signal",displayName:"Run",group:"Actions",valueChangedToTrue:function(){this.scheduleRun()}}},outputs:{},methods:{scheduleRun:function(){this.runScheduled||(this.runScheduled=!0,this.scheduleAfterInputsHaveUpdated((()=>{this.runScheduled=!1,this._deleted||this.runScript()})))},runScript:async function(){const e=this._internal.func;if(void 0===e)return;const t=this._internal.inputValues,n=this._internal.outputValuesProxy;for(const e in this.model.outputPorts)if(this._isSignalType(e)){const t=()=>{this.hasOutput(e)&&this.sendSignalOnOutput(e)};this._internal.outputValues[e.substring(4)]=t,this._internal.outputValues[e.substring(4)].send=t}try{await e.apply(this._internal._this,[t,n,o.createNoodlAPI(this.nodeScope.modelScope),o.getComponentScopeForNode(this)])}catch(e){i(e),this.context.editorConnection&&this.context.isWarningTypeEnabled("javascriptExecution")&&this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"js-function-run-waring",{showGlobally:!0,message:e.message,stack:e.stack})}},setScriptInputValue:function(e,t){this._internal.inputValues[e]=t,this.isInputConnected("run")||this.scheduleRun()},getScriptOutputValue:function(e){if(!this._isSignalType(e))return this._internal.outputValues[e]},setScriptInputType:function(e,t){this._internal.inputTypes[e]=t},setScriptOutputType:function(e,t){this._internal.outputTypes[e]=t},parseScript:function(e){var t;try{t=new(0,Object.getPrototypeOf((async function(){})).constructor)("Inputs","Outputs","Noodl","Component",o.getCodePrefix()+e)}catch(e){console.log("Error while parsing action script: "+e)}return t},_isSignalType:function(e){return this.model.outputPorts[e]&&"signal"===this.model.outputPorts[e].type},registerInputIfNeeded:function(e){if(!this.hasInput(e)){if(e.startsWith("in-")){const t=e.substring(3),n={set:this.setScriptInputValue.bind(this,t)};this.model&&this.model.parameters["intype-"+t]&&(n.type=this.model.parameters["intype-"+t]),this.registerInput(e,n)}if(e.startsWith("intype-")){const t=e.substring(7);this.registerInput(e,{set(e){this.hasInput("in"+t)&&(this.getInput("in"+t).type=e)}})}e.startsWith("outtype-")&&this.registerInput(e,{set(){}})}},registerOutputIfNeeded:function(e){if(!this.hasOutput(e))return e.startsWith("out-")?this.registerOutput(e,{getter:this.getScriptOutputValue.bind(this,e.substring(4))}):void 0}}},s=[{value:"string",label:"String"},{value:"boolean",label:"Boolean"},{value:"number",label:"Number"},{value:"object",label:"Object"},{value:"date",label:"Date"},{value:"array",label:"Array"},{value:"color",label:"Color"}];e.exports={node:r,setup:function(e,t){function n(t){function n(){var n=[];const i=s.concat([{value:"signal",label:"Signal"}]);void 0!==t.parameters.scriptOutputs&&t.parameters.scriptOutputs.length>0&&t.parameters.scriptOutputs.forEach((e=>{n.push({name:"outtype-"+e.label,displayName:"Type",editorName:e.label+" | Type",plug:"input",type:{name:"enum",enums:i,allowEditOnly:!0},default:"string",parent:"scriptOutputs",parentItemId:e.id}),n.push({name:"out-"+e.label,displayName:e.label,plug:"output",type:t.parameters["outtype-"+e.label]||"*",group:"Outputs"})})),void 0!==t.parameters.scriptInputs&&t.parameters.scriptInputs.length>0&&t.parameters.scriptInputs.forEach((e=>{n.push({name:"intype-"+e.label,displayName:"Type",editorName:e.label+" | Type",plug:"input",type:{name:"enum",enums:s,allowEditOnly:!0},default:"string",parent:"scriptInputs",parentItemId:e.id}),n.push({name:"in-"+e.label,displayName:e.label,plug:"input",type:t.parameters["intype-"+e.label]||"string",group:"Inputs"})})),function(e,t,n,i,r){if(i.editorConnection.clearWarning(n.component.name,n.id,"js-function-run-waring"),void 0!==e){try{new(0,Object.getPrototypeOf((async function(){})).constructor)("Inputs","Outputs","Noodl","Component",e),i.editorConnection.clearWarning(n.component.name,n.id,"js-function-parse-waring")}catch(e){i.editorConnection.sendWarning(n.component.name,n.id,"js-function-parse-waring",{showGlobally:!0,message:e.message})}o.parseAndAddPortsFromScript(e,r,{inputPrefix:"in-",outputPrefix:"out-"})}else i.editorConnection.clearWarning(n.component.name,n.id,"js-function-parse-waring")}(t.parameters.functionScript,0,t,e,n),n.forEach((e=>{"signal"===e.type&&"output"===e.plug&&(t.outputPorts[e.name]=e)})),e.editorConnection.sendDynamicPorts(t.id,n)}n(),t.on("parameterUpdated",(function(e){n()}))}e.editorConnection&&e.editorConnection.isRunningLocally()&&t.on("editorImportComplete",(()=>{t.on("nodeAdded.JavaScriptFunction",(function(e){n(e)}));for(const e of t.getNodesWithType("JavaScriptFunction"))n(e)}))}}},5533:e=>{const t={name:"String Format",docs:"https://docs.noodl.net/nodes/string-manipulation/string-format",category:"String Manipulation",usePortAsLabel:"format",portLabelTruncationMode:"length",initialize(){const e=this._internal;e.format="",e.cachedResult="",e.resultDirty=!1,e.inputValues={}},getInspectInfo(){return this.formatValue()},inputs:{format:{type:{name:"string",multiline:!0},displayName:"Format",set(e){this._internal.format!==e&&(this._internal.format=e,this._internal.resultDirty=!0,this.scheduleFormat())}}},outputs:{formatted:{type:"string",displayName:"Formatted",get(){return this.formatValue()}}},methods:{formatValue(){var e=this._internal;if(e.resultDirty){var t=e.format,n=e.format.match(/\{[A-Za-z0-9_]*\}/g),o=[];n&&(o=n.map((function(e){return e.replace("{","").replace("}","")}))),o.forEach((function(n){var o=e.inputValues[n];t=t.replace("{"+n+"}",void 0!==o?o:"")})),e.cachedResult=t,e.resultDirty=!1}return e.cachedResult},registerInputIfNeeded(e){this.hasInput(e)||this.registerInput(e,{set:n.bind(this,e)})},scheduleFormat(){this.formatScheduled||(this.formatScheduled=!0,this.scheduleAfterInputsHaveUpdated((()=>{this.formatValue(),this.flagOutputDirty("formatted"),this.formatScheduled=!1})))}}};function n(e,t){this._internal.inputValues[e]!==t&&(this._internal.inputValues[e]=t,this._internal.resultDirty=!0,this.scheduleFormat())}function o(e,t,n){var o=(t.match(/\{[A-Za-z0-9_]*\}/g)||[]).map((function(e){return e.replace("{","").replace("}","")})).filter((function(e,t,n){return n.indexOf(e)===t})).map((function(e){return{name:e,type:"string",plug:"input"}}));n.sendDynamicPorts(e,o)}e.exports={node:t,setup:function(e,t){e.editorConnection&&e.editorConnection.isRunningLocally()&&t.on("nodeAdded.String Format",(function(t){t.parameters.format&&o(t.id,t.parameters.format,e.editorConnection),t.on("parameterUpdated",(function(n){"format"===n.name&&o(t.id,t.parameters.format,e.editorConnection)}))}))}}},461:e=>{const t={name:"String Mapper",docs:"https://docs.noodl.net/nodes/string-manipulation/string-mapper",category:"Utilities",initialize:function(){this._internal.inputs=[],this._internal.mappings=[]},getInspectInfo(){return this._internal.mappedString},numberedInputs:{input:{type:"string",displayPrefix:"Input",group:"Inputs",index:10,createSetter:e=>function(t){t=void 0===t?"":t.toString(),this._internal.inputs[e]=t,this.scheduleMapping()}},output:{type:"string",displayPrefix:"Mapping",index:1001,group:"Mappings",createSetter:e=>function(t){t=void 0===t?"":t.toString(),this._internal.mappings[e]=t,this.scheduleMapping()}}},inputs:{inputString:{type:{name:"string"},index:1,displayName:"Input String",set:function(e){this._internal.currentInputString=void 0!==e?e.toString():void 0,this.scheduleMapping()}},defaultMapping:{type:"string",displayName:"Default",index:1e3,group:"Mappings",set:function(e){this._internal.defaultMapping=e,this.scheduleMapping()}}},outputs:{mappedString:{type:"string",displayName:"Mapped String",group:"Value",getter:function(){return this._internal.mappedString}}},prototypeExtensions:{doMapping:function(){this._internal.hasScheduledFetch=!1;var e=this._internal.inputs.indexOf(this._internal.currentInputString);this._internal.mappedString=-1!==e?this._internal.mappings[e]:this._internal.defaultMapping,this.flagOutputDirty("mappedString")},scheduleMapping:function(){var e=this._internal;e.hasScheduledFetch||(e.hasScheduledFetch=!0,this.scheduleAfterInputsHaveUpdated(this.doMapping.bind(this)))}}};e.exports={node:t}},2283:e=>{"use strict";e.exports={node:{name:"Substring",docs:"https://docs.noodl.net/nodes/string-manipulation/substring",category:"String Manipulation",initialize:function(){var e=this._internal;e.startIndex=0,e.endIndex=-1,e.cachedResult="",e.inputString="",e.resultDirty=!1},inputs:{start:{type:"number",displayName:"Start",default:0,set:function(e){this._internal.startIndex=e,this._internal.resultDirty=!0,this.flagOutputDirty("result")}},end:{type:"number",displayName:"End",default:0,set:function(e){this._internal.endIndex=e,this._internal.resultDirty=!0,this.flagOutputDirty("result")}},string:{type:{name:"string"},displayName:"String",default:"",set:function(e){e=e.toString(),this._internal.inputString=e,this._internal.resultDirty=!0,this.flagOutputDirty("result")}}},outputs:{result:{type:"string",displayName:"Result",getter:function(){var e=this._internal;return e.resultDirty&&(-1===e.endIndex?e.cachedResult=e.inputString.substr(e.startIndex):e.cachedResult=e.inputString.substr(e.startIndex,e.endIndex-e.startIndex),e.resultDirty=!1),e.cachedResult}}}}}},6969:(e,t,n)=>{"use strict";const o=n(3839),i={name:"Unique Id",docs:"https://docs.noodl.net/nodes/utilities/unique-id",category:"String Manipulation",initialize:function(){this._internal.guid=o.guid()},getInspectInfo(){return this._internal.guid},inputs:{new:{displayName:"New",valueChangedToTrue:function(){this._internal.guid=o.guid(),this.flagOutputDirty("guid")}}},outputs:{guid:{type:"string",displayName:"Id",getter:function(){return this._internal.guid}}},prototypeExtensions:{}};e.exports={node:i}},7425:(e,t,n)=>{"use strict";const o=n(3948);var i={name:"net.noodl.user.SetUserProperties",docs:"https://docs.noodl.net/nodes/data/user/set-user-properties",displayNodeName:"Set User Properties",category:"Cloud Services",color:"data",initialize:function(){this._internal.userProperties={}},getInspectInfo(){},outputs:{success:{type:"signal",displayName:"Success",group:"Events"},failure:{type:"signal",displayName:"Failure",group:"Events"},error:{type:"string",displayName:"Error",group:"Error",getter:function(){return this._internal.error}}},inputs:{store:{displayName:"Do",group:"Actions",valueChangedToTrue:function(){this.scheduleStore()}},email:{displayName:"Email",type:"string",group:"General",set:function(e){this._internal.email=e}},username:{displayName:"Username",type:"string",group:"General",set:function(e){this._internal.username=e}}},methods:{setError:function(e){this._internal.error=e,this.flagOutputDirty("error"),this.sendSignalOnOutput("failure"),this.context.editorConnection&&this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"user-set-warning",{message:e,showGlobally:!0})},clearWarnings(){this.context.editorConnection&&this.context.editorConnection.clearWarning(this.nodeScope.componentOwner.name,this.id,"user-set-warning")},scheduleStore:function(){const e=this._internal;!0!==this.storeScheduled&&(this.storeScheduled=!0,this.scheduleAfterInputsHaveUpdated((()=>{this.storeScheduled=!1,o.Services.UserService.forScope(this.nodeScope.modelScope).setUserProperties({email:this._internal.email,username:this._internal.username,properties:e.userProperties,success:()=>{this.sendSignalOnOutput("success")},error:e=>{this.setError(e)}})})))},setUserProperty:function(e,t){this._internal.userProperties[e]=t},registerInputIfNeeded:function(e){if(!this.hasInput(e))return e.startsWith("prop-")?this.registerInput(e,{set:this.setUserProperty.bind(this,e.substring(5))}):void 0}}};function r(e,t,n,o){var i=[];if(o){var r=o.find((e=>"_User"===e.name));if(r&&r.schema&&r.schema.properties){var s=r.schema.properties;const e="undefined"==typeof _noodl_cloud_runtime_version?["authData","createdAt","updatedAt","email","username","emailVerified","password"]:["authData","createdAt","updatedAt","email","username"];for(var a in s)if(-1===e.indexOf(a)){var l=s[a];if(!i.find((e=>e.name===a)))if("Relation"===l.type);else{const e={String:"string",Boolean:"boolean",Number:"number",Date:"date"};i.push({type:{name:e[l.type]?e[l.type]:"*"},plug:"input",group:"Properties",name:"prop-"+a,displayName:a})}}}}n.sendDynamicPorts(e,i)}e.exports={node:i,setup:function(e,t){function n(n){r(n.id,n.parameters,e.editorConnection,t.getMetaData("systemCollections")),n.on("parameterUpdated",(function(o){r(n.id,n.parameters,e.editorConnection,t.getMetaData("systemCollections"))})),t.on("metadataChanged.systemCollections",(function(t){r(n.id,n.parameters,e.editorConnection,t)}))}e.editorConnection&&e.editorConnection.isRunningLocally()&&t.on("editorImportComplete",(()=>{t.on("nodeAdded.net.noodl.user.SetUserProperties",(function(e){n(e)}));for(const e of t.getNodesWithType("net.noodl.user.SetUserProperties"))n(e)}))}}},6736:(e,t,n)=>{"use strict";const o=n(3948),{Node:i}=n(3948);var r={name:"net.noodl.user.User",docs:"https://docs.noodl.net/nodes/data/user/user-node",displayNodeName:"User",category:"Cloud Services",color:"data",initialize:function(){var e=this;this._internal.onModelChangedCallback=function(t){e.isInputConnected("fetch")||(e.hasOutput("prop-"+t.name)&&e.flagOutputDirty("prop-"+t.name),e.hasOutput("changed-"+t.name)&&e.sendSignalOnOutput("changed-"+t.name),e.sendSignalOnOutput("changed"))};const t=o.Services.UserService.forScope(this.nodeScope.modelScope);this.setUserModel(t.current),t.on("loggedIn",(()=>{this.setUserModel(t.current),this.hasOutput("loggedIn")&&this.sendSignalOnOutput("loggedIn")})),t.on("sessionGained",(()=>{this.setUserModel(t.current)})),t.on("loggedOut",(()=>{this.setUserModel(void 0),this.hasOutput("loggedOut")&&this.sendSignalOnOutput("loggedOut")})),t.on("sessionLost",(()=>{this.setUserModel(void 0),this.hasOutput("sessionLost")&&this.sendSignalOnOutput("sessionLost")}))},getInspectInfo(){const e=this._internal.model;return e?[{type:"text",value:"Id: "+e.getId()},{type:"value",value:this._internal.model.data}]:"[No Model]"},outputs:{id:{type:"string",displayName:"Id",group:"General",getter:function(){return void 0!==this._internal.model?this._internal.model.getId():void 0}},fetched:{type:"signal",displayName:"Fetched",group:"Events"},changed:{type:"signal",displayName:"Changed",group:"Events"},failure:{type:"signal",displayName:"Failure",group:"Events"},error:{type:"string",displayName:"Error",group:"Error",getter:function(){return this._internal.error}},username:{type:"string",displayName:"Username",group:"General",getter:function(){return void 0!==this._internal.model?this._internal.model.get("username"):void 0}},email:{type:"string",displayName:"Email",group:"General",getter:function(){return void 0!==this._internal.model?this._internal.model.get("email"):void 0}},authenticated:{type:"boolean",displayName:"Authenticated",group:"General",getter:function(){return void 0!==this._internal.model}}},inputs:{fetch:{displayName:"Fetch",group:"Actions",valueChangedToTrue:function(){this.scheduleFetch()}}},methods:{_onNodeDeleted:function(){i.prototype._onNodeDeleted.call(this),this._internal.model&&this._internal.model.off("change",this._internal.onModelChangedCallback)},scheduleOnce:function(e,t){const n=this,o="hasScheduled"+e;this._internal[o]||(this._internal[o]=!0,this.scheduleAfterInputsHaveUpdated((function(){n._internal[o]=!1,t()})))},setError:function(e){this._internal.error=e,this.flagOutputDirty("error"),this.sendSignalOnOutput("failure"),this.context.editorConnection&&this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"user-warning",{message:e,showGlobally:!0})},clearWarnings(){this.context.editorConnection&&this.context.editorConnection.clearWarning(this.nodeScope.componentOwner.name,this.id,"user-warning")},setUserModel(e){const t=this._internal;if(t.model!==e&&(t.model&&t.model.off("change",t.onModelChangedCallback),t.model=e,e&&e.on("change",t.onModelChangedCallback)),this.flagOutputDirty("id"),this.flagOutputDirty("authenticated"),this.flagOutputDirty("email"),this.flagOutputDirty("username"),e)for(var n in e.data)this.hasOutput("prop-"+n)&&this.flagOutputDirty("prop-"+n)},scheduleFetch:function(){this._internal,this.scheduleOnce("Fetch",(()=>{const e=o.Services.UserService.forScope(this.nodeScope.modelScope);e.fetchCurrentUser({success:t=>{this.setUserModel(e.current),this.sendSignalOnOutput("fetched")},error:e=>{this.setError(e||"Failed to fetch.")}})}))},registerOutputIfNeeded:function(e){this.hasOutput(e)||("loggedOut"!==e&&"loggedIn"!==e&&"sessionLost"!==e?e.startsWith("prop-")&&this.registerOutput(e,{getter:this.getUserProperty.bind(this,e.substring(5))}):this.registerOutput(e,{getter:()=>{}}))},getUserProperty:function(e){return void 0!==this._internal.model?this._internal.model.get(e):void 0}}};function s(e,t,n,o){var i=[];if(o){var r=o.find((e=>"_User"===e.name));if(r&&r.schema&&r.schema.properties){var s=r.schema.properties;const e=["authData","password","username","email"];for(var a in s)if(-1===e.indexOf(a)){var l=s[a];if(!i.find((e=>e.name===a)))if("Relation"===l.type);else{const e={String:"string",Boolean:"boolean",Number:"number",Date:"date"};i.push({type:{name:e[l.type]?e[l.type]:"*"},plug:"output",group:"Properties",name:"prop-"+a,displayName:a}),i.push({type:"signal",plug:"output",group:"Changed Events",displayName:a+" Changed",name:"changed-"+a})}}}}"undefined"==typeof _noodl_cloud_runtime_version&&(i.push({plug:"output",name:"loggedIn",type:"signal",displayName:"Logged In",group:"Events"}),i.push({plug:"output",name:"loggedOut",type:"signal",displayName:"Logged Out",group:"Events"}),i.push({plug:"output",name:"sessionLost",type:"signal",displayName:"Session Lost",group:"Events"})),n.sendDynamicPorts(e,i)}e.exports={node:r,setup:function(e,t){function n(n){s(n.id,n.parameters,e.editorConnection,t.getMetaData("systemCollections")),n.on("parameterUpdated",(function(o){s(n.id,n.parameters,e.editorConnection,t.getMetaData("systemCollections"))})),t.on("metadataChanged.systemCollections",(function(t){s(n.id,n.parameters,e.editorConnection,t)}))}e.editorConnection&&e.editorConnection.isRunningLocally()&&t.on("editorImportComplete",(()=>{t.on("nodeAdded.net.noodl.user.User",(function(e){n(e)}));for(const e of t.getNodesWithType("net.noodl.user.User"))n(e)}))}}},3033:(e,t,n)=>{"use strict";const o=n(2887).createDefinition({name:"Boolean",docs:"https://docs.noodl.net/nodes/data/boolean",startValue:!1,type:{name:"boolean"},cast:function(e){return Boolean(e)}});e.exports={node:o}},7383:(e,t,n)=>{"use strict";const o=n(2887).createDefinition({name:"Number",docs:"https://docs.noodl.net/nodes/data/number",startValue:0,nodeDoubleClickAction:{focusPort:"value"},type:{name:"number"},cast:function(e){return Number(e)}});e.exports={node:o}},4950:(e,t,n)=>{"use strict";const o=n(2887),{NodeDefinition:i}=n(3948),r=o.createDefinition({name:"String",docs:"https://docs.noodl.net/nodes/data/string",shortDesc:"Contains a string (text).",startValue:"",nodeDoubleClickAction:{focusPort:"value"},type:{name:"string"},cast:function(e){return String(e)},onChanged:function(){this.flagOutputDirty("length")}});i.extend(r,{usePortAsLabel:"value",portLabelTruncationMode:"length",outputs:{length:{type:"number",displayName:"Length",getter:function(){return this._internal.currentValue.length}}}}),e.exports={node:r}},2887:e=>{"use strict";e.exports={createDefinition:function(e){return{name:e.name,docs:e.docs,shortDesc:e.shortDesc,nodeDoubleClickAction:e.nodeDoubleClickAction,category:"Variables",initialize:function(){this._internal.currentValue=e.startValue,this._internal.latestValue=0},getInspectInfo(){return[{type:"color"===e.type.name?"color":"text",value:this._internal.currentValue}]},inputs:{value:{type:e.type,displayName:"Value",default:e.startValue,set:function(e){!1===this.isInputConnected("saveValue")?this.setValueTo(e):this._internal.latestValue=e}},saveValue:{displayName:"Set",valueChangedToTrue:function(){this.scheduleAfterInputsHaveUpdated((function(){this.setValueTo(this._internal.latestValue),this.sendSignalOnOutput("stored")}))}}},outputs:{savedValue:{type:e.type.name,displayName:"Value",getter:function(){return this._internal.currentValue}},changed:{type:"signal",displayName:"Changed"},stored:{type:"signal",displayName:"Stored"}},prototypeExtensions:{setValueTo:function(t){t=e.cast(t);const n=this._internal.currentValue!==t;this._internal.currentValue=t,n&&(this.flagOutputDirty("savedValue"),this.sendSignalOnOutput("changed"),e.onChanged&&e.onChanged.call(this))}}}}}},61:(e,t,n)=>{"use strict";const o=n(7662);function i(e,t){this.context=e,this.nodes={},this.componentOwner=t,this.componentInstanceChildren={}}i.prototype.addConnection=function(e){try{t=e,["sourceId","sourcePort","targetId","targetPort"].forEach((function(e){if(!t[e])throw new Error("Missing "+e)}))}catch(e){throw new Error("Error in connection: "+e.message)}var t;try{var n=this.getNodeWithId(e.sourceId),o=this.getNodeWithId(e.targetId);o.registerInputIfNeeded(e.targetPort),n.registerOutputIfNeeded(e.sourcePort),o.connectInput(e.targetPort,n,e.sourcePort)}catch(e){console.error(e.message)}},i.prototype.setNodeParameters=function(e,t){const n=this.context.variants.getVariant(t.type,t.variant);if(n)e.setVariant(n);else{const n=t.parameters;var o=Object.keys(n);if(this.context.nodeRegister.hasNode(e.name)){var i=this.context.nodeRegister.getNodeMetadata(e.name);o.sort((function(e,t){var n=i.inputs[e],o=i.inputs[t];return(o?o.inputPriority:0)-(n?n.inputPriority:0)}))}o.forEach((t=>{e.registerInputIfNeeded(t),!1!==e.hasInput(t)&&e.queueInput(t,n[t])}))}},i.prototype.createNodeFromModel=async function(e,t){if("Component Children"!==e.type){var n;try{(n=await this.createNode(e.type,e.id)).updateOnDirtyFlagging=!1!==t,n.setNodeModel(e)}catch(t){return console.error(t.message),void(this.context.editorConnection&&this.context.isWarningTypeEnabled("nodescope")&&this.context.editorConnection.sendWarning(this.componentOwner.name,e.id,"nodelibrary-unknown-node",{message:t.message,showGlobally:!0}))}return e.variant&&n.setVariant&&n.setVariant(e.variant),this.setNodeParameters(n,e),e.parent&&this.insertNodeInTree(n,e),n}if(e.parent){var o=this.getNodeWithId(e.parent.id);this.componentOwner.setChildRoot(o)}},i.prototype.insertNodeInTree=function(e,t){var n=this.getNodeWithId(t.parent.id),o=t.parent.children.indexOf(t);if(!n.addChild)throw new Error("Node "+n.id+" of type "+n.constructor.name+" can't have children");n.addChild(e,o)},i.prototype.getNodeWithId=function(e){if(!1===this.nodes.hasOwnProperty(e))throw new Error("Unknown node id "+e);return this.nodes[e]},i.prototype.hasNodeWithId=function(e){return this.nodes.hasOwnProperty(e)},i.prototype.createPrimitiveNode=function(e,t,n){if(t||(t=o()),this.nodes.hasOwnProperty(t))throw Error("duplicate id "+t);const i=this.context.nodeRegister.createNode(e,t,this);if(n)for(const e in n)i[e]=n[e];return this.nodes[t]=i,i},i.prototype.createNode=async function(e,t,n){if(t||(t=o()),this.nodes.hasOwnProperty(t))throw Error("duplicate id "+t);let i;if(this.context.nodeRegister.hasNode(e)){if(i=this.context.nodeRegister.createNode(e,t,this),n)for(const e in n)i[e]=n[e]}else i=await this.context.createComponentInstanceNode(e,t,this,n),this.componentInstanceChildren[t]=i;return this.nodes[t]=i,i},i.prototype.getNodesWithIdRecursive=function(e){var t=n(3657),o=[];return function e(n,o,i){n.nodes.hasOwnProperty(o)&&i.push(n.nodes[o]),Object.keys(n.nodes).filter((function(e){return n.nodes[e]instanceof t})).forEach((function(t){e(n.nodes[t].nodeScope,o,i)}))}(this,e,o),o},i.prototype.getNodesWithType=function(e){var t=this;return Object.keys(this.nodes).filter((function(n){return t.nodes[n].name===e})).map((function(e){return t.nodes[e]}))},i.prototype.getNodesWithTypeRecursive=function(e){var t=n(3657),o=this,i=[];return i=i.concat(o.getNodesWithType(e)),Object.keys(o.nodes).filter((function(e){return o.nodes[e]instanceof t})).forEach((function(t){var n=o.nodes[t].nodeScope.getNodesWithTypeRecursive(e);i=i.concat(n)})),i},i.prototype.getAllNodesRecursive=function(){var e=n(3657);let t=[];return(()=>{t=t.concat(Object.values(this.nodes)),Object.keys(this.nodes).filter((t=>this.nodes[t]instanceof e)).forEach((e=>{var n=this.nodes[e].nodeScope.getAllNodesRecursive();t=t.concat(n)}))})(),t},i.prototype.getAllNodesWithVariantRecursive=function(e){return this.getAllNodesRecursive().filter((t=>t.variant===e))},i.prototype.onNodeModelRemoved=function(e){var t=this.getNodeWithId(e.id);e.parent&&this.getNodeWithId(e.parent.id).removeChild(t),t._onNodeDeleted(),delete this.nodes[t.id],delete this.componentInstanceChildren[t.id]},i.prototype.removeConnection=function(e){this.getNodeWithId(e.targetId).removeInputConnection(e.targetPort,e.sourceId,e.sourcePort)},i.prototype.setComponentModel=async function(e){this.componentModel=e;const t=[];for(const n of e.getAllNodes()){const e=await this.createNodeFromModel(n,!1);e&&t.push(e)}e.getAllConnections().forEach((e=>this.addConnection(e))),t.forEach((e=>e.updateOnDirtyFlagging=!0)),t.forEach((e=>{e._dirty&&e._performDirtyUpdate()})),e.on("connectionAdded",(e=>this.addConnection(e)),this),e.on("connectionRemoved",this.removeConnection,this),e.on("nodeAdded",this.createNodeFromModel,this);var n=this;e.on("nodeParentWillBeRemoved",(function(e){if("Component Children"===e.type)return void(e.parent&&this.componentOwner.setChildRoot(null));const t=n.getNodeWithId(e.id);t.parent&&t.parent.removeChild(t)}),this),e.on("nodeParentUpdated",(function(e){if("Component Children"===e.type){var t=this.getNodeWithId(e.parent.id);this.componentOwner.setChildRoot(t)}else{var o=n.getNodeWithId(e.id);n.insertNodeInTree(o,e)}}),this),e.on("nodeRemoved",(function(e){"Component Children"!==e.type&&n.onNodeModelRemoved(e)}),this);for(const e in this.nodes){const t=this.nodes[e];t.nodeScopeDidInitialize&&t.nodeScopeDidInitialize()}},i.prototype.reset=function(){this.componentModel&&(this.componentModel.removeListenersWithRef(this),this.componentModel=void 0),Object.keys(this.nodes).forEach((e=>{this.nodes.hasOwnProperty(e)&&this.deleteNode(this.nodes[e])}))},i.prototype.deleteNode=function(e){if(!1!==this.nodes.hasOwnProperty(e.id)){if(e.parent&&e.parent.removeChild(e),e.getChildren&&e.getChildren().forEach((t=>{e.removeChild(t),(t.parentNodeScope||t.nodeScope).deleteNode(t)})),this.componentModel){const t=this.componentModel.getConnectionsFrom(e.id),n=this.componentModel.getConnectionsTo(e.id);t.concat(n).forEach((e=>{this.nodes.hasOwnProperty(e.targetId)&&this.nodes.hasOwnProperty(e.sourceId)&&this.removeConnection(e)}))}e._onNodeDeleted(),delete this.nodes[e.id],delete this.componentInstanceChildren[e.id]}else console.error("Node doesn't belong to this scope",e.id,e.name)},i.prototype.sendEventFromThisScope=function(e,t,n,o,i){if(o)for(var r=this.getNodesWithType("Event Receiver").filter((function(t){return t.getChannelName()===e})),s=0;s<r.length;s++)if(r[s].handleEvent(t))return!0;if("parent"===n&&this.componentOwner.parentNodeScope){const o=this.componentOwner.parent?this.componentOwner.parent.nodeScope:this.componentOwner.parentNodeScope;if(!o)return;o.sendEventFromThisScope(e,t,n,!0)}else if("children"===n){var a=this.nodes;for(var l in a)(u=a[l].children)&&u.forEach((o=>{if(o.name&&this.context.hasComponentModelWithName(o.name)&&o.nodeScope.sendEventFromThisScope(e,t,n,!0))return!0}))}else if("siblings"===n){let n;if(n=this.componentOwner.parent?this.componentOwner.parent.nodeScope:this.componentOwner.parentNodeScope,!n)return;for(var l in a=n.nodes){var u;(u=a[l].children)&&u.filter((e=>e.name&&this.context.hasComponentModelWithName(e.name)&&e.nodeScope!==this)).forEach((n=>{if(n.nodeScope.sendEventFromThisScope(e,t,null,!0))return!0}))}}return!1},e.exports=i},6454:e=>{"use strict";function t(e){if(!e.owner)throw new Error("Owner must be set");this.getter=e.getter,this.connections=[],this.owner=e.owner,this.name=e.name,this.onFirstConnectionAdded=e.onFirstConnectionAdded,this.onLastConnectionRemoved=e.onLastConnectionRemoved,this._id=void 0}Object.defineProperties(t.prototype,{value:{get:function(){return this.getter.call(this.owner)}},id:{get:function(){return this._id||(this._id=this.owner.id+this.name),this._id}},registerConnection:{value:function(e,t){this.connections.push({node:e,inputPortName:t}),1===this.connections.length&&this.onFirstConnectionAdded&&this.onFirstConnectionAdded.call(this.owner)}},deregisterConnection:{value:function(e,t){for(var n=0;n<this.connections.length;n++){var o=this.connections[n];if(o.node===e&&o.inputPortName===t){this.connections.splice(n,1);break}}0===this.connections.length&&this.onLastConnectionRemoved&&this.onLastConnectionRemoved.call(this.owner)}},flagDependeesDirty:{value:function(e){for(var t=0,n=this.connections.length;t<n;t++)this.connections[t].node.flagDirty()}},sendValue:{value:function(e){this._lastUpdateIteration!==this.owner._updatedAtIteration?(this._lastUpdateIteration=this.owner._updatedAtIteration,this.valuesSendThisIteration=0):this.valuesSendThisIteration++,this.valuesSendThisIteration>500&&(this.owner._cyclicLoop=!0);for(var t=0,n=this.connections.length;t<n;t++){var o=this.connections[t];o.node._setValueFromConnection(o.inputPortName,e)}}},hasConnections:{value:function(){return this.connections.length>0}}}),e.exports=t},4190:e=>{"use strict";e.exports={generateProjectSettings:function(e,t){const n={dynamicports:[],ports:[]};return function(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.settings&&o.settings.forEach((function(t){e.ports.push(t)}))}}(n,t),n}}},3855:(e,t,n)=>{var o=n(5627);function i(){}i.events=new o,e.exports=i},3187:e=>{"use strict";function t(e,t){for(var n in this.duration=t.duration||0,this._isRunning=!1,this._hasCalledOnStart=!1,this.scheduler=e,this.repeatCount=1,this.delay=0,t)this[n]=t[n]}function n(e){this.requestFrame=e,this.runningTimers=[],this.newTimers=[]}t.prototype.start=function(){return this._isRunning&&this.stop(),this.scheduler.scheduleTimer(this),this},t.prototype.stop=function(){this.scheduler.stopTimer(this),this._hasCalledOnStart=!1,this._isRunning=!1,this._wasStopped=!0},t.prototype.isRunning=function(){return this._isRunning},t.prototype.durationLeft=function(){return this._durationLeft},n.prototype.createTimer=function(e){return new t(this,e)},n.prototype.scheduleTimer=function(e){-1===this.newTimers.indexOf(e)&&(0===e.repeatCount&&(e.repeatCount=1e5),this.newTimers.push(e),this.requestFrame())},n.prototype.stopTimer=function(e){var t;e._isRunning?(-1!==(t=this.runningTimers.indexOf(e))&&this.runningTimers.splice(t,1),e.onStop&&!e._wasStopped&&e.onStop()):-1!==(t=this.newTimers.indexOf(e))&&this.newTimers.splice(t,1)},n.prototype.runTimers=function(e){var t,n,o=[],i=[],r=[],s=this.runningTimers.length;for(t=0;t<s;++t)r[t]=this.runningTimers[t];for(t=0;t<s;++t)if((n=r[t])&&e>=n._start){var a;!1===n._hasCalledOnStart&&n.onStart&&(n.onStart(),n._hasCalledOnStart=!0),a=n.duration>0?(e-n._start)/(n.duration*n.repeatCount):1,n._durationLeft=n.duration*(1-a);var l=a*n.repeatCount-Math.floor(a*n.repeatCount);a>=1&&(l=1),n.onRunning&&n.onRunning(l),a<1&&n._isRunning?o.push(n):n._wasStopped||i.push(n)}else o.push(n);for(this.runningTimers=o,t=0;t<i.length;++t)i[t]._isRunning=!1,i[t]._hasCalledOnStart=!1,i[t].onFinish&&i[t].onFinish();if(this.newTimers.length>0){for(t=0;t<this.newTimers.length;++t)(n=this.newTimers[t])._start=e+n.delay,n._isRunning=!0,n._wasStopped=!1,this.runningTimers.push(n),0===n.delay&&(n.onStart&&(n.onStart(),n._hasCalledOnStart=!0),n.onRunning&&n.onRunning(0));this.newTimers.length=0}},n.prototype.hasPendingTimers=function(){return this.runningTimers.length>0||this.newTimers.length>0},e.exports=n},5722:e=>{e.exports={getAbsoluteUrl:function(e){const t=String(e);return!t||"/"===t[0]||t.includes("://")||t.startsWith("data:")?t:(Noodl.baseUrl||"/")+t},logJavaScriptNodeError:function(e){"string"==typeof e?console.log("Error in JS node run code.",e):console.log("Error in JS node run code.",Object.getPrototypeOf(e).constructor.name+": "+e.message,e.stack)}}},84:e=>{e.exports=class{constructor({graphModel:e,getNodeScope:t}){this.getNodeScope=t,e&&(this.graphModel=e,e.on("variantUpdated",(e=>this.onVariantUpdated(e))))}getVariant(e,t){if(this.graphModel)return this.graphModel.getVariant(e,t)}onVariantUpdated(e){const t=this.getNodeScope();if(!t)return;const n=t.getNodesWithTypeRecursive(e.typename).filter((t=>t.variant?t.variant.name===e.name:t.model&&t.model.variant===e.name));for(const t of n)t.setVariant(e)}}},3812:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var o=n(3645),i=n.n(o)()((function(e){return e[1]}));i.push([e.id,".ndl-visual-text {\r\n  font-weight: 400;\r\n  margin: 0;\r\n}\r\n\r\n.ndl-controls-pointer,\r\n.ndl-controls-pointer * {\r\n  cursor: pointer;\r\n}\r\n\r\n.ndl-controls-abs-center {\r\n  position: absolute;\r\n  transform: translate(-50%, -50%);\r\n  left: 50%;\r\n  top: 50%;\r\n}\r\n\r\n/** Button **/\r\n.ndl-controls-button {\r\n  outline: none;\r\n  border: none;\r\n  color: white;\r\n  background-color: black;\r\n  padding: 5px 20px 5px 20px;\r\n  cursor: pointer;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n.ndl-controls-button:disabled {\r\n  cursor: default;\r\n}\r\n\r\n/** Deprecated checkbox **/\r\n.ndl-controls-checkbox {\r\n  margin: 0;\r\n  border: 1px solid #000000;\r\n  border-radius: 0;\r\n  background-color: transparent;\r\n  -webkit-appearance: none;\r\n  outline: none;\r\n  cursor: pointer;\r\n}\r\n\r\n.ndl-controls-checkbox:checked {\r\n  background-color: #000000;\r\n}\r\n\r\n.ndl-controls-checkbox:disabled {\r\n  cursor: default;\r\n}\r\n\r\n/** Deprecated radio button **/\r\n.ndl-controls-radiobutton {\r\n  margin: 0;\r\n  border: 1px solid #000000;\r\n  border-radius: 16px;\r\n  background-color: transparent;\r\n  -webkit-appearance: none;\r\n  outline: none;\r\n  width: 32px;\r\n  height: 32px;\r\n  display: block;\r\n  cursor: pointer;\r\n}\r\n\r\n.ndl-controls-radiobutton:checked {\r\n  background-color: #000000;\r\n}\r\n\r\n.ndl-controls-radiobutton:disabled {\r\n  cursor: default;\r\n}\r\n\r\n/** New radio button **/\r\n.ndl-controls-radio-2 {\r\n  opacity: 0;\r\n  position: absolute;\r\n  margin: 0;\r\n}\r\n\r\n.ndl-controls-radio-2:disabled {\r\n  cursor: default;\r\n}\r\n\r\n/** New checkbox **/\r\n.ndl-controls-checkbox-2 {\r\n  opacity: 0;\r\n  position: absolute;\r\n  margin: 0;\r\n}\r\n\r\n.ndl-controls-checkbox-2:disabled {\r\n  cursor: default;\r\n}\r\n\r\n/** Options **/\r\n.ndl-controls-select {\r\n  -webkit-appearance: none;\r\n  appearance: none;\r\n  background-color: transparent;\r\n  border: 1px solid #000000;\r\n  border-radius: 0;\r\n  padding: 0 1em 0 0;\r\n  margin: 0;\r\n  width: 100%;\r\n  font-family: inherit;\r\n  font-size: inherit;\r\n  cursor: inherit;\r\n  line-height: inherit;\r\n\r\n  /* Stack above custom arrow */\r\n  z-index: 1;\r\n\r\n  /* Remove dropdown arrow in IE10 & IE11\r\n      @link https://www.filamentgroup.com/lab/select-css.html */\r\n  /*  &::-ms-expand {\r\n      display: none;\r\n    }*/\r\n\r\n  /* Remove focus outline, will add on alternate element */\r\n  outline: none;\r\n}\r\n\r\n.ndl-controls-select:disabled {\r\n  cursor: default;\r\n}\r\n\r\n/** Range **/\r\n.ndl-controls-range2 {\r\n  margin: 0;\r\n  padding: 0;\r\n  -webkit-appearance: none;\r\n  appearance: none;\r\n  outline: none;\r\n  border: none;\r\n  background: transparent;\r\n  cursor: pointer;\r\n}\r\n\r\n.ndl-controls-range2::-webkit-slider-thumb {\r\n  height: 100%;\r\n  border: 0;\r\n  -webkit-appearance: none;\r\n  appearance: none;\r\n}\r\n\r\n.ndl-controls-range2::-moz-range-thumb {\r\n  height: 100%;\r\n  border: 0;\r\n  -webkit-appearance: none;\r\n  appearance: none;\r\n}\r\n\r\n.ndl-controls-range2::-webkit-slider-runnable-track {\r\n  border: none;\r\n  height: 100%;\r\n}\r\n\r\n.ndl-controls-range2::-moz-range-track {\r\n  border: none;\r\n  height: 100%;\r\n}\r\n\r\n.ndl-controls-range2:disabled {\r\n  cursor: default;\r\n}\r\n\r\n/* Old range */\r\n\r\n.ndl-controls-range {\r\n  margin: 0;\r\n  padding: 0;\r\n  -webkit-appearance: none;\r\n  outline: none;\r\n  border: none;\r\n  background-color: transparent;\r\n  cursor: pointer;\r\n}\r\n\r\n.ndl-controls-range::-webkit-slider-thumb {\r\n  width: 16px;\r\n  height: 16px;\r\n  background: #000000;\r\n  border: 0;\r\n  border-radius: 8px;\r\n  cursor: pointer;\r\n  -webkit-appearance: none;\r\n  margin-top: -5px;\r\n}\r\n\r\n.ndl-controls-range::-moz-range-thumb {\r\n  width: 16px;\r\n  height: 16px;\r\n  background: #000000;\r\n  border: none;\r\n  border-radius: 8px;\r\n  cursor: pointer;\r\n}\r\n\r\n.ndl-controls-range::-ms-thumb {\r\n  width: 16px;\r\n  height: 16px;\r\n  background: #000000;\r\n  border: none;\r\n  border-radius: 8px;\r\n  cursor: pointer;\r\n  margin-top: 0px;\r\n  /*Needed to keep the Edge thumb centred*/\r\n}\r\n\r\n.ndl-controls-range::-webkit-slider-runnable-track {\r\n  background: #f0f0f0;\r\n  border: none;\r\n  width: 100%;\r\n  height: 6px;\r\n  cursor: pointer;\r\n  top: 4px;\r\n  margin-top: 5px;\r\n}\r\n\r\n.ndl-controls-range:focus::-webkit-slider-runnable-track {\r\n  background: #f0f0f0;\r\n}\r\n\r\n.ndl-controls-range::-moz-range-track {\r\n  background: #f0f0f0;\r\n  border: none;\r\n  width: 100%;\r\n  height: 6px;\r\n  cursor: pointer;\r\n}\r\n\r\n.ndl-controls-range::-ms-track {\r\n  background: transparent;\r\n  border-color: transparent;\r\n  border-width: 5px 0;\r\n  color: transparent;\r\n  width: 100%;\r\n  height: 6px;\r\n  cursor: pointer;\r\n}\r\n\r\n.ndl-controls-range::-ms-fill-lower {\r\n  background: #f0f0f0;\r\n  border: none;\r\n}\r\n.ndl-controls-range::-ms-fill-upper {\r\n  background: #f0f0f0;\r\n  border: none;\r\n}\r\n\r\n/** Field Set **/\r\n.ndl-controls-fieldset {\r\n  outline: none;\r\n  border: none;\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n\r\n/** Text Input **/\r\n.ndl-controls-textinput {\r\n  outline: none;\r\n  border-style: none;\r\n  background-color: transparent;\r\n}\r\n\r\n.ndl-controls-textinput::placeholder {\r\n  color: inherit;\r\n  opacity: 0.5;\r\n}\r\n",""]);const r=i},3645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=e(t);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,o){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(o)for(var r=0;r<this.length;r++){var s=this[r][0];null!=s&&(i[s]=!0)}for(var a=0;a<e.length;a++){var l=[].concat(e[a]);o&&i[l[0]]||(n&&(l[2]?l[2]="".concat(n," and ").concat(l[2]):l[2]=n),t.push(l))}},t}},3379:(e,t,n)=>{"use strict";var o,i=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),r=[];function s(e){for(var t=-1,n=0;n<r.length;n++)if(r[n].identifier===e){t=n;break}return t}function a(e,t){for(var n={},o=[],i=0;i<e.length;i++){var a=e[i],l=t.base?a[0]+t.base:a[0],u=n[l]||0,d="".concat(l," ").concat(u);n[l]=u+1;var c=s(d),p={css:a[1],media:a[2],sourceMap:a[3]};-1!==c?(r[c].references++,r[c].updater(p)):r.push({identifier:d,updater:f(p,t),references:1}),o.push(d)}return o}function l(e){var t=document.createElement("style"),o=e.attributes||{};if(void 0===o.nonce){var r=n.nc;r&&(o.nonce=r)}if(Object.keys(o).forEach((function(e){t.setAttribute(e,o[e])})),"function"==typeof e.insert)e.insert(t);else{var s=i(e.insert||"head");if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(t)}return t}var u,d=(u=[],function(e,t){return u[e]=t,u.filter(Boolean).join("\n")});function c(e,t,n,o){var i=n?"":o.media?"@media ".concat(o.media," {").concat(o.css,"}"):o.css;if(e.styleSheet)e.styleSheet.cssText=d(t,i);else{var r=document.createTextNode(i),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(r,s[t]):e.appendChild(r)}}function p(e,t,n){var o=n.css,i=n.media,r=n.sourceMap;if(i?e.setAttribute("media",i):e.removeAttribute("media"),r&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),e.styleSheet)e.styleSheet.cssText=o;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(o))}}var h=null,g=0;function f(e,t){var n,o,i;if(t.singleton){var r=g++;n=h||(h=l(t)),o=c.bind(null,n,r,!1),i=c.bind(null,n,r,!0)}else n=l(t),o=p.bind(null,n,t),i=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return o(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;o(e=t)}else i()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===o&&(o=Boolean(window&&document&&document.all&&!window.atob)),o));var n=a(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var o=0;o<n.length;o++){var i=s(n[o]);r[i].references--}for(var l=a(e,t),u=0;u<n.length;u++){var d=s(n[u]);0===r[d].references&&(r[d].updater(),r.splice(d,1))}n=l}}}},8656:(e,t,n)=>{const o=n(3948),i={run:async(e,t)=>new Promise(((n,i)=>{const r=o.instance.getMetaData("cloudservices");if(void 0===r)return void i("No cloud services defined in this project.");const s=r.appId,a=o.instance.editorConnection.isRunningLocally()?`http://${window.location.hostname}:8577`:r.endpoint;!function(e,t){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4===n.readyState){var e;try{e=JSON.parse(n.response)}catch(e){}200===n.status||201===n.status?t.success(e):t.error(e)}},n.open(t.method||"GET",t.endpoint+e,!0),n.setRequestHeader("X-Parse-Application-Id",t.appId),n.setRequestHeader("Content-Type","application/json");const i=o.instance.getMetaData("cloudservices");i&&i.deployVersion&&n.setRequestHeader("x-noodl-cloud-version",i.deployVersion);var r=localStorage["Parse/"+t.appId+"/currentUser"];if(void 0!==r)try{const e=JSON.parse(r);n.setRequestHeader("X-Parse-Session-Token",e.sessionToken)}catch(e){}n.send(JSON.stringify(t.content))}("/functions/"+encodeURIComponent(e),{appId:s,endpoint:a,content:t,method:"POST",success:e=>{n(e?e.result:void 0)},error:e=>{i(e)}})}))};e.exports=i},9597:(e,t,n)=>{const o=n(4007),i=n(4497),r={upload:async(e,t)=>new Promise(((n,r)=>{o.instance.uploadFile({file:e,onUploadProgress:e=>{t&&t.onProgress&&t.onProgress(e)},success:e=>{n(new i(e))},error:e=>{r(e)}})}))};e.exports=r},2869:(e,t,n)=>{const{RouterHandler:o}=n(2681),i=n(3948),r={showPopup:async(e,t)=>new Promise((n=>{r._noodlRuntime.context.showPopup(e,t,{onClosePopup:(e,t)=>{n({action:e.replace("closeAction-",""),parameters:t})}})})),navigate(e,t,n){o.instance.navigate(e,{target:t,params:n})},navigateToPath(e,t){let n,o;var r=i.instance.getProjectSettings().navigationPathType;void 0===r||"hash"===r?n=e:o=e;var s=[];if(t&&void 0!==t.query)for(let e in t.query)s.push(e+"="+t.query[e]);var a=(void 0!==o?o:"")+(s.length>=1?"?"+s.join("&"):"")+(void 0!==n?"#"+n:"");window.history.pushState({},"",a),dispatchEvent(new PopStateEvent("popstate",{}))}};e.exports=r},1651:(e,t,n)=>{const o=n(4864),i={logIn:async e=>new Promise(((t,n)=>{o.instance.logIn({username:e.username,password:e.password,success:()=>{t()},error:e=>{n(e)}})})),signUp:async e=>new Promise(((t,n)=>{o.instance.signUp({username:e.username,password:e.password,email:e.email,properties:e.properties,success:()=>{t()},error:e=>{n(e)}})})),become:async e=>new Promise(((t,n)=>{o.instance.fetchCurrentUser({sessionToken:e,success:()=>{t()},error:e=>{n(e)}})})),on(e,t){o.instance.on(e,t)},off(e,t){o.instance.off(e,t)}},r={logOut:async()=>new Promise(((e,t)=>{o.instance.logOut({success:()=>{e()},error:e=>{t(e)}})})),save:async()=>new Promise(((e,t)=>{const n=Object.assign({},r.Properties.data);o.instance.setUserProperties({properties:n,success:()=>{e()},error:e=>{t(e)}})})),fetch:async()=>new Promise(((e,t)=>{o.instance.fetchCurrentUser({success:()=>{e()},error:e=>{t(e)}})}))};Object.defineProperty(i,"Current",{get:function(){const e=o.instance.current;return void 0===e?void 0:(r.email=e.email,r.username=e.username,r.id=e.id,r.emailVerified=e.emailVerified,r.Properties=e,r)}}),e.exports=i},8172:e=>{e.exports=function(e,t,n,o,i,r,s){void 0===s&&(s=this.options);var a=e-t,l=Math.abs(a)/n,u=s.deceleration,d=(s.swipeBounceTime,{destination:e+l/u*(a<0?-1:1),duration:s.swipeTime,rate:15});return this.hooks.trigger(this.hooks.eventTypes.momentum,d,a),d.destination<o?(d.destination=r?Math.max(o-r/4,o-r/d.rate*l):o,d.duration=Math.abs(d.destination-e)/l):d.destination>i&&(d.destination=r?Math.min(i+r/4,i+r/d.rate*l):i,d.duration=Math.abs(d.destination-e)/l),d.destination=Math.round(d.destination),d}},4442:e=>{"use strict";var t={easeOutQuartic:function(e,t,n){return-(t-e)*(--n*n*n*n-1)+e},easeInQuartic:function(e,t,n){return n*n*n*n*(t-e)+e},easeInOutQuartic:function(e,t,n){return(n*=2)<1?(t-e)/2*n*n*n*n+e:-(t-e)/2*((n-=2)*n*n*n-2)+e},easeOutCubic:function(e,t,n){return(t-e)*(--n*n*n+1)+e},easeInCubic:function(e,t,n){return n*n*n*(t-e)+e},easeInOutCubic:function(e,t,n){return(n*=2)<1?(t-e)/2*n*n*n+e:(t-e)/2*((n-=2)*n*n+2)+e},easeOutQuadratic:function(e,t,n){return-(t-e)*n*(n-2)+e},easeInQuadratic:function(e,t,n){return n*n*(t-e)+e},easeInOutQuadratic:function(e,t,n){return(n*=2)<1?(t-e)/2*n*n+e:-(t-e)/2*((n-=1)*(n-2)-1)+e},linear:function(e,t,n){return e+(t-e)*n}};t.easeIn=t.easeInCubic,t.easeOut=t.easeOutCubic,t.easeInOut=t.easeInOutCubic,e.exports=t},9855:(e,t,n)=>{"use strict";const{getAbsoluteUrl:o}=n(5722);function i(){this.loadedFontFamilies={},this.fontCssFamiliesAdded={},this.fontCallbacks={};var e=this;["Arial","Arial Black","Courier New","Helvetica","Impact","Lucida Console","Tahoma","Times New Roman"].forEach((function(t){e.loadedFontFamilies[t]=!0}))}i.prototype.loadFont=function(e){if("undefined"==typeof document)return;var t,i=(t=e=o(e),t.replace(/\.[^/.]+$/,"")).split("/").pop();if(this.loadedFontFamilies[i])return void(this.fontCallbacks[i]&&this.fontCallbacks[i].forEach((function(e){e()})));if(this.fontCssFamiliesAdded[i])return;this.fontCssFamiliesAdded[i]=!0;var r=document.createElement("style");r.type="text/css";let s=Noodl.Env.BaseUrl||"/";if(e.startsWith("/")&&(e=e.substring(1)),r.appendChild(document.createTextNode("@font-face { font-family: '"+i+"'; src: url('"+s+e+"'); }\n")),document.head.appendChild(r),"undefined"!=typeof window){var a=this;n(5310).load({timeout:6e5,custom:{families:[i]},fontactive:function(e){a.loadedFontFamilies[e]=!0,a.fontCallbacks[e]&&a.fontCallbacks[e].forEach((function(e){e()}))}})}},i.prototype.callWhenFontIsActive=function(e,t){this.loadedFontFamilies[e]?t():(this.fontCallbacks[e]||(this.fontCallbacks[e]=[]),this.fontCallbacks[e].push(t))},i.instance=new i,e.exports=i},1436:e=>{e.exports=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}},6295:(e,t,n)=>{"use strict";const o=n(4442),i=n(5107);function r(e){this.name=e.name,this.startValue=0,this.endValue=0,this.currentValue=void 0,this.startMode="implicit",this.ease=e.ease,this.node=e.node,this.hasSampledStartValue=!1;var t=this;this.animation=e.node.context.timerScheduler.createTimer({startValue:0,endValue:0,onRunning:function(e){var n=t.ease(this.startValue,this.endValue,e);t.setCurrentValue(n)}}),this.animation.startValue=0,this.animation.endValue=0}Object.defineProperties(r.prototype,{setCurrentValue:{value:function(e){this.currentValue=e,this.node.flagOutputDirty(this.name)}},play:{value:function(e,t){if(void 0===e&&(console.log("Animation warning, start value is undefined"),e=0),void 0!==t){var n=this.animation;n.startValue=e,this.setCurrentValue(e),n.endValue=t,n.duration=this.node._internal.duration,n.start()}else console.error("Animation error, start:",e,"end:",t)}},playToEnd:{value:function(){!1!==this.hasConnections()&&(this.updateStartValue(),this.play(this.getTargetsCurrentValue(),this.endValue))}},playToStart:{value:function(){!1!==this.hasConnections()&&(this.updateStartValue(),this.play(this.getTargetsCurrentValue(),this.startValue))}},replayToEnd:{value:function(){!1!==this.hasConnections()&&(this.updateStartValue(),this.play(this.startValue,this.endValue))}},replayToStart:{value:function(){!1!==this.hasConnections()&&this.play(this.endValue,this.startValue)}},hasConnections:{value:function(){return this.node.getOutput(this.name).hasConnections()}},getTargetsCurrentValue:{value:function(){var e=this.node.getOutput(this.name).connections;const t=e[0].node.getInputValue(e[0].inputPortName);return t instanceof Object&&t.hasOwnProperty("value")?t.value:t}},updateStartValue:{value:function(){"implicit"!==this.startMode||this.hasSampledStartValue||(this.hasSampledStartValue=!0,this.startValue=this.getTargetsCurrentValue())}},stop:{value:function(){this.animation.stop(),this.setCurrentValue(void 0)}},jumpToStart:{value:function(){this.animation.stop(),this.setCurrentValue(this.startValue)}},jumpToEnd:{value:function(){this.animation.stop(),this.setCurrentValue(this.endValue)}}});var s={name:"Animation",docs:"https://docs.noodl.net/nodes/animation/animation",shortDesc:"Node that can animate any number of values, with different types of easing curves.",category:"Animation",deprecated:!0,initialize:function(){var e=this._internal;e.duration=300,e.ease=o.easeOut,e._isPlayingToEnd=!1,e.animations=[],e.cubicBezierPoints=[0,0,0,0],e.cubicBezierFunction=void 0;var t=this;e.animation=this.context.timerScheduler.createTimer({onFinish:function(){!1===e._isPlayingToEnd?t.sendSignalOnOutput("hasReachedStart"):t.sendSignalOnOutput("hasReachedEnd")}})},inputs:{duration:{index:0,type:"number",displayName:"Duration (ms)",group:"Animation Properties",default:300,set:function(e){this._internal.duration=e}},easingCurve:{index:10,type:{name:"enum",enums:[{value:"easeOut",label:"Ease Out"},{value:"easeIn",label:"Ease In"},{value:"linear",label:"Linear"},{value:"easeInOut",label:"Ease In Out"},{value:"cubicBezier",label:"Cubic Bezier"}]},group:"Animation Properties",displayName:"Easing Curve",default:"easeOut",set:function(e){var t;"cubicBezier"===e?(this.updateCubicBezierFunction(),t=this._internal.cubicBezierFunction):t=o[e],this._internal.ease=t}},playToEnd:{index:20,group:"Play",displayName:"To End",editorName:"Play To End",valueChangedToTrue:function(){this._internal._isPlayingToEnd=!0;var e=this._internal.animation,t=this._internal.animations,n=this;this.scheduleAfterInputsHaveUpdated((function(){e.duration=n._internal.duration,e.start();for(var o=0;o<t.length;o++)t[o].ease=n._internal.ease,t[o].playToEnd()}))}},playToStart:{index:21,group:"Play",displayName:"To Start",editorName:"Play To Start",valueChangedToTrue:function(){this._internal._isPlayingToEnd=!1;var e=this._internal.animation,t=this._internal.animations,n=this;this.scheduleAfterInputsHaveUpdated((function(){e.duration=n._internal.duration,e.start();for(var o=0;o<t.length;o++)t[o].ease=n._internal.ease,t[o].playToStart()}))}},replayToEnd:{index:22,group:"Play",displayName:"From Start To End",editorName:"Play From Start To End",valueChangedToTrue:function(){var e=this._internal.animation,t=this._internal.animations,n=this;this._internal._isPlayingToEnd=!0,this.scheduleAfterInputsHaveUpdated((function(){e.duration=n._internal.duration,e.start();for(var o=0;o<t.length;o++)t[o].ease=n._internal.ease,t[o].replayToEnd()}))}},replayToStart:{index:23,group:"Play",displayName:"From End To Start",editorName:"Play From End To Start",valueChangedToTrue:function(){this._internal._isPlayingToEnd=!1;var e=this._internal.animation,t=this._internal.animations,n=this;this.scheduleAfterInputsHaveUpdated((function(){e.duration=n._internal.duration,e.start();for(var o=0;o<t.length;o++)t[o].ease=n._internal.ease,t[o].replayToStart()}))}},stop:{index:60,group:"Instant Actions",displayName:"Stop",valueChangedToTrue:function(){var e=this._internal.animation,t=this._internal.animations;e.stop();for(var n=0;n<t.length;n++)t[n].stop()}},jumpToStart:{index:61,group:"Instant Actions",displayName:"Jump To Start",valueChangedToTrue:function(){for(var e=this._internal.animations,t=0;t<e.length;t++)e[t].jumpToStart();this.sendSignalOnOutput("hasReachedStart")}},jumpToEnd:{index:62,group:"Instant Actions",displayName:"Jump To End",valueChangedToTrue:function(){for(var e=this._internal.animations,t=0;t<e.length;t++)e[t].jumpToEnd();this.sendSignalOnOutput("hasReachedEnd")}},cubicBezierP1X:{displayName:"P1 X",group:"Cubic Bezier",type:{name:"number"},index:11,set:function(e){this._internal.cubicBezierPoints[0]=Math.min(1,Math.max(0,e)),this.updateCubicBezierFunction()}},cubicBezierP1Y:{displayName:"P1 Y",group:"Cubic Bezier",type:{name:"number"},index:12,set:function(e){this._internal.cubicBezierPoints[1]=e,this.updateCubicBezierFunction()}},cubicBezierP2X:{displayName:"P2 X",group:"Cubic Bezier",type:{name:"number"},index:13,set:function(e){this._internal.cubicBezierPoints[2]=Math.min(1,Math.max(0,e)),this.updateCubicBezierFunction()}},cubicBezierP2Y:{displayName:"P2 Y",group:"Cubic Bezier",type:{name:"number"},index:14,set:function(e){this._internal.cubicBezierPoints[3]=e,this.updateCubicBezierFunction()}}},outputs:{hasReachedStart:{type:"signal",group:"Signals",displayName:"Has Reached Start"},hasReachedEnd:{type:"signal",group:"Signals",displayName:"Has Reached End"}},dynamicports:[{condition:"easingCurve = cubicBezier",inputs:["cubicBezierP1X","cubicBezierP1Y","cubicBezierP2X","cubicBezierP2Y"]},{name:"expand/basic",indexStep:100,template:[{name:"{{portname}}.startMode",type:{name:"enum",enums:[{value:"explicit",label:"Explicit"},{value:"implicit",label:"Implicit"}],allowEditOnly:!0},plug:"input",group:"{{portname}} Animation",displayName:"Start Mode",default:"implicit",index:1e3},{name:"{{portname}}.endValue",type:"number",plug:"input",group:"{{portname}} Animation",displayName:"End Value",editorName:"End Value | {{portname}} ",default:0,index:1002}]},{name:"expand/basic",condition:"'{{portname}}.startMode' = explicit",indexStep:100,template:[{name:"{{portname}}.startValue",plug:"input",type:"number",displayName:"Start Value",editorName:"Start Value | {{portname}}",group:"{{portname}} Animation",default:0,index:1001}]}],panels:[{name:"PortEditor",title:"Animations",plug:"output",type:{name:"number"},group:"Animation Values"}],prototypeExtensions:{updateCubicBezierFunction:{value:function(){var e=this._internal.cubicBezierPoints,t=i(e);this._internal.cubicBezierFunction=function(e,n,i){return o.linear(e,n,t.get(i))},this._internal.ease=this._internal.cubicBezierFunction}},_registerAnimationGroup:{value:function(e){var t=new r({node:this,ease:this._internal.ease,name:e});this._internal.animations.push(t);var n={};n[e+".startMode"]={set:function(e){t.startMode=e}},n[e+".startValue"]={default:0,set:function(e){t.startValue=e}},n[e+".endValue"]={default:0,set:function(e){t.endValue=e}},this.registerInputs(n),this.registerOutput(e,{getter:function(){return t.currentValue}})}},registerInputIfNeeded:{value:function(e){if(!this.hasInput(e)){var t=e.indexOf("."),n=e.substr(0,t);this.hasOutput(n)||this._registerAnimationGroup(n)}}},registerOutputIfNeeded:{value:function(e){this.hasOutput(e)||this._registerAnimationGroup(e)}}}};e.exports={node:s}},6065:(e,t,n)=>{"use strict";const{Node:o}=n(3948),i=n(3839),r={name:"Component State",displayNodeName:"Component Object",category:"Component Utilities",color:"component",docs:"https://docs.noodl.net/nodes/component-utilities/component-object",deprecated:!0,initialize:function(){this._internal.inputValues={},this._internal.onModelChangedCallback=e=>{!1===this.isInputConnected("fetch")&&(this.hasOutput("value-"+e.name)&&this.flagOutputDirty("value-"+e.name),this.hasOutput("changed-"+e.name)&&this.sendSignalOnOutput("changed-"+e.name),this.sendSignalOnOutput("changed"))};const e=i.get("componentState"+this.nodeScope.componentOwner.getInstanceId());this._internal.model=e,e.on("change",this._internal.onModelChangedCallback)},getInspectInfo(){const e=this._internal.model.data;return Object.keys(e).map((t=>({type:"text",value:t+": "+e[t]})))},inputs:{properties:{type:{name:"stringlist",allowEditOnly:!0},displayName:"Properties",group:"Properties",set(e){}},store:{displayName:"Set",group:"Actions",valueChangedToTrue(){this.scheduleStore()}},fetch:{displayName:"Fetch",group:"Actions",valueChangedToTrue(){this.scheduleFetch()}}},outputs:{changed:{type:"signal",displayName:"Changed",group:"Events"},fetched:{type:"signal",displayName:"Fetched",group:"Events"},stored:{type:"signal",displayName:"Stored",group:"Events"}},methods:{scheduleStore(){if(!this.hasScheduledStore){this.hasScheduledStore=!0;var e=this._internal;this.scheduleAfterInputsHaveUpdated((()=>{for(var t in this.hasScheduledStore=!1,e.inputValues)e.model.set(t,e.inputValues[t],{resolve:!0});this.sendSignalOnOutput("stored")}))}},scheduleFetch(){this.hasScheduledFetch||(this.hasScheduledFetch=!0,this.scheduleAfterInputsHaveUpdated((()=>{this.hasScheduledFetch=!1,this.fetch()})))},fetch(){for(var e in this._internal.model.data)this.hasOutput("value-"+e)&&(this.flagOutputDirty("value-"+e),this.hasOutput("changed-"+e)&&this.sendSignalOnOutput("changed-"+e));this.sendSignalOnOutput("fetched")},_onNodeDeleted(){o.prototype._onNodeDeleted.call(this),this._internal.model.off("change",this._internal.onModelChangedCallback)},registerOutputIfNeeded(e){if(this.hasOutput(e))return;const t=e.split("-"),n=t[t.length-1];this.registerOutput(e,{get(){return this._internal.model.get(n,{resolve:!0})}})},registerInputIfNeeded:function(e){if(this.hasInput(e))return;const t=e.split("-"),n=t[t.length-1];e.startsWith("value-")&&this.registerInput(e,{set(e){this._internal.inputValues[n]=e,!1===this.isInputConnected("store")&&this.scheduleStore()}})}}};function s(e,t,n){const o=[];if(t.properties){var i=t.properties.split(",");for(var r in i){var s=i[r];o.push({type:{name:"*",allowConnectionsOnly:!0},plug:"input/output",group:"Properties",name:"value-"+s,displayName:s}),o.push({type:"signal",plug:"output",group:"Changed Events",displayName:s+" Changed",name:"changed-"+s})}}n.sendDynamicPorts(e,o,{detectRenamed:{plug:"input/output"}})}e.exports={node:r,setup:function(e,t){e.editorConnection&&e.editorConnection.isRunningLocally()&&t.on("nodeAdded.Component State",(t=>{s(t.id,t.parameters,e.editorConnection),t.on("parameterUpdated",(n=>{("properties"===n.name||n.name.startsWith("type-"))&&s(t.id,t.parameters,e.editorConnection)}))}))}}},4470:(e,t,n)=>{"use strict";const{Node:o}=n(3948);var i=n(3839),r=n(9160),s={name:"Collection",docs:"https://docs.noodl.net/nodes/data/array",displayNodeName:"Array",shortDesc:"A collection of models, mainly used together with a For Each Node.",category:"Data",usePortAsLabel:"collectionId",color:"data",deprecated:!0,initialize:function(){var e=this,t=!1;this._internal.collectionChangedCallback=function(){!0!==e.isInputConnected("fetch")&&(t||(t=!0,e.scheduleAfterInputsHaveUpdated((function(){e.sendSignalOnOutput("changed"),e.flagOutputDirty("count"),t=!1}))))},this._internal.sourceCollectionChangedCallback=function(){!0!==e.isInputConnected("store")&&e.scheduleCopyItems()}},getInspectInfo(){if(this._internal.collection)return"Count: "+this._internal.collection.size()},inputs:{collectionId:{type:{name:"string",identifierOf:"CollectionName",identifierDisplayName:"Array Ids"},displayName:"Id",group:"General",set:function(e){e instanceof r&&(e=e.getId()),this._internal.collectionId=e,!1===this.isInputConnected("fetch")?this.setCollectionID(e):this.flagOutputDirty("id")}},items:{type:"array",group:"General",displayName:"Items",set:function(e){var t=this;void 0!==e&&e!==this._internal.collection&&(this._internal.pendingSourceCollection=e,!1===this.isInputConnected("store")&&this.scheduleAfterInputsHaveUpdated((function(){t.setSourceCollection(e)})))}},modifyId:{type:{name:"string",allowConnectionsOnly:!0},displayName:"Item Id",group:"Modify",set:function(e){this._internal.modifyId=e}},store:{displayName:"Set",group:"Actions",valueChangedToTrue:function(){this.scheduleStore()}},add:{displayName:"Add",group:"Modify",valueChangedToTrue:function(){var e=this,t=this._internal;this.scheduleAfterInputsHaveUpdated((function(){if(void 0!==t.modifyId&&(void 0===t.collection&&!1===this.isInputConnected("fetch")&&e.setCollection(r.get()),void 0!==t.collection)){var n=i.get(t.modifyId);t.collection.add(n),e.sendSignalOnOutput("modified")}}))}},remove:{displayName:"Remove",group:"Modify",valueChangedToTrue:function(){var e=this,t=this._internal;this.scheduleAfterInputsHaveUpdated((function(){if(void 0!==t.modifyId&&(void 0===t.collection&&!1===this.isInputConnected("fetch")&&e.setCollection(r.get()),void 0!==t.collection)){var n=i.get(t.modifyId);t.collection.remove(n),e.sendSignalOnOutput("modified")}}))}},clear:{displayName:"Clear",group:"Modify",valueChangedToTrue:function(){var e=this,t=this._internal;this.scheduleAfterInputsHaveUpdated((function(){void 0===t.collection&&!1===this.isInputConnected("fetch")&&e.setCollection(r.get()),void 0!==t.collection&&(t.collection.set([]),e.sendSignalOnOutput("modified"),e.sendSignalOnOutput("count"))}))}},fetch:{displayName:"Fetch",group:"Actions",valueChangedToTrue:function(){this.scheduleSetCollection()}},new:{displayName:"New",group:"Actions",valueChangedToTrue:function(){this.scheduleNew()}}},outputs:{id:{type:"string",displayName:"Id",group:"General",getter:function(){return this._internal.collection?this._internal.collection.getId():this._internal.collectionId}},items:{type:"array",displayName:"Items",group:"General",getter:function(){return this._internal.collection}},count:{type:"number",displayName:"Count",group:"General",getter:function(){return this._internal.collection?this._internal.collection.size():0}},modified:{group:"Events",type:"signal",displayName:"Modified"},changed:{group:"Events",type:"signal",displayName:"Changed"},stored:{group:"Events",type:"signal",displayName:"Stored"},fetched:{group:"Events",type:"signal",displayName:"Fetched"},created:{group:"Events",type:"signal",displayName:"Created"}},prototypeExtensions:{setCollectionID:function(e){this.setCollection(r.get(e))},setCollection:function(e){this._internal.collection&&this._internal.collection.off("change",this._internal.collectionChangedCallback),this._internal.collection=e,this.flagOutputDirty("id"),e.on("change",this._internal.collectionChangedCallback),this.flagOutputDirty("items"),this.flagOutputDirty("count")},setSourceCollection:function(e){var t=this._internal;t.sourceCollection&&t.sourceCollection instanceof r&&t.sourceCollection.off("change",t.sourceCollectionChangedCallback),t.sourceCollection=e,t.sourceCollection instanceof r&&t.sourceCollection.on("change",t.sourceCollectionChangedCallback),this._copySourceItems()},scheduleSetCollection:function(){var e=this;this.hasScheduledSetCollection||(this.hasScheduledSetCollection=!0,this.scheduleAfterInputsHaveUpdated((function(){e.hasScheduledSetCollection=!1,e.setCollectionID(e._internal.collectionId),e.sendSignalOnOutput("fetched")})))},scheduleStore:function(){var e=this;if(!this.hasScheduledStore){this.hasScheduledStore=!0;var t=this._internal;this.scheduleAfterInputsHaveUpdated((function(){e.hasScheduledStore=!1,e.setSourceCollection(t.pendingSourceCollection),e.sendSignalOnOutput("stored")}))}},_copySourceItems:function(){var e=this._internal;void 0===e.collection&&!1===this.isInputConnected("fetch")&&this.setCollection(r.get()),e.collection&&e.collection.set(e.sourceCollection)},scheduleCopyItems:function(){var e=this;this._internal,this.hasScheduledCopyItems||(this.hasScheduledCopyItems=!0,this.scheduleAfterInputsHaveUpdated((function(){e.hasScheduledCopyItems=!1,e._copySourceItems()})))},scheduleNew:function(){var e=this;if(!this.hasScheduledNew){this.hasScheduledNew=!0;var t=this._internal;this.scheduleAfterInputsHaveUpdated((function(){e.hasScheduledNew=!1,e.setCollection(r.get()),t.sourceCollection&&t.collection.set(t.sourceCollection),e.sendSignalOnOutput("created")}))}},_onNodeDeleted:function(){o.prototype._onNodeDeleted.call(this),this._internal.collection&&this._internal.collection.off("change",this._internal.collectionChangedCallback)}}};e.exports={node:s}},851:(e,t,n)=>{"use strict";const{Node:o,EdgeTriggeredInput:i}=n(3948),r=n(3839),s=n(9160),a=n(4007),l=n(5995);function u(e,t){const n=Object.keys(e);if(0===n.length)return{};if(1!==n.length)return t.error("Filter must only have one key found "+n.join(","));const o={},i=n[0];if(void 0!==e.and&&Array.isArray(e.and))o.$and=e.and.map((e=>u(e,t)));else if(void 0!==e.or&&Array.isArray(e.or))o.$or=e.or.map((e=>u(e,t)));else if(void 0!==e.idEqualTo)o.objectId={$eq:e.idEqualTo};else if(void 0!==e.idContainedIn)o.objectId={$in:e.idContainedIn};else if(void 0!==e.relatedTo){var s=e.relatedTo.id;if(void 0===s)return t.error("Must provide id in relatedTo filter");var l=e.relatedTo.key;if(void 0===l)return t.error("Must provide key in relatedTo filter");var d=r.get(s);o.$relatedTo={object:{__type:"Pointer",objectId:s,className:d._class},key:l}}else if("object"==typeof e[i]){const n=e[i];if(void 0!==n.equalTo)o[i]={$eq:n.equalTo};else if(void 0!==n.notEqualTo)o[i]={$ne:n.notEqualTo};else if(void 0!==n.lessThan)o[i]={$lt:n.lessThan};else if(void 0!==n.greaterThan)o[i]={$gt:n.greaterThan};else if(void 0!==n.lessThanOrEqualTo)o[i]={$lte:n.lessThanOrEqualTo};else if(void 0!==n.greaterThanOrEqualTo)o[i]={$gte:n.greaterThanOrEqualTo};else if(void 0!==n.exists)o[i]={$exists:n.exists};else if(void 0!==n.containedIn)o[i]={$in:n.containedIn};else if(void 0!==n.notContainedIn)o[i]={$nin:n.notContainedIn};else if(void 0!==n.pointsTo){if(d=r.get(n.pointsTo),a._collections[t.collectionName])var c=a._collections[t.collectionName].schema;var p=c&&c.properties&&c.properties[i]?c.properties[i].targetClass:void 0;"Relation"===(c&&c.properties&&c.properties[i]?c.properties[i].type:void 0)?o[i]={__type:"Pointer",objectId:n.pointsTo,className:p}:Array.isArray(n.pointsTo)?o[i]={$in:n.pointsTo.map((e=>({__type:"Pointer",objectId:e,className:p})))}:o[i]={$eq:{__type:"Pointer",objectId:n.pointsTo,className:p}}}else if(void 0!==n.matchesRegex)o[i]={$regex:n.matchesRegex,$options:n.options};else if(void 0!==n.text&&void 0!==n.text.search){var h=n.text.search;o[i]="string"==typeof h?{$text:{$search:{$term:h,$caseSensitive:!1}}}:{$text:{$search:{$term:h.term,$language:h.language,$caseSensitive:h.caseSensitive,$diacriticSensitive:h.diacriticSensitive}}}}}else t.error("Unrecognized filter keys "+n.join(","));return o}var d={name:"DbCollection",docs:"https://docs.noodl.net/nodes/cloud-services/collection",displayNodeName:"Query Collection",shortDesc:"A database collection.",category:"Cloud Services",usePortAsLabel:"collectionName",color:"data",deprecated:!0,initialize:function(){var e=this,t=!1;this._internal.collectionChangedCallback=function(){t||(t=!0,e.scheduleAfterInputsHaveUpdated((function(){e.sendSignalOnOutput("modified"),e.flagOutputDirty("count"),e.flagOutputDirty("firstItemId"),t=!1})))},this._internal.storageSettings={}},inputs:{},outputs:{id:{type:"string",displayName:"Name",group:"General",getter:function(){return this._internal.name}},items:{type:"array",displayName:"Result",group:"General",getter:function(){return this._internal.collection}},firstItemId:{type:"string",displayName:"First Item Id",group:"General",getter:function(){if(this._internal.collection){var e=this._internal.collection.get(0);if(void 0!==e)return e.getId()}}},count:{type:"number",displayName:"Count",group:"General",getter:function(){return this._internal.collection?this._internal.collection.size():0}},modified:{group:"Events",type:"signal",displayName:"Modified"},fetched:{group:"Events",type:"signal",displayName:"Fetched"},failure:{group:"Events",type:"signal",displayName:"Failure"},error:{type:"string",displayName:"Error",group:"Events",getter:function(){return this._internal.error}}},prototypeExtensions:{setCollectionName:function(e){this._internal.name=e,this.flagOutputDirty("id")},setCollection:function(e){this.bindCollection(e),this.flagOutputDirty("firstItemId"),this.flagOutputDirty("items"),this.flagOutputDirty("count")},unbindCurrentCollection:function(){var e=this._internal.collection;e&&(e.off("change",this._internal.collectionChangedCallback),this._internal.collection=void 0)},bindCollection:function(e){this.unbindCurrentCollection(),this._internal.collection=e,e&&e.on("change",this._internal.collectionChangedCallback)},_onNodeDeleted:function(){o.prototype._onNodeDeleted.call(this),this.unbindCurrentCollection()},setError:function(e){this._internal.err=e,this.flagOutputDirty("error"),this.sendSignalOnOutput("failure")},fetch:function(){var e=this._internal;this.context.editorConnection&&(void 0===this._internal.name?this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"query-collection",{message:"No collection specified for query"}):this.context.editorConnection.clearWarning(this.nodeScope.componentOwner.name,this.id,"query-collection")),e.fetchScheduled||(e.fetchScheduled=!0,this.scheduleAfterInputsHaveUpdated((()=>{e.fetchScheduled=!1;const t=s.get(),n=this.getStorageFilter();a.instance.query({collection:this._internal.name,where:n.where,sort:n.sort,limit:this.getStorageLimit(),skip:this.getStorageSkip(),success:e=>{void 0!==e&&t.set(e.map((e=>{var n=a._fromJSON(e,this._internal.name);return n.on("delete",(()=>t.remove(n))),n}))),this.setCollection(t),this.sendSignalOnOutput("fetched")},error:e=>{this.setCollection(t),this.setError(e||"Failed to fetch.")}})})))},getStorageFilter:function(){const e=this._internal.storageSettings;if(void 0===e.storageFilterType||"simple"===e.storageFilterType){if(e.storageFilter){const o=e.storageFilter.split(",");var t=[];o.forEach((function(n){const o={};var i="$"+(e["storageFilterOp-"+n]||"eq");o[n]={},o[n][i]=e["storageFilterValue-"+n],t.push(o)}));var n=t.length>1?{$and:t}:t[0]}if(e.storageSort){const t=e.storageSort.split(",");var o=[];t.forEach((function(t){o.push(("descending"===e["storageSort-"+t]?"-":"")+t)}))}return{where:n,sort:o}}if("json"===e.storageFilterType){if(!this._internal.filterFunc)try{var i=e.storageJSONFilter;i=i.replace(/\/\*[\s\S]*?\*\/|\/\/.*/g,""),this._internal.filterVariables=i.match(/\$[A-Za-z0-9]+/g)||[];var r=["filter","where","sort","Inputs"].concat(this._internal.filterVariables).concat([i]);this._internal.filterFunc=Function.apply(null,r)}catch(e){this._internal.filterFunc=void 0,console.log("Error while parsing filter script: "+e)}if(!this._internal.filterFunc)return;var s={},a=(o=[],this),l=function(e){s=u(e,{collectionName:a._internal.name,error:function(e){a.context.editorConnection.sendWarning(a.nodeScope.componentOwner.name,a.id,"query-collection-filter",{message:e})}})};const t={};for(let n in e)n.startsWith("storageFilterValue-")&&(t[n.substring(19)]=e[n]);var d=[l,l,function(e){o=e},t];this._internal.filterVariables.forEach((t=>{d.push(e["storageFilterValue-"+t.substring(1)])}));try{this._internal.filterFunc.apply(this,d)}catch(e){console.log("Error while running filter script: "+e)}return{where:s,sort:o}}},getStorageLimit:function(){const e=this._internal.storageSettings;return e.storageEnableLimit?e.storageLimit||10:void 0},getStorageSkip:function(){const e=this._internal.storageSettings;return e.storageEnableLimit?e.storageSkip||0:void 0},registerOutputIfNeeded:function(e){this.hasOutput(e)||this.registerOutput(e,{getter:c.bind(this,e)})},registerInputIfNeeded:function(e){if(this.hasInput(e))return;const t={storageFetch:this.fetch.bind(this)};if(t[e])return this.registerInput(e,{set:i.createSetter({valueChangedToTrue:t[e]})});const n={collectionName:this.setCollectionName.bind(this)};if(n[e])return this.registerInput(e,{set:n[e]});this.registerInput(e,{set:p.bind(this,e)})}}};function c(e){return this._internal.storageSettings[e]}function p(e,t){this._internal.storageSettings[e]=t}function h(e,t,n,o){var i=[];if(i.push({name:"collectionName",type:{name:"enum",enums:void 0!==o?o.map((e=>({value:e.name,label:e.name}))):[],allowEditOnly:!0},displayName:"Collecton Name",plug:"input",group:"General"}),i.push({name:"storageFilterType",type:{name:"enum",allowEditOnly:!0,enums:[{value:"simple",label:"Simple"},{value:"json",label:"Advanced"}]},displayName:"Filter",default:"simple",plug:"input",group:"General"}),i.push({type:"boolean",plug:"input",group:"Limit",name:"storageEnableLimit",displayName:"Use limit"}),t.storageEnableLimit&&(i.push({type:"number",default:10,plug:"input",group:"Limit",name:"storageLimit",displayName:"Limit"}),i.push({type:"number",default:0,plug:"input",group:"Limit",name:"storageSkip",displayName:"Skip"})),i.push({type:"signal",plug:"input",group:"Storage",name:"storageFetch",displayName:"Fetch"}),void 0===t.storageFilterType||"simple"===t.storageFilterType){i.push({type:{name:"stringlist",allowEditOnly:!0},plug:"input",group:"Filter",name:"storageFilter",displayName:"Filter"});const e={string:[{value:"eq",label:"Equals"},{value:"ne",label:"Not Equals"}],boolean:[{value:"eq",label:"Equals"},{value:"ne",label:"Not Equals"}],number:[{value:"eq",label:"Equals"},{value:"ne",label:"Not Equals"},{value:"lt",label:"Less than"},{value:"gt",label:"Greater than"},{value:"gte",label:"Greater than or equal"},{value:"lte",label:"Less than or equal"}]};t.storageFilter&&t.storageFilter.split(",").forEach((n=>{i.push({type:{name:"enum",enums:[{value:"string",label:"String"},{value:"number",label:"Number"},{value:"boolean",label:"Boolean"}]},default:"string",plug:"input",group:n+" filter",displayName:"Type",editorName:n+" filter | Type",name:"storageFilterType-"+n});var o=t["storageFilterType-"+n];i.push({type:{name:"enum",enums:e[o||"string"]},default:"eq",plug:"input",group:n+" filter",displayName:"Op",editorName:n+" filter| Op",name:"storageFilterOp-"+n}),i.push({type:o||"string",plug:"input",group:n+" filter",displayName:"Value",editorName:n+" Filter Value",name:"storageFilterValue-"+n})})),i.push({type:{name:"stringlist",allowEditOnly:!0},plug:"input",group:"Sort",name:"storageSort",displayName:"Sort"}),t.storageSort&&t.storageSort.split(",").forEach((e=>{i.push({type:{name:"enum",enums:[{value:"ascending",label:"Ascending"},{value:"descending",label:"Descending"}]},default:"ascending",plug:"input",group:e+" sort",displayName:"Sort",editorName:e+" sorting",name:"storageSort-"+e})}))}else if("json"===t.storageFilterType){i.push({type:{name:"string",allowEditOnly:!0,codeeditor:"javascript"},plug:"input",group:"Filter",name:"storageJSONFilter",default:"// Write your query script here, check out the reference documentation for examples\nwhere({ })\n",displayName:"Filter"});var r=t.storageJSONFilter;if(r){var s=(r=r.replace(/\/\*[\s\S]*?\*\/|\/\/.*/g,"")).match(/\$[A-Za-z0-9]+/g);if(s){const e={};s.forEach((t=>{e[t]=!0})),Object.keys(e).forEach((e=>{i.push({name:"storageFilterValue-"+e.substring(1),displayName:e.substring(1),group:"Filter Values",plug:"input",type:{name:"*",allowConnectionsOnly:!0}})}))}l.parseAndAddPortsFromScript(r,i,{inputPrefix:"storageFilterValue-",inputGroup:"Filter Values",inputType:{name:"*",allowConnectionsOnly:!0},skipOutputs:!0})}}n.sendDynamicPorts(e,i)}e.exports={node:d,setup:function(e,t){function n(n){h(n.id,n.parameters,e.editorConnection,t.getMetaData("dbCollections")),n.on("parameterUpdated",(function(o){o.name.startsWith("storage")&&h(n.id,n.parameters,e.editorConnection,t.getMetaData("dbCollections"))})),t.on("metadataChanged.dbCollections",(function(t){a.invalidateCollections(),h(n.id,n.parameters,e.editorConnection,t)})),t.on("metadataChanged.cloudservices",(function(e){a.instance._initCloudServices()}))}e.editorConnection&&e.editorConnection.isRunningLocally()&&t.on("editorImportComplete",(()=>{t.on("nodeAdded.DbCollection",(function(e){n(e)}));for(const e of t.getNodesWithType("DbCollection"))n(e)}))}}},272:(e,t,n)=>{"use strict";const{Node:o,EdgeTriggeredInput:i}=n(3948),r=n(3958);var s=n(3839);const a=n(4007);var l={},u={},d={name:"DbModel",docs:"https://docs.noodl.net/nodes/cloud-services/model",displayNodeName:"Model",shortDesc:"Database model",category:"Cloud Services",usePortAsLabel:"$ndlCollectionName",color:"data",deprecated:!0,initialize:function(){var e=this._internal;e.inputValues={},e.relationModelIds={};var t=this;this._internal.onModelChangedCallback=function(e){t.isInputConnected("fetch")||(t.hasOutput(e.name)&&t.flagOutputDirty(e.name),t.hasOutput("changed-"+e.name)&&t.sendSignalOnOutput("changed-"+e.name),t.sendSignalOnOutput("changed"))}},getInspectInfo(){const e=this._internal.model;return e?[{type:"text",value:"Id: "+e.getId()},{type:"value",value:e.data}]:"[No Model]"},outputs:{id:{type:"string",displayName:"Id",group:"General",getter:function(){return this._internal.model?this._internal.model.getId():this._internal.modelId}},saved:{type:"signal",displayName:"Saved",group:"Events"},stored:{type:"signal",displayName:"Stored",group:"Events"},created:{type:"signal",displayName:"Created",group:"Events"},fetched:{type:"signal",displayName:"Fetched",group:"Events"},changed:{type:"signal",displayName:"Changed",group:"Events"},deleted:{type:"signal",displayName:"Deleted",group:"Events"},failure:{type:"signal",displayName:"Failure",group:"Events"},error:{type:"string",displayName:"Error",group:"Events",getter:function(){return this._internal.error}}},inputs:{modelId:{type:{name:"string",allowConnectionsOnly:!0},displayName:"Id",group:"General",set:function(e){e instanceof s&&(e=e.getId()),this._internal.modelId=e,!1===this.isInputConnected("fetch")?this.setModelID(e):this.flagOutputDirty("id")}},properties:{type:{name:"stringlist",allowEditOnly:!0},displayName:"Properties",group:"Properties",set:function(e){}},fetch:{displayName:"Fetch",group:"Actions",valueChangedToTrue:function(){this.scheduleFetch()}},store:{displayName:"Set",group:"Actions",valueChangedToTrue:function(){this.scheduleStore()}},save:{displayName:"Save",group:"Actions",valueChangedToTrue:function(){this.storageSave()}},delete:{displayName:"Delete",group:"Actions",valueChangedToTrue:function(){this.storageDelete()}},new:{displayName:"New",group:"Actions",valueChangedToTrue:function(){this.storageNew()}},insert:{displayName:"Insert",group:"Actions",valueChangedToTrue:function(){this.storageInsert()}}},methods:{setCollectionID:function(e){this._internal.collectionId=e,this.clearWarnings()},setModelID:function(e){var t=s.get(e);this.setModel(t)},setModel:function(e){for(var t in this._internal.model&&this._internal.model.off("change",this._internal.onModelChangedCallback),this._internal.model=e,this.flagOutputDirty("id"),e.on("change",this._internal.onModelChangedCallback),e.data)this.hasOutput(t)&&this.flagOutputDirty(t);this.sendSignalOnOutput("fetched")},_onNodeDeleted:function(){o.prototype._onNodeDeleted.call(this),this._internal.model&&this._internal.model.off("change",this._internal.onModelChangedCallback)},scheduleOnce:function(e,t){const n=this,o="hasScheduled"+e;this._internal[o]||(this._internal[o]=!0,this.scheduleAfterInputsHaveUpdated((function(){n._internal[o]=!1,t()})))},_hasChangesPending:function(){const e=this._internal;var t=e.model;for(var n in e.inputValues)if(r(t.data[n],e.inputValues[n]))return!0;return!1},scheduleFetch:function(){var e=this;const t=this._internal;this.checkWarningsBeforeCloudOp()&&this.scheduleOnce("Fetch",(function(){void 0!==t.modelId&&""!==t.modelId&&a.instance.fetch({collection:t.collectionId,objectId:t.modelId,success:function(n){var o=a._fromJSON(n,t.collectionId);for(var i in t.model!==o&&(t.model&&t.model.off("change",t.onModelChangedCallback),t.model=o,o.on("change",t.onModelChangedCallback)),e.flagOutputDirty("id"),delete n.objectId,n)e.hasOutput(i)&&e.flagOutputDirty(i);e.sendSignalOnOutput("fetched")},error:function(t){e.setError(t||"Failed to fetch.")}})}))},scheduleStore:function(){var e=this,t=this._internal;t.model&&this.checkWarningsBeforeCloudOp()&&this.scheduleOnce("Store",(function(){for(var n in t.inputValues)t.model.set(n,t.inputValues[n],{resolve:!0});e.sendSignalOnOutput("stored")}))},storageSave:function(){const e=this,t=this._internal;this.checkWarningsBeforeCloudOp()&&this.scheduleOnce("StorageSave",(function(){if(t.model){var n=t.model;for(var o in t.inputValues)n.set(o,t.inputValues[o],{resolve:!0});a.instance.save({collection:t.collectionId,objectId:n.getId(),data:n.data,success:function(t){for(var o in t)n.set(o,t[o]);e.sendSignalOnOutput("saved")},error:function(t){e.setError(t||"Failed to save.")}})}}))},storageDelete:function(){const e=this;if(!this._internal.model)return;const t=this._internal;this.checkWarningsBeforeCloudOp()&&this.scheduleOnce("StorageDelete",(function(){a.instance.delete({collection:t.collectionId,objectId:t.model.getId(),success:function(){t.model.notify("delete"),e.sendSignalOnOutput("deleted")},error:function(t){e.setError(t||"Failed to delete.")}})}))},storageInsert:function(){const e=this,t=this._internal;this.checkWarningsBeforeCloudOp()&&this.scheduleOnce("StorageInsert",(function(){var n=e._getModelInitData();a.instance.create({collection:t.collectionId,data:n,success:function(n){const o=a._fromJSON(n,t.collectionId);e.setModel(o),e.sendSignalOnOutput("created"),e.sendSignalOnOutput("saved")},error:function(t){e.setError(t||"Failed to insert.")}})}))},checkWarningsBeforeCloudOp(){return this.clearWarnings(),!!this._internal.collectionId||(this.setError("No collection name specified"),!1)},setError:function(e){this._internal.error=e,this.flagOutputDirty("error"),this.sendSignalOnOutput("failure"),this.context.editorConnection&&this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"storage-op-warning",{message:e,showGlobally:!0})},clearWarnings(){this.context.editorConnection&&this.context.editorConnection.clearWarning(this.nodeScope.componentOwner.name,this.id,"storage-op-warning")},onRelationAdd:function(e){const t=this,n=this._internal;this.scheduleOnce("StorageAddRelation",(function(){if(n.model){var o=n.model,i=n.relationModelIds[e];void 0!==i&&a.instance.addRelation({collection:n.collectionId,objectId:o.getId(),key:e,targetObjectId:i,targetClass:s.get(i)._class,success:function(n){for(var i in n)o.set(i,n[i]);t.sendSignalOnOutput("$relation-added-"+e)},error:function(e){t.setError(e||"Failed to add relation.")}})}}))},onRelationRemove:function(e){const t=this,n=this._internal;this.scheduleOnce("StorageRemoveRelation",(function(){if(n.model){var o=n.model,i=n.relationModelIds[e];void 0!==i&&a.instance.removeRelation({collection:n.collectionId,objectId:o.getId(),key:e,targetObjectId:i,targetClass:s.get(i)._class,success:function(n){for(var i in n)o.set(i,n[i]);t.sendSignalOnOutput("$relation-removed-"+e)},error:function(e){t.setError(e||"Failed to remove relation.")}})}}))},setRelationModelId:function(e,t){this._internal.relationModelIds[e]=t},registerOutputIfNeeded:function(e){if(!this.hasOutput(e))return e.startsWith("$relation-added-")||e.startsWith("$relation-removed-")?this.registerOutput(e,{getter:function(){}}):void this.registerOutput(e,{getter:c.bind(this,e)})},_getModelInitData:function(){var e=this._internal,t={};for(var n in e.inputValues)t[n]=e.inputValues[n];if(this._internal.modelInitCode)try{new Function("initialize",this._internal.modelInitCode)((function(e){for(var n in e)"function"==typeof e[n]?t[n]=e[n]():t[n]=e[n]}))}catch(e){console.log("Error while initializing model: "+e)}return t},setModelInitCode:function(e){this._internal.modelInitCode=e},registerInputIfNeeded:function(e){if(this.hasInput(e))return;if(e.startsWith("$relation-add-"))return this.registerInput(e,{set:i.createSetter({valueChangedToTrue:this.onRelationAdd.bind(this,e.substring(14))})});if(e.startsWith("$relation-remove-"))return this.registerInput(e,{set:i.createSetter({valueChangedToTrue:this.onRelationRemove.bind(this,e.substring(17))})});if(e.startsWith("$relation-modelid-"))return this.registerInput(e,{set:this.setRelationModelId.bind(this,e.substring(18))});const t={};if(t[e])return this.registerInput(e,{set:i.createSetter({valueChangedToTrue:t[e]})});const n={$ndlCollectionName:this.setCollectionID.bind(this),$ndlModelInitCode:this.setModelInitCode.bind(this)};if(n[e])return this.registerInput(e,{set:n[e]});this.registerInput(e,{set:p.bind(this,e)})}}};function c(e){return this._internal.model?this._internal.model.get(e,{resolve:!0}):void 0}function p(e,t){this._internal.inputValues[e]=t}function h(e,t,n,o){var i=[],r=t.properties;if(r){for(var s in r=r?r.split(","):void 0){var a=r[s];i.push({type:{name:"*",allowConnectionsOnly:!0},plug:"input/output",group:"Properties",name:a}),i.push({type:"signal",plug:"output",group:"Events",displayName:"Changed "+a,name:"changed-"+a})}var d=function(e,t){if(e&&t&&e.length===t.length){for(var n={},o=0;o<e.length;o++){if(-1===t.indexOf(e[o])){if(n.before)return;n.before=e[o]}if(-1===e.indexOf(t[o])){if(n.after)return;n.after=t[o]}}return n.before&&n.after?n:void 0}}(u[e],r);if(u[e]=r,d)var c={plug:"input/output",patterns:["{{*}}"],before:d.before,after:d.after}}if(i.push({name:"$ndlCollectionName",displayName:"Class",group:"General",type:{name:"enum",enums:void 0!==o?o.map((e=>({value:e.name,label:e.name}))):[],allowEditOnly:!0},plug:"input"}),t.$ndlCollectionName&&o){var p=o.find((e=>e.name===t.$ndlCollectionName));if(p&&p.schema&&p.schema.properties){var h=p.schema.properties;for(var g in h)a=h[g],i.find((e=>e.name===g))||("Relation"===a.type?(i.push({type:"signal",plug:"input",group:g+" Relation",name:"$relation-add-"+g,displayName:"Add",editorName:g+" | Add"}),i.push({type:"signal",plug:"input",group:g+" Relation",name:"$relation-remove-"+g,displayName:"Remove",editorName:g+" | Remove"}),i.push({type:{name:"string",allowConnectionsOnly:!0},plug:"input",group:g+" Relation",name:"$relation-modelid-"+g,displayName:"Model Id",editorName:g+" | Model Id"}),i.push({type:"signal",plug:"output",group:g+" Relation",name:"$relation-removed-"+g,displayName:"Removed",editorName:g+" | Removed"}),i.push({type:"signal",plug:"output",group:g+" Relation",name:"$relation-added-"+g,displayName:"Added",editorName:g+" | Added"})):(i.push({type:{name:"*",allowConnectionsOnly:!0},plug:"input/output",group:"Properties",name:g}),i.push({type:"signal",plug:"output",group:"Events",displayName:"Changed "+g,name:"changed-"+g})))}}i.push({name:"$ndlModelInitCode",displayName:"Initialize",group:"Scripts",type:{name:"string",allowEditOnly:!0,codeeditor:"javascript"},default:"initialize({\n\t// Here you can initialize new models\n\t//myProperty:'Some init value',\n\t//anotherProperty:function() { return 'Some other value' }\n})\n",plug:"input"});var f=JSON.stringify(i);l[e]!==f&&(l[e]=f,n.sendDynamicPorts(e,i,{renamed:c}))}e.exports={node:d,setup:function(e,t){function n(n){h(n.id,n.parameters,e.editorConnection,t.getMetaData("dbCollections")),n.on("parameterUpdated",(function(o){h(n.id,n.parameters,e.editorConnection,t.getMetaData("dbCollections"))})),t.on("metadataChanged.dbCollections",(function(t){a.invalidateCollections(),h(n.id,n.parameters,e.editorConnection,t)}))}e.editorConnection&&e.editorConnection.isRunningLocally()&&t.on("editorImportComplete",(()=>{t.on("nodeAdded.DbModel",(function(e){n(e)}));for(const e of t.getNodesWithType("DbModel"))n(e)}))}}},46:(e,t,n)=>{"use strict";const{Node:o}=n(3948);var i=n(3839),r={name:"Model",docs:"https://docs.noodl.net/nodes/data/object",displayNodeName:"Object",shortDesc:"Stores any amount of properties and can be used standalone or together with Collections and For Each nodes.",category:"Data",usePortAsLabel:"modelId",color:"data",deprecated:!0,initialize:function(){this._internal.inputValues={};var e=this;this._internal.onModelChangedCallback=function(t){!0!==e.isInputConnected("fetch")&&(e.hasOutput(t.name)&&e.flagOutputDirty(t.name),e.hasOutput("changed-"+t.name)&&e.sendSignalOnOutput("changed-"+t.name),e.sendSignalOnOutput("changed"))}},getInspectInfo(){const e=this._internal.model;if(!e)return"[No Object]";const t=[{type:"text",value:"Id: "+e.getId()}],n=this._internal.model.data;return t.concat(Object.keys(n).map((e=>({type:"text",value:e+": "+n[e]}))))},outputs:{id:{type:"string",displayName:"Id",group:"General",getter:function(){return this._internal.model?this._internal.model.getId():this._internal.modelId}},stored:{type:"signal",displayName:"Stored",group:"Events"},changed:{type:"signal",displayName:"Changed",group:"Events"},fetched:{type:"signal",displayName:"Fetched",group:"Events"},created:{type:"signal",displayName:"Created",group:"Events"}},inputs:{modelId:{type:{name:"string",identifierOf:"ModelName",identifierDisplayName:"Object Ids"},displayName:"Id",group:"General",set:function(e){e instanceof i&&(e=e.getId()),this._internal.modelId=e,!1===this.isInputConnected("fetch")?this.setModelID(e):this.flagOutputDirty("id")}},properties:{type:{name:"stringlist",allowEditOnly:!0},displayName:"Properties",group:"Properties",set:function(e){}},new:{displayName:"New",group:"Actions",valueChangedToTrue:function(){this.scheduleNew()}},store:{displayName:"Set",group:"Actions",valueChangedToTrue:function(){this.scheduleStore()}},fetch:{displayName:"Fetch",group:"Actions",valueChangedToTrue:function(){this.scheduleSetModel()}},clear:{displayName:"Clear",group:"Actions",valueChangedToTrue:function(){var e=this._internal;if(e.model)for(var t in e.inputValues)e.model.set(t,void 0,{resolve:!0})}}},prototypeExtensions:{scheduleStore:function(){if(!this.hasScheduledStore){this.hasScheduledStore=!0;var e=this._internal;this.scheduleAfterInputsHaveUpdated((()=>{if(this.hasScheduledStore=!1,e.model){for(var t in e.inputValues)e.model.set(t,e.inputValues[t],{resolve:!0});this.sendSignalOnOutput("stored")}}))}},scheduleNew:function(){if(!this.hasScheduledNew){this.hasScheduledNew=!0;var e=this._internal;this.scheduleAfterInputsHaveUpdated((()=>{this.hasScheduledNew=!1;const t=i.get();for(var n in e.inputValues)t.set(n,e.inputValues[n],{resolve:!0});this.setModel(t),this.sendSignalOnOutput("created"),this.sendSignalOnOutput("stored")}))}},scheduleSetModel:function(){this.hasScheduledSetModel||(this.hasScheduledSetModel=!0,this._internal,this.scheduleAfterInputsHaveUpdated((()=>{this.hasScheduledSetModel=!1,this.setModelID(this._internal.modelId)})))},setModelID:function(e){var t=i.get(e);this.setModel(t),this.sendSignalOnOutput("fetched")},setModel:function(e){for(var t in this._internal.model&&this._internal.model.off("change",this._internal.onModelChangedCallback),this._internal.model=e,this.flagOutputDirty("id"),e.on("change",this._internal.onModelChangedCallback),e.data)this.hasOutput(t)&&this.flagOutputDirty(t)},_onNodeDeleted:function(){o.prototype._onNodeDeleted.call(this),this._internal.model&&this._internal.model.off("change",this._internal.onModelChangedCallback)},registerOutputIfNeeded:function(e){this.hasOutput(e)||this.registerOutput(e,{getter:s.bind(this,e)})},registerInputIfNeeded:function(e){this.hasInput(e)||this.registerInput(e,{set:a.bind(this,e)})}}};function s(e){return this._internal.model?this._internal.model.get(e,{resolve:!0}):void 0}function a(e,t){if(this._internal.inputValues[e]=t,!1===this.isInputConnected("store")&&!1===this.isInputConnected("new")){const n=this._internal.model;(!n||n.get(e)!==t)&&this.scheduleStore()}}function l(e,t,n){var o=[],i=t.properties;if(i)for(var r in i=i?i.split(","):void 0){var s=i[r];o.push({type:{name:"*",allowConnectionsOnly:!0},plug:"input/output",group:"Properties",name:s}),o.push({type:"signal",plug:"output",group:"Changed Events",displayName:s+" Changed",name:"changed-"+s})}n.sendDynamicPorts(e,o,{detectRenamed:{plug:"input/output"}})}e.exports={node:r,setup:function(e,t){e.editorConnection&&e.editorConnection.isRunningLocally()&&t.on("nodeAdded.Model",(function(t){l(t.id,t.parameters,e.editorConnection),t.on("parameterUpdated",(function(n){l(t.id,t.parameters,e.editorConnection)}))}))}}},4685:(e,t,n)=>{"use strict";const{Node:o}=n(3948);var i=n(3839),r={name:"Variable",docs:"https://docs.noodl.net/nodes/data/variable",category:"Data",usePortAsLabel:"name",color:"data",deprecated:!0,initialize:function(){var e=this,t=this._internal;this._internal.onModelChangedCallback=function(n){e.isInputConnected("fetch")||n.name!==t.name||(e.sendSignalOnOutput("changed"),e.flagOutputDirty("value"))},t.variablesModel=i.get("--ndl--global-variables"),t.variablesModel.on("change",this._internal.onModelChangedCallback)},getInspectInfo(){return this._internal.name?this._internal.variablesModel.get(this._internal.name):"[No value set]"},outputs:{name:{type:"string",displayName:"Name",group:"General",getter:function(){return this._internal.name}},stored:{type:"signal",displayName:"Stored",group:"Events"},changed:{type:"signal",displayName:"Changed",group:"Events"},fetched:{type:"signal",displayName:"Fetched",group:"Events"},value:{type:"*",displayName:"Value",group:"General",getter:function(){var e=this._internal;if(e.name)return e.variablesModel.get(e.name)}}},inputs:{name:{type:{name:"string",identifierOf:"VariableName",identifierDisplayName:"Variable names"},displayName:"Name",group:"General",set:function(e){!1===this.isInputConnected("fetch")?this.setVariableName(e):(this._internal.name=e,this.flagOutputDirty("name"))}},store:{displayName:"Set",group:"Actions",valueChangedToTrue:function(){this.scheduleStore()}},fetch:{displayName:"Fetch",group:"Actions",valueChangedToTrue:function(){this.setVariableName(this._internal.name)}},value:{type:"*",displayName:"Value",group:"General",set:function(e){this._internal.value=e,!1===this.isInputConnected("store")&&this.scheduleStore()}}},prototypeExtensions:{scheduleStore:function(){if(!this.hasScheduledStore){this.hasScheduledStore=!0;var e=this._internal;this.scheduleAfterInputsHaveUpdated((function(){this.hasScheduledStore=!1,e.variablesModel.set(e.name,e.value),this.sendSignalOnOutput("stored")}))}},setVariableName:function(e){this._internal.name=e,this.flagOutputDirty("name"),this.flagOutputDirty("value"),this.sendSignalOnOutput("fetched")},_onNodeDeleted:function(){o.prototype._onNodeDeleted.call(this),this._internal.variablesModel.off("change",this._internal.onModelChangedCallback)}}};e.exports={node:r}},4533:(e,t,n)=>{"use strict";const{Node:o}=n(3948),i={name:"Globals",shortDesc:"A node used to communicate values across the project.",category:"Utilities",color:"component",deprecated:!0,initialize:function(){this._internal.listeners=[]},panels:[{name:"PortEditor",context:["select","connectTo","connectFrom"],title:"Globals",plug:"input/output",type:{name:"*"}}],prototypeExtensions:{_onNodeDeleted:function(){o.prototype._onNodeDeleted.call(this);for(var e=this.context.globalsEventEmitter,t=0;t<this._internal.listeners.length;t++){var n=this._internal.listeners[t];e.removeListener(n.name,n.listener)}this._internal.listeners=[]},_newOutputValueReceived:{value:function(e){this._cachedInputValues[e]=this.context.globalValues[e],this.flagOutputDirty(e)}},registerInputIfNeeded:{value:function(e){this.hasInput(e)||this.registerInput(e,{set:this.context.setGlobalValue.bind(this.context,e)})}},registerOutputIfNeeded:{value:function(e){if(!this.hasOutput(e)){var t=this._newOutputValueReceived.bind(this,e),n=this.context.globalsEventEmitter;this._internal.listeners.push({name:e,listener:t}),n.on(e,t),this.registerOutput(e,{getter:function(){return this.context.globalValues[e]}})}}}}};e.exports={node:i}},5553:e=>{"use strict";const t={name:"Gyroscope",docs:"https://docs.noodl.net/nodes/sensors/device-orientation",shortDesc:"The orientation of a device. Works on phones, tablets and other devices with the required sensors.",displayNodeName:"Device Orientation",category:"Sensors",deprecated:!0,initialize:function(){this._internal.alpha=0,this._internal.beta=0,this._internal.gamma=0;var e=n.bind(this);window.addEventListener("deviceorientation",e),this.context.eventEmitter.once("applicationDataReloaded",(function(){window.removeEventListener("deviceorientation",e)}))},outputs:{rotationX:{type:"number",displayName:"Rotation X",getter:function(){return-this._internal.beta}},rotationY:{type:"number",displayName:"Rotation Y",getter:function(){return this._internal.gamma}},rotationZ:{type:"number",displayName:"Rotation Z",getter:function(){return-this._internal.alpha}}}};function n(e){e.alpha!==this._internal.alpha&&(this._internal.alpha=e.alpha,this.flagOutputDirty("rotationZ")),e.beta!==this._internal.beta&&(this._internal.beta=e.beta,this.flagOutputDirty("rotationX")),e.gamma!==this._internal.gamma&&(this._internal.gamma=e.gamma,this.flagOutputDirty("rotationY"))}e.exports={node:t}},1220:(e,t,n)=>{"use strict";const o=n(4442),i={name:"Number Blend",docs:"https://docs.noodl.net/nodes/interpolation/number-blend",shortDesc:"Computes a result output based on blending (linearly interpolating) between the inputs.",category:"Interpolation",deprecated:!0,initialize:function(){var e=this._internal;e.inputs=[],e.blendValue=0,e.result=0,e.clamp=!1},getInspectInfo(){return this._internal.result},prototypeExtensions:{updateResult:function(){var e=this._internal.inputs;if(0===e.length)return 0;var t=Math.floor(this._internal.blendValue),n=this._internal.blendValue-t;t>=e.length-1?this._internal.clamp?(t=e.length-1,n=0):(n+=t-(e.length-1),t=e.length-1):t<=0&&(this._internal.clamp?(t=0,n=0):(n+=t,t=0)),0===n||1===e.length?this._internal.result=e[t]:t===e.length-1&&n>0?this._internal.result=o.linear(e[t-1],e[t],n+1):this._internal.result=o.linear(e[t],e[t+1],n),this.flagOutputDirty("result")}},numberedInputs:{input:{type:"number",displayPrefix:"Number",createSetter:e=>function(t){const n=this._internal.inputs;n[e]!==t&&(n[e]=t||0,this.updateResult())}}},inputs:{blendValue:{type:"number",displayName:"Blend Value",default:0,set:function(e){this._internal.blendValue=e,this.updateResult()}},clamp:{type:"boolean",displayName:"Clamp",default:!1,set:function(e){this._internal.clamp=!!e,this.updateResult()}}},outputs:{result:{type:"number",displayName:"Result",getter:function(){return this._internal.result}}}};e.exports={node:i}},1645:(e,t,n)=>{"use strict";const{Node:o}=n(3948),i=n(3839),r=new(0,n(2699).EventEmitter);r.setMaxListeners(1e6);const s={name:"Parent Component State",displayNodeName:"Parent Component Object",category:"Component Utilities",color:"component",docs:"https://docs.noodl.net/nodes/component-utilities/parent-component-object",deprecated:!0,initialize(){this._internal.inputValues={},this._internal.onModelChangedCallback=e=>{!0!==this.isInputConnected("fetch")&&(this.hasOutput(e.name)&&this.flagOutputDirty(e.name),this.hasOutput("changed-"+e.name)&&this.sendSignalOnOutput("changed-"+e.name),this.sendSignalOnOutput("changed"))},this.onComponentStateNodesChanged=()=>{const e=this.findParentComponentStateModelId();this._internal.modelId!==e&&(this._internal.modelId=e,!1===this.isInputConnected("fetch")&&this.setModelId(this._internal.modelId))},r.on("componentStateNodesChanged",this.onComponentStateNodesChanged),this.updateComponentState()},nodeScopeDidInitialize(){this._internal.modelId||this.context.scheduleAfterUpdate((()=>{this.updateComponentState()}))},getInspectInfo(){if(!this._internal.model)return"No parent component state found";const e=[{type:"text",value:this._internal.parentComponentName}],t=this._internal.model.data;return e.concat(Object.keys(t).map((e=>({type:"text",value:e+": "+t[e]}))))},inputs:{properties:{type:{name:"stringlist",allowEditOnly:!0},displayName:"Properties",group:"Properties",set(e){}},store:{displayName:"Set",group:"Actions",valueChangedToTrue(){this.scheduleStore()}},fetch:{displayName:"Fetch",group:"Actions",valueChangedToTrue:function(){this.setModelId(this._internal.modelId)}}},outputs:{changed:{type:"signal",displayName:"Changed",group:"Events"},fetched:{type:"signal",displayName:"Fetched",group:"Events"},stored:{type:"signal",displayName:"Stored",group:"Events"}},methods:{updateComponentState(){this._internal.modelId=this.findParentComponentStateModelId(),!1===this.isInputConnected("fetch")&&this.setModelId(this._internal.modelId)},findParentComponentStateModelId(){const e=function e(t){let n;if(t.getRoots().length>0){const e=t.getRoots()[0];e.getVisualParentNode?e.getVisualParentNode()&&(n=e.getVisualParentNode().nodeScope.componentOwner):e.parentNodeScope&&(n=t.parentNodeScope.componentOwner)}else t.parentNodeScope&&(n=t.parentNodeScope.componentOwner);if(n&&n.nodeScope&&n.nodeScope.componentOwner!==t)return n.nodeScope.getNodesWithType("Component State").length>0?n:e(n)}(this.nodeScope.componentOwner);if(e)return this._internal.parentComponentName=e.name,"componentState"+e.getInstanceId()},setModelId(e){if(this._internal.model&&this._internal.model.off("change",this._internal.onModelChangedCallback),this._internal.model=void 0,!e)return;const t=i.get(e);for(var n in this._internal.model=t,t.on("change",this._internal.onModelChangedCallback),t.data)this.hasOutput(n)&&this.flagOutputDirty(n),this.hasOutput("changed-"+n)&&this.sendSignalOnOutput("changed-"+n);this.sendSignalOnOutput("changed"),this.sendSignalOnOutput("fetched")},scheduleStore(){if(!this.hasScheduledStore){this.hasScheduledStore=!0;var e=this._internal;this.scheduleAfterInputsHaveUpdated((()=>{if(this.hasScheduledStore=!1,e.model){for(var t in e.inputValues)e.model.set(t,e.inputValues[t],{resolve:!0});this.sendSignalOnOutput("stored")}}))}},_onNodeDeleted(){o.prototype._onNodeDeleted.call(this),r.off("componentStateNodesChanged",this.onComponentStateNodesChanged),this._internal.model&&this._internal.model.off("change",this._internal.onModelChangedCallback)},registerOutputIfNeeded(e){this.hasOutput(e)||this.registerOutput(e,{get(){if(this._internal.model)return this._internal.model.get(e,{resolve:!0})}})},registerInputIfNeeded:function(e){this.hasInput(e)||this.registerInput(e,{set(t){this._internal.inputValues[e]=t,!1===this.isInputConnected("store")&&this.scheduleStore()}})}}};function a(e,t,n){const o=[];var i=t.properties&&t.properties.split(",");for(var r in i){var s=i[r];o.push({type:{name:"*",allowConnectionsOnly:!0},plug:"input/output",group:"Properties",name:s,displayName:s}),o.push({type:"signal",plug:"output",group:"Changed Events",displayName:s+" Changed",name:"changed-"+s})}n.sendDynamicPorts(e,o,{detectRenamed:{plug:"input/output"}})}e.exports={node:s,setup:function(e,t){e.editorConnection&&e.editorConnection.isRunningLocally()&&(t.on("nodeAdded.Parent Component State",(t=>{a(t.id,t.parameters,e.editorConnection),t.on("parameterUpdated",(n=>{a(t.id,t.parameters,e.editorConnection)}))})),t.on("nodeAdded.Component State",(e=>{setTimeout((()=>{r.emit("componentStateNodesChanged")}),0)})),t.on("nodeRemoved.Component State",(e=>{setTimeout((()=>{r.emit("componentStateNodesChanged")}))})))}}},3086:e=>{"use strict";const t={name:"Script Downloader",docs:"https://docs.noodl.net/nodes/javascript/script-downloader",shortDesc:"Script Downloader allows you load external Javascript libraries. ",category:"Javascript",color:"javascript",deprecated:!0,initialize:function(){var e=this._internal;e.loaded=!1,e.scripts=[],e.loadedScripts={},e.startLoad=!0},inputs:{startLoad:{type:"boolean",default:!0,displayName:"Load on start",group:"General",set:function(e){this._internal.startLoad=e}},load:{displayName:"Load",group:"Actions",valueChangedToTrue:function(){this.scheduleUpdateScripts()}}},outputs:{loaded:{type:"signal",displayName:"Loaded"}},numberedInputs:{input:{displayPrefix:"Script",group:"External scripts",type:"string",index:3008,createSetter:function(e){return function(t){t=t.toString(),this._internal.scripts[e]=t,this._internal.loadStarted||(this._internal.loadStarted=!0,this.scheduleAfterInputsHaveUpdated((function(){this._internal.loadStarted=!1,this._internal.startLoad&&this.updateScripts()})))}}}},methods:{removeLoadTerminator:function(){var e="sentinel_"+this.id,t=document.getElementById(e);t&&t.parentNode&&t.parentNode.removeChild(t)},scheduleUpdateScripts:function(){const e=this;this._internal.updateScriptsScheduled||(this._internal.updateScriptsScheduled=!0,this.scheduleAfterInputsHaveUpdated((function(){e._internal.updateScriptsScheduled=!1,e.updateScripts()})))},updateScripts:function(){var e="sentinel_"+this.id;this.removeLoadTerminator();var t=this._internal.scripts;t=t.filter((function(e){return""!==e}));for(var n=document.head.getElementsByTagName("script"),o={},i=0;i<n.length;i++)void 0!==(r=n[i]).src&&""!==r.src&&(o[r.src]=r);for(i=0;i<t.length;i++){var r=t[i].trim();if(!this._internal.loadedScripts.hasOwnProperty(r)){if(o.hasOwnProperty(r))continue;var s=document.createElement("script");s.src=r,s.async=!1,document.head.appendChild(s)}}var a=this,l=document.createElement("script");l.onload=l.onreadystatechange=function(e){this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(a._internal.loaded=!0,a.sendSignalOnOutput("loaded"),a.removeLoadTerminator())},l.id=e,l.src="load_terminator.js",l.async=!1,document.head.appendChild(l)}}};e.exports={node:t,setup:function(e,t){e.editorConnection&&e.editorConnection.isRunningLocally()}}},452:(e,t,n)=>{"use strict";const{EdgeTriggeredInput:o}=n(3948),i={name:"Signal To Index",docs:"https://docs.noodl.net/nodes/logic/signal-to-index",shortDesc:"Maps signal inputs to their index value.",category:"Logic",deprecated:!0,initialize:function(){this._internal.currentIndex=0},getInspectInfo(){return"Index: "+this._internal.currentIndex},numberedInputs:{input:{type:"boolean",displayPrefix:"Signal",createSetter:function(e){return o.createSetter({valueChangedToTrue:this.onValueChangedToTrue.bind(this,e)})},selectors:{startIndex:{displayName:"Start Index",set:function(e){this._internal.currentIndex=e,this.flagOutputDirty("index")}}}}},outputs:{index:{displayName:"Index",type:"number",getter:function(){return this._internal.currentIndex}},signalTriggered:{displayName:"Signal Triggered",type:"signal"}},prototypeExtensions:{onValueChangedToTrue:function(e){this.sendSignalOnOutput("signalTriggered"),this._internal.currentIndex!==e&&(this._internal.currentIndex=e,this.flagOutputDirty("index"))}}};e.exports={node:i}},4146:e=>{"use strict";const t={name:"String Selector",displayNodeName:"Index To String",shortDesc:"Choose between multiple strings.",category:"Utilities",deprecated:!0,initialize:function(){this._internal.inputs=[],this._internal.currentSelectedIndex=0,this._internal.indexChanged=!1},getInspectInfo(){return this._internal.inputs[this._internal.currentSelectedIndex]},numberedInputs:{input:{type:"string",displayPrefix:"String for ",group:"Inputs",createSetter:function(e){return function(t){t=t?t.toString():"",this._internal.inputs[e]=t,this._internal.currentSelectedIndex===e&&this.flagOutputDirty("currentValue")}}}},inputs:{index:{type:{name:"number"},displayName:"Index",default:0,set:function(e){e|=0,this._internal.currentSelectedIndex=e,this.flagOutputDirty("currentValue"),this.sendSignalOnOutput("indexChanged")}}},outputs:{currentValue:{type:"string",displayName:"Current Value",group:"Value",getter:function(){return this._internal.inputs[this._internal.currentSelectedIndex]}},indexChanged:{type:"signal",displayName:"Index Changed",group:"Signals"}}};e.exports={node:t}},8157:(e,t,n)=>{"use strict";var o=n(4442),i={name:"Transition",docs:"https://docs.noodl.net/nodes/animation/transition",shortDesc:"This node can interpolate smooothely for the current value to a target value.",category:"Animation",deprecated:!0,initialize:function(){var e=this,t=this._internal;t.currentNumber=0,t.numberInitialized=!1,t.animationStarted=!1,t.setCurrentNumberEnabled=!1,t.overrideValue=0,t._animation=this.context.timerScheduler.createTimer({duration:300,startValue:0,endValue:0,ease:o.easeOut,onStart:function(){t.animationStarted=!0},onRunning:function(n){t.currentNumber=this.ease(this.startValue,this.endValue,n),e.flagOutputDirty("currentValue")},onFinish:function(){e.sendSignalOnOutput("atTargetValue")}})},inputs:{targetValue:{type:{name:"number"},displayName:"Target Value",group:"Target Value",default:void 0,set:function(e){if(!0===e?e=1:!1===e&&(e=0),e=Number(e),!isNaN(e)){var t=this._internal;if(!1===t.numberInitialized)return t.currentNumber=e,t.numberInitialized=!0,t._animation.endValue=e,void this.flagOutputDirty("currentValue");e!==t._animation.endValue&&(t._animation.startValue=t.currentNumber,t._animation.endValue=e,t._animation.start())}}},"overrideCurrentValue.value":{type:{name:"number"},group:"Override Value",displayName:"Override Value",editorName:"Value|Override Value",set:function(e){this._internal.overrideValue=e}},"overrideCurrentValue.do":{group:"Override Value",displayName:"Do",editorName:"Do|Override Value",valueChangedToTrue:function(){r.call(this,this._internal.overrideValue)}},duration:{type:"number",group:"Parameters",displayName:"Duration",default:300,set:function(e){this._internal._animation.duration=e}},delay:{type:"number",group:"Parameters",displayName:"Delay",default:0,set:function(e){this._internal._animation.delay=e}},easingCurve:{type:{name:"enum",enums:[{value:"easeOut",label:"Ease Out"},{value:"easeIn",label:"Ease In"},{value:"linear",label:"Linear"},{value:"easeInOut",label:"Ease In Out"}]},default:"easeOut",displayName:"Easing Curve",group:"Parameters",set:function(e){this._internal._animation.ease=o[e]}}},outputs:{currentValue:{type:"number",displayName:"Current Value",group:"Current State",getter:function(){return this._internal.currentNumber}},atTargetValue:{type:"signal",displayName:"At Target Value",group:"Signals"}}};function r(e){var t=this._internal._animation;t.stop(),t.startValue=e,this.scheduleAfterInputsHaveUpdated((function(){t.endValue!==e&&t.start()})),this._internal.currentNumber=e,this.flagOutputDirty("currentValue")}e.exports={node:i}},1466:(e,t,n)=>{const{EdgeTriggeredInput:o}=n(3948),i={name:"NavigationClosePopup",displayNodeName:"Close Popup",category:"Navigation",docs:"https://docs.noodl.net/nodes/popups/close-popup",initialize:function(){this._internal.resultValues={}},inputs:{results:{type:{name:"stringlist",allowEditOnly:!0},group:"Results",set:function(e){this._internal.results=e}},closeActions:{type:{name:"stringlist",allowEditOnly:!0},group:"Close Actions",set:function(e){this._internal.closeActions=e}},close:{type:"Signal",displayName:"Close",group:"Actions",valueChangedToTrue:function(){this.scheduleClose()}}},methods:{setResultValue:function(e,t){this._internal.resultValues[e]=t},_setCloseCallback:function(e){this._internal.closeCallback=e},scheduleClose:function(){var e=this,t=this._internal;t.hasScheduledClose||(t.hasScheduledClose=!0,this.scheduleAfterInputsHaveUpdated((function(){t.hasScheduledClose=!1,e.close()})))},close:function(){this._internal.closeCallback&&this._internal.closeCallback(this._internal.closeAction,this._internal.resultValues)},closeActionTriggered:function(e){this._internal.closeAction=e,this.scheduleClose()},registerInputIfNeeded:function(e){if(!this.hasInput(e))return e.startsWith("result-")?this.registerInput(e,{set:this.setResultValue.bind(this,e.substring(7))}):e.startsWith("closeAction-")?this.registerInput(e,{set:o.createSetter({valueChangedToTrue:this.closeActionTriggered.bind(this,e)})}):void 0}}};e.exports={node:i,setup:function(e,t){function n(t){function n(){var n=[],o=t.parameters.results;if(o)for(var i in o=o?o.split(","):void 0){var r=o[i];n.push({type:{name:"*"},plug:"input",group:"Results",name:"result-"+r,displayName:r})}var s=t.parameters.closeActions;if(s)for(var i in s=s?s.split(","):void 0)r=s[i],n.push({type:"signal",plug:"input",group:"Close Actions",name:"closeAction-"+r,displayName:r});e.editorConnection.sendDynamicPorts(t.id,n)}n(),t.on("parameterUpdated",(function(e){"results"!==e.name&&"closeActions"!==e.name||n()}))}e.editorConnection&&e.editorConnection.isRunningLocally()&&t.on("editorImportComplete",(()=>{t.on("nodeAdded.NavigationClosePopup",(function(e){n(e)}));for(const e of t.getNodesWithType("NavigationClosePopup"))n(e)}))}}},1077:e=>{const t={name:"PageStackNavigateBack",displayNodeName:"Pop Component Stack",category:"Navigation",docs:"https://docs.noodl.net/nodes/component-stack/pop-component",inputs:{navigate:{displayName:"Navigate",group:"Actions",valueChangedToTrue:function(){this.scheduleNavigate()}},results:{type:{name:"stringlist",allowEditOnly:!0},group:"Results",set:function(e){this._internal.results=e}},backActions:{type:{name:"stringlist",allowEditOnly:!0},group:"Back Actions",set:function(e){this._internal.backActions=e}}},initialize:function(){this._internal.resultValues={}},methods:{scheduleNavigate:function(){var e=this,t=this._internal;t.hasScheduledNavigate||(t.hasScheduledNavigate=!0,this.scheduleAfterInputsHaveUpdated((function(){t.hasScheduledNavigate=!1,e.navigate()})))},_setBackCallback(e){this._internal.backCallback=e},navigate(){void 0!==this._internal.backCallback&&this._internal.backCallback({backAction:this._internal.backAction,results:this._internal.resultValues})},setResultValue:function(e,t){this._internal.resultValues[e]=t},backActionTriggered:function(e){this._internal.backAction=e,this.scheduleNavigate()},registerInputIfNeeded:function(e){if(!this.hasInput(e))return e.startsWith("result-")?this.registerInput(e,{set:this.setResultValue.bind(this,e.substring(7))}):e.startsWith("backAction-")?this.registerInput(e,{set:t=>{t&&this.backActionTriggered(e)}}):void 0}}};e.exports={node:t,setup:function(e,t){function n(t){function n(){var n=[],o=t.parameters.results;if(o)for(var i in o=o?o.split(","):void 0){var r=o[i];n.push({type:{name:"*"},plug:"input",group:"Results",name:"result-"+r,displayName:r})}var s=t.parameters.backActions;if(s)for(var i in s=s?s.split(","):void 0)r=s[i],n.push({type:"signal",plug:"input",group:"Back Actions",name:"backAction-"+r,displayName:r});e.editorConnection.sendDynamicPorts(t.id,n)}n(),t.on("parameterUpdated",(function(e){"results"!==e.name&&"backActions"!==e.name||n()}))}e.editorConnection&&e.editorConnection.isRunningLocally()&&t.on("editorImportComplete",(()=>{t.on("nodeAdded.PageStackNavigateBack",(function(e){n(e)}));for(const e of t.getNodesWithType("PageStackNavigateBack"))n(e)}))}}},7132:(e,t,n)=>{"use strict";const o=n(3948),i={name:"PageStackNavigateToPath",displayNodeName:"Navigate To Path",category:"Navigation",docs:"https://docs.noodl.net/nodes/navigation/navigate-to-path",initialize(){const e=this._internal;e.params={},e.query={},e.openInNewTab=!1},inputs:{path:{type:{name:"string"},displayName:"Path",group:"General",set(e){this._internal.path=e}},queryNames:{type:{name:"stringlist",allowEditOnly:!0},displayName:"Query",group:"Query",set(e){this._internal.queryNames=e}},openInNewTab:{index:10,displayName:"Open in new tab",group:"General",default:!1,type:"boolean",set(e){this._internal.openInNewTab=!!e}},navigate:{displayName:"Navigate",group:"Actions",valueChangedToTrue(){this.scheduleNavigate()}}},outputs:{},methods:{scheduleNavigate(){var e=this._internal;e.hasScheduledNavigate||(e.hasScheduledNavigate=!0,this.scheduleAfterInputsHaveUpdated((()=>{e.hasScheduledNavigate=!1,this.navigate()})))},navigate(){var e=this._internal,t=e.path;if(void 0!==t){var n,i,r=e.path.match(/\{[A-Za-z0-9_]*\}/g),s=[];r&&(s=r.map((function(e){return e.replace("{","").replace("}","")}))),s.forEach((function(n){var o=e.params[n];t=t.replace("{"+n+"}",void 0!==o?o:"")}));var a=o.instance.getProjectSettings().navigationPathType;void 0===a||"hash"===a?i=t:n=t;var l=[];void 0!==e.queryNames&&e.queryNames.split(",").forEach((t=>{void 0!==e.query[t]&&l.push(t+"="+e.query[t])}));var u=(void 0!==n?n:"")+(l.length>=1?"?"+l.join("&"):"")+(void 0!==i?"#"+i:"");this._internal.openInNewTab?window.open(u,"_blank"):(window.history.pushState({},"",u),dispatchEvent(new PopStateEvent("popstate",{})))}},setParam(e,t){this._internal.params[e]=t},setQuery(e,t){this._internal.query[e]=t},registerInputIfNeeded:function(e){if(!this.hasInput(e))return e.startsWith("p-")?this.registerInput(e,{set:this.setParam.bind(this,e.substring(2))}):e.startsWith("q-")?this.registerInput(e,{set:this.setQuery.bind(this,e.substring(2))}):void 0}}};e.exports={node:i,setup:function(e,t){function n(t){function n(){var n=[];void 0!==t.parameters.path&&(n=(t.parameters.path.match(/\{[A-Za-z0-9_]*\}/g)||[]).map((function(e){return e.replace("{","").replace("}","")})).filter((function(e,t,n){return n.indexOf(e)===t})).map((function(e){return{name:"p-"+e,displayName:e,group:"Parameter",type:"*",plug:"input"}}))),void 0!==t.parameters.queryNames&&t.parameters.queryNames.split(",").forEach((e=>{n.push({name:"q-"+e,displayName:e,group:"Query",plug:"input",type:"*"})})),e.editorConnection.sendDynamicPorts(t.id,n)}n(),t.on("parameterUpdated",(function(e){n()}))}e.editorConnection&&e.editorConnection.isRunningLocally()&&t.on("editorImportComplete",(()=>{t.on("nodeAdded.PageStackNavigateToPath",(function(e){n(e)}));for(const e of t.getNodesWithType("PageStackNavigateToPath"))n(e)}))}}},6523:(e,t,n)=>{const o=n(7667),i=n(7993),r={name:"PageStackNavigate",displayNodeName:"Push Component To Stack",category:"Navigation",docs:"https://docs.noodl.net/nodes/component-stack/push-component",initialize:function(){this._internal.transitionParams={},this._internal.pageParams={},this._internal.backResults={}},inputs:{stack:{type:{name:"string",identifierOf:"PackStack"},displayName:"Stack",group:"General",default:"Main",set:function(e){this._internal.stack=e}},mode:{type:{name:"enum",enums:[{label:"Push",value:"push"},{label:"Replace",value:"replace"}]},displayName:"Mode",default:"push",group:"General",set:function(e){this._internal.navigationMode=e}},navigate:{displayName:"Navigate",group:"Actions",valueChangedToTrue:function(){this.scheduleNavigate()}}},outputs:{navigated:{type:"signal",displayName:"Navigated",group:"Events"}},methods:{scheduleNavigate:function(){var e=this,t=this._internal;t.hasScheduledNavigate||(t.hasScheduledNavigate=!0,this.scheduleAfterInputsHaveUpdated((function(){t.hasScheduledNavigate=!1,e.navigate()})))},navigate(){"push"===this._internal.navigationMode||void 0===this._internal.navigationMode?i.instance.navigate(this._internal.stack,{target:this._internal.target,transition:{type:this._internal.transition,...this._internal.transitionParams},params:this._internal.pageParams,backCallback:(e,t)=>{this._internal.backResults=t;for(const e in t)this.hasOutput("backResult-"+e)&&this.flagOutputDirty("backResult-"+e);void 0!==e&&this.sendSignalOnOutput(e)},hasNavigated:()=>{this.sendSignalOnOutput("navigated")}}):"replace"===this._internal.navigationMode&&i.instance.replace(this._internal.stack,{target:this._internal.target,params:this._internal.pageParams,hasNavigated:()=>{this.scheduleAfterInputsHaveUpdated((()=>{this.sendSignalOnOutput("navigated")}))}})},setTransitionParam:function(e,t){this._internal.transitionParams[e]=t},setPageParam:function(e,t){this._internal.pageParams[e]=t},getBackResult:function(e,t){return this._internal.backResults[e]},setTargetPageId:function(e){this._internal.target=e},setTransition:function(e){this._internal.transition=e},registerInputIfNeeded:function(e){if(!this.hasInput(e))return"target"===e?this.registerInput(e,{set:this.setTargetPageId.bind(this)}):"transition"===e?this.registerInput(e,{set:this.setTransition.bind(this)}):e.startsWith("tr-")?this.registerInput(e,{set:this.setTransitionParam.bind(this,e.substring(3))}):e.startsWith("pm-")?this.registerInput(e,{set:this.setPageParam.bind(this,e.substring(3))}):void 0},registerOutputIfNeeded:function(e){if(!this.hasOutput(e))return e.startsWith("backResult-")?this.registerOutput(e,{getter:this.getBackResult.bind(this,e.substring(11))}):e.startsWith("backAction-")?this.registerOutput(e,{getter:function(){}}):void 0}}};e.exports={node:r,setup:function(e,t){function n(n){function i(){var i=[];if("push"===n.parameters.mode||void 0===n.parameters.mode){i.push({name:"transition",plug:"input",type:{name:"enum",enums:Object.keys(o)},default:"Push",displayName:"Transition",group:"Transition"});var r=n.parameters.transition||"Push";o[r]&&(i=i.concat(o[r].ports(n.parameters)))}const s=t.getNodesWithType("Page Stack").find((e=>(e.parameters.name||"Main")===(n.parameters.stack||"Main")));if(void 0!==s){const e=s.parameters.pages;if(void 0!==e&&e.length>0){i.push({plug:"input",type:{name:"enum",enums:e.map((e=>({label:e.label,value:e.id}))),allowEditOnly:!0},group:"General",displayName:"Target Page",name:"target",default:e[0].id});const o=n.parameters.target||e[0].id,r=s.parameters["pageComp-"+o];if(void 0!==r){const e=t.components[r];if(void 0!==e){for(const t in e.inputPorts)i.push({name:"pm-"+t,displayName:t,type:"*",plug:"input",group:"Parameters"});for(const t of e.getNodesWithType("PageStackNavigateBack"))void 0!==t.parameters.backActions&&t.parameters.backActions.split(",").forEach((e=>{i.find((t=>t.name==="backAction-"+e))||i.push({name:"backAction-"+e,displayName:e,type:"signal",plug:"output",group:"Back Actions"})})),t.parameters.results&&t.parameters.results.split(",").forEach((e=>{i.find((t=>t.name==="backResult-"+e))||i.push({name:"backResult-"+e,displayName:e,type:"*",plug:"output",group:"Back Results"})}))}}}}e.editorConnection.sendDynamicPorts(n.id,i)}function r(){var e=t.getNodesWithType("Page Stack").find((e=>e.parameters.name===n.parameters.stack));if(void 0!==e){var o=e.parameters.pages;if(void 0!==o&&0!==o.length){var r=e.parameters["pageComp-"+(n.parameters.target||o[0].id)];if(void 0!==r){var s=t.components[r];if(void 0!==s){s.on("inputPortAdded",i),s.on("inputPortRemoved",i);for(const e of s.getNodesWithType("PageStackNavigateBack"))e.on("parameterUpdated",i);s.on("nodeAdded",(e=>{"PageStackNavigateBack"===e.type&&(e.on("parameterUpdated",i),i())})),s.on("nodeWasRemoved",(e=>{"PageStackNavigateBack"===e.type&&i()}))}}}}}function s(e){e.on("parameterUpdated",(function(e){"pages"!==e.name&&"name"!==e.name||i()}))}i(),r(),n.on("parameterUpdated",(function(e){"target"===e.name?(r(),i()):("stack"===e.name||"mode"===e.name||"transition"===e.name||e.name.startsWith("tr-"))&&i()})),t.on("nodeAdded.Page Stack",s),t.on("nodeWasRemoved.Page Stack",i);for(const e of t.getNodesWithType("Page Stack"))s(e)}e.editorConnection&&e.editorConnection.isRunningLocally()&&t.on("editorImportComplete",(()=>{t.on("nodeAdded.PageStackNavigate",(function(e){n(e)}));for(const e of t.getNodesWithType("PageStackNavigate"))n(e)}))}}},7993:e=>{class t{constructor(){this._pageStacks={},this._navigationQueue=[]}_performNavigation(e,t,n){if(e=e||"Main",this._pageStacks[e])for(const o of this._pageStacks[e])"navigate"===n?o.navigate(t):o.replace(t);else this._navigationQueue.push({name:e,args:t,type:n})}navigate(e,t){e=e||"Main",this._performNavigation(e,t,"navigate")}replace(e,t){e=e||"Main",this._performNavigation(e,t,"replace")}registerPageStack(e,t){e=e||"Main",this._pageStacks[e]||(this._pageStacks[e]=[]),this._pageStacks[e].push(t);let n=!1,o=!1,i=0;for(;i<this._navigationQueue.length;){const r=this._navigationQueue[i];r.name===e?("navigate"===r.type?(n||(t.reset(),n=!0),t.navigate(r.args)):t.replace(r.args),o=!0,this._navigationQueue.splice(i,1)):i++}o||t.reset()}deregisterPageStack(e,t){if(e=e||"Main",!this._pageStacks[e])return;const n=this._pageStacks[e].indexOf(t);-1!==n&&(this._pageStacks[e].splice(n,1),0===this._pageStacks[e].length&&delete this._pageStacks[e])}}t.instance=new t,e.exports=t},2594:e=>{"use strict";e.exports={node:{name:"PageInputs",displayNodeName:"Page Inputs",category:"Navigation",docs:"https://docs.noodl.net/nodes/navigation/page-inputs",color:"component",initialize:function(){this._internal.params={}},inputs:{pathParams:{type:{name:"stringlist",allowEditOnly:!0},group:"Path Parameters"},queryParams:{type:{name:"stringlist",allowEditOnly:!0},group:"Query Parameters"}},outputs:{},methods:{_setPageParams:function(e){for(var t in e)this._internal.params[t]=e[t],this.hasOutput("pm-"+t)&&this.flagOutputDirty("pm-"+t)},getPageParam:function(e){return this._internal.params[e]},registerOutputIfNeeded:function(e){if(!this.hasOutput(e))return e.startsWith("pm-")?this.registerOutput(e,{getter:this.getPageParam.bind(this,e.substring(3))}):void 0}}}}},4645:(e,t,n)=>{const{RouterHandler:o}=n(2681),i={name:"RouterNavigate",displayNodeName:"Navigate",category:"Navigation",docs:"https://docs.noodl.net/nodes/navigation/navigate",initialize:function(){this._internal.pageParams={},this._internal.openInNewTab=!1},inputs:{navigate:{displayName:"Navigate",group:"Actions",valueChangedToTrue:function(){this.scheduleNavigate()}},openInNewTab:{index:10,displayName:"Open in new tab",group:"General",default:!1,type:"boolean",set(e){this._internal.openInNewTab=!!e}}},outputs:{navigated:{type:"signal",displayName:"Navigated",group:"Events"}},methods:{scheduleNavigate:function(){var e=this._internal;e.hasScheduledNavigate||(e.hasScheduledNavigate=!0,this.scheduleAfterInputsHaveUpdated((()=>{e.hasScheduledNavigate=!1,this.navigate()})))},navigate(){o.instance.navigate(this._internal.router,{target:this._internal.target,params:this._internal.pageParams,openInNewTab:this._internal.openInNewTab,hasNavigated:()=>{this.scheduleAfterInputsHaveUpdated((()=>{this.sendSignalOnOutput("navigated")}))}})},setPageParam:function(e,t){this._internal.pageParams[e]=t},setTargetPage:function(e){this._internal.target=e},setRouter:function(e){this._internal.router=e},registerInputIfNeeded:function(e){if(!this.hasInput(e))return"target"===e?this.registerInput(e,{set:this.setTargetPage.bind(this)}):"router"===e?this.registerInput(e,{set:this.setRouter.bind(this)}):e.startsWith("pm-")?this.registerInput(e,{set:this.setPageParam.bind(this,e.substring(3))}):void 0}}};e.exports={node:i}},3021:e=>{e.exports={node:{name:"NavigationShowPopup",displayNodeName:"Show Popup",category:"Navigation",docs:"https://docs.noodl.net/nodes/popups/show-popup",initialize:function(){this._internal.popupParams={},this._internal.closeResults={}},inputs:{target:{type:"component",displayName:"Target",group:"General",set:function(e){this._internal.target=e}},show:{type:"signal",displayName:"Show",group:"Actions",valueChangedToTrue:function(){this.scheduleShow()}}},outputs:{Closed:{type:"signal"}},methods:{setPopupParam:function(e,t){this._internal.popupParams[e]=t},getCloseResult:function(e){return this._internal.closeResults[e]},scheduleShow:function(){var e=this,t=this._internal;t.hasScheduledShow||(t.hasScheduledShow=!0,this.scheduleAfterInputsHaveUpdated((function(){t.hasScheduledShow=!1,e.show()})))},show:function(){null!=this._internal.target&&this.context.showPopup(this._internal.target,this._internal.popupParams,{senderNode:this.nodeScope.componentOwner,onClosePopup:(e,t)=>{for(var n in this._internal.closeResults=t,t)this.hasOutput("closeResult-"+n)&&this.flagOutputDirty("closeResult-"+n);e?this.sendSignalOnOutput(e):this.sendSignalOnOutput("Closed")}})},registerInputIfNeeded:function(e){if(!this.hasInput(e))return e.startsWith("popupParam-")?this.registerInput(e,{set:this.setPopupParam.bind(this,e.substring(11))}):void 0},registerOutputIfNeeded:function(e){if(!this.hasOutput(e))return e.startsWith("closeResult-")?this.registerOutput(e,{getter:this.getCloseResult.bind(this,e.substring(12))}):e.startsWith("closeAction-")?this.registerOutput(e,{getter:function(){}}):void 0}}},setup:function(e,t){function n(n){function o(){var o=[],i=n.parameters.target;if(void 0!==i){var r=t.components[i];if(r){for(var s in r.inputPorts){var a=r.inputPorts[s];o.push({name:"popupParam-"+s,displayName:s,type:a.type||"*",plug:"input",group:"Params"})}for(const e of r.getNodesWithType("NavigationClosePopup"))void 0!==e.parameters.closeActions&&e.parameters.closeActions.split(",").forEach((e=>{o.find((t=>t.name===e))||o.push({name:"closeAction-"+e,displayName:e,type:"signal",plug:"output",group:"Close Actions"})})),void 0!==e.parameters.results&&e.parameters.results.split(",").forEach((e=>{o.push({name:"closeResult-"+e,displayName:e,type:"*",plug:"output",group:"Close Results"})}))}}e.editorConnection.sendDynamicPorts(n.id,o)}function i(e){if(void 0!==e){var n=t.components[e];if(void 0!==n){n.on("inputPortAdded",o),n.on("inputPortRemoved",o);for(const e of n.getNodesWithType("NavigationClosePopup"))e.on("parameterUpdated",o);n.on("nodeAdded",(e=>{"NavigationClosePopup"===e.type&&(e.on("parameterUpdated",o),o())})),n.on("nodeWasRemoved",(e=>{"NavigationClosePopup"===e.type&&o()}))}}}o(),i(n.parameters.target),n.on("parameterUpdated",(function(e){"target"===e.name&&(o(),i(n.parameters.target))}))}e.editorConnection&&e.editorConnection.isRunningLocally()&&t.on("editorImportComplete",(()=>{t.on("nodeAdded.NavigationShowPopup",(function(e){n(e)}));for(const e of t.getNodesWithType("NavigationShowPopup"))n(e)}))}}},7667:(e,t,n)=>{e.exports={None:n(475),Push:n(605),Popup:n(9521)}},475:(e,t,n)=>{const o=n(6538);e.exports=class extends o{constructor(e,t,n){super(),this.from=e,this.to=t,this.timing={dur:0,delay:0}}update(e){}forward(e){}back(e){}static ports(){return[]}}},9521:(e,t,n)=>{const o=n(6538),i=n(5107);e.exports=class extends o{constructor(e,t,n){super(),this.from=e,this.to=t,this.timing=n.timing||{curve:[0,0,.58,1],dur:300,delay:0},this.distance=n.shift||{value:25,unit:"%"},"number"==typeof this.distance&&(this.distance={value:this.distance,unit:"%"}),this.direction=n.direction||"Right",this.timing.curve[0]=Math.min(1,Math.max(0,this.timing.curve[0])),this.timing.curve[2]=Math.min(1,Math.max(0,this.timing.curve[2])),this.ease=i.apply(null,this.timing.curve).get,this.fadein=void 0!==n.fadein&&n.fadein,this.zoom=n.zoom||{value:25,unit:"%"},"number"==typeof this.zoom&&(this.zoom={value:this.zoom,unit:"%"})}update(e){if("In"===this.direction||"Out"===this.direction){var t=this.zoom.value/100;t="Out"===this.direction?-t:t,this.to.setStyle({transform:"scale("+(1-t*(1-e))+")",opacity:this.crossfade?e:1})}else{var n=this.distance.value,o=this.distance.unit;const t={Up:{x:0,y:-1},Down:{x:0,y:1},Left:{x:-1,y:0},Right:{x:1,y:0}},i={x:t[this.direction].x*n,y:t[this.direction].y*n};this.to.setStyle({transform:"translate("+i.x*(e-1)+o+","+i.y*(e-1)+o+")",opacity:this.fadein?e:1})}}forward(e){var t=this.ease(e);this.update(t)}back(e){var t=this.ease(e);this.update(1-t)}static ports(e){var t=[];return t.push({name:"tr-direction",displayName:"Direction",group:"Transition",type:{name:"enum",enums:["Right","Left","Up","Down","In","Out"]},default:"Right",plug:"input"}),"In"===e["tr-direction"]||"Out"===e["tr-direction"]?t.push({name:"tr-zoom",displayName:"Zoom",group:"Transition",type:{name:"number",units:["%"]},default:{value:25,unit:"%"},plug:"input"}):t.push({name:"tr-shift",displayName:"Shift Distance",group:"Transition",type:{name:"number",units:["%","px"]},default:{value:25,unit:"%"},plug:"input"}),t.push({name:"tr-fadein",displayName:"Fade In",group:"Transition",type:"boolean",default:!1,plug:"input"}),t.push({name:"tr-timing",displayName:"Timing",group:"Transition",type:"curve",plug:"input"}),t}}},605:(e,t,n)=>{const o=n(6538),i=n(5107);e.exports=class extends o{constructor(e,t,n){super(),this.from=e,this.to=t,this.timing=n.timing||{curve:[0,0,.58,1],dur:300,delay:0},this.distance=n.shift||{value:25,unit:"%"},"number"==typeof this.distance&&(this.distance={value:this.distance,unit:"%"}),this.direction=n.direction||"Left",this.timing.curve[0]=Math.min(1,Math.max(0,this.timing.curve[0])),this.timing.curve[2]=Math.min(1,Math.max(0,this.timing.curve[2])),this.ease=i.apply(null,this.timing.curve).get,this.crossfade=void 0!==n.crossfade&&n.crossfade,this.darkOverlay=void 0===n.darkoverlay||n.darkoverlay,this.darkOverlayAmount=void 0===n.darkoverlayamount?.5:n.darkoverlayamount,this.zoom=n.zoom||{value:25,unit:"%"},"number"==typeof this.zoom&&(this.zoom={value:this.zoom,unit:"%"}),this.darkOverlay&&(this.darkOverlay=e.nodeScope.createPrimitiveNode("Group"),this.darkOverlay.setInputValue("position","absolute"),this.darkOverlay.setInputValue("sizeMode","explicit"),this.darkOverlay.setInputValue("width",{value:100,unit:"%"}),this.darkOverlay.setInputValue("height",{value:100,unit:"%"}),this.darkOverlay.setInputValue("backgroundColor","#000000"),this.darkOverlay.setInputValue("opacity",0))}update(e){if("In"===this.direction||"Out"===this.direction){var t=this.zoom.value/100;t="Out"===this.direction?-t:t,this.from.setStyle({transform:"scale("+(1+t*e)+")",opacity:this.crossfade?1-e:1}),this.to.setStyle({transform:"scale("+(1-t*(1-e))+")",opacity:this.crossfade?e:1})}else{var n=this.distance.value,o=this.distance.unit;const t={Up:{x:0,y:-1},Down:{x:0,y:1},Left:{x:-1,y:0},Right:{x:1,y:0}},i={x:t[this.direction].x*n,y:t[this.direction].y*n},r={x:100*t[this.direction].x,y:100*t[this.direction].y};this.from.setStyle({transform:"translate("+i.x*e+o+","+i.y*e+o+")",opacity:this.crossfade?1-e:1}),this.to.setStyle({transform:"translate("+r.x*(e-1)+o+","+r.y*(e-1)+"%)",opacity:this.crossfade?e:1})}this.darkOverlay&&this.darkOverlay.setStyle({opacity:e*this.darkOverlayAmount})}forward(e){var t=this.ease(e);this.update(t)}back(e){var t=this.ease(e);this.update(1-t)}start(e){super.start(e),this.darkOverlay&&this.from.addChild(this.darkOverlay)}end(e){this.darkOverlay&&this.from.removeChild(this.darkOverlay),super.end(e)}static ports(e){const t=[];return t.push({name:"tr-direction",displayName:"Direction",group:"Transition",type:{name:"enum",enums:["Right","Left","Up","Down","In","Out"]},default:"Left",plug:"input"}),"In"===e["tr-direction"]||"Out"===e["tr-direction"]?t.push({name:"tr-zoom",displayName:"Zoom",group:"Transition",type:{name:"number",units:["%"]},default:{value:25,unit:"%"},plug:"input"}):t.push({name:"tr-shift",displayName:"Shift Distance",group:"Transition",type:{name:"number",units:["%","px"]},default:{value:25,unit:"%"},plug:"input"}),t.push({name:"tr-crossfade",displayName:"Crossfade",group:"Transition",type:"boolean",default:!1,plug:"input"}),t.push({name:"tr-darkoverlay",displayName:"Dark Overlay",group:"Transition",type:"boolean",default:!0,plug:"input"}),t.push({name:"tr-darkoverlayamount",displayName:"Dark Overlay Amount",group:"Transition",type:"number",default:.5,plug:"input"}),t.push({name:"tr-timing",displayName:"Timing",group:"Transition",type:"curve",plug:"input"}),t}}},6538:e=>{e.exports=class{constructor(){this._frame=this.frame.bind(this)}start(e){this.cb=e.end,this.timing.delay+this.timing.dur===0?this.end():(this.transitionForward=!e.back,this.startTime=window.performance.now(),requestAnimationFrame(this._frame))}frame(){var e=(window.performance.now()-(this.startTime+this.timing.delay))/this.timing.dur,t=Math.max(0,Math.min(e,1));this.transitionForward?this.forward(t):this.back(t),window.performance.now()<=this.startTime+this.timing.dur+this.timing.delay?requestAnimationFrame(this._frame):this.end()}end(){this.cb&&this.cb()}}},8695:(e,t,n)=>{"use strict";var o=n(4442),i={name:"net.noodl.animatetovalue",docs:"https://docs.noodl.net/nodes/logic/animate-to-value",displayName:"Animate To Value",shortDesc:"This node can interpolate smooothely from the current value to a target value.",category:"Animation",initialize:function(){var e=this,t=this._internal;t.currentNumber=0,t.numberInitialized=!1,t.animationStarted=!1,t.setCurrentNumberEnabled=!1,t.overrideValue=0,t._animation=this.context.timerScheduler.createTimer({duration:300,startValue:0,endValue:0,ease:o.easeOut,onStart:function(){t.animationStarted=!0},onRunning:function(n){t.currentNumber=this.ease(this.startValue,this.endValue,n),e.flagOutputDirty("currentValue")},onFinish:function(){e.sendSignalOnOutput("atTargetValue")}})},getInspectInfo(){return this._internal.currentNumber},inputs:{targetValue:{type:{name:"number"},displayName:"Target Value",group:"Target Value",default:void 0,set:function(e){if(!0===e?e=1:!1===e&&(e=0),e=Number(e),!isNaN(e)){var t=this._internal;if(!1===t.numberInitialized)return t.currentNumber=e,t.numberInitialized=!0,t._animation.endValue=e,void this.flagOutputDirty("currentValue");e!==t._animation.endValue&&(t._animation.startValue=t.currentNumber,t._animation.endValue=e,t._animation.start())}}},duration:{type:"number",group:"Parameters",displayName:"Duration",default:300,set:function(e){this._internal._animation.duration=e}},delay:{type:"number",group:"Parameters",displayName:"Delay",default:0,set:function(e){this._internal._animation.delay=e}},easingCurve:{type:{name:"enum",enums:[{value:"easeOut",label:"Ease Out"},{value:"easeIn",label:"Ease In"},{value:"linear",label:"Linear"},{value:"easeInOut",label:"Ease In Out"}]},default:"easeOut",displayName:"Easing Curve",group:"Parameters",set:function(e){this._internal._animation.ease=o[e]}}},outputs:{currentValue:{type:"number",displayName:"Current Value",group:"Current State",getter:function(){return this._internal.currentNumber}},atTargetValue:{type:"signal",displayName:"At Target Value",group:"Signals"}}};e.exports={node:i}},9414:(e,t,n)=>{"use strict";const o=n(4442);function i(e,t){for(var n=0;n<3;++n){var o=1+2*n;e[n]=parseInt(t.substring(o,o+2),16)}}function r(e){var t=e.toString(16);return 1==t.length?"0"+t:t}let s=[0,0,0],a=[0,0,0],l=[0,0,0];const u={name:"Color Blend",docs:"https://docs.noodl.net/nodes/utilities/color-blend",shortDesc:"Given any number of input colors this node can interpolate between these and give the result color as output.",category:"Interpolation",getInspectInfo(){return[{type:"color",value:this._internal.resultColor}]},initialize(){const e=this._internal;e.resultColor="#000000",e.blendValue=0,e.colors=[]},numberedInputs:{color:{type:"color",displayPrefix:"Color",createSetter:e=>function(t){this._internal.colors[e]=t,this.updateColor()}}},inputs:{blendValue:{type:"number",displayName:"Blend Value",default:0,set:function(e){this._internal.blendValue=e,this.updateColor()}}},outputs:{result:{type:"color",displayName:"Result",getter:function(){return this._internal.resultColor}}},methods:{updateColor(){var e=this._internal.colors;if(0!==e.length){var t,n,u,d=(0,t=e.length-1,n=this._internal.blendValue,Math.max(0,Math.min(t,n))),c=Math.floor(d),p=d-c;0===p?this._internal.resultColor=h(c):(i(s,h(c)),i(a,h(c+1)),l[0]=Math.floor(o.linear(s[0],a[0],p)),l[1]=Math.floor(o.linear(s[1],a[1],p)),l[2]=Math.floor(o.linear(s[2],a[2],p)),this._internal.resultColor="#"+r((u=l)[0])+r(u[1])+r(u[2])),this.flagOutputDirty("result")}function h(t){return e[t]?e[t]:"#000000"}}}};e.exports={node:u}},8247:(e,t,n)=>{"use strict";const o=n(3839);e.exports={extendSetComponentObjectProperties:function(e){function t(e,t,n){var o=[];const i=[{label:"String",value:"string"},{label:"Boolean",value:"boolean"},{label:"Number",value:"number"},{label:"Date",value:"date"},{label:"Array",value:"array"},{label:"Object",value:"object"},{label:"Any",value:"*"}];var r=t.properties;if(r)for(var s in r=r?r.split(","):void 0){var a=r[s];o.push({type:{name:void 0===t["type-"+a]?"*":t["type-"+a]},plug:"input",group:"Property Values",displayName:a,name:"prop-"+a}),o.push({type:{name:"enum",enums:i,allowEditOnly:!0},plug:"input",group:"Property Types",displayName:a,default:"*",name:"type-"+a})}n.sendDynamicPorts(e,o,{detectRenamed:{plug:"input"}})}return{node:{name:e.name,displayNodeName:e.displayName,category:"Component Utilities",color:"component",docs:e.docs,initialize:function(){this._internal.inputValues={}},inputs:{properties:{type:{name:"stringlist",allowEditOnly:!0},displayName:"Properties",group:"Properties",set(e){}},store:{type:"signal",group:"Actions",displayName:"Do",valueChangedToTrue(){this.scheduleStore()}}},outputs:{stored:{type:"signal",group:"Events",displayName:"Done"}},methods:{getComponentObjectId:e.getComponentObjectId,scheduleStore(){if(!this.hasScheduledStore){this.hasScheduledStore=!0;var e=this._internal;this.scheduleAfterInputsHaveUpdated((()=>{const t=o.get(this.getComponentObjectId());this.hasScheduledStore=!1;const n=(this.model.parameters.properties||"").split(","),i=Object.keys(e.inputValues).filter((e=>-1!==n.indexOf(e)));for(const n of i)t.set(n,e.inputValues[n],{resolve:!0});this.sendSignalOnOutput("stored")}))}},registerInputIfNeeded:function(e){if(!this.hasInput(e))if(e.startsWith("prop-")){const t=e.substring(5);this.registerInput(e,{set(e){this._internal.inputValues[t]=e}})}else e.startsWith("type-")&&this.registerInput(e,{set(e){}})}}},setup:function(n,o){n.editorConnection&&n.editorConnection.isRunningLocally()&&o.on("nodeAdded."+e.name,(e=>{t(e.id,e.parameters,n.editorConnection),e.on("parameterUpdated",(o=>{("properties"===o.name||o.name.startsWith("type-"))&&t(e.id,e.parameters,n.editorConnection)}))}))}}}}},9273:(e,t,n)=>{"use strict";const{Node:o}=n(3948),i=n(3839),r={name:"net.noodl.ComponentObject",displayNodeName:"Component Object",category:"Component Utilities",color:"component",docs:"https://docs.noodl.net/nodes/component-utilities/component-object",initialize:function(){this._internal.inputValues={},this._internal.dirtyValues={},this._internal.onModelChangedCallback=e=>{!1===this.isInputConnected("fetch")&&(this.hasOutput("value-"+e.name)&&this.flagOutputDirty("value-"+e.name),this.hasOutput("changed-"+e.name)&&this.sendSignalOnOutput("changed-"+e.name),this.sendSignalOnOutput("changed"))};const e=i.get("componentState"+this.nodeScope.componentOwner.getInstanceId());this._internal.model=e,e.on("change",this._internal.onModelChangedCallback)},getInspectInfo(){return{type:"value",value:this._internal.model.data}},inputs:{properties:{type:{name:"stringlist",allowEditOnly:!0},displayName:"Properties",group:"Properties",set(e){}},fetch:{displayName:"Fetch",group:"Actions",valueChangedToTrue(){this.scheduleFetch()}}},outputs:{changed:{type:"signal",displayName:"Changed",group:"Events"},fetched:{type:"signal",displayName:"Fetched",group:"Events"}},methods:{scheduleStore(){if(!this.hasScheduledStore){this.hasScheduledStore=!0;var e=this._internal;this.scheduleAfterInputsHaveUpdated((()=>{for(var t in this.hasScheduledStore=!1,e.dirtyValues)e.model.set(t,e.inputValues[t],{resolve:!0});e.dirtyValues={}}))}},scheduleFetch(){this.hasScheduledFetch||(this.hasScheduledFetch=!0,this.scheduleAfterInputsHaveUpdated((()=>{this.hasScheduledFetch=!1,this.fetch()})))},fetch(){for(var e in this._internal.model.data)this.hasOutput("value-"+e)&&(this.flagOutputDirty("value-"+e),this.hasOutput("changed-"+e)&&this.sendSignalOnOutput("changed-"+e));this.sendSignalOnOutput("fetched")},_onNodeDeleted(){o.prototype._onNodeDeleted.call(this),this._internal.model.off("change",this._internal.onModelChangedCallback)},registerOutputIfNeeded(e){if(this.hasOutput(e))return;const t=e.split("-"),n=t[t.length-1];this.registerOutput(e,{get(){return this._internal.model.get(n,{resolve:!0})}})},registerInputIfNeeded:function(e){if(!this.hasInput(e)&&e.startsWith("value-")){const t=e.substring(6);this.registerInput(e,{set(e){this._internal.inputValues[t]=e,this._internal.dirtyValues[t]=!0,this.scheduleStore()}})}}}};function s(e,t,n){const o=[];if(t.properties){var i=t.properties.split(",");for(var r in i){var s=i[r];o.push({type:{name:"*",allowConnectionsOnly:!0},plug:"input/output",group:"Properties",name:"value-"+s,displayName:s}),o.push({type:"signal",plug:"output",group:"Changed Events",displayName:s+" Changed",name:"changed-"+s})}}n.sendDynamicPorts(e,o,{detectRenamed:{plug:"input/output"}})}e.exports={node:r,setup:function(e,t){e.editorConnection&&e.editorConnection.isRunningLocally()&&t.on("nodeAdded.net.noodl.ComponentObject",(t=>{s(t.id,t.parameters,e.editorConnection),t.on("parameterUpdated",(n=>{"properties"===n.name&&s(t.id,t.parameters,e.editorConnection)}))}))}}},8177:(e,t,n)=>{"use strict";const{Node:o}=n(3948),i=n(3839),r=new(0,n(2699).EventEmitter);r.setMaxListeners(1e6);const s={name:"net.noodl.ParentComponentObject",displayNodeName:"Parent Component Object",category:"Component Utilities",color:"component",docs:"https://docs.noodl.net/nodes/component-utilities/parent-component-object",initialize(){this._internal.inputValues={},this._internal.onModelChangedCallback=e=>{!1===this.isInputConnected("fetch")&&(this.hasOutput("value-"+e.name)&&this.flagOutputDirty("value-"+e.name),this.hasOutput("changed-"+e.name)&&this.sendSignalOnOutput("changed-"+e.name),this.sendSignalOnOutput("changed"))},this.onComponentStateNodesChanged=()=>{const e=this.findParentComponentStateModelId();this._internal.modelId!==e&&(this._internal.modelId=e,!1===this.isInputConnected("fetch")&&this.setModelId(this._internal.modelId))},r.on("componentStateNodesChanged",this.onComponentStateNodesChanged),this.updateComponentState()},nodeScopeDidInitialize(){this._internal.modelId||this.context.scheduleAfterUpdate((()=>{this.updateComponentState()}))},getInspectInfo(){if(!this._internal.model)return"No parent component state found";const e=[{type:"text",value:this._internal.parentComponentName}],t=this._internal.model.data;return e.concat(Object.keys(t).map((e=>({type:"text",value:e+": "+t[e]}))))},inputs:{properties:{type:{name:"stringlist",allowEditOnly:!0},displayName:"Properties",group:"Properties",set(e){}},fetch:{displayName:"Fetch",group:"Actions",valueChangedToTrue:function(){this.setModelId(this._internal.modelId)}}},outputs:{changed:{type:"signal",displayName:"Changed",group:"Events"},fetched:{type:"signal",displayName:"Fetched",group:"Events"}},methods:{updateComponentState(){this._internal.modelId=this.findParentComponentStateModelId(),!1===this.isInputConnected("fetch")&&this.setModelId(this._internal.modelId)},findParentComponentStateModelId(){const e=function e(t){let n;if(t.getRoots().length>0){const e=t.getRoots()[0];e.getVisualParentNode?e.getVisualParentNode()&&(n=e.getVisualParentNode().nodeScope.componentOwner):e.parentNodeScope&&(n=t.parentNodeScope.componentOwner)}else t.parentNodeScope&&(n=t.parentNodeScope.componentOwner);if(n&&n.nodeScope&&n.nodeScope.componentOwner!==t)return n.nodeScope.getNodesWithType("net.noodl.ComponentObject").length>0?n:e(n)}(this.nodeScope.componentOwner);if(e)return this._internal.parentComponentName=e.name,"componentState"+e.getInstanceId()},setModelId(e){if(this._internal.model&&this._internal.model.off("change",this._internal.onModelChangedCallback),this._internal.model=void 0,!e)return;const t=i.get(e);for(var n in this._internal.model=t,t.on("change",this._internal.onModelChangedCallback),t.data)this.hasOutput("value-"+n)&&this.flagOutputDirty("value-"+n),this.hasOutput("changed-"+n)&&this.sendSignalOnOutput("changed-"+n);this.sendSignalOnOutput("changed"),this.sendSignalOnOutput("fetched")},scheduleStore(){if(!this.hasScheduledStore){this.hasScheduledStore=!0;var e=this._internal;this.scheduleAfterInputsHaveUpdated((()=>{if(this.hasScheduledStore=!1,e.model)for(var t in e.inputValues)e.model.set(t,e.inputValues[t],{resolve:!0})}))}},_onNodeDeleted(){o.prototype._onNodeDeleted.call(this),r.off("componentStateNodesChanged",this.onComponentStateNodesChanged),this._internal.model&&this._internal.model.off("change",this._internal.onModelChangedCallback)},registerOutputIfNeeded(e){if(this.hasOutput(e))return;const t=e.substring(6);this.registerOutput(e,{get(){if(this._internal.model)return this._internal.model.get(t,{resolve:!0})}})},registerInputIfNeeded:function(e){if(!this.hasInput(e)&&e.startsWith("value-")){const t=e.substring(6);this.registerInput(e,{set(e){this._internal.inputValues[t]=e,this.scheduleStore()}})}}}};function a(e,t,n){const o=[];var i=t.properties&&t.properties.split(",");for(var r in i){var s=i[r];o.push({type:{name:"*",allowConnectionsOnly:!0},plug:"input/output",group:"Properties",name:"value-"+s,displayName:s}),o.push({type:"signal",plug:"output",group:"Changed Events",displayName:s+" Changed",name:"changed-"+s})}n.sendDynamicPorts(e,o,{detectRenamed:{plug:"input/output"}})}e.exports={node:s,setup:function(e,t){e.editorConnection&&e.editorConnection.isRunningLocally()&&(t.on("nodeAdded.net.noodl.ParentComponentObject",(t=>{a(t.id,t.parameters,e.editorConnection),t.on("parameterUpdated",(n=>{a(t.id,t.parameters,e.editorConnection)}))})),t.on("nodeAdded.net.noodl.ComponentObject",(e=>{setTimeout((()=>{r.emit("componentStateNodesChanged")}),0)})),t.on("nodeRemoved.net.noodl.ComponentObject",(e=>{setTimeout((()=>{r.emit("componentStateNodesChanged")}))})))}}},2530:(e,t,n)=>{"use strict";const o=n(8247);e.exports=o.extendSetComponentObjectProperties({name:"net.noodl.SetComponentObjectProperties",displayName:"Set Component Object Properties",docs:"https://docs.noodl.net/nodes/component-utilities/set-component-object-properties",getComponentObjectId:function(){return"componentState"+this.nodeScope.componentOwner.getInstanceId()}})},2005:(e,t,n)=>{"use strict";const{Node:o}=n(3948),i=(n(3839),n(8247));e.exports=i.extendSetComponentObjectProperties({name:"net.noodl.SetParentComponentObjectProperties",displayName:"Set Parent Component Object Properties",docs:"https://docs.noodl.net/nodes/component-utilities/set-parent-component-object-properties",getComponentObjectId:function(){const e=function e(t){let n;if(t.getRoots().length>0){const e=t.getRoots()[0];e.getVisualParentNode?e.getVisualParentNode()&&(n=e.getVisualParentNode().nodeScope.componentOwner):e.parentNodeScope&&(n=t.parentNodeScope.componentOwner)}else t.parentNodeScope&&(n=t.parentNodeScope.componentOwner);if(n&&n.nodeScope&&n.nodeScope.componentOwner!==t)return n.nodeScope.getNodesWithType("net.noodl.ComponentObject").length>0?n:e(n)}(this.nodeScope.componentOwner);if(e)return this._internal.parentComponentName=e.name,"componentState"+e.getInstanceId()}})},9193:(e,t,n)=>{const o=n(3948),i=n(4007);var r={name:"Cloud Function",category:"Cloud Services",color:"data",usePortAsLabel:"functionName",docs:"https://docs.noodl.net/nodes/data/cloud-data/cloud-function",deprecated:!0,initialize:function(){this._internal.paramsValues={}},getInspectInfo(){const e=this._internal.lastCallResult;return e?[{type:"value",value:e}]:"[Not executed yet]"},inputs:{functionName:{type:"string",displayName:"Function Name",group:"General",set:function(e){this._internal.functionName=e}},params:{group:"Parameters",type:{name:"stringlist",allowEditOnly:!0},set:function(e){this._internal.params=e}},call:{type:"signal",displayName:"Call",group:"Actions",valueChangedToTrue:function(){this.scheduleCall()}}},outputs:{success:{type:"signal",displayName:"Success",group:"Signals"},failure:{type:"signal",displayName:"Failure",group:"Signals"},result:{type:"*",displayName:"Result",group:"Output",getter:function(){return this._internal.result}}},methods:{registerOutputIfNeeded:function(e){this.hasOutput(e)},setParamsValue:function(e,t){this._internal.paramsValues[e]=t},registerInputIfNeeded:function(e){this.hasInput(e)||e.startsWith("pm-")&&this.registerInput(e,{set:this.setParamsValue.bind(this,e.substring(3))})},scheduleCall:function(){var e=this._internal;e.hasScheduledCall||(e.hasScheduledCall=!0,this.scheduleAfterInputsHaveUpdated(this.doCall.bind(this)))},doCall:function(){this._internal.hasScheduledCall=!1;const e=o.instance.getMetaData("cloudservices");if(void 0===e)return console.log("No cloud services defined in this project."),this._internal.lastCallResult={status:"failure",res:"No active cloud services in this project"},void this.sendSignalOnOutput("failure");var t=e.appId,n=e.endpoint;!function(e,t){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4===n.readyState){var e;try{e=JSON.parse(n.response)}catch(e){}200===n.status||201===n.status?t.success(e):t.error(e)}},n.open(t.method||"GET",t.endpoint+e,!0),n.setRequestHeader("X-Parse-Application-Id",t.appId),n.setRequestHeader("Content-Type","application/json");var o=localStorage["Parse/"+t.appId+"/currentUser"];if(void 0!==o)try{const e=JSON.parse(o);n.setRequestHeader("X-Parse-Session-Token",e.sessionToken)}catch(e){}n.send(JSON.stringify(t.content))}("/functions/"+encodeURIComponent(this._internal.functionName),{appId:t,endpoint:n,content:this._internal.paramsValues,method:"POST",success:e=>{void 0!==(e=e.result)?(this._internal.result=i._deserializeJSON(e),this.flagOutputDirty("result"),this._internal.lastCallResult={status:"success",result:this._internal.result},this.sendSignalOnOutput("success")):this.sendSignalOnOutput("failure")},error:e=>{this._internal.lastCallResult={status:"failure",res:e},this.sendSignalOnOutput("failure")}})}}};e.exports={node:r,setup:function(e,t){function n(t){function n(){var n=[],o=t.parameters.params;if(void 0!==o)for(var i in o=o.split(",")){var r=o[i];n.push({type:"*",plug:"input",group:"Parameters",name:"pm-"+r,displayName:r})}e.editorConnection.sendDynamicPorts(t.id,n)}n(),t.on("parameterUpdated",(function(e){"params"===e.name&&n()}))}e.editorConnection&&e.editorConnection.isRunningLocally()&&t.on("editorImportComplete",(()=>{t.on("nodeAdded.Cloud Function",(function(e){n(e)}));for(const e of t.getNodesWithType("Cloud Function"))n(e)}))}}},3075:(e,t,n)=>{const o=n(3948);n(4007);var i={name:"CloudFunction2",displayName:"Cloud Function",category:"Cloud Services",color:"data",usePortAsLabel:"function",docs:"https://docs.noodl.net/nodes/data/cloud-data/cloud-function",initialize:function(){this._internal.paramsValues={},this._internal.resultsValues={}},getInspectInfo(){const e=this._internal.lastCallResult;return e?[{type:"value",value:e}]:"[Not executed yet]"},inputs:{call:{type:"signal",displayName:"Call",group:"Actions",valueChangedToTrue:function(){this.scheduleCall()}}},outputs:{success:{type:"signal",displayName:"Success",group:"Signals"},failure:{type:"signal",displayName:"Failure",group:"Signals"},error:{type:"string",displayName:"Error",group:"Error",getter:function(){return this._internal.error}}},methods:{setError:function(e){this._internal.error=e,this.flagOutputDirty("error"),this.sendSignalOnOutput("failure")},getResultsValue:function(e){return this._internal.resultsValues[e]},registerOutputIfNeeded:function(e){this.hasOutput(e)||e.startsWith("out-")&&this.registerOutput(e,{getter:this.getResultsValue.bind(this,e.substring(4))})},setParamsValue:function(e,t){this._internal.paramsValues[e]=t},setFunctionName:function(e){this._internal.functionName=e},registerInputIfNeeded:function(e){this.hasInput(e)||("function"===e&&this.registerInput(e,{set:this.setFunctionName.bind(this)}),e.startsWith("in-")&&this.registerInput(e,{set:this.setParamsValue.bind(this,e.substring(3))}))},scheduleCall:function(){var e=this._internal;e.hasScheduledCall||(e.hasScheduledCall=!0,this.scheduleAfterInputsHaveUpdated(this.doCall.bind(this)))},doCall:function(){this._internal.hasScheduledCall=!1;const e=o.instance.getMetaData("cloudservices");this.context.editorConnection&&(void 0===e||void 0===e.endpoint?this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"cloud-function-2",{message:"No cloud services defined in this project."}):void 0===this._internal.functionName?this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"cloud-function-2",{message:"No function specified"}):this.context.editorConnection.clearWarning(this.nodeScope.componentOwner.name,this.id,"cloud-function-2"));const t=e.appId,n=this.context.editorConnection.isRunningLocally()?`http://${window.location.hostname}:8577`:e.endpoint;!function(e,t){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4===n.readyState){var e;try{e=JSON.parse(n.response)}catch(e){}200===n.status||201===n.status?t.success(e):t.error(e)}},n.open(t.method||"GET",t.endpoint+e,!0),n.setRequestHeader("X-Parse-Application-Id",t.appId),n.setRequestHeader("Content-Type","application/json");const i=o.instance.getMetaData("cloudservices");i&&i.deployVersion&&n.setRequestHeader("x-noodl-cloud-version",i.deployVersion);var r=localStorage["Parse/"+t.appId+"/currentUser"];if(void 0!==r)try{const e=JSON.parse(r);n.setRequestHeader("X-Parse-Session-Token",e.sessionToken)}catch(e){}n.send(JSON.stringify(t.content))}("/functions/"+encodeURIComponent(this._internal.functionName),{appId:t,endpoint:n,content:this._internal.paramsValues,method:"POST",success:e=>{if(void 0===e)this._internal.lastCallResult={status:"success",parameters:this._internal.paramsValues,results:"empty"};else{const t=e.result||{};for(let e in t)this._internal.resultsValues[e]=t[e],this.hasOutput("out-"+e)&&this.flagOutputDirty("out-"+e);this._internal.lastCallResult={status:"success",parameters:this._internal.paramsValues,results:this._internal.resultsValues}}this.sendSignalOnOutput("success")},error:e=>{const t="string"==typeof e?e:e.error||"Failed running cloud function.";this._internal.lastCallResult={status:"failure",error:t},this.setError(t)}})}}};e.exports={node:i,setup:function(e,t){}}},4195:(e,t,n)=>{const o=n(9160),i={name:"CollectionClear",docs:"https://docs.noodl.net/nodes/data/array/clear-array",displayNodeName:"Clear Array",category:"Data",usePortAsLabel:"collectionId",color:"data",inputs:{collectionId:{type:{name:"string",identifierOf:"CollectionName",identifierDisplayName:"Array Ids"},displayName:"Array Id",group:"General",set:function(e){e instanceof o&&(e=e.getId()),this.setCollectionID(e)}},clear:{displayName:"Do",group:"Actions",valueChangedToTrue(){this.scheduleAfterInputsHaveUpdated((()=>{this._internal.collection.set([]),this.sendSignalOnOutput("modified")}))}}},outputs:{modified:{group:"Events",type:"signal",displayName:"Done"}},methods:{setCollectionID:function(e){this.setCollection(o.get(e))},setCollection:function(e){this._internal.collection=e}}};e.exports={node:i}},4273:(e,t,n)=>{"use strict";const{Node:o}=n(3948);var i=n(3839),r=n(9160),s={name:"CollectionInsert",docs:"https://docs.noodl.net/nodes/data/array/insert-into-array",displayNodeName:"Insert Object Into Array",shortDesc:"A collection of models, mainly used together with a For Each Node.",category:"Data",usePortAsLabel:"collectionId",color:"data",initialize:function(){},inputs:{collectionId:{type:{name:"string",identifierOf:"CollectionName",identifierDisplayName:"Array Ids"},displayName:"Array Id",group:"General",set:function(e){e instanceof r&&(e=e.getId()),this.setCollectionID(e)}},modifyId:{type:{name:"string",allowConnectionsOnly:!0},displayName:"Object Id",group:"Modify",set:function(e){this._internal.modifyId=e}},add:{displayName:"Do",group:"Actions",valueChangedToTrue:function(){var e=this,t=this._internal;this.scheduleAfterInputsHaveUpdated((function(){if(this.context.editorConnection&&this.context.editorConnection.clearWarning(this.nodeScope.componentOwner.name,this.id,"insert-warning"),void 0!==t.modifyId)if(void 0!==t.collection){var n=i.get(t.modifyId);t.collection.add(n),e.sendSignalOnOutput("modified")}else this.context.editorConnection&&this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"insert-warning",{showGlobally:!0,message:"No Array Id specified"});else this.context.editorConnection&&this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"insert-warning",{showGlobally:!0,message:"No Object Id specified"})}))}}},outputs:{modified:{group:"Events",type:"signal",displayName:"Done"}},prototypeExtensions:{setCollectionID:function(e){this.setCollection(r.get(e))},setCollection:function(e){this._internal.collection=e}}};e.exports={node:s}},5319:(e,t,n)=>{"use strict";const{Node:o}=n(3948);n(3839);var i=n(9160),r={name:"CollectionNew",docs:"https://docs.noodl.net/nodes/data/array/create-new-array",displayNodeName:"Create New Array",shortDesc:"A collection of models, mainly used together with a For Each Node.",category:"Data",color:"data",initialize:function(){},inputs:{new:{displayName:"Do",group:"Actions",valueChangedToTrue:function(){this.scheduleNew()}},items:{type:"array",group:"General",displayName:"Items",set:function(e){this._internal.sourceCollection=e}}},outputs:{id:{type:"string",displayName:"Id",group:"General",getter:function(){return this._internal.collection?this._internal.collection.getId():this._internal.collectionId}},created:{group:"Events",type:"signal",displayName:"Done"}},prototypeExtensions:{setCollectionID:function(e){this.setCollection(i.get(e))},setCollection:function(e){this._internal.collection=e,this.flagOutputDirty("id")},scheduleNew:function(){var e=this;this.hasScheduledNew||(this.hasScheduledNew=!0,this.scheduleAfterInputsHaveUpdated((function(){e.hasScheduledNew=!1;const t=i.get();void 0!==this._internal.sourceCollection&&t.set(this._internal.sourceCollection),e.setCollection(t),e.sendSignalOnOutput("created")})))}}};e.exports={node:r}},6852:(e,t,n)=>{"use strict";const{Node:o}=n(3948);var i=n(3839),r=n(9160),s={name:"CollectionRemove",docs:"https://docs.noodl.net/nodes/data/array/remove-from-array",displayNodeName:"Remove Object From Array",shortDesc:"A collection of models, mainly used together with a For Each Node.",category:"Data",usePortAsLabel:"collectionId",color:"data",initialize:function(){},inputs:{collectionId:{type:{name:"string",identifierOf:"CollectionName",identifierDisplayName:"Array Ids"},displayName:"Array Id",group:"General",set:function(e){e instanceof r&&(e=e.getId()),this.setCollectionID(e)}},modifyId:{type:{name:"string",allowConnectionsOnly:!0},displayName:"Object Id",group:"Modify",set:function(e){this._internal.modifyId=e}},remove:{displayName:"Do",group:"Actions",valueChangedToTrue:function(){var e=this,t=this._internal;this.scheduleAfterInputsHaveUpdated((function(){if(void 0!==t.modifyId&&void 0!==t.collection){var n=i.get(t.modifyId);t.collection.remove(n),e.sendSignalOnOutput("modified")}}))}}},outputs:{modified:{group:"Events",type:"signal",displayName:"Done"}},prototypeExtensions:{setCollectionID:function(e){this.setCollection(r.get(e))},setCollection:function(e){this._internal.collection=e}}};e.exports={node:s}},671:(e,t,n)=>{"use strict";const{Node:o}=n(3948);n(3839);var i=n(9160),r={name:"Collection2",docs:"https://docs.noodl.net/nodes/data/array/array-node",displayNodeName:"Array",shortDesc:"A collection of models, mainly used together with a For Each Node.",category:"Data",usePortAsLabel:"collectionId",color:"data",initialize:function(){var e=this,t=!1;this._internal.collectionChangedCallback=function(){!0!==e.isInputConnected("fetch")&&(t||(t=!0,e.scheduleAfterInputsHaveUpdated((function(){e.sendSignalOnOutput("changed"),e.flagOutputDirty("count"),t=!1}))))},this._internal.sourceCollectionChangedCallback=function(){!0!==e.isInputConnected("store")&&e.scheduleCopyItems()}},getInspectInfo(){const e=this._internal.collection;return e?[{type:"text",value:"Id: "+e.getId()},{type:"value",value:e.items}]:{type:"text",value:"[No Array]"}},inputs:{collectionId:{type:{name:"string",identifierOf:"CollectionName",identifierDisplayName:"Array Ids"},displayName:"Id",group:"General",set:function(e){e instanceof i&&(e=e.getId()),this._internal.collectionId=e,!1===this.isInputConnected("fetch")?this.setCollectionID(e):this.flagOutputDirty("id")}},items:{type:"array",group:"General",displayName:"Items",set:function(e){var t=this;void 0!==e&&e!==this._internal.collection&&(this._internal.pendingSourceCollection=e,!1===this.isInputConnected("store")&&this.scheduleAfterInputsHaveUpdated((function(){t.setSourceCollection(e)})))}},fetch:{displayName:"Fetch",group:"Actions",valueChangedToTrue:function(){this.scheduleSetCollection()}}},outputs:{id:{type:"string",displayName:"Id",group:"General",getter:function(){return this._internal.collection?this._internal.collection.getId():this._internal.collectionId}},items:{type:"array",displayName:"Items",group:"General",getter:function(){return this._internal.collection}},count:{type:"number",displayName:"Count",group:"General",getter:function(){return this._internal.collection?this._internal.collection.size():0}},changed:{group:"Events",type:"signal",displayName:"Changed"},fetched:{group:"Events",type:"signal",displayName:"Fetched"}},prototypeExtensions:{setCollectionID:function(e){this.setCollection(i.get(e))},setCollection:function(e){this._internal.collection&&this._internal.collection.off("change",this._internal.collectionChangedCallback),this._internal.collection=e,this.flagOutputDirty("id"),e.on("change",this._internal.collectionChangedCallback),this.flagOutputDirty("items"),this.flagOutputDirty("count")},setSourceCollection:function(e){var t=this._internal;t.sourceCollection&&t.sourceCollection instanceof i&&t.sourceCollection.off("change",t.sourceCollectionChangedCallback),t.sourceCollection=e,t.sourceCollection instanceof i&&t.sourceCollection.on("change",t.sourceCollectionChangedCallback),this._copySourceItems()},scheduleSetCollection:function(){var e=this;this.hasScheduledSetCollection||(this.hasScheduledSetCollection=!0,this.scheduleAfterInputsHaveUpdated((function(){e.hasScheduledSetCollection=!1,e.setCollectionID(e._internal.collectionId),e.sendSignalOnOutput("fetched")})))},scheduleStore:function(){var e=this;if(!this.hasScheduledStore){this.hasScheduledStore=!0;var t=this._internal;this.scheduleAfterInputsHaveUpdated((function(){e.hasScheduledStore=!1,e.setSourceCollection(t.pendingSourceCollection)}))}},_copySourceItems:function(){var e=this._internal;void 0===e.collection&&!1===this.isInputConnected("fetch")&&this.setCollection(i.get()),e.collection&&e.collection.set(e.sourceCollection)},scheduleCopyItems:function(){var e=this;this._internal,this.hasScheduledCopyItems||(this.hasScheduledCopyItems=!0,this.scheduleAfterInputsHaveUpdated((function(){e.hasScheduledCopyItems=!1,e._copySourceItems()})))},_onNodeDeleted:function(){o.prototype._onNodeDeleted.call(this),this._internal.collection&&this._internal.collection.off("change",this._internal.collectionChangedCallback)}}};e.exports={node:r}},1469:(e,t,n)=>{"use strict";const{Node:o,EdgeTriggeredInput:i}=n(3948),r=n(9160),s=n(3839);function a(e,t){for(var n in e instanceof s&&(e=e.data),t instanceof s&&(t=t.data),this){var o=e[n],i=t[n];if(o!==i)return"string"==typeof o&&"string"==typeof i?1===this[n]?o>i?1:-1:o>i?-1:1:"number"==typeof o&&"number"==typeof i?1===this[n]?o-i:i-o:1===this[n]?o>i?1:-1:o>i?-1:1}return 0}var l={name:"Filter Collection",docs:"https://docs.noodl.net/nodes/data/array/array-filter",displayNodeName:"Array Filter",shortDesc:"Filter, sort and limit array",category:"Data",color:"data",initialize:function(){var e=this;this._internal.collectionChangedCallback=function(){!0!==e.isInputConnected("filter")&&e.scheduleFilter()},this._internal.enabled=!0,this._internal.filterSettings={}},getInspectInfo(){const e=this._internal.filteredCollection;return e?[{type:"text",value:"Id: "+e.getId()},{type:"value",value:e.items}]:{type:"text",value:"[Not executed yet]"}},inputs:{items:{type:"array",displayName:"Items",group:"General",set(e){this.bindCollection(e),!1===this.isInputConnected("filter")&&this.scheduleFilter()}},enabled:{type:"boolean",group:"General",displayName:"Enabled",default:!0,set:function(e){this._internal.enabled=e,!1===this.isInputConnected("filter")&&this.scheduleFilter()}},filter:{type:"signal",group:"Actions",displayName:"Filter",valueChangedToTrue:function(){this.scheduleFilter()}}},outputs:{items:{type:"array",displayName:"Items",group:"General",getter:function(){return this._internal.filteredCollection}},firstItemId:{type:"string",displayName:"First Item Id",group:"General",getter:function(){if(void 0!==this._internal.filteredCollection){const e=this._internal.filteredCollection.get(0);if(void 0!==e)return e.getId()}}},count:{type:"number",displayName:"Count",group:"General",getter:function(){return this._internal.filteredCollection?this._internal.filteredCollection.size():0}},modified:{group:"Events",type:"signal",displayName:"Filtered"}},prototypeExtensions:{unbindCurrentCollection:function(){var e=this._internal.collection;e&&(e.off("change",this._internal.collectionChangedCallback),this._internal.collection=void 0)},bindCollection:function(e){this.unbindCurrentCollection(),this._internal.collection=e,e&&e.on("change",this._internal.collectionChangedCallback)},_onNodeDeleted:function(){o.prototype._onNodeDeleted.call(this),this.unbindCurrentCollection()},getFilter:function(){const e=this._internal.filterSettings,t=["case"];if(e.filterFilter){const o=e.filterFilter.split(",");var n={};return o.forEach((function(o){var i="$"+(e["filterFilterOp-"+o]||"eq");n[o]={},n[o][i]=e["filterFilterValue-"+o],t.forEach((t=>{var i=e["filterFilterOption-"+t+"-"+o];i&&(n[o]["$"+t]=i)}))})),n}},getSort:function(){const e=this._internal.filterSettings;if(e.filterSort){const n=e.filterSort.split(",");var t={};return n.forEach((function(n){t[n]="descending"===e["filterSort-"+n]?-1:1})),t}},getLimit:function(){const e=this._internal.filterSettings;return e.filterEnableLimit?e.filterLimit||10:void 0},getSkip:function(){const e=this._internal.filterSettings;return e.filterEnableLimit?e.filterSkip||0:void 0},scheduleFilter:function(){this.collectionChangedScheduled||(this.collectionChangedScheduled=!0,this.scheduleAfterInputsHaveUpdated((()=>{if(this.collectionChangedScheduled=!1,this._internal.collection){var e=[].concat(this._internal.collection.items);if(this._internal.enabled){var t=this.getFilter();t&&(e=e.filter((e=>function(e,t){for(var n in t){var o=t[n];if(void 0!==o.$neq){if(e[n]==o.$neq)return!1}else{if(void 0===e[n])return!1;if(void 0!==o.$eq&&e[n]!=o.$eq)return!1;if(!(void 0===o.$gt||e[n]>o.$gt))return!1;if(!(void 0===o.$lt||e[n]<o.$lt))return!1;if(!(void 0===o.$gte||e[n]>=o.$gte))return!1;if(!(void 0===o.$lte||e[n]<=o.$lte))return!1;if(void 0!==o.$regex){var i=e[n]+"";if(!new RegExp(o.$regex,!0!==o.$case?"i":void 0).test(i))return!1}}}return!0}(e.data,t))));var n=this.getSort();n&&e.sort(a.bind(n));var o=this.getSkip();o&&(e=e.slice(o,e.length));var i=this.getLimit();i&&(e=e.slice(0,i))}this._internal.filteredCollection=r.create(e),this.sendSignalOnOutput("modified"),this.flagOutputDirty("firstItemId"),this.flagOutputDirty("items"),this.flagOutputDirty("count")}})))},registerInputIfNeeded:function(e){this.hasInput(e)||this.registerInput(e,{set:u.bind(this,e)})}}};function u(e,t){this._internal.filterSettings[e]=t,!1===this.isInputConnected("filter")&&this.scheduleFilter()}function d(e,t,n,o){var i=[];i.push({type:"boolean",plug:"input",group:"Limit",name:"filterEnableLimit",displayName:"Use limit"}),t.filterEnableLimit&&(i.push({type:"number",default:10,plug:"input",group:"Limit",name:"filterLimit",displayName:"Limit"}),i.push({type:"number",default:0,plug:"input",group:"Limit",name:"filterSkip",displayName:"Skip"})),i.push({type:{name:"stringlist",allowEditOnly:!0},plug:"input",group:"Filter",name:"filterFilter",displayName:"Filter"}),i.push({type:{name:"stringlist",allowEditOnly:!0},plug:"input",group:"Sort",name:"filterSort",displayName:"Sort"});const r={string:[{value:"eq",label:"Equals"},{value:"neq",label:"Not Equals"},{value:"regex",label:"Matches RegEx"}],boolean:[{value:"eq",label:"Equals"},{value:"neq",label:"Not Equals"}],number:[{value:"eq",label:"Equals"},{value:"neq",label:"Not Equals"},{value:"lt",label:"Less than"},{value:"gt",label:"Greater than"},{value:"gte",label:"Greater than or equal"},{value:"lte",label:"Less than or equal"}]};t.filterFilter&&t.filterFilter.split(",").forEach((e=>{i.push({type:{name:"enum",enums:[{value:"string",label:"String"},{value:"number",label:"Number"},{value:"boolean",label:"Boolean"}]},default:"string",plug:"input",group:e+" filter",displayName:"Type",editorName:e+" filter | Type",name:"filterFilterType-"+e});var n=t["filterFilterType-"+e];i.push({type:{name:"enum",enums:r[n||"string"]},default:"eq",plug:"input",group:e+" filter",displayName:"Op",editorName:e+" filter| Op",name:"filterFilterOp-"+e}),"regex"===t["filterFilterOp-"+e]&&i.push({type:"boolean",default:!1,plug:"input",group:e+" filter",displayName:"Case sensitive",editorName:e+" filter| Case",name:"filterFilterOption-case-"+e}),i.push({type:n||"string",plug:"input",group:e+" filter",displayName:"Value",editorName:e+" Filter Value",name:"filterFilterValue-"+e})})),t.filterSort&&t.filterSort.split(",").forEach((e=>{i.push({type:{name:"enum",enums:[{value:"ascending",label:"Ascending"},{value:"descending",label:"Descending"}]},default:"ascending",plug:"input",group:e+" sort",displayName:"Sort",editorName:e+" sorting",name:"filterSort-"+e})})),n.sendDynamicPorts(e,i)}e.exports={node:l,setup:function(e,t){e.editorConnection&&e.editorConnection.isRunningLocally()&&t.on("nodeAdded.Filter Collection",(function(n){d(n.id,n.parameters,e.editorConnection,t.getMetaData("dbCollections")),n.on("parameterUpdated",(function(o){o.name.startsWith("filter")&&d(n.id,n.parameters,e.editorConnection,t.getMetaData("dbCollections"))})),t.on("metadataChanged.dbCollections",(function(t){d(n.id,n.parameters,e.editorConnection)}))}))}}},4759:(e,t,n)=>{const{EdgeTriggeredInput:o}=n(3948),i={name:"For Each Actions",docs:"https://docs.noodl.net/nodes/ui-controls/repeater-item",displayNodeName:"Repeater Item",category:"Data",color:"data",inputs:{removeCompleted:{type:{name:"boolean",allowConnectionsOnly:!0},displayName:"Remove Completed",group:"Events",valueChangedToTrue:function(){this._internal.removeCompletedCallback&&this._internal.removeCompletedCallback()}}},outputs:{added:{type:"signal",displayName:"Added",group:"Events"},tryRemove:{type:"signal",displayName:"Try Remove",group:"Events"},itemId:{type:"string",displayName:"Item Id",group:"General",get(){return this.getItemId()}}},prototypeExtensions:{getItemId(){const e=this.nodeScope.componentOwner._forEachModel;return e&&e.getId()},signalAdded:function(){this.sendSignalOnOutput("added")},tryRemove:function(e){this.getOutput("tryRemove").hasConnections()?(this._internal.removeCompletedCallback=e,this.sendSignalOnOutput("tryRemove")):this.scheduleAfterInputsHaveUpdated((function(){e()}))},itemActionTriggered(e){this.scheduleAfterInputsHaveUpdated((()=>{const t=this.getItemId();this.nodeScope.componentOwner._forEachNode.signalItemAction(e,t,this._internal.actionParameters||{})}))},setItemActionParameter(e){this._internal.actionParameters||(this._internal.actionParameters={}),this._internal.actionParameters[e]=e},registerInputIfNeeded:function(e){if(!this.hasInput(e))return e.startsWith("itemAction-")?this.registerInput(e,{set:o.createSetter({valueChangedToTrue:this.itemActionTriggered.bind(this,e)})}):e.startsWith("itemActionParameter-")?this.registerInput(e,{set:this.setItemActionParameter.bind(this,e)}):void 0}}};e.exports={node:i,setup:function(e,t){e.editorConnection&&e.editorConnection.isRunningLocally()}}},1979:(e,t,n)=>{"use strict";const{Node:o}=n(3948);var i=n(3839),r=n(9160),s={name:"Map Collection",docs:"https://docs.noodl.net/nodes/data/array/array-map",displayNodeName:"Array Map",shortDesc:"Map array fields",category:"Data",color:"data",initialize:function(){var e=this;this._internal.collectionChangedCallback=function(){e.scheduleMap()}},inputs:{items:{type:"array",displayName:"Items",group:"General",set:function(e){this.setCollection(e),this.scheduleMap()}},mapScript:{type:{name:"string",allowEditOnly:!0,codeeditor:"javascript"},displayName:"Script",default:"map({\n\t// Here you add mappings between the input object and the mapped output object.\n\t//myOutputProp: 'inputProp',\n\t//anotherProperty: function(object) { return object.get('someProperty') + ' ' + object.get('otherProp') }\n})\n",set:function(e){this._internal.mapCode=e;try{this._internal.mapFunc=new Function("map","object",this._internal.mapCode)}catch(e){this._internal.mapFunc=void 0,console.log("Error while parsing map script: "+e)}this.scheduleMap()}}},outputs:{items:{type:"array",displayName:"Items",group:"General",getter:function(){return this._internal.mappedCollection}},count:{type:"number",displayName:"Count",group:"General",getter:function(){return this._internal.mappedCollection?this._internal.mappedCollection.size():0}},modified:{group:"Events",type:"signal",displayName:"Changed"}},prototypeExtensions:{setCollection:function(e){this.bindCollection(e),this.flagOutputDirty("items"),this.flagOutputDirty("count")},unbindCurrentCollection:function(){var e=this._internal.collection;e&&(e.off("change",this._internal.collectionChangedCallback),this._internal.collection=void 0)},bindCollection:function(e){this.unbindCurrentCollection(),this._internal.collection=e,e&&e.on("change",this._internal.collectionChangedCallback)},_onNodeDeleted:function(){o.prototype._onNodeDeleted.call(this),this.unbindCurrentCollection()},scheduleMap:function(){this.collectionChangedScheduled||(this.collectionChangedScheduled=!0,this.scheduleAfterInputsHaveUpdated((()=>{if(this.collectionChangedScheduled=!1,void 0!==this._internal.collection){var e=this._internal.collection.map((e=>{var t=i.create();return this._internal.mapFunc((function(n){for(var o in n)"function"==typeof n[o]?t.set(o,n[o](e)):"string"==typeof n[o]&&t.set(o,e.get(n[o]))}),e),t}));this._internal.mappedCollection=r.create(e),this.sendSignalOnOutput("modified"),this.flagOutputDirty("items"),this.flagOutputDirty("count")}})))}}};e.exports={node:s,setup:function(e,t){e.editorConnection&&e.editorConnection.isRunningLocally()}}},8765:(e,t,n)=>{"use strict";const{Node:o}=n(3948),i=n(3839),r=n(9160);var s={name:"Set Variable",docs:"https://docs.noodl.net/nodes/data/variable/set-variable",category:"Data",usePortAsLabel:"name",color:"data",initialize:function(){this._internal.variablesModel=i.get("--ndl--global-variables")},outputs:{done:{type:"signal",displayName:"Done",group:"Events"}},inputs:{name:{type:{name:"string",identifierOf:"VariableName",identifierDisplayName:"Variable names"},displayName:"Name",group:"General",set:function(e){this._internal.name=e}},setWith:{type:{name:"enum",enums:[{label:"String",value:"string"},{label:"Boolean",value:"boolean"},{label:"Number",value:"number"},{label:"Empty string",value:"emptyString"},{label:"Date",value:"date"},{label:"Object",value:"object"},{label:"Array",value:"array"},{label:"Any",value:"*"}],allowEditOnly:!0},displayName:"Set as",default:"*",group:"General",set:function(e){this._internal.setWith=e}},do:{displayName:"Do",group:"Actions",valueChangedToTrue:function(){this.scheduleStore()}}},methods:{setValue:function(e){this._internal.value=e},scheduleStore:function(){if(!this.hasScheduledStore){this.hasScheduledStore=!0;var e=this._internal;this.scheduleAfterInputsHaveUpdated((function(){this.hasScheduledStore=!1;var t="emptyString"===e.setWith?"":e.value;"object"===e.setWith&&"string"==typeof t&&(t=i.get(t)),"array"===e.setWith&&"string"==typeof t&&(t=r.get(t)),"boolean"===e.setWith&&(t=!!t),e.variablesModel.set(e.name,t,{forceChange:!0}),this.sendSignalOnOutput("done")}))}},registerInputIfNeeded:function(e){this.hasInput(e)||"value"===e&&this.registerInput(e,{set:this.setValue.bind(this)})}}};e.exports={node:s,setup:function(e,t){e.editorConnection&&e.editorConnection.isRunningLocally()&&t.on("nodeAdded.Set Variable",(function(t){function n(){var n=[];"emptyString"===t.parameters.setWith||n.push({type:void 0!==t.parameters.setWith?t.parameters.setWith:"*",plug:"input",group:"General",name:"value",displayName:"Value"}),e.editorConnection.sendDynamicPorts(t.id,n)}n(),t.on("parameterUpdated",(function(e){n()}))}))}}},1581:(e,t,n)=>{"use strict";const o=n(9160);var i={name:"Static Data",docs:"https://docs.noodl.net/nodes/data/array/static-array",displayNodeName:"Static Array",shortDesc:"Store static data to populate a Collection with items.",category:"Data",color:"data",nodeDoubleClickAction:[{focusPort:"JSON"},{focusPort:"CSV"}],getInspectInfo(){if(this._internal.collection)return[{type:"value",value:this._internal.collection.items}]},dynamicports:[{name:"conditionalports/extended",condition:"type = csv OR type NOT SET",inputs:["csv"]},{name:"conditionalports/extended",condition:"type = json",inputs:["json"]}],inputs:{type:{type:{name:"enum",enums:[{label:"CSV",value:"csv"},{label:"JSON",value:"json"}],allowEditOnly:!0},displayName:"Type",group:"General",default:"csv",set:function(e){this._internal.type=e}},csv:{type:{name:"string",codeeditor:"text",allowEditOnly:!0},displayName:"CSV",group:"General",set:function(e){this._internal.csv=e,this.scheduleParseData()}},json:{type:{name:"string",codeeditor:"json",allowEditOnly:!0},displayName:"JSON",group:"General",set:function(e){this._internal.json=e,this.scheduleParseData()}}},outputs:{items:{type:"array",displayName:"Items",group:"General",getter:function(){return this._internal.collection}},count:{type:"number",displayName:"Count",group:"General",get(){return this._internal.collection?this._internal.collection.size():0}}},methods:{scheduleParseData:function(){var e=this._internal;e.hasScheduledParseData||(e.hasScheduledParseData=!0,this.scheduleAfterInputsHaveUpdated(this.parseData.bind(this)))},parseData:function(){var e=this._internal;if(e.hasScheduledParseData=!1,e.collection=o.get(),void 0===e.type||"csv"===e.type){for(var t=function(e,t){t=t||",";for(var n,o=new RegExp("(\\"+t+'|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\'+t+"\\r\\n]*))","gi"),i=[[]],r=null;(r=o.exec(e))&&n!==o.lastIndex;){n=o.lastIndex;var s,a=r[1];a.length&&a!==t&&i.push([]),s=r[2]?r[2].replace(new RegExp('""',"g"),'"'):r[3],i[i.length-1].push(s)}return i}(e.csv),n=[],i=t[0],r=1;r<t.length;r++){for(var s=t[r],a={},l=0;l<i.length;l++)a[i[l]]=s[l];n.push(a)}e.collection.set(n),this.flagOutputDirty("items"),this.flagOutputDirty("count")}else if("json"===e.type){this.context.editorConnection&&this.context.editorConnection.clearWarning(this.nodeScope.componentOwner.name,this.id,"json-parse-warning");try{const t=JSON.parse(e.json);e.collection.set(t),this.flagOutputDirty("items"),this.flagOutputDirty("count")}catch(e){this.context.editorConnection&&this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"json-parse-warning",{showGlobally:!0,message:e.message})}}}}};e.exports={node:i}},7784:(e,t,n)=>{"use strict";const{Node:o}=n(3948);var i=n(3839),r={name:"Variable2",displayNodeName:"Variable",docs:"https://docs.noodl.net/nodes/data/variable/variable-node",category:"Data",usePortAsLabel:"name",color:"data",initialize:function(){var e=this,t=this._internal;this._internal.onModelChangedCallback=function(n){e.isInputConnected("fetch")||n.name!==t.name||(e.sendSignalOnOutput("changed"),e.flagOutputDirty("value"))},t.variablesModel=i.get("--ndl--global-variables"),t.variablesModel.on("change",this._internal.onModelChangedCallback)},getInspectInfo(){return this._internal.name?this._internal.variablesModel.get(this._internal.name):"[No value set]"},outputs:{name:{type:"string",displayName:"Name",group:"General",getter:function(){return this._internal.name}},changed:{type:"signal",displayName:"Changed",group:"Events"},fetched:{type:"signal",displayName:"Fetched",group:"Events"},value:{type:"*",displayName:"Value",group:"General",getter:function(){var e=this._internal;if(e.name)return e.variablesModel.get(e.name)}}},inputs:{name:{type:{name:"string",identifierOf:"VariableName",identifierDisplayName:"Variable names"},displayName:"Name",group:"General",set:function(e){!1===this.isInputConnected("fetch")?this.setVariableName(e):(this._internal.name=e,this.flagOutputDirty("name"))}},fetch:{displayName:"Fetch",group:"Actions",valueChangedToTrue:function(){this.setVariableName(this._internal.name)}},value:{type:"*",displayName:"Value",group:"General",set:function(e){this._internal.value=e,this.scheduleStore()}}},prototypeExtensions:{scheduleStore:function(){if(!this.hasScheduledStore){this.hasScheduledStore=!0;var e=this._internal;this.scheduleAfterInputsHaveUpdated((function(){this.hasScheduledStore=!1,e.variablesModel.set(e.name,e.value)}))}},setVariableName:function(e){this._internal.name=e,this.flagOutputDirty("name"),this.flagOutputDirty("value"),this.sendSignalOnOutput("fetched")},_onNodeDeleted:function(){o.prototype._onNodeDeleted.call(this),this._internal.variablesModel.off("change",this._internal.onModelChangedCallback)}}};e.exports={node:r}},7991:(e,t,n)=>{"use strict";const{Node:o}=n(3948),i={name:"Event Receiver",docs:"https://docs.noodl.net/nodes/events/receive-event",displayNodeName:"Receive Event",category:"Events",usePortAsLabel:"channelName",color:"component",initialize:function(){var e=this._internal;e.outputValues={},e.outputNames=[],e.eventReceived=!1,e._isEnabled=!0,e.channelName=""},inputs:{enabled:{displayName:"Enabled",type:"boolean",default:!0,set:function(e){this._internal._isEnabled=!!e}},consume:{displayName:"Consume",type:{name:"enum",enums:[{label:"Never",value:"never"},{label:"Always",value:"always"}]},default:"never",set:function(e){this._internal.consume=e}},channelName:{type:{name:"string",identifierOf:"EventChannelName"},displayName:"Channel",set:function(e){this._internal.onEventReceivedCallback&&(this.context.eventSenderEmitter.removeListener(this._internal.channelName,this._internal.onEventReceivedCallback),this._internal.onEventReceivedCallback=null),this._internal.channelName=e,this.registerListenersForChannel(e)}}},outputs:{eventReceived:{displayName:"Received",type:"signal"}},prototypeExtensions:{registerOutputIfNeeded:function(e){if(!this.hasOutput(e)){var t=this;this._internal.outputNames.push(e),this.registerOutput(e,{getter:function(){return t._internal.outputValues[e]}})}},handleEvent:function(e){if(!1!==this._internal._isEnabled){for(var t in this.sendSignalOnOutput("eventReceived"),e)this.hasOutput(t)&&(this._internal.outputValues[t]=e[t],this.flagOutputDirty(t));return"always"===this._internal.consume}},onEventReceived:function(e){this.handleEvent(e)},_onNodeDeleted:function(){o.prototype._onNodeDeleted.call(this),this._internal.onEventReceivedCallback&&this.context.eventSenderEmitter.removeListener(this._internal.channelName,this._internal.onEventReceivedCallback)},registerListenersForChannel:function(e){var t=this.context.eventSenderEmitter;this._internal.onEventReceivedCallback=this.onEventReceived.bind(this),t.on(e,this._internal.onEventReceivedCallback);var n=this;this.context.eventEmitter.once("applicationDataReloaded",(function(){n._internal.onEventReceivedCallback&&t.removeListener(e,n._internal.onEventReceivedCallback)}))},getChannelName:function(){return this._internal.channelName}}};e.exports={node:i},e.exports={node:i,setup:function(e,t){function n(n){var o=n.parameters.channelName;function i(){var i=t.getNodesWithType("Event Sender").filter((e=>e.parameters.channelName===o)),r={};i.forEach((e=>{const t=e.parameters.payload?e.parameters.payload.split(","):[];for(let e of t)r[e]=!0}));var s=[];for(var a in r)s.push({name:a,type:"*",plug:"output",displayName:a});e.editorConnection.sendDynamicPorts(n.id,s,{detectRenamed:{plug:"output"}})}function r(e){e.on("inputPortAdded",(function(e){i()})),e.on("inputPortRemoved",(function(e){i()})),e.on("parameterUpdated",(function(e){"channelName"===e.name&&i()}))}i(),n.on("parameterUpdated",(function(e){"channelName"===e.name&&(o=e.value,i())})),t.getNodesWithType("Event Sender").forEach(r),t.on("nodeAdded.Event Sender",r),t.on("nodeRemoved.Event Sender",(e=>{i()}))}e.editorConnection&&e.editorConnection.isRunningLocally()&&t.on("editorImportComplete",(()=>{t.on("nodeAdded.Event Receiver",(e=>n(e))),t.getNodesWithType("Event Receiver").forEach((e=>n(e)))}))}}},4091:e=>{"use strict";function t(e,t,n){var o=[],i=t.payload;if(i){i=i.split(",");for(const e of i)o.push({type:{name:"*",allowConnectionsOnly:!0},plug:"input",group:"Payload",name:e,displayName:e})}n.sendDynamicPorts(e,o,{detectRenamed:{plug:"input"}})}e.exports={node:{name:"Event Sender",docs:"https://docs.noodl.net/nodes/events/send-event",displayNodeName:"Send Event",category:"Events",usePortAsLabel:"channelName",color:"component",exportDynamicPorts:!0,initialize:function(){this._internal.inputValues={},this._internal.channelName="",this._internal.propagation="global"},inputs:{sendEvent:{displayName:"Send",valueChangedToTrue:function(){var e=this;this.scheduleAfterInputsHaveUpdated((function(){"global"===e._internal.propagation?e.context.sendGlobalEventFromEventSender(e._internal.channelName,e._internal.inputValues):e.nodeScope.sendEventFromThisScope(e._internal.channelName,e._internal.inputValues,e._internal.propagation)}))}},channelName:{type:{name:"string",allowEditOnly:!0,identifierOf:"EventChannelName",identifierDisplayName:"Event Channels"},default:"",group:"Settings",displayName:"Channel Name",set:function(e){this._internal.channelName=e,this._internal.inputValues._channelName=e}},propagation:{type:{name:"enum",enums:[{value:"global",label:"Global"},{value:"parent",label:"Parent"},{value:"children",label:"Children"},{value:"siblings",label:"Siblings"}]},default:"global",group:"Settings",displayName:"Send to",set:function(e){this._internal.propagation=e}},payload:{type:{name:"stringlist",allowEditOnly:!0},group:"Payload"}},prototypeExtensions:{registerInputIfNeeded:{value:function(e){if(!this.hasInput(e)){var t=this;this.registerInput(e,{set:function(n){t._internal.inputValues[e]=n}})}}}}},setup:function(e,n){e.editorConnection&&e.editorConnection.isRunningLocally()&&n.on("nodeAdded.Event Sender",(function(n){t(n.id,n.parameters,e.editorConnection),n.on("parameterUpdated",(function(o){t(n.id,n.parameters,e.editorConnection)}))}))}}},4885:(e,t,n)=>{"use strict";const o=n(3948).Node,i=n(5995),{logJavaScriptNodeError:r}=n(5722),s=n(1436);var a={name:"Javascript2",docs:"https://docs.noodl.net/nodes/javascript/script",displayNodeName:"Script",category:"CustomCode",color:"javascript",nodeDoubleClickAction:{focusPort:"Code"},searchTags:["javascript"],exportDynamicPorts:!0,initialize:function(){var e=this._internal;e.inputValues={},e.outputValues={},e.outputProperties={},e.runScheduled=!1,e.setupScheduled=!1,e.runNextFrameScheduled=!1,e.isWaitingForExternalFileToLoad=!1,e.useExternalFile=!1,e.runFunction=void 0,e.destroyFunction=void 0,e.setupFunction=void 0,e.hasParsedCode=!1,e.changedInputs={},e.signalScheduled={},e.killed=!1,e.inputQueue=[];var t=this;e.userFunctionScope={createComponent:e=>(e&&e.length>0&&"/"!==e[0]&&(e="/"+e),t.nodeScope.createNode(e,s())),deleteComponent(e){t.nodeScope.deleteNode(e)},flagOutputDirty:function(e){if(!e)throw new Error("Output port name must be specified");t.flagOutputDirty(e)},runNextFrame:function(){e.runNextFrameScheduled||(e.runNextFrameScheduled=!0,t.context.scheduleNextFrame((function(){e.runNextFrameScheduled=!1,e.killed||u.call(t)})))},sendSignalOnOutput:function(e){t.sendSignalOnOutput(e)}},e.onFrameStart=c.bind(this)},dynamicports:[{condition:"useExternalFile = no OR useExternalFile NOT SET",inputs:["code"]},{condition:"useExternalFile = yes",inputs:["externalFile"]}],inputs:{scriptInputs:{type:{name:"proplist",allowEditOnly:!0},group:"Script Inputs",set:function(e){}},scriptOutputs:{type:{name:"proplist",allowEditOnly:!0},group:"Script Outputs",set:function(e){}},useExternalFile:{type:{name:"enum",enums:[{value:"yes",label:"Yes"},{value:"no",label:"No"}],allowEditOnly:!0},default:"no",displayName:"Use External File",group:"Code",set:function(e){this._internal.isWaitingForExternalFileToLoad="yes"===e,this._internal.useExternalFile="yes"===e}},code:{displayName:"Code",group:"Code",type:{name:"string",allowEditOnly:!0,codeeditor:"javascript"},default:"",set:function(e){if(e){var t=this;this.scheduleAfterInputsHaveUpdated((function(){if(!1===this._internal.useExternalFile){this._callDestroyFunction();var n=i.createFromCode(e,{node:this});t._onCodeParsed(n)}}))}}},externalFile:{displayName:"File Path",group:"Code",type:{name:"source",allowEditOnly:!0},set:function(e){if(!1!==this._internal.useExternalFile){var t=this;i.createFromURL(e,(function(e){t._internal.isWaitingForExternalFileToLoad=!1,t._onCodeParsed(e)}),{node:this})}}}},prototypeExtensions:{_onNodeDeleted:function(){o.prototype._onNodeDeleted.call(this),this._internal.killed=!0,this._callDestroyFunction()},update:function(){!0===this._internal.isWaitingForExternalFileToLoad?this._dirty=!1:o.prototype.update.call(this)},_onCodeParsed:function(e){const t=this.context.editorConnection;if(t)for(const e of["js-destroy-waring","js-run-waring","js-setup-waring"])t.clearWarning(this.nodeScope.componentOwner.name,this.id,e);if(!e.error){if(Object.keys(this.model.inputPorts).forEach((e=>{const t=this.model.inputPorts[e].type;"color"!==t&&"color"!==t.name||(this._internal.inputValues[e]=void 0,this.hasInput(e)?this.getInput(e).type="color":this.registerInput(e,{type:"color",set:h.bind(this,e)}))})),Object.keys(this.model.outputPorts).forEach((e=>{this.registerOutputIfNeeded(e)})),this._internal.setupFunction=e.setup,this._internal.runFunction=e.change,this._internal.destroyFunction=e.destroy,this._internal.definedObject=e.definedObject,this._internal.setupFunction&&l.call(this),this._internal.runFunction&&u.call(this),this._internal.hasParsedCode=!0,this._internal.inputQueue){for(const{name:e,value:t}of this._internal.inputQueue)this.setInputValue(e,t);this._internal.inputQueue=void 0}e.apis.Node.Inputs=this._internal.inputValues,e.apis.Node.Outputs=this._internal.outputProperties}},registerInputIfNeeded:function(e){this.hasInput(e)||(this._internal.inputValues[e]=void 0,this.registerInput(e,{set:h.bind(this,e)}))},registerOutputIfNeeded:function(e){if(this.hasOutput(e))return;var t=this;const n="signal"===p(this.model.outputPorts[e].type);Object.defineProperty(this._internal.outputProperties,e,{set:function(o){n||(t._internal.outputValues[e]=o,t.flagOutputDirty(e))},get:function(){return n?()=>{t.hasOutput(e)&&t.sendSignalOnOutput(e)}:t._internal.outputValues[e]}}),this.registerOutput(e,{getter:g.bind(this,e)})},_callRunFunction:function(){var e=this._internal;if(e.runFunction&&!e.killed)try{e.runFunction.call(e.userFunctionScope,e.inputValues,e.outputProperties,e.changedInputs)}catch(e){r(e),this.context.editorConnection&&this.context.isWarningTypeEnabled("javascriptExecution")&&this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"js-run-waring",{showGlobally:!0,message:"<strong>run</strong>: "+e.message})}},_callSignalFunction:function(e){var t=this._internal;if(t.definedObject&&!t.killed&&t.definedObject[e]&&"function"==typeof t.definedObject[e])try{t.definedObject[e].call(t.userFunctionScope,t.inputValues,t.outputProperties)}catch(e){console.log("Error in JS node signal function code.",Object.getPrototypeOf(e).constructor.name+": "+e.message),this.context.editorConnection&&this.context.isWarningTypeEnabled("javascriptExecution")&&this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"js-run-waring",{showGlobally:!0,message:"<strong>run</strong>: "+e.message})}},_callDestroyFunction:function(){var e=this._internal;if(e.destroyFunction)try{e.destroyFunction.call(e.userFunctionScope,e.inputValues,e.outputProperties)}catch(e){console.log("Error in JS node destroy code.",Object.getPrototypeOf(e).constructor.name+": "+e.message),this.context.editorConnection&&this.context.isWarningTypeEnabled("javascriptExecution")&&this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"js-destroy-waring",{showGlobally:!0,message:"<strong>setup</strong>: "+e.message})}},_callSetupFunction:function(){var e=this._internal;if(e.setupFunction&&!e.killed)try{e.setupFunction.call(e.userFunctionScope,e.inputValues,e.outputProperties)}catch(e){console.log("Error in JS node setup code.",Object.getPrototypeOf(e).constructor.name+": "+e.message),this.context.editorConnection&&this.context.isWarningTypeEnabled("javascriptExecution")&&this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"js-setup-waring",{showGlobally:!0,message:"<strong>setup</strong>: "+e.message})}}}};function l(){this._internal.setupScheduled||(this._internal.setupScheduled=!0,this.scheduleAfterInputsHaveUpdated((function(){this._internal.killed||(this._callSetupFunction(),this._internal.setupScheduled=!1)})))}function u(){this._internal.runScheduled||this._internal.killed||(this._internal.runScheduled=!0,this.scheduleAfterInputsHaveUpdated((function(){this._internal.killed||(this._callRunFunction(),this._internal.changedInputs={},this._internal.runScheduled=!1)})))}function d(e){this._internal.signalScheduled[e]||this._internal.killed||(this._internal.signalScheduled[e]=!0,this.scheduleAfterInputsHaveUpdated((function(){this._internal.killed||(this._callSignalFunction(e),this._internal.signalScheduled[e]=!1)})))}function c(){this._internal.runNextFrame=!1,u.call(this)}function p(e){return"string"==typeof e?e:e.name}function h(e,t){!0===this._internal.hasParsedCode?void 0!==this.model.inputPorts[e]&&"signal"===p(this.model.inputPorts[e].type)?this._internal.definedObject&&"function"==typeof this._internal.definedObject[e]&&t&&d.call(this,e):(this._internal.inputValues[e]=t,this._internal.changedInputs[e]=!0,u.call(this)):this._internal.inputQueue.push({name:e,value:t})}function g(e){return this._internal.outputValues[e]}e.exports={node:a,setup:function(e,t){function n(t){function n(){var n=[];const o=[{value:"string",label:"String"},{value:"boolean",label:"Boolean"},{value:"number",label:"Number"},{value:"object",label:"Object"},{value:"array",label:"Array"}],r=[{value:"string",label:"String"},{value:"boolean",label:"Boolean"},{value:"number",label:"Number"},{value:"object",label:"Object"},{value:"array",label:"Array"},{value:"signal",label:"Signal"}];void 0!==t.parameters.scriptOutputs&&t.parameters.scriptOutputs.length>0&&t.parameters.scriptOutputs.forEach((e=>{n.push({name:"outtype-"+e.label,displayName:"Type",plug:"input",type:{name:"enum",enums:r,allowEditOnly:!0},default:"string",parent:"scriptOutputs",parentItemId:e.id}),n.push({name:e.label,plug:"output",type:t.parameters["outtype-"+e.label]||"*",group:"Outputs"})})),void 0!==t.parameters.scriptInputs&&t.parameters.scriptInputs.length>0&&t.parameters.scriptInputs.forEach((e=>{n.push({name:"intype-"+e.label,displayName:"Type",plug:"input",type:{name:"enum",enums:o,allowEditOnly:!0},default:"string",parent:"scriptInputs",parentItemId:e.id}),n.push({name:e.label,plug:"input",type:t.parameters["intype-"+e.label]||"string",group:"Inputs"})})),function(e,t,n){var o=t.editorConnection;if(e.parameters)if(e.parameters.externalFile&&"yes"===e.parameters.useExternalFile){var r=e.parameters.externalFile;i.createFromURL(r,a)}else e.parameters.code?a(i.createFromCode(e.parameters.code)):(s(),n([]));function s(){for(const t of["js-parse-waring","js-destroy-waring","js-run-waring","js-setup-waring"])o.clearWarning(e.component.name,e.id,t)}function a(t){t.error?o.sendWarning(e.component.name,e.id,"js-parse-waring",{showGlobally:!0,message:t.error}):s(),n(t.getPorts())}}(t,e,(function(o){o.forEach((e=>{n.find((t=>t.name===e.name&&t.plug===e.plug))||n.push(e)})),e.editorConnection.sendDynamicPorts(t.id,n)}))}n(),t.on("parameterUpdated",(function(e){n()}))}e.editorConnection&&e.editorConnection.isRunningLocally()&&t.on("editorImportComplete",(()=>{t.on("nodeAdded.Javascript2",(function(e){n(e)}));for(const e of t.getNodesWithType("Javascript2"))n(e)}))}}},6220:e=>{"use strict";const t={name:"Number Remapper",docs:"https://docs.noodl.net/nodes/math/number-remapper",category:"Math",initialize:function(){var e=this._internal;e._currentInputValue=0,e._remappedValue=0,e._minInputValue=0,e._maxInputValue=0,e._minOutputValue=0,e._maxOutputValue=1,e._clampOutput=!0},getInspectInfo(){return this._internal._remappedValue},inputs:{inputValue:{group:"Value to Remap",type:{name:"number",allowConnectionOnly:!0},default:0,displayName:"Input Value",set:function(e){this._internal._currentInputValue=e,this._calculateNewOutputValue()}},minInputValue:{group:"Input Parameters",type:{name:"number"},default:0,displayName:"Input Minimum",set:function(e){this._internal._minInputValue=e,this._calculateNewOutputValue()}},maxInputValue:{group:"Input Parameters",type:{name:"number"},default:0,displayName:"Input Maximum",set:function(e){this._internal._maxInputValue=e,this._calculateNewOutputValue()}},minOutputValue:{group:"Output Parameters",type:{name:"number"},default:0,displayName:"Output Minimum",set:function(e){this._internal._minOutputValue=e,this._calculateNewOutputValue()}},maxOutputValue:{group:"Output Parameters",type:{name:"number"},default:1,displayName:"Output Maximum",set:function(e){this._internal._maxOutputValue=e,this._calculateNewOutputValue()}},clamp:{group:"Output Parameters",type:{name:"boolean",allowEditOnly:!0},default:!0,displayName:"Clamp Output",set:function(e){this._internal._clampOutput=!!e,this._calculateNewOutputValue()}}},outputs:{remappedValue:{type:"number",displayName:"Remapped Value",group:"Outputs",getter:function(){return this._internal._remappedValue}}},prototypeExtensions:{_calculateNewOutputValue:{value:function(){var e,t=this._internal;e=t._maxInputValue===t._minInputValue?0:(t._currentInputValue-t._minInputValue)/(t._maxInputValue-t._minInputValue),t._clampOutput&&(e=Math.max(0,Math.min(1,e))),t._remappedValue=t._minOutputValue+e*(t._maxOutputValue-t._minOutputValue),this.flagOutputDirty("remappedValue")}}}};e.exports={node:t}},2354:e=>{"use strict";const t={name:"Open File Picker",docs:"https://docs.noodl.net/nodes/utilities/open-file-picker",category:"Utilities",getInspectInfo(){if(this._internal.file)return this._internal.file.path},initialize(){const e=document.createElement("input");e.type="file",this._internal.inputElement=e},inputs:{open:{type:"signal",displayName:"Open",group:"Actions",valueChangedToTrue(){const e=this._internal.inputElement;e.accept=this._internal.acceptedFileTypes,this._internal.capture&&(e.capture=this._internal.capture),e.onchange=t=>{this._internal.file=t.target.files[0],this.flagOutputDirty("file"),this.flagOutputDirty("path"),this.flagOutputDirty("name"),this.flagOutputDirty("sizeInBytes"),this.flagOutputDirty("type"),this.sendSignalOnOutput("success"),e.onchange=null,e.value=""},e.click()}},acceptedFileTypes:{group:"General",type:"string",displayName:"Accepted file types",set(e){this._internal.acceptedFileTypes=e}},capture:{group:"General",type:"string",displayName:"Capture",set(e){this._internal.capture=e}}},outputs:{file:{type:"*",displayName:"File",group:"General",get(){return this._internal.file}},path:{displayName:"Path",group:"Metadata",type:"string",get(){return this._internal.file&&this._internal.file.path}},name:{displayName:"Name",group:"Metadata",type:"string",get(){return this._internal.file&&this._internal.file.name}},sizeInBytes:{displayName:"Size in bytes",group:"Metadata",type:"number",get(){return this._internal.file&&this._internal.file.size}},type:{displayName:"Type",group:"Metadata",type:"string",get(){return this._internal.file&&this._internal.file.type}},success:{type:"signal",group:"Events",displayName:"Success"}}};e.exports={node:t}},4337:e=>{"use strict";const t={name:"Screen Resolution",docs:"https://docs.noodl.net/nodes/utilities/screen-resolution",category:"Utilities",initialize(){"undefined"!=typeof window&&(window.addEventListener("resize",(()=>{this._viewportSizeChanged()})),this._viewportSizeChanged())},getInspectInfo(){return this._internal.width+" x "+this._internal.height},outputs:{width:{type:"number",displayName:"Width",get(){return this._internal.width}},height:{type:"number",displayName:"Height",get(){return this._internal.height}},aspectRatio:{type:"number",displayName:"Aspect Ratio",get(){return this._internal.width/this._internal.height}}},methods:{_viewportSizeChanged(){this._internal.width=window.innerWidth,this._internal.height=window.innerHeight,this.flagAllOutputsDirty()}}};e.exports={node:t}},4213:(e,t,n)=>{"use strict";const{EdgeTriggeredInput:o}=n(3948),i=n(4442),r=n(5107),s={},a={};function l(e,t){if("transparent"===t||!t)return void(e[3]=0);const n=(t.length-1)/2;for(let o=0;o<n;++o){const n=1+2*o;e[o]=parseInt(t.substring(n,n+2),16)}}function u(e){var t=e.toString(16);return 1==t.length?"0"+t:t}function d(e){return"#"+u(e[0])+u(e[1])+u(e[2])+u(e[3])}const c={name:"States",docs:"https://docs.noodl.net/nodes/utilities/logic/states",shortDesc:"Define states with values and this node can interpolate between these values when the state is changed.",category:"Animation",initialize:function(){var e=this,t=this._internal;t.useTransitions=!0,t.currentValues={},t.stateParameters={},t.stateParameterTypes={},t.startValues={},t.bezierEaseCurves={},t.transitionFuncs={},t.valuesAreInitialised=!1,t.animation=this.context.timerScheduler.createTimer({duration:300,ease:i.easeOut,onStart:function(){t.values;var n=t.startValues,o=t.stateParameters,i=t.stateParameterTypes,r="value-"+t.state+"-";for(var s in this.targetValues={},this.startValues={},this.valueTypes={},this.transitionCurves)"number"===i["type-"+s]||void 0===i["type-"+s]?(this.valueTypes[s]="number",this.startValues[s]=n[s],this.targetValues[s]=o[r+s]||0):"color"===i["type-"+s]&&(this.valueTypes[s]="color",this.startValues[s]=[0,0,0,255],l(this.startValues[s],e.context.styles.resolveColor(n[s]||"#000000")),this.targetValues[s]=[0,0,0,255],l(this.targetValues[s],e.context.styles.resolveColor(o[r+s]||"#000000")))},onRunning:function(n){var o=n*this.duration,r=t.currentValues,s=[0,0,0,255];for(var a in this.transitionCurves){var l=this.transitionCurves[a];if(o<l.delay)r[a]=this.startValues[a];else if(o>=l.delay+l.dur)r[a]="color"===this.valueTypes[a]?d(this.targetValues[a]):this.targetValues[a];else{var u=t.transitionFuncs[a].get((o-l.delay)/l.dur);if("number"===this.valueTypes[a])r[a]=i.linear(Number(this.startValues[a]),Number(this.targetValues[a]),u);else if("color"===this.valueTypes[a]){let e=this.startValues[a],t=this.targetValues[a];s[0]=Math.floor(i.linear(e[0],t[0],u)),s[1]=Math.floor(i.linear(e[1],t[1],u)),s[2]=Math.floor(i.linear(e[2],t[2],u)),s[3]=Math.floor(i.linear(e[3],t[3],u)),r[a]=d(s)}}e.flagOutputDirty(a)}},onFinish:function(){var n="reached-"+t.state;e.hasOutput(n)&&e.sendSignalOnOutput(n)}})},getInspectInfo(){return`Current state: ${this._internal.state}`},inputs:{states:{type:{name:"stringlist",allowEditOnly:!0},displayName:"States",group:"States",set:function(e){if(this._internal.states=e?e.split(","):[],this._internal.states.length>0){var t=this;t._internal.state||this.scheduleGoToState(t._internal.startState||t._internal.states[0])}}},values:{type:{name:"stringlist",allowEditOnly:!0},displayName:"Values",group:"Values",set:function(e){var t=this._internal;for(var n in t.values=e.split(","),t.values)this.registerOutputIfNeeded(t.values[n])}},toggle:{group:"Go to state",displayName:"Toggle",valueChangedToTrue:function(){var e=this._internal;if(e.states){var t=(e.states.indexOf(e.state)+1)%e.states.length;this.scheduleGoToState(e.states[t])}}},useTransitions:{type:"boolean",displayName:"Use Transitions",group:"General",default:!0,set:function(e){this._internal.useTransitions=e}}},outputs:{currentState:{type:"string",displayName:"State",group:"Current State",getter:function(){return this._internal.state}},stateChanged:{type:"signal",displayName:"State Changed",group:"Current State"}},prototypeExtensions:{registerOutputIfNeeded:function(e){var t=this._internal;this.hasOutput(e)||this.registerOutput(e,{getter:function(){return t.currentValues[e]}})},registerInputIfNeeded:function(e){var t=this,n=this._internal;if(!this.hasInput(e))if(0===e.indexOf("to-")){var i=e.substring(3);this.registerInput(e,{set:o.createSetter({valueChangedToTrue:function(){this.scheduleGoToState(i)}})})}else if("startState"===e)this.registerInput(e,{set:function(e){this._internal.startState=e,this.scheduleGoToState(e)}});else if("currentState"===e)this.registerInput(e,{set:this.scheduleGoToState.bind(this)});else if(0===e.indexOf("type-"))this.registerInput(e,{set:function(t){n.stateParameterTypes[e]=t}});else if(0===e.indexOf("value-")){var r=e.split("-"),s=(i=r[1],r[2]);this.registerInput(e,{set:function(o){n.stateParameters[e]=o,n.state===i&&(n.currentValues[s]=o,t.flagOutputDirty(s))}})}else 0===e.search(/duration-/g)?this.registerInput(e,{set:function(t){n.stateParameters[e]=t}}):0===e.search(/transition/g)&&(i=e.substring(11),this.registerInput(e,{set:function(t){n.stateParameters[e]=t}}))},setCurrentState:function(e){this.scheduleGoToState(e)},jumpToState:function(e){var t=this._internal;if(t.states&&(e||(e=t.states[0]),t.state!==e)){t.animation.stop();var n="value-"+e+"-";for(var o in t.values){var i=t.values[o];t.currentValues[i]=t.stateParameters[n+i]||0,this.flagOutputDirty(i)}t.state=e,this.flagOutputDirty("currentState"),t.valuesAreInitialised&&this.sendSignalOnOutput("stateChanged"),t.valuesAreInitialised=!0,this.updateAtStatePorts()}},scheduleGoToState:function(e){var t=this;this._internal.goToState=e,this.hasScheduledGoToState||(this.hasScheduledGoToState=!0,this.scheduleAfterInputsHaveUpdated((function(){t.hasScheduledGoToState=!1,t.goToState(t._internal.goToState)})))},goToState:function(e){var t=this._internal;if(t.states&&(e||(e=t.states[0]),t.state!==e))if(t.valuesAreInitialised){var n=0,o=0,i={};for(var s in t.values){var a=t.values[s];t.startValues[a]=t.currentValues[a];const d=t.stateParameterTypes["type-"+a];if("boolean"===d){var l=t.stateParameters["value-"+e+"-"+a];t.currentValues[a]=void 0!==l&&!!l,this.flagOutputDirty(a)}else if("string"===d||"textStyle"===d)t.currentValues[a]=t.stateParameters["value-"+e+"-"+a],this.flagOutputDirty(a);else{var u=t.stateParameters["transition-"+e+"-"+a];u||(u=t.stateParameters["transitiondef-"+e]||{curve:[0,0,.58,1],dur:300,delay:0}),0===u.dur&&0===u.delay||!t.useTransitions?(t.currentValues[a]=t.stateParameters["value-"+e+"-"+a],this.flagOutputDirty(a)):(t.transitionFuncs[a]=r(u.curve),i[a]=u,n=Math.min(n,u.delay),o=Math.max(o,u.dur+u.delay))}}if((o>0||n>0)&&(t.animation.transitionCurves=i,t.animation.duration=o,t.animation.delay=n,t.animation.start()),t.state=e,this.flagOutputDirty("currentState"),this.sendSignalOnOutput("stateChanged"),this.updateAtStatePorts(),0==o&&0==n){var d="reached-"+t.state;this.hasOutput(d)&&this.sendSignalOnOutput(d)}}else this.jumpToState(e)},updateAtStatePorts:function(){var e=this._internal,t=e.states;for(var n in t){var o=t[n],i="at-"+o;e.currentValues[i]=e.state===o,this.hasOutput(i)&&this.flagOutputDirty(i)}}}};function p(e,t){if(e&&t&&e.length===t.length){for(var n={},o=0;o<e.length;o++){if(-1===t.indexOf(e[o])){if(n.before)return;n.before=e[o]}if(-1===e.indexOf(t[o])){if(n.after)return;n.after=t[o]}}return n.before&&n.after?n:void 0}}function h(e,t,n){var o=t.states,i=t.values,r=[];for(var l in i=i?i.split(","):void 0){var u=i[l];r.push({type:{name:t["type-"+u]||"number",allowConnectionsOnly:!0},plug:"output",group:"Values",name:u}),r.push({type:{name:"enum",enums:[{label:"Number",value:"number"},{label:"String",value:"string"},{label:"Boolean",value:"boolean"},{label:"Color",value:"color"},{label:"Text Style",value:"textStyle"}],allowEditOnly:!0},default:"number",plug:"input",group:"Types",displayName:u,name:"type-"+u})}(o=o?o.split(","):void 0)&&o.forEach((function(e){i&&i.forEach((function(n){r.push({plug:"input",type:t["type-"+n]||"number",group:e+" Values",name:"value-"+e+"-"+n,displayName:n,editorName:e+"|"+n})})),i&&!1!==t.useTransitions&&(r.push({plug:"input",type:"curve",displayName:"Default",default:{curve:[0,0,.58,1],dur:300,delay:0},group:e+" Transitions",name:"transitiondef-"+e}),i.forEach((function(n){void 0!==t["type-"+n]&&"number"!==t["type-"+n]&&"color"!==t["type-"+n]||r.push({plug:"input",type:{name:"curve"},default:t["transitiondef-"+e]||{curve:[0,0,.58,1],dur:300,delay:0},group:e+" Transitions",name:"transition-"+e+"-"+n,displayName:n,editorName:"Transition "+e+"|"+n})}))),r.push({plug:"input",type:{name:"signal",allowConnectionsOnly:!0},displayName:"To "+e,name:"to-"+e,group:"Go to state"}),r.push({plug:"output",type:"boolean",displayName:"At "+e,name:"at-"+e,group:"Current state"}),r.push({plug:"output",type:"signal",displayName:"Has Reached "+e,name:"reached-"+e,group:"Current state"})})),o&&r.push({plug:"input",type:{name:"enum",enums:o},group:"States",displayName:"State",name:"currentState",default:t.startState||o[0]});var d=p(s[e],o);s[e]=o;var c=p(a[e],i);let h;a[e]=i,d?(h={plug:"input",before:d.before,after:d.after,patterns:["transition-{{*}}","to-{{*}}","at-{{*}}","reached-{{*}}"]},i&&i.forEach((function(e){h.patterns.push("value-{{*}}-"+e)}))):c&&(h=[{plug:"output",before:c.before,after:c.after,patterns:["{{*}}"]},{plug:"input",before:c.before,after:c.after,patterns:["type-{{*}}"]},{plug:"input",before:c.before,after:c.after,patterns:o?o.map((function(e){return"value-"+e+"-{{*}}"})):void 0}]),n.sendDynamicPorts(e,r,{renamed:h})}e.exports={node:c,setup:function(e,t){e.editorConnection&&e.editorConnection.isRunningLocally()&&t.on("nodeAdded.States",(function(t){t.parameters.states&&h(t.id,t.parameters,e.editorConnection),t.on("parameterUpdated",(function(n){("useTransitions"===n.name||"states"===n.name||"values"===n.name||n.name.startsWith("transition")||n.name.startsWith("type-"))&&h(t.id,t.parameters,e.editorConnection)}))}))}}},2500:e=>{"use strict";const t={name:"Switch",docs:"https://docs.noodl.net/nodes/logic/switch",category:"Logic",initialize(){this._internal.state=!1,this._internal.initialized=!1},getInspectInfo(){return this._internal.state},inputs:{on:{displayName:"On",group:"Change State",valueChangedToTrue(){!0!==this._internal.state&&(this._internal.state=!0,this.flagOutputDirty("state"),this.emitSignals())}},off:{displayName:"Off",group:"Change State",valueChangedToTrue(){!1!==this._internal.state&&(this._internal.state=!1,this.flagOutputDirty("state"),this.emitSignals())}},flip:{displayName:"Flip",group:"Change State",valueChangedToTrue(){this._internal.state=!this._internal.state,this.flagOutputDirty("state"),this.emitSignals()}},onFromStart:{type:"boolean",displayName:"State",group:"General",default:!1,set(e){this._internal.state=!!e,this.flagOutputDirty("state"),this.emitSignals()}}},outputs:{state:{type:"boolean",displayName:"Current State",getter(){return this._internal.state}},switched:{displayName:"Switched",type:"signal",group:"Signals"},switchedToOn:{displayName:"Switched To On",type:"signal",group:"Signals"},switchedToOff:{displayName:"Switched To Off",type:"signal",group:"Signals"}},prototypeExtensions:{emitSignals(){!0===this._internal.state?this.sendSignalOnOutput("switchedToOn"):this.sendSignalOnOutput("switchedToOff"),this.sendSignalOnOutput("switched")}}};e.exports={node:t}},349:e=>{"use strict";const t={name:"Timer",docs:"https://docs.noodl.net/nodes/utilities/delay",displayName:"Delay",category:"Utilities",nodeDoubleClickAction:{focusPort:"duration"},initialize:function(){var e=this;this._internal._animation=this.context.timerScheduler.createTimer({duration:0,onStart:function(){e.sendSignalOnOutput("timerStarted")},onFinish:function(){e.sendSignalOnOutput("timerFinished")}}),this.addDeleteListener((()=>{this._internal._animation.stop()}))},getInspectInfo(){return this._internal._animation.isRunning()?Math.floor(this._internal._animation.durationLeft()/10)/100+" seconds":"Not running"},inputs:{start:{displayName:"Start",valueChangedToTrue:function(){!1===this._internal._animation._isRunning&&this._internal._animation.start()}},restart:{displayName:"Restart",valueChangedToTrue:function(){this._internal._animation.start()}},duration:{type:"number",displayName:"Duration",default:0,set:function(e){this._internal._animation.duration=e}},startDelay:{type:"number",displayName:"Start Delay",default:0,set:function(e){this._internal._animation.delay=e}},stop:{displayName:"Stop",valueChangedToTrue:function(){this._internal._animation.stop()}}},outputs:{timerStarted:{type:"signal",displayName:"Started"},timerFinished:{type:"signal",displayName:"Finished"}}};e.exports={node:t}},6697:(e,t,n)=>{"use strict";const o=n(4497),i=n(4007),r={name:"Upload File",docs:"https://docs.noodl.net/nodes/data/cloud-data/upload-file",category:"Cloud Services",color:"data",getInspectInfo(){return this._internal.response},inputs:{file:{group:"General",displayName:"File",type:"*",set(e){this._internal.file=e}},upload:{type:"signal",displayName:"Upload",group:"Actions",valueChangedToTrue(){this.scheduleAfterInputsHaveUpdated((()=>{const e=this._internal.file;e?i.instance.uploadFile({file:e,onUploadProgress:e=>{this._internal.progressTotal=e.total,this._internal.progressLoaded=e.loaded,this.flagOutputDirty("progressTotalBytes"),this.flagOutputDirty("progressLoadedBytes"),this.flagOutputDirty("progressLoadedPercent"),this.sendSignalOnOutput("progressChanged")},success:e=>{this._internal.cloudFile=new o(e),this.flagOutputDirty("cloudFile"),this.sendSignalOnOutput("success")},error:e=>this.setError(e)}):this.setError("No file specified")}))}}},outputs:{cloudFile:{group:"General",displayName:"Cloud File",type:"cloudfile",get(){return this._internal.cloudFile}},success:{group:"Events",displayName:"Success",type:"signal"},failure:{group:"Events",displayName:"Failure",type:"signal"},error:{type:"string",displayName:"Error",group:"Error",get(){return this._internal.error}},errorStatus:{type:"number",displayName:"Error Status Code",group:"Error",get(){return this._internal.errorStatus}},progressChanged:{type:"signal",displayName:"Progress Changed",group:"Events"},progressTotalBytes:{type:"number",displayName:"Total Bytes",group:"Progress",get(){return this._internal.progressTotal}},progressLoadedBytes:{type:"number",displayName:"Uploaded Bytes",group:"Progress",get(){return this._internal.progressLoaded}},progressLoadedPercent:{type:"number",displayName:"Uploaded Percent",group:"Progress",get(){return this._internal.progressTotal?this._internal.progressLoaded/this._internal.progressTotal*100:0}}},methods:{setError(e){this._internal.error=e.hasOwnProperty("error")?e.error:e,this._internal.errorStatus=e.code||e.status||0,this.flagOutputDirty("error"),this.flagOutputDirty("errorStatus"),this.sendSignalOnOutput("failure")}}};e.exports={node:r}},4139:(e,t,n)=>{"use strict";const o=n(4864),i={name:"net.noodl.user.LogIn",docs:"https://docs.noodl.net/nodes/data/user/log-in",displayNodeName:"Log In",category:"Cloud Services",color:"data",outputs:{success:{type:"signal",displayName:"Success",group:"Events"},failure:{type:"signal",displayName:"Failure",group:"Events"},error:{type:"string",displayName:"Error",group:"Error",getter(){return this._internal.error}}},inputs:{login:{displayName:"Do",group:"Actions",valueChangedToTrue(){this.scheduleLogIn()}},username:{displayName:"Username",type:"string",group:"General",set(e){this._internal.username=e}},password:{displayName:"Password",type:"string",group:"General",set(e){this._internal.password=e}}},methods:{setError(e){this._internal.error=e,this.flagOutputDirty("error"),this.sendSignalOnOutput("failure"),this.context.editorConnection&&this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"user-login-warning",{message:e,showGlobally:!0})},clearWarnings(){this.context.editorConnection&&this.context.editorConnection.clearWarning(this.nodeScope.componentOwner.name,this.id,"user-login-warning")},scheduleLogIn(){!0!==this.logInScheduled&&(this.logInScheduled=!0,this.scheduleAfterInputsHaveUpdated((()=>{this.logInScheduled=!1,o.instance.logIn({username:this._internal.username,password:this._internal.password,success:()=>{this.sendSignalOnOutput("success")},error:e=>{this.setError(e)}})})))}}};e.exports={node:i,setup(e,t){}}},3357:(e,t,n)=>{"use strict";const o=n(4864),i={name:"net.noodl.user.LogOut",docs:"https://docs.noodl.net/nodes/data/user/log-out",displayNodeName:"Log Out",category:"Cloud Services",color:"data",outputs:{success:{type:"signal",displayName:"Success",group:"Events"},failure:{type:"signal",displayName:"Failure",group:"Events"},error:{type:"string",displayName:"Error",group:"Error",getter(){return this._internal.error}}},inputs:{login:{displayName:"Do",group:"Actions",valueChangedToTrue(){this.scheduleLogOut()}}},methods:{setError(e){this._internal.error=e,this.flagOutputDirty("error"),this.sendSignalOnOutput("failure"),this.context.editorConnection&&this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"user-login-warning",{message:e,showGlobally:!0})},clearWarnings(){this.context.editorConnection&&this.context.editorConnection.clearWarning(this.nodeScope.componentOwner.name,this.id,"user-login-warning")},scheduleLogOut(){!0!==this.logOutScheduled&&(this.logOutScheduled=!0,this.scheduleAfterInputsHaveUpdated((()=>{this.logOutScheduled=!1,o.instance.logOut({success:()=>{this.sendSignalOnOutput("success")},error:e=>{this.setError(e)}})})))}}};e.exports={node:i,setup(e,t){}}},3784:(e,t,n)=>{"use strict";const{Node:o,EdgeTriggeredInput:i}=n(3948),r=n(4864);var s={name:"net.noodl.user.RequestPasswordReset",docs:"https://docs.noodl.net/nodes/data/user/request-password-reset",displayNodeName:"Request Password Reset",category:"Cloud Services",color:"data",deprecated:!0,initialize:function(){this._internal},getInspectInfo(){},outputs:{success:{type:"signal",displayName:"Success",group:"Events"},failure:{type:"signal",displayName:"Failure",group:"Events"},error:{type:"string",displayName:"Error",group:"Error",getter:function(){return this._internal.error}}},inputs:{send:{displayName:"Do",group:"Actions",valueChangedToTrue:function(){this.scheduleRequestPasswordReset()}},email:{type:"string",displayName:"Email",group:"General",set:function(e){this._internal.email=e}}},methods:{setError:function(e){this._internal.error=e,this.flagOutputDirty("error"),this.sendSignalOnOutput("failure"),this.context.editorConnection&&this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"user-send-email-verification-warning",{message:e,showGlobally:!0})},clearWarnings(){this.context.editorConnection&&this.context.editorConnection.clearWarning(this.nodeScope.componentOwner.name,this.id,"user-send-email-verification-warning")},scheduleRequestPasswordReset:function(){this._internal,!0!==this.sendScheduled&&(this.sendScheduled=!0,this.scheduleAfterInputsHaveUpdated((()=>{this.sendScheduled=!1,r.instance.requestPasswordReset({email:this._internal.email,success:()=>{this.sendSignalOnOutput("success")},error:e=>{this.setError(e)}})})))}}};e.exports={node:s,setup:function(e,t){}}},1038:(e,t,n)=>{"use strict";const{Node:o,EdgeTriggeredInput:i}=n(3948),r=n(4864);var s={name:"net.noodl.user.ResetPassword",docs:"https://docs.noodl.net/nodes/data/user/reset-password",displayNodeName:"Reset Password",category:"Cloud Services",color:"data",deprecated:!0,initialize:function(){this._internal},getInspectInfo(){},outputs:{success:{type:"signal",displayName:"Success",group:"Events"},failure:{type:"signal",displayName:"Failure",group:"Events"},error:{type:"string",displayName:"Error",group:"Error",getter:function(){return this._internal.error}}},inputs:{reset:{displayName:"Do",group:"Actions",valueChangedToTrue:function(){this.scheduleResetPassword()}},token:{type:"string",displayName:"Token",group:"General",set:function(e){this._internal.token=e}},username:{type:"string",displayName:"Username",group:"General",set:function(e){this._internal.username=e}},newPassword:{type:"string",displayName:"New Password",group:"General",set:function(e){this._internal.newPassword=e}}},methods:{setError:function(e){this._internal.error=e,this.flagOutputDirty("error"),this.sendSignalOnOutput("failure"),this.context.editorConnection&&this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"user-verify-email-warning",{message:e,showGlobally:!0})},clearWarnings(){this.context.editorConnection&&this.context.editorConnection.clearWarning(this.nodeScope.componentOwner.name,this.id,"user-verify-email-warning")},scheduleResetPassword:function(){this._internal,!0!==this.resetPasswordScheduled&&(this.resetPasswordScheduled=!0,this.scheduleAfterInputsHaveUpdated((()=>{this.resetPasswordScheduled=!1,r.instance.resetPassword({token:this._internal.token,username:this._internal.username,newPassword:this._internal.newPassword,success:()=>{this.sendSignalOnOutput("success")},error:e=>{this.setError(e)}})})))}}};e.exports={node:s,setup:function(e,t){}}},9789:(e,t,n)=>{"use strict";const{Node:o,EdgeTriggeredInput:i}=n(3948),r=n(4864);var s={name:"net.noodl.user.SendEmailVerification",docs:"https://docs.noodl.net/nodes/data/user/send-email-verification",displayNodeName:"Send Email Verification",category:"Cloud Services",color:"data",deprecated:!0,initialize:function(){this._internal},getInspectInfo(){},outputs:{success:{type:"signal",displayName:"Success",group:"Events"},failure:{type:"signal",displayName:"Failure",group:"Events"},error:{type:"string",displayName:"Error",group:"Error",getter:function(){return this._internal.error}}},inputs:{send:{displayName:"Do",group:"Actions",valueChangedToTrue:function(){this.scheduleSendEmailVerification()}},email:{type:"string",displayName:"Email",group:"General",set:function(e){this._internal.email=e}}},methods:{setError:function(e){this._internal.error=e,this.flagOutputDirty("error"),this.sendSignalOnOutput("failure"),this.context.editorConnection&&this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"user-send-email-verification-warning",{message:e,showGlobally:!0})},clearWarnings(){this.context.editorConnection&&this.context.editorConnection.clearWarning(this.nodeScope.componentOwner.name,this.id,"user-send-email-verification-warning")},scheduleSendEmailVerification:function(){this._internal,!0!==this.sendScheduled&&(this.sendScheduled=!0,this.scheduleAfterInputsHaveUpdated((()=>{this.sendScheduled=!1,r.instance.sendEmailVerification({email:this._internal.email,success:()=>{this.sendSignalOnOutput("success")},error:e=>{this.setError(e)}})})))}}};e.exports={node:s,setup:function(e,t){}}},7706:(e,t,n)=>{"use strict";const o=n(4864),i={name:"net.noodl.user.SignUp",docs:"https://docs.noodl.net/nodes/data/user/sign-up",displayNodeName:"Sign Up",category:"Cloud Services",color:"data",initialize(){this._internal.userProperties={}},outputs:{success:{type:"signal",displayName:"Success",group:"Events"},failure:{type:"signal",displayName:"Failure",group:"Events"},error:{type:"string",displayName:"Error",group:"Error",getter(){return this._internal.error}}},inputs:{signup:{displayName:"Do",group:"Actions",valueChangedToTrue(){this.scheduleSignUp()}},username:{displayName:"Username",type:"string",group:"General",set(e){this._internal.username=e}},password:{displayName:"Password",type:"string",group:"General",set(e){this._internal.password=e}},email:{displayName:"Email",type:"string",group:"General",set(e){this._internal.email=e}}},methods:{setError(e){this._internal.error=e,this.flagOutputDirty("error"),this.sendSignalOnOutput("failure"),this.context.editorConnection&&this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"user-login-warning",{message:e,showGlobally:!0})},clearWarnings(){this.context.editorConnection&&this.context.editorConnection.clearWarning(this.nodeScope.componentOwner.name,this.id,"user-login-warning")},scheduleSignUp(){const e=this._internal;!0!==this.signUpScheduled&&(this.signUpScheduled=!0,this.scheduleAfterInputsHaveUpdated((()=>{this.signUpScheduled=!1,o.instance.signUp({username:this._internal.username,password:this._internal.password,email:this._internal.email,properties:e.userProperties,success:()=>{this.sendSignalOnOutput("success")},error:e=>{this.setError(e)}})})))},setUserProperty(e,t){this._internal.userProperties[e]=t},registerInputIfNeeded(e){if(!this.hasInput(e))return e.startsWith("prop-")?this.registerInput(e,{set:this.setUserProperty.bind(this,e.substring(5))}):void 0}}};function r(e,t,n,o){var i=[];if(o){var r=o.find((e=>"_User"===e.name));if(r&&r.schema&&r.schema.properties){var s=r.schema.properties;const e=["authData","password","username","createdAt","updatedAt","emailVerified","email"];for(var a in s)if(-1===e.indexOf(a)){var l=s[a];if(!i.find((e=>e.name===a)))if("Relation"===l.type);else{const e={String:"string",Boolean:"boolean",Number:"number",Date:"date"};i.push({type:{name:e[l.type]?e[l.type]:"*"},plug:"input",group:"Properties",name:"prop-"+a,displayName:a})}}}}n.sendDynamicPorts(e,i)}e.exports={node:i,setup(e,t){function n(n){r(n.id,n.parameters,e.editorConnection,t.getMetaData("systemCollections")),n.on("parameterUpdated",(function(o){r(n.id,n.parameters,e.editorConnection,t.getMetaData("systemCollections"))})),t.on("metadataChanged.systemCollections",(function(t){r(n.id,n.parameters,e.editorConnection,t)}))}e.editorConnection&&e.editorConnection.isRunningLocally()&&t.on("editorImportComplete",(()=>{t.on("nodeAdded.net.noodl.user.SignUp",(function(e){n(e)}));for(const e of t.getNodesWithType("net.noodl.user.SignUp"))n(e)}))}}},4864:(e,t,n)=>{const o=n(3948),i=n(2699).EventEmitter,r=n(1436),s=n(4007);class a{constructor(){this._initCloudServices(),this.events=new i,this.events.setMaxListeners(1e5),this.getUserFromLocalStorage()&&(this.current=this.getUserModel(),this.fetchCurrentUser({success:()=>{},error:()=>{delete localStorage["Parse/"+this.appId+"/currentUser"],delete this.current,this.events.emit("sessionLost")}}))}getUserFromLocalStorage(){const e=localStorage["Parse/"+this.appId+"/currentUser"];if(e)try{return JSON.parse(e)}catch(e){}}_initCloudServices(){const e=o.instance.getMetaData("cloudservices");e&&(this.appId=e.appId,this.endpoint=e.endpoint)}on(){this.events.on.apply(this.events,arguments)}off(){this.events.off.apply(this.events,arguments)}_makeRequest(e,t){if(this.endpoint){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4===n.readyState){var e;try{e=JSON.parse(n.response)}catch(e){}200===n.status||201===n.status?t.success(e||n.response):t.error(e||{error:n.responseText,status:n.status})}},n.open(t.method||"GET",this.endpoint+e,!0),n.setRequestHeader("X-Parse-Application-Id",this.appId);var o=localStorage["Parse/"+this.appId+"/installationId"];if(void 0===o&&(o=localStorage["Parse/"+this.appId+"/installationId"]=r()),n.setRequestHeader("X-Parse-Installation-Id",o),t.sessionToken)n.setRequestHeader("X-Parse-Session-Token",t.sessionToken);else{var i=this.getUserFromLocalStorage();void 0!==i&&n.setRequestHeader("X-Parse-Session-Token",i.sessionToken)}n.setRequestHeader("Content-Type","application/json"),n.send(JSON.stringify(t.content))}else t.error&&t.error({error:"No active cloud service",status:0})}logIn(e){this._makeRequest("/login",{method:"POST",content:{username:e.username,password:e.password,_method:"GET"},success:t=>{localStorage["Parse/"+this.appId+"/currentUser"]=JSON.stringify(t),this.current=this.getUserModel(),e.success(t),this.events.emit("loggedIn")},error:t=>{e.error(t.error)}})}logOut(e){this._makeRequest("/logout",{method:"POST",content:{},success:t=>{delete localStorage["Parse/"+this.appId+"/currentUser"],delete this.current,e.success(),this.events.emit("loggedOut")},error:t=>{e.error(t.error)}})}signUp(e){const t=e.properties?s._serializeObject({...e.properties},"_User"):{};this._makeRequest("/users",{method:"POST",content:Object.assign({},t,{username:e.username,password:e.password,email:e.email}),success:t=>{const n=Object.assign(t,{username:e.username},e.properties);localStorage["Parse/"+this.appId+"/currentUser"]=JSON.stringify(n),this.current=this.getUserModel(),e.success(t),this.events.emit("loggedIn")},error:t=>{e.error(t.error)}})}setUserProperties(e){const t=this.getCurrentUser();if(void 0!==t){const n=s._serializeObject({...e.properties},"_User"),o=Object.assign({},{email:e.email,username:e.username},n);delete o.emailVerified,delete o.createdAt,delete o.updatedAt,this._makeRequest("/users/"+t.objectId,{method:"PUT",content:o,success:n=>{Object.assign(t,o),localStorage["Parse/"+this.appId+"/currentUser"]=JSON.stringify(t),this.current=this.getUserModel(),e.success(n)},error:t=>{e.error(t.error)}})}}fetchCurrentUser(e){this._makeRequest("/users/me",{method:"GET",sessionToken:e.sessionToken,success:t=>{localStorage["Parse/"+this.appId+"/currentUser"]=JSON.stringify(t),this.current=this.getUserModel(),this.events.emit("sessionGained"),e.success(t)},error:t=>{209===t.code&&(delete localStorage["Parse/"+this.appId+"/currentUser"],this.events.emit("sessionLost")),e.error(t.error)}})}verifyEmail(e){this._makeRequest("/apps/"+this.appId+"/verify_email?username="+e.username+"&token="+e.token,{method:"GET",success:t=>{-1!==t.indexOf("Successfully verified your email")?e.success():t.indexOf("Invalid Verification Link")?e.error("Invalid verification token"):e.error("Failed to verify email")},error:t=>{e.error(t.error)}})}sendEmailVerification(e){this._makeRequest("/verificationEmailRequest",{method:"POST",content:{email:e.email},success:t=>{e.success()},error:t=>{e.error(t.error)}})}resetPassword(e){this._makeRequest("/apps/"+this.appId+"/request_password_reset",{method:"POST",content:{username:e.username,token:e.token,new_password:e.newPassword},success:t=>{-1!==t.indexOf("Password successfully reset")||-1!==t.indexOf("Successfully updated your password")?e.success():t.indexOf("Invalid Link")?e.error("Invalid verification token"):e.error("Failed to verify email")},error:t=>{e.error(t.error)}})}requestPasswordReset(e){this._makeRequest("/requestPasswordReset",{method:"POST",content:{email:e.email},success:t=>{e.success()},error:t=>{e.error(t.error)}})}getCurrentUser(){var e=localStorage["Parse/"+this.appId+"/currentUser"];if(void 0!==e)return JSON.parse(e)}getUserModel(){const e=this.getCurrentUser();if(void 0!==e)return delete e.sessionToken,delete e.ACL,delete e.className,delete e.__type,s._fromJSON(e,"_User")}}var l;a.forScope=e=>a.instance,Object.defineProperty(a,"instance",{get:function(){return void 0===l&&(l=new a),l}}),o.Services.UserService=a,e.exports=a},4557:(e,t,n)=>{"use strict";const{Node:o,EdgeTriggeredInput:i}=n(3948),r=n(4864);var s={name:"net.noodl.user.VerifyEmail",docs:"https://docs.noodl.net/nodes/data/user/verify-email",displayNodeName:"Verify Email",category:"Cloud Services",color:"data",deprecated:!0,initialize:function(){this._internal},getInspectInfo(){},outputs:{success:{type:"signal",displayName:"Success",group:"Events"},failure:{type:"signal",displayName:"Failure",group:"Events"},error:{type:"string",displayName:"Error",group:"Error",getter:function(){return this._internal.error}}},inputs:{verify:{displayName:"Do",group:"Actions",valueChangedToTrue:function(){this.scheduleVerifyEmail()}},token:{type:"string",displayName:"Token",group:"General",set:function(e){this._internal.token=e}},username:{type:"string",displayName:"Username",group:"General",set:function(e){this._internal.username=e}}},methods:{setError:function(e){this._internal.error=e,this.flagOutputDirty("error"),this.sendSignalOnOutput("failure"),this.context.editorConnection&&this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"user-verify-email-warning",{message:e,showGlobally:!0})},clearWarnings(){this.context.editorConnection&&this.context.editorConnection.clearWarning(this.nodeScope.componentOwner.name,this.id,"user-verify-email-warning")},scheduleVerifyEmail:function(){this._internal,!0!==this.logOutScheduled&&(this.logOutScheduled=!0,this.scheduleAfterInputsHaveUpdated((()=>{this.logOutScheduled=!1,r.instance.verifyEmail({token:this._internal.token,username:this._internal.username,success:()=>{this.sendSignalOnOutput("success")},error:e=>{this.setError(e)}})})))}}};e.exports={node:s,setup:function(e,t){}}},6893:e=>{"use strict";const t={name:"Value Changed",docs:"https://docs.noodl.net/nodes/logic/value-changed",category:"Logic",initialize:function(){this._internal.lastValue=void 0,this._internal.changeCount=0},getInspectInfo(){return this._internal.changeCount?"Triggered "+this._internal.changeCount+(1===this._internal.changeCount?" time":" times"):"Not triggered"},inputs:{value:{type:"*",displayName:"Input",set:function(e){this._internal.lastValue!==e&&(this._internal.changeCount++,this.sendSignalOnOutput("valueChanged"),this._internal.lastValue=e)}}},outputs:{valueChanged:{type:"signal",displayName:"Value Changed"}}};e.exports={node:t}},7513:(e,t,n)=>{"use strict";const o=n(2887);e.exports={node:o.createDefinition({name:"Color",docs:"https://docs.noodl.net/nodes/data/color",startValue:"#f1f2f4",nodeDoubleClickAction:{focusPort:"value"},type:{name:"color"},cast:function(e){return e}})}},8136:e=>{const t=new Map,n={name:"CSS Definition",docs:"https://docs.noodl.net/nodes/utilities/css-definition",category:"CustomCode",color:"javascript",nodeDoubleClickAction:{focusPort:"Style"},initialize:function(){this._internal.style="";const e=this.getStyleRefId();this.addDeleteListener((()=>{t.set(e,t.get(e)-1),0===t.get(e)&&(this.removeStyleDeclaration(),t.delete(e))})),t.has(e)||t.set(e,0),t.set(e,t.get(e)+1)},inputs:{style:{index:4005,type:{name:"string",allowEditOnly:!0,codeeditor:"css"},displayName:"Style",group:"Content",default:"",set:function(e){this.updateStyle(e)}}},outputs:{},methods:{getStyleRefId:function(){return"style_"+this.id},removeStyleDeclaration:function(){if("undefined"!=typeof document){var e=this.getStyleRefId(),t=document.getElementById(e);null!==t&&t.parentNode.removeChild(t)}},updateStyle:function(e){if("undefined"!=typeof document){var t=this._internal,n=this.getStyleRefId();if(t.style=e,null!==e){var o=document.getElementById(n);null===o&&((o=document.createElement("style")).id=n,o.type="text/css",document.head.appendChild(o)),o.innerHTML="\n"+e+"\n"}else this.removeStyleDeclaration()}}}};e.exports={node:n}},7363:e=>{"use strict";e.exports=React},1533:e=>{"use strict";e.exports=ReactDOM}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e](n,n.exports,__webpack_require__),n.loaded=!0,n.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),__webpack_require__.nc=void 0;var __webpack_exports__={};(()=>{"use strict";var e=__webpack_require__(7363),t=__webpack_require__.n(e),n=__webpack_require__(1533),o=__webpack_require__.n(n),i=__webpack_require__(3948),r=__webpack_require__.n(i);class s{constructor(e,t){this.graphModel=e,this.editorConnection=t,this.graphModel.getAllComponents().forEach((e=>this._bindComponentModel(e))),this.graphModel.on("componentAdded",(e=>this._bindComponentModel(e)),this),this.graphModel.on("componentRemoved",(e=>e.removeListenersWithRef(this)),this)}_bindComponentModel(e){e.on("rootAdded",(()=>this._evaluateWarnings(e)),this),e.on("rootRemoved",(t=>{this.editorConnection.clearWarning(e.name,t,"multiple-visual-roots-warning"),this._evaluateWarnings(e)}),this),this._evaluateWarnings(e)}_evaluateWarnings(e){const t=e.getRoots();if(0!==t.lenth){this.editorConnection.clearWarning(e.name,t[0],"multiple-visual-roots-warning");for(let n=1;n<t.length;n++)this.editorConnection.sendWarning(e.name,t[n],"multiple-visual-roots-warning",{message:"This node is detached from the main node tree<br>and won't be rendered",level:"info"})}}dispose(){this.graphModel.getAllComponents().forEach((e=>{e.removeListenersWithRef(this)})),this.graphModel.removeListenersWithRef(this)}}class a{constructor(e){this.highlightedNodes=new Map,this.selectedNodes=new Map,this.noodlRuntime=e,this.isUpdatingHighlights=!1;const t=document.createElement("div");t.style.width="100%",t.style.height="100%",t.style.top="0",t.style.left="0",t.style.overflow="hidden",t.style.position="fixed",t.style.zIndex="1000000000",t.style.pointerEvents="none",document.body.appendChild(t),this.highlightRootDiv=t,this.windowBorderDiv=this.createHighlightDiv(),this.windowBorderDiv.style.position="absolute",this.windowBorderDiv.style.top="0",this.windowBorderDiv.style.left="0",this.windowBorderDiv.style.boxShadow="inset 0 0 0 3px #2CA7BA",this.windowBorderDiv.style.opacity="1.0",this.windowBorderDiv.style.width="100vw",this.windowBorderDiv.style.height="100vh"}createHighlightDiv(){const e=document.createElement("div");return e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.outline="2px solid #2CA7BA",e.style.opacity="1.0",e}setWindowSelected(e){}updateHighlights(){const e=Array.from(this.highlightedNodes.entries()).concat(Array.from(this.selectedNodes.entries()));for(const t of e){const e=t[0].getRef()&&o().findDOMNode(t[0].getRef());if(!e){this.highlightedNodes.delete(t[0]),t[1].remove();continue}const n=e.getBoundingClientRect(),i=t[1];i.style.transform=`translateX(${n.x}px) translateY(${n.y}px)`,i.style.width=n.width+"px",i.style.height=n.height+"px"}this.isUpdatingHighlights=this.highlightedNodes.size>0||this.selectedNodes.size>0,this.isUpdatingHighlights&&requestAnimationFrame(this.updateHighlights.bind(this))}highlightNodesWithId(e){const t=l(this.noodlRuntime,e).filter((e=>e.getRef)).filter((e=>!this.highlightedNodes.has(e)));for(const e of t){const t=this.createHighlightDiv();this.highlightRootDiv.appendChild(t),this.highlightedNodes.set(e,t)}(this.selectedNodes.size>0||this.highlightedNodes.size>0)&&!this.isUpdatingHighlights&&this.updateHighlights()}disableHighlight(){for(const e of this.highlightedNodes){const t=e[1];t&&t.remove()}this.highlightedNodes.clear()}selectNodesWithId(e){this.noodlRuntime.rootComponent||this.noodlRuntime.eventEmitter.once("rootComponentUpdated",(()=>{setTimeout((()=>{this.selectNodesWithId(e)}),300)}));const t=l(this.noodlRuntime,e).filter((e=>e.getRef)).filter((e=>!this.selectedNodes.has(e)));for(const e of t){const t=this.createHighlightDiv();this.highlightRootDiv.appendChild(t),this.selectedNodes.set(e,t)}return this.selectedNodes.size>0&&this.setWindowSelected(!1),(this.selectedNodes.size>0||this.highlightedNodes.size>0)&&!this.isUpdatingHighlights&&this.updateHighlights(),t}deselectNodes(){for(const e of this.selectedNodes){const t=e[1];t&&t.remove()}this.selectedNodes.clear()}}function l(e,t){return e.rootComponent?e.rootComponent.nodeScope.getNodesWithIdRecursive(t):[]}class u{constructor({onInspect:e,onHighlight:t,onDisableHighlight:n}){this.onMouseMove=e=>{n();const o=this.findNoodlNode(e.target);o?(document.body.style.cursor="pointer",t(o.id)):document.body.style.cursor="initial",e.stopPropagation()},this.onClick=t=>{n();const o=this.findNoodlNode(t.target);o&&e([o.id]),t.stopPropagation(),t.preventDefault(),document.activeElement&&document.activeElement.blur()},this.onContextMenu=t=>{const n=document.elementsFromPoint(t.clientX,t.clientY).map((e=>this.findNoodlNode(e))).filter((e=>!!e)).map((e=>e.id));n.length&&e(n),t.stopPropagation(),t.preventDefault(),document.activeElement&&document.activeElement.blur()},this.onMouseOut=e=>{n()},this.blockEvent=e=>{e.stopPropagation()},this.onDisableHighlight=n}setComponent(e){this.component=e}enable(){document.activeElement&&document.activeElement.blur(),document.addEventListener("mouseenter",this.blockEvent,!0),document.addEventListener("mouseover",this.blockEvent,!0),document.addEventListener("mousedown",this.blockEvent,!0),document.addEventListener("mouseup",this.blockEvent,!0),document.addEventListener("mousemove",this.onMouseMove,!0),document.addEventListener("mouseout",this.onMouseOut,!0),document.addEventListener("click",this.onClick,!0),document.addEventListener("contextmenu",this.onContextMenu,!0)}disable(){document.body.style.cursor="initial",document.removeEventListener("mouseenter",this.blockEvent,!0),document.removeEventListener("mouseover",this.blockEvent,!0),document.removeEventListener("mousedown",this.blockEvent,!0),document.removeEventListener("mouseup",this.blockEvent,!0),document.removeEventListener("mousemove",this.onMouseMove,!0),document.removeEventListener("mouseout",this.onMouseOut,!0),document.removeEventListener("click",this.onClick,!0),document.removeEventListener("contextmenu",this.onContextMenu,!0),this.onDisableHighlight()}findNoodlNode(e){let t;for(;!t&&e;)t=e[Object.keys(e).find((e=>e.startsWith("__reactInternalInstance$")))],t||(e=e.parentElement);if(!t)return;const n=e=>{let t=e.return;for(;t&&"string"==typeof t.type;)t=t.return;return t};let o=n(t);for(;o&&(!o.stateNode||!o.stateNode.props||!o.stateNode.props.noodlNode);)o=n(o);const i=o?o.stateNode.props.noodlNode:void 0;if(i){if(this.component){let e=i;for(;e;)if(e.parentNodeScope){if(e.parentNodeScope.componentOwner.name===this.component.name)return e;e=e.parentNodeScope.componentOwner}else{if(e.nodeScope.componentOwner.name===this.component.name)return e;e=e.nodeScope.componentOwner}return e}return i}}}var d="undefined"!=typeof document,c=function(){function e(){this._title="",this._meta={}}return Object.defineProperty(e.prototype,"title",{get:function(){return d?document.title:this._title},enumerable:!1,configurable:!0}),e.prototype.setTitle=function(e){this._title=e,d&&(document.title=e)},Object.defineProperty(e.prototype,"meta",{get:function(){return this._meta},enumerable:!1,configurable:!0}),e.prototype.clearMeta=function(){d&&Object.keys(this._meta).forEach((function(e){var t=document.querySelector('meta[name="'.concat(e,'"]'));t&&t.remove()})),this._meta={}},e.prototype.getMeta=function(e){return this._meta[e]},e.prototype.setMeta=function(e,t){if(this._meta[e]=t,d){var n=document.querySelector('meta[name="'.concat(e,'"]'));if(n)t?n.setAttribute("content",t):n.remove();else if(t){var o=document.createElement("meta");o.setAttribute("name",e),o.setAttribute("property",e),o.setAttribute("content",t),document.head.appendChild(o)}}},e}();const p={ports:[{name:"htmlTitle",displayName:"Title",group:"General",plug:"input",type:"string",default:"Fluxscape Viewer",tooltip:"The title that web browsers show",ignoreInExport:!0},{name:"headCode",displayName:"Head Code",group:"Custom Code",plug:"input",type:{name:"string",codeeditor:"html"},tooltip:"Add custom code to the &lt;head&gt; tag",ignoreInExport:!0},{name:"navigationPathType",displayName:"URL Path Type",group:"Navigation",plug:"input",type:{name:"enum",enums:[{label:"Hash",value:"hash"},{label:"Path",value:"path"}]},default:"hash"},{name:"bodyScroll",displayName:"Body Scroll",group:"Experimental features",plug:"input",type:{name:"boolean"},tooltip:"Changes so the &lt;body&gt; tag will scroll by default"},{name:"repeaterDisabledWhenUnmounted",displayName:"Disable when unmounted",group:"Experimental features - Repeater",plug:"input",type:{name:"boolean"},tooltip:"Repeater will only create components when it's mounted"},{name:"repeaterCreateComponentsAsync",displayName:"Create asynchronously",group:"Experimental features - Repeater",plug:"input",type:{name:"boolean"},tooltip:"Repeater items will be created in chunks to keep UI responsive"}]};class h{constructor(e,t){this.isRunning=!1,this.numBoundingBoxObservers=0,this.callback=e,this.pollDelay=t}addObserver(){this.numBoundingBoxObservers++,this.isRunning||this._startObserver()}removeObserver(){this.numBoundingBoxObservers--,0===this.numBoundingBoxObservers&&this._stopObserver()}setTarget(e){this.target=e,this.numBoundingBoxObservers>0&&!this.isRunning&&this._startObserver()}_startObserver(){if(this.isRunning)return;if(!this.target)return;this.isRunning=!0;let e={};const t=()=>{if(!this.target)return void(this.isRunning=!1);const n=this.target.getBoundingClientRect();e.x!==n.x&&this.callback("x",n),e.y!==n.y&&this.callback("y",n),e.width!==n.width&&this.callback("width",n),e.height!==n.height&&this.callback("height",n),e=n,this.isRunning&&(this.pollDelay?setTimeout(t,this.pollDelay):window.requestAnimationFrame(t))};window.requestAnimationFrame(t)}_stopObserver(){this.isRunning=!1}}function g(e){return e&&"%"===e[e.length-1]}function f(e){return Number(e.slice(0,-1))}function m(e,t,n){if(!t&&!n)return e;let o=`calc(${e}`;return t&&(o+=` - ${t}`),n&&(o+=` - ${n}`),o+=")",o}const y={size(e,t){"none"===t.parentLayout&&(e.position="absolute"),"explicit"===t.sizeMode?(e.width=t.width,e.height=t.height):"contentHeight"===t.sizeMode?e.width=t.width:"contentWidth"===t.sizeMode&&(e.height=t.height),e.flexShrink=0,"row"===t.parentLayout&&"relative"===e.position?(g(e.width)&&!t.fixedWidth&&(e.flexGrow=f(e.width),e.flexShrink=1),g(e.height)&&!t.fixedHeight&&(e.height=m(e.height,e.marginTop,e.marginBottom))):"column"===t.parentLayout&&"relative"===e.position?(g(e.width)&&!t.fixedWidth&&(e.width=m(e.width,e.marginLeft,e.marginRight)),g(e.height)&&!t.fixedHeight&&(e.flexGrow=f(e.height),e.flexShrink=1)):"relative"!==e.position&&(g(e.width)&&(e.width=m(e.width,e.marginLeft,e.marginRight)),g(e.height)&&(e.height=m(e.height,e.marginTop,e.marginBottom)))},align(e,t){const{position:n}=e;let{alignX:o,alignY:i}=t;"relative"!==n&&(o=o||"left",i=i||"top");let r="";const s=t.parentLayout||"column";if(o)if("relative"!==n)"left"===o?e.left=0:"center"===o?(e.left="50%",r+="translateX(-50%) "):e.right=0;else if("relative"===n&&"row"===s)switch(o){case"left":e.marginRight=e.marginRight?e.marginRight:"auto";break;case"center":e.marginRight=e.marginRight?e.marginRight:"auto",e.marginLeft=e.marginLeft?e.marginLeft:"auto";break;case"right":e.marginLeft=e.marginLeft?e.marginLeft:"auto"}else if("relative"===n&&"column"===s)switch(o){case"left":e.alignSelf="flex-start";break;case"center":e.alignSelf="center";break;case"right":e.alignSelf="flex-end"}if(i)if("relative"!==n)"top"===i?e.top=0:"center"===i?(e.top="50%",r+="translateY(-50%)"):e.bottom=0;else if("relative"===n&&"column"===s)switch(i){case"top":e.marginBottom=e.marginBottom?e.marginBottom:"auto";break;case"center":e.marginTop=e.marginTop?e.marginTop:"auto",e.marginBottom=e.marginBottom?e.marginBottom:"auto";break;case"bottom":e.marginTop=e.marginTop?e.marginTop:"auto"}else if("relative"===n&&"row"===s)switch(i){case"top":e.alignSelf="flex-start";break;case"center":e.alignSelf="center";break;case"bottom":e.alignSelf="flex-end"}r&&(e.transform=r+(e.transform||""))}};function v(e){return e&&"object"==typeof e&&!Array.isArray(e)}function b(e,...t){if(!t.length)return e;const n=t.shift();if(v(e)&&v(n))for(const t in n)v(n[t])?(e[t]||Object.assign(e,{[t]:{}}),b(e[t],n[t])):Object.assign(e,{[t]:n[t]});return b(e,...t)}var S=__webpack_require__(5722),_=__webpack_require__(9855),C=__webpack_require__.n(_);function N({title:e,body:t,images:n}){let o=`<h3>${e}</h3>`;if(t&&(o+=(t=Array.isArray(t)?t:[t]).map((e=>`<p>${e}</p>`)).join("")),n){let e="";n.forEach((t=>{e+='<div class="popup-layer-image-item">',e+=`<img src="../assets/images/tooltips/${t.src}">`,t.label&&(e+=`<h3>${t.label}</h3>`),t.body&&(e+=`<p>${t.body}</p>`),e+="</div>"})),o+=`<div class="popup-layer-image-row">${e}</div>`}return o}function w(e,t){e.inputCss||(e.inputCss={}),e.defaultCss||(e.defaultCss={});for(const n in t)e.inputCss[n]=t[n]}function O(e,t,n){e[t]||(e[t]={});for(const o in n)e[t][o]=n[o]}function x(e,t){O(e,"inputs",t)}function I(e,t){O(e,"inputProps",t)}function P(e,t,n){e.dynamicports||(e.dynamicports=[]),e.dynamicports.push({condition:t,inputs:n})}const T={addInputProps:I,addInputs:x,addDynamicInputPorts:P,addInputCss:w,addSharedVisualInputs(e){w(e,{opacity:{index:200,group:"Style",displayName:"Opacity",type:"number",default:1,allowVisualStates:!0},mixBlendMode:{index:201,group:"Style",displayName:"Blend Mode",type:{name:"enum",enums:[{label:"Normal",value:"normal"},{label:"Multiply",value:"multiply"},{label:"Screen",value:"screen"},{label:"Overlay",value:"overlay"},{label:"Darken",value:"darken"},{label:"Lighten",value:"lighten"},{label:"Color Dodge",value:"color-dodge"},{label:"Color Burn",value:"color-burn"},{label:"Hard Light",value:"hard-light"},{label:"Soft Light",value:"soft-light"},{label:"Difference",value:"difference"},{label:"Exclusion",value:"exclusion"},{label:"Hue",value:"hue"},{label:"Saturation",value:"saturation"},{label:"Color",value:"color"},{label:"Luminosity",value:"luminosity"}]},default:"normal",applyDefault:!1,allowVisualStates:!0}}),x(e,{visible:{index:210,displayName:"Visible",group:"Style",default:!0,type:"boolean",set(e){e?this.removeStyle(["visibility"]):this.setStyle({visibility:"hidden"})}},zIndex:{index:211,displayName:"zIndex",group:"Style",type:"number",allowVisualStates:!0,set(e){void 0===e?this.removeStyle(["zIndex"]):this.setStyle({zIndex:Number(e)})}}})},addMarginInputs(e){w(e,{marginLeft:{index:1,group:"Margin and padding",displayName:"Margin Left",type:{name:"number",units:["px","%"],defaultUnit:"px",marginPaddingComp:"margin-left"},allowVisualStates:!0},marginRight:{index:2,group:"Margin and padding",displayName:"Margin Right",type:{name:"number",units:["px","%"],defaultUnit:"px",marginPaddingComp:"margin-right"},allowVisualStates:!0},marginTop:{index:3,group:"Margin and padding",displayName:"Margin Top",type:{name:"number",units:["px","%"],defaultUnit:"px",marginPaddingComp:"margin-top"},allowVisualStates:!0},marginBottom:{index:4,group:"Margin and padding",displayName:"Margin Bottom",type:{name:"number",units:["px","%"],defaultUnit:"px",marginPaddingComp:"margin-bottom"},allowVisualStates:!0}})},addPaddingInputs(e,t){const n=(t=t||{}).defaults?t.defaults:{},o=t.styleTag;w(e,{paddingLeft:{index:64,group:"Margin and padding",default:n.paddingLeft||0,applyDefault:!1,displayName:"Pad Left",type:{name:"number",units:["px"],defaultUnit:"px",marginPaddingComp:"padding-left"},allowVisualStates:!0,styleTag:o},paddingRight:{index:65,group:"Margin and padding",default:n.paddingRight||0,applyDefault:!1,displayName:"Pad Right",type:{name:"number",units:["px"],defaultUnit:"px",marginPaddingComp:"padding-right"},allowVisualStates:!0,styleTag:o},paddingTop:{index:66,group:"Margin and padding",displayName:"Pad Top",default:n.paddingTop||0,applyDefault:!1,type:{name:"number",units:["px"],defaultUnit:"px",marginPaddingComp:"padding-top"},allowVisualStates:!0,styleTag:o},paddingBottom:{index:67,group:"Margin and padding",displayName:"Pad Bottom",default:n.paddingBottom||0,applyDefault:!1,type:{name:"number",units:["px"],defaultUnit:"px",marginPaddingComp:"padding-bottom"},allowVisualStates:!0,styleTag:o}})},addTransformInputs(e){x(e,{transformX:{group:"Placement",displayName:"Pos X",default:0,index:300,allowVisualStates:!0,type:{name:"number",units:["px","%"],defaultUnit:"px"},set(e){this.transforms||(this.transforms={}),this.transforms.x=e.value+e.unit,this.updateTransform()}},transformY:{group:"Placement",displayName:"Pos Y",default:0,index:301,allowVisualStates:!0,type:{name:"number",units:["px","%"],defaultUnit:"px"},set(e){this.transforms||(this.transforms={}),this.transforms.y=e.value+e.unit,this.updateTransform()}},transformRotation:{index:302,group:"Placement",displayName:"Rotation",default:0,allowVisualStates:!0,type:{name:"number",units:["deg"],defaultUnit:"deg"},set(e){this.transforms||(this.transforms={}),this.transforms.rotation=e.value+e.unit,this.updateTransform()}},transformScale:{index:303,group:"Placement",displayName:"Scale",default:1,allowVisualStates:!0,type:{name:"number"},set(e){this.transforms||(this.transforms={}),this.transforms.scale=e,this.updateTransform()}},transformOriginX:{index:304,group:"Placement",displayName:"Transform Origin X",allowVisualStates:!0,type:{name:"number",units:["px","%"],defaultUnit:"%"},default:"50",set(e){this.transformOriginX=e.value+e.unit,this.updateTransformOrigin()}},transformOriginY:{index:305,group:"Placement",displayName:"Transform Origin Y",allowVisualStates:!0,type:{name:"number",units:["px","%"],defaultUnit:"%"},default:"50",set(e){this.transformOriginY=e.value+e.unit,this.updateTransformOrigin()}}}),e.methods||(e.methods={}),e.methods.updateTransform=function(){let e="";const{x:t,y:n,rotation:o,scale:i}=this.transforms;t&&(e+=`translateX(${t}) `),n&&(e+=`translateY(${n}) `),o&&(e+=`rotate(${o}) `),void 0!==i&&(e+=`scale(${i},${i})`),this.setStyle({transform:e})},e.methods.updateTransformOrigin=function(){const e=void 0!==this.transformOriginX?this.transformOriginX:"50%",t=void 0!==this.transformOriginY?this.transformOriginY:"50%";this.setStyle({transformOrigin:`${e} ${t}`})}},addAlignInputs(e){w(e,{position:{index:11,displayName:"Position",group:"Layout",type:{name:"enum",enums:[{label:"In Layout",value:"relative"},{label:"Absolute",value:"absolute"},{label:"Sticky",value:"sticky"},{label:"Fixed",value:"fixed"}]},default:"relative"}}),I(e,{alignX:{index:5,group:"Alignment",displayName:"Align X",type:{name:"enum",enums:[{label:"Left",value:"left"},{label:"Center",value:"center"},{label:"Right",value:"right"}],alignComp:"horizontal"}},alignY:{index:6,group:"Alignment",displayName:"Align Y",type:{name:"enum",enums:[{label:"Top",value:"top"},{label:"Center",value:"center"},{label:"Bottom",value:"bottom"}],alignComp:"vertical"}}}),function(e){e.inputCss.position.tooltip=N({title:"Position",images:[{label:"Relative",body:"Relative to its siblings",src:"position-relative.svg"},{label:"Absolute",body:"Not affected by siblings or parent's layout",src:"position-absolute.svg"},{label:"Sticky",body:"Stick to parent's edge on overflow",src:"position-sticky.svg"},{label:"Fixed",body:"Always stay in the same place and take no space in the layout",src:"position-sticky.svg"}]})}(e)},addPointerEventOutputs(e){x(e,{pointerEventsMode:{index:403,displayName:"Pointer Events Mode",type:{name:"enum",enums:[{label:"Inherit",value:"inherit"},{label:"Explicit",value:"explicit"}]},default:"inherit",group:"Pointer Events",set(e){if("inherit"===e)this.removeStyle(["pointerEvents"]);else{let e="auto";void 0!==this._internal.pointerEventsEnabled&&(e=this._internal.pointerEventsEnabled?"auto":"none"),this.setStyle({pointerEvents:e})}}},pointerEventsEnabled:{index:404,displayName:"Pointer Events Enabled",type:"boolean",group:"Pointer Events",default:!0,set(e){this._internal.pointerEventsEnabled=!!e,this.setStyle({pointerEvents:this._internal.pointerEventsEnabled?"auto":"none"})}}}),I(e,{blockTouch:{index:450,displayName:"Block Pointer Events",group:"Pointer Events",type:"boolean"}}),P(e,"pointerEventsMode = explicit",["pointerEventsEnabled"]),function(e,t){O(e,"outputProps",{onClick:{displayName:"Click",group:"Events",type:"signal",propPath:"pointer"},pointerDown:{displayName:"Pointer Down",group:"Pointer Events",type:"signal",propPath:"pointer",props:{onMouseDown(){this.sendSignalOnOutput("pointerDown")},onTouchStart(){this.sendSignalOnOutput("pointerDown")}}},pointerUp:{displayName:"Pointer Up",group:"Pointer Events",type:"signal",propPath:"pointer",props:{onMouseUp(){this.sendSignalOnOutput("pointerUp")},onTouchEnd(){this.sendSignalOnOutput("pointerUp")},onTouchCancel(){this.sendSignalOnOutput("pointerUp")}}},pointerEnter:{displayName:"Pointer Enter",group:"Pointer Events",type:"signal",propPath:"pointer",props:{onMouseEnter(){this.sendSignalOnOutput("pointerEnter")}}},hoverStart:{displayName:"Hover Start",group:"Hover Events",type:"signal",propPath:"pointer",props:{onMouseOver(){this.sendSignalOnOutput("hoverStart"),this.setVisualStates(["hover"])}}},hoverEnd:{displayName:"Hover End",group:"Hover Events",type:"signal",propPath:"pointer",props:{onMouseLeave(){this.sendSignalOnOutput("hoverEnd"),this.setVisualStates([""])}}}})}(e),function(e){e.inputs.pointerEventsMode.tooltip=N({title:"Pointer events mode",body:["Control if mouse and touch events are enabled on this node","- Inherit: Same settings as parent","- Explicit: Enable control on this element"]}),e.inputs.pointerEventsEnabled.tooltip=N({title:"Pointer events enabled",body:["- Enabled: This element will receive mouse and touch events","- Disabled: No mouse or touch events will be captured by this element and the element below will receive it instead"]})}(e)},addDimensions(e,{defaultSizeMode:t="explicit",contentLabel:n="Content",useDimensionConstraints:o=!0}={}){let i="sizeMode = explicit OR sizeMode = contentHeight",r="sizeMode = explicit OR sizeMode = contentWidth";"explicit"!==t&&"contentHeight"!==t||(i+=" OR sizeMode NOT SET"),"explicit"!==t&&"contentWidth"!==t||(r+=" OR sizeMode NOT SET"),P(e,i,["width"]),P(e,r,["height"]),I(e,{sizeMode:{index:10,type:{name:"enum",enums:[{value:"explicit",label:"Explicit"},{value:"contentWidth",label:"Content Width"},{value:"contentHeight",label:"Content Height"},{value:"contentSize",label:"Content Size"}],allowEditOnly:!0,sizeComp:"mode"},group:"Dimensions",displayName:"Size Mode",default:t,allowVisualStates:!0},width:{index:11,group:"Dimensions",displayName:"Width",type:{name:"dimension",units:["%","px","vw","vh"],defaultUnit:"%"},default:100,allowVisualStates:!0,onChange(e){this.props.fixedWidth=e.isFixed}},height:{index:13,group:"Dimensions",displayName:"Height",type:{name:"dimension",units:["%","px","vw","vh"],defaultUnit:"%"},default:100,allowVisualStates:!0,onChange(e){this.props.fixedHeight=e.isFixed}}}),Noodl.deployed||function(e,t){e.inputProps.sizeMode.tooltip={explicit:{standard:"Explicit width & height",extended:N({title:"Explicit width & height",body:"Set width & height explicitly in pixels(px), percentage(%) or viewport size(vh/vw).",images:[{src:"size-mode-explicit.svg"}]})},contentWidth:{standard:`${t} width & explicit height`,extended:N({title:`${t} width & explicit height`,body:`The width will match the width of the ${t.toLowerCase()}. Height is set explicitly.`,images:[{src:"size-mode-content-width.svg"}]})},contentHeight:{standard:`Explicit width & ${t.toLowerCase()} height`,extended:N({title:`Explicit width & ${t.toLowerCase()} height`,body:`The width is set explicitly. The height will match the height of the ${t.toLowerCase()}`,images:[{src:"size-mode-content-height.svg"}]})},contentSize:{standard:`${t} width & height`,extended:N({title:`${t} width & height`,body:`The width and height will match the size of the ${t.toLowerCase()}`,images:[{src:"size-mode-content-size.svg"}]})}};const n=["- %: Relative to parents size. If 'fixed' is false this element will resize to share space with siblings. If 'Clip Content' is disabled, it'll also expand to fit the boundaries of all its content","- px: Pixels","- vw: Relative to viewport width. 100 makes the element the same width as the screen","- vh: Relative to viewport height. 100 makes the element the same height as the screen"],o=N({title:"Fixed",body:["- Enabled: Elements will be the exact size set","- Disabled: Element will resize to fill up empty space, or shrink to make space for siblings. Use the dimension constraints, min and max size, to control the boundaries"]});e.inputProps.width.tooltip={dimension:N({title:"Width",body:n}),fixed:o},e.inputProps.height.tooltip={dimension:N({title:"Height",body:n}),fixed:o}}(e,n),o&&(w(e,{minWidth:{index:400,group:"Dimension Constraints",displayName:"Min Width",allowVisualStates:!0,type:{name:"number",units:["%","px","vw","vh"],defaultUnit:"%"}},maxWidth:{index:401,group:"Dimension Constraints",displayName:"Max Width",allowVisualStates:!0,type:{name:"number",units:["%","px","vw","vh"],defaultUnit:"%"}},minHeight:{index:402,group:"Dimension Constraints",displayName:"Min Height",allowVisualStates:!0,type:{name:"number",units:["%","px","vw","vh"],defaultUnit:"%"}},maxHeight:{index:403,group:"Dimension Constraints",displayName:"Max Height",allowVisualStates:!0,type:{name:"number",units:["%","px","vw","vh"],defaultUnit:"%"}}}),Noodl.deployed||function(e){e.inputCss.minWidth.tooltip=N({title:"Minimum width",body:"This is prioritized over other properties, so the element won't shrink below this size"}),e.inputCss.minHeight.tooltip=N({title:"Minimum height",body:"This is prioritized over other properties, so the element won't shrink below this size"}),e.inputCss.maxWidth.tooltip=N({title:"Maximum width",body:"This is prioritized over other properties, so the element won't grow beyond this size"}),e.inputCss.maxHeight.tooltip=N({title:"Maximum height",body:"This is prioritized over other properties, so the element won't grow beyond this size"})}(e))},_addCornerRadius(e,t){const n=(t=t||{}).defaults||{},o=t.styleTag;function i(e,t,o,i){const r={group:"corners",tab:o,label:t},s=`border${t}Radius`;x(e,{[s]:{index:240+i,displayName:"Corner Radius",editorName:("Corner Radius","Corner Radius "+(t?"("+t+")":"")),group:"Corner Radius",type:{name:"number",units:["px","%"],defaultUnit:"px"},allowVisualStates:!0,default:n[s],tab:r,set(e){this._internal.borderRadius[s]=void 0===e.value?Number(e)+"px":e.value+e.unit,this._updateCornerRadii()}}})}n.borderRadius||(n.borderRadius=0),i(e,"","corners-all",0),i(e,"TopLeft","corners-top-left",1),i(e,"TopRight","corners-top-right",2),i(e,"BottomRight","corners-bottom-right",3),i(e,"BottomLeft","corners-bottom-left",4),e.methods._updateCornerRadii=function(){const e=this._internal.borderRadius;function t(t,n){const o=`border${n}Radius`;t[o]=e[o]||e.borderRadius}const n={};t(n,"TopLeft"),t(n,"TopRight"),t(n,"BottomRight"),t(n,"BottomLeft"),this.setStyle(n,o)};const r=e.initialize;e.initialize=function(){r&&r.call(this),this._internal.borderRadius={...n},n.borderRadius&&this._updateCornerRadii()}},addBorderInputs(e,t){const n=(t=t||{}).defaults||{},o=t.styleTag;function i(e,t,o,i){const r=`border${t}Style`,s=`border${t}Width`,a=`border${t}Color`;let l="none"!==n.borderStyle?"OR borderStyle NOT SET":"";t?(n[r]&&"none"!==n[r]&&(l+=`OR ${r} NOT SET`),P(e,`${r} = solid OR ${r} = dashed OR ${r} = dotted OR borderStyle = solid OR borderStyle = dashed OR borderStyle = dotted ${l}`,[`${s}`,`${a}`])):P(e,`${r} = solid OR ${r} = dashed OR ${r} = dotted ${l}`,[`${s}`,`${a}`]);const u={group:"border-styles",tab:o,label:t},d=e=>`${e} ${t?"("+t+")":""}`,c=202+4*i;x(e,{[r]:{index:c+1,displayName:"Border Style",editorName:d("Border Style"),group:"Border Style",allowVisualStates:!0,type:{name:"enum",enums:[{label:"None",value:"none"},{label:"Solid",value:"solid"},{label:"Dotted",value:"dotted"},{label:"Dashed",value:"dashed"}]},default:n[r],tab:u,set(e){this._internal.borders[r]=e,this._updateBorders()}},[s]:{index:c+2,displayName:"Border Width",editorName:d("Border Width"),group:"Border Style",allowVisualStates:!0,type:{name:"number",units:["px"],defaultUnit:"px"},default:n[s],tab:u,set(e){this._internal.borders[s]=void 0===e.value?Number(e)+"px":e.value+e.unit,this._updateBorders()}},[a]:{index:c+3,displayName:"Border Color",editorName:d("Border Color"),group:"Border Style",type:"color",default:n[a],allowVisualStates:!0,tab:u,set(e){this._internal.borders[a]=e,this._updateBorders()}}})}void 0===n.borderStyle&&(n.borderStyle="none"),void 0===n.borderWidth&&(n.borderWidth=2),void 0===n.borderColor&&(n.borderColor="#000000"),i(e,"","borders-all",0),i(e,"Left","borders-left",1),i(e,"Top","borders-top",2),i(e,"Right","borders-right",3),i(e,"Bottom","borders-bottom",4),e.methods._updateBorders=function(){const e=this._internal.borders;function t(t,n){const o=`border${n}Width`,i=`border${n}Color`,r=`border${n}Style`;t[o]=e[o]||e.borderWidth,t[i]=e[i]||e.borderColor,t[r]=e[r]||e.borderStyle}const n={};t(n,"Top"),t(n,"Right"),t(n,"Bottom"),t(n,"Left"),this.setStyle(n,o)};const r=e.initialize;e.initialize=function(){r&&r.call(this),this._internal.borders={...n},("none"!==n.borderStyle||n.borderTopStyle&&"none"!==n.borderTopStyle||n.borderRightStyle&&"none"!==n.borderRightStyle||n.borderBottomStyle&&"none"!==n.borderBottomStyle||n.borderRightStyle&&"none"!==n.borderRightStyle)&&this._updateBorders()},this._addCornerRadius(e,{defaults:n,styleTag:o})},addShadowInputs(e,t){const n=(t=t||{}).styleTag;P(e,"boxShadowEnabled = true",["boxShadowOffsetX","boxShadowOffsetY","boxShadowInset","boxShadowBlurRadius","boxShadowSpreadRadius","boxShadowColor"]),x(e,{boxShadowEnabled:{index:250,group:"Box Shadow",displayName:"Shadow Enabled",type:"boolean",default:!1,allowVisualStates:!0,set(e){this._internal.boxShadowEnabled=e,this._updateBoxShadow()}},boxShadowOffsetX:{index:251,group:"Box Shadow",displayName:"Offset X",default:0,type:{name:"number",units:["px"],defaultUnit:"px"},allowVisualStates:!0,set(e){this._internal.boxShadowOffsetX=e.value+e.unit,this._updateBoxShadow()}},boxShadowOffsetY:{index:252,group:"Box Shadow",displayName:"Offset Y",default:0,type:{name:"number",units:["px"],defaultUnit:"px"},allowVisualStates:!0,set(e){this._internal.boxShadowOffsetY=e.value+e.unit,this._updateBoxShadow()}},boxShadowBlurRadius:{index:253,group:"Box Shadow",displayName:"Blur Radius",default:5,type:{name:"number",units:["px"],defaultUnit:"px"},allowVisualStates:!0,set(e){this._internal.boxShadowBlurRadius=e.value+e.unit,this._updateBoxShadow()}},boxShadowSpreadRadius:{index:254,group:"Box Shadow",displayName:"Spread Radius",default:2,type:{name:"number",units:["px"],defaultUnit:"px"},allowVisualStates:!0,set(e){this._internal.boxShadowSpreadRadius=e.value+e.unit,this._updateBoxShadow()}},boxShadowInset:{index:255,group:"Box Shadow",displayName:"Inset",type:"boolean",default:!1,allowVisualStates:!0,set(e){this._internal.boxShadowInset=e,this._updateBoxShadow()}},boxShadowColor:{index:256,group:"Box Shadow",displayName:"Shadow Color",type:"color",default:"#00000033",allowVisualStates:!0,set(e){this._internal.boxShadowColor=e,this._updateBoxShadow()}}}),e.methods._updateBoxShadow=function(){const e=this._internal;e.boxShadowEnabled?this.setStyle({boxShadow:`${e.boxShadowInset?"inset ":""}${e.boxShadowOffsetX} ${e.boxShadowOffsetY} ${e.boxShadowBlurRadius} ${e.boxShadowSpreadRadius} ${e.boxShadowColor}`},n):this.removeStyle(["boxShadow"],n)};const o=e.initialize;e.initialize=function(){o&&o.call(this),this._internal.boxShadowOffsetX=0,this._internal.boxShadowOffsetY=0,this._internal.boxShadowBlurRadius="5px",this._internal.boxShadowSpreadRadius="2px",this._internal.boxShadowColor="#00000033"}},addIconInputs(e,t){const n={useIcon:!0,iconColor:"#FFFFFF"};(t=t||{}).defaults&&Object.assign(n,t.defaults);let o="useIcon = true";n.useIcon&&(o+=" OR useIcon NOT SET");const i=["iconSourceType","iconSize"];t.enableIconPlacement&&(i.push("iconPlacement"),i.push("iconSpacing")),P(e,o,i),n.useIcon?(P(e,"#js (params.useIcon===true || params.useIcon===undefined) && params.iconSourceType === 'image'",["iconImageSource"]),P(e,"#js (params.useIcon===true || params.useIcon===undefined) && params.iconSourceType === 'icon'",["iconIconSource","iconColor"])):(P(e,"useIcon = true AND iconSourceType = image",["iconImageSource"]),P(e,"useIcon = true AND iconSourceType = icon",["iconIconSource","iconColor"])),t.hideEnableIconInput||I(e,{useIcon:{type:"boolean",group:"Icon",displayName:"Enable Icon",default:n.useIcon,allowVisualStates:!0,index:20}}),I(e,{iconSourceType:{type:{name:"enum",enums:[{label:"Image",value:"image"},{label:"Icon",value:"icon"}]},group:"Icon",displayName:"Type",default:"icon",allowVisualStates:!0,index:21},iconIconSource:{type:"icon",displayName:"Icon Source",group:"Icon",allowVisualStates:!0,index:23}}),x(e,{iconImageSource:{type:"image",displayName:"Image Source",group:"Icon",allowVisualStates:!0,index:22,set(e){this.props.iconImageSource=(0,S.getAbsoluteUrl)(e)}}}),t.enableIconPlacement&&I(e,{iconSpacing:{group:"Icon",displayName:"Spacing",default:10,type:{name:"number",units:["px"],defaultUnit:"px"},allowVisualStates:!0,index:24},iconPlacement:{type:{name:"enum",enums:[{label:"Left",value:"left"},{label:"Right",value:"right"}]},group:"Icon",displayName:"Placement",default:"left",allowVisualStates:!0,index:25}}),I(e,{iconSize:{group:"Icon",displayName:"Size",default:16,type:{name:"number",units:["px"],defaultUnit:"px"},allowVisualStates:!0,index:26},iconColor:{group:"Icon",displayName:"Color",editorName:"Icon Color",default:n.iconColor,type:"color",allowVisualStates:!0,index:27}})},addLabelInputs(e,t){const n={useLabel:!1};(t=t||{}).defaults&&Object.assign(n,t.defaults);const o=n.useLabel?"useLabel = true OR useLabel NOT SET":"useLabel = true",i=t.styleTag||"",r=["label"].concat(["textStyle","fontFamily","fontSize","color","letterSpacing","lineHeight","textTransform"].map((e=>i+e)));t.enableSpacing&&r.push("labelSpacing"),P(e,o,r),I(e,{useLabel:{index:18,type:"boolean",displayName:"Enable Label",group:"Label",default:n.useLabel},label:{type:"string",displayName:"Label",group:"Label",default:"Label"}}),t.enableSpacing&&I(e,{labelSpacing:{displayName:"Spacing",group:"Label",type:{name:"number",units:["px"],defaultUnit:"px"},default:10}}),this.addTextStyleInputs(e,{...t,group:"Label Text Style",popout:{group:"label-text-style",label:"Text Style",parentGroup:"Label"}})},addTextStyleInputs(e,t){const n=(t=t||{}).group||"Text Style",o=t.styleTag,i=t.hasOwnProperty("portPrefix")?t.portPrefix:t.styleTag||"",r=i+"textStyle",s=void 0!==t.portIndex?t.portIndex:19;function a(e){return t.displayName?t.displayName+" "+e:e}x(e,{[r]:{index:s,type:{name:"textStyle",childPorts:["fontFamily","fontSize","color","letterSpacing","lineHeight","textTransform"],childPortPrefix:i},group:n,displayName:"Text Style",editorName:a("Text Style"),default:"None",set(e){this.props[r]=this.context.styles.getTextStyle(e),this.forceUpdate()},allowVisualStates:!0,popout:t.popout},[i+"fontFamily"]:{index:s+1,type:{name:"font",parentPort:r},group:n,displayName:"Font Family",editorName:a("Font Family"),set(e){if(e){let t=e;t.split(".").length>1&&(C().instance.loadFont(t),t=t.replace(/\.[^/.]+$/,""),t=t.split("/").pop()),this.setStyle({fontFamily:t},o)}else this.removeStyle(["fontFamily"],o);this.props[r]&&this.forceUpdate()},allowVisualStates:!0,popout:t.popout}}),w(e,{[i+"fontSize"]:{index:s+2,group:n,displayName:"Font Size",editorName:a("Font Size"),targetStyleProperty:"fontSize",type:{name:"number",units:["px"],defaultUnit:"px",parentPort:r},onChange(){this.props[r]&&this.forceUpdate()},allowVisualStates:!0,popout:t.popout,styleTag:o},[i+"color"]:{index:s+3,type:{name:"color",parentPort:r},displayName:"Color",editorName:a("Color"),group:n,targetStyleProperty:"color",allowVisualStates:!0,popout:t.popout,styleTag:o,onChange(){this.props[r]&&this.forceUpdate()}},[i+"letterSpacing"]:{index:s+4,group:n,displayName:"Letter Spacing",editorName:a("Letter Spacing"),targetStyleProperty:"letterSpacing",type:{name:"number",units:["px","em"],defaultUnit:"px"},allowVisualStates:!0,popout:t.popout,styleTag:o,default:"Auto",applyDefault:!1,onChange(){this.props[r]&&this.forceUpdate()}},[i+"lineHeight"]:{index:s+5,group:n,displayName:"Line Height",editorName:a("Line Height"),targetStyleProperty:"lineHeight",type:{name:"number",units:["","px","%"],defaultUnit:"",parentPort:r},allowVisualStates:!0,onChange(){this.props[r]&&this.forceUpdate()},popout:t.popout,styleTag:o,default:"Auto",applyDefault:!1},[i+"textTransform"]:{index:s+6,group:n,displayName:"Case",editorName:a("Case"),applyDefault:!1,targetStyleProperty:"textTransform",type:{name:"enum",enums:[{label:"None",value:"none"},{label:"Uppercase",value:"uppercase"},{label:"Lowercase",value:"lowercase"},{label:"Capitalize",value:"capitalize"}],parentPort:r},default:"none",popout:t.popout,styleTag:o,allowVisualStates:!0,onChange(){this.props[r]&&this.forceUpdate()}}});const l=i+"fontFamily";e.setup=function(t,n){n.on("nodeAdded."+e.name,(function(e){e.parameters[l]&&e.parameters[l].split(".").length>1&&C().instance.loadFont(e.parameters[l]),e.on("parameterUpdated",(function(e){e.name===l&&e.value&&e.value.split(".").length>1&&C().instance.loadFont(e.value)}))}))}}};var E=__webpack_require__(5107),k=__webpack_require__.n(E);const D=__webpack_require__(4442);function R(e,t,n,o){e._transitions&&e._transitions[t]&&(e._transitions[t].stop(),delete e._transitions[t]);const i=e.getInputValue(t),r=e.getInput(t);let s;if(r&&"color"===r.type?s=function(e,t){const n=[0,0,0,255];A(n,e);const o=[0,0,0,255];A(o,t),e&&"transparent"!==e||(n[0]=o[0],n[1]=o[1],n[2]=o[2]),t&&"transparent"!==t||(o[0]=n[0],o[1]=n[1],o[2]=n[2]);const i=[0,0,0,0];return e=>(i[0]=Math.floor(D.linear(n[0],o[0],e)),i[1]=Math.floor(D.linear(n[1],o[1],e)),i[2]=Math.floor(D.linear(n[2],o[2],e)),i[3]=Math.floor(D.linear(n[3],o[3],e)),function(e){return"#"+V(e[0])+V(e[1])+V(e[2])+V(e[3])}(i))}(e.context.styles.resolveColor(i),e.context.styles.resolveColor(n)):"number"==typeof i&&"number"==typeof n?s=M(i,n):"object"==typeof i&&i.hasOwnProperty("value")&&"object"==typeof n&&n.hasOwnProperty("value")&&(s=M(i.value,n.value)),s){e._transitions||(e._transitions={});const n=k()(o.curve);e._transitions[t]=e.context.timerScheduler.createTimer({duration:o.dur,onRunning:o=>{const i=s(n.get(o));e.queueInput(t,i)},onFinish:()=>{delete e._transitions[t]}}),e._transitions[t].start()}else e.queueInput(t,n)}function M(e,t){return n=>D.linear(e,t,n)}function A(e,t){if("transparent"===t||!t)return void(e[3]=0);const n=(t.length-1)/2;for(let o=0;o<n;++o){const n=1+2*o;e[o]=parseInt(t.substring(n,n+2),16)}}function V(e){var t=e.toString(16);return 1==t.length?"0"+t:t}function j(e,t,n){const o=n?e.props[n]:e.props;for(const n in t)if(o[n]){const i=o[n];o[n]=()=>{i(),t[n].call(e)}}else o[n]=t[n].bind(e);e.forceUpdate()}function F(e,t,n){let o;o="signal"===n.type?()=>{e.sendSignalOnOutput(t)}:(...o)=>{e.outputPropValues[t]=n.getValue?n.getValue.call(e,...o):o[0],e.flagOutputDirty(t),n.onChange&&n.onChange.call(e,e.outputPropValues[t])},j(e,{[t]:o},n.propPath)}function L(e,t){if(!e.type)throw new Error(`input ${t} is missing a type`);e.type.units?e.set=function(n){const o=e.propPath?this.props[e.propPath]:this.props;n&&void 0!==n.value?o[t]=n.value+n.unit:delete o[t],e.onChange&&e.onChange.call(this,n),this.forceUpdate()}:e.set=function(n){const o=e.propPath?this.props[e.propPath]:this.props;void 0!==n?o[t]=n:delete o[t],e.onChange&&e.onChange.call(this,n),this.forceUpdate()}}function U(e,t){for(const n of t)Array.isArray(n)?U(e,n):void 0!==n&&e.push(n)}class W extends t().Component{componentDidMount(){this.props.noodlNode.sendSignalOnOutput("didMount")}componentWillUnmount(){this.props.noodlNode.sendSignalOnOutput("willUnmount");const e=this.props.noodlNode;if(e.currentVisualStates){const t=["hover","pressed","focused"],n=e.currentVisualStates.filter((e=>!t.includes(e)));e.setVisualStates(n)}}render(){const{noodlNode:e,style:n,...o}=this.props;let i=e.style;n&&(i={...e.style,...n});const r={ref:t=>{e.innerReactComponentRef=t},style:i,...e.props,...o};if(e.noodlNodeAsProp){r.noodlNode=e;const t=e.getVisualParentNode();t&&t.props.layout&&(r.parentLayout=t.props.layout)}return e.renderedAtFrame=e.context.frameNumber,e.useFrame&&(void 0!==r.textStyle&&(r.style=i=Object.assign({},r.textStyle,i)),y.size(i,r),y.align(i,r)),t().createElement(e.reactComponent,r,e.renderChildren())}}function B(e,t,n){let o=e;if(n&&o.getAttribute("noodl-style-tag")!==n&&(o=e.querySelector(`[noodl-style-tag=${n}]`)),o)for(const e in t)o.style[e]=t[e]}let z=0;function H(e){const{frame:n}=e;void 0!==n&&(n.dimensions&&T.addDimensions(e,"object"==typeof n.dimensions?n.dimensions:void 0),n.position&&T.addTransformInputs(e),n.margins&&T.addMarginInputs(e),n.padding&&T.addPaddingInputs(e),n.align&&T.addAlignInputs(e));const{initialize:i,inputs:r,inputProps:s,inputCss:a,outputs:l,outputProps:u,dynamicports:d,defaultCss:c={},methods:p}=e,g=Object.assign({},c),f={};for(const e in a){const t=a[e],n=t.hasOwnProperty("default")&&!1!==t.applyDefault;if(t.styleTag&&!f.hasOwnProperty(t.styleTag)&&(f[t.styleTag]={}),n){const n=t.type.units?t.default+t.type.defaultUnit:t.default;t.styleTag?f[t.styleTag][e]=n:g[e]=n}}function m(e,t){this.clientBoundingRect=t,"x"===e?this.flagOutputDirty("screenPositionX"):"y"===e?this.flagOutputDirty("screenPositionY"):"width"===e?this.flagOutputDirty("boundingWidth"):"height"===e&&this.flagOutputDirty("boundingHeight")}const y=void 0===e.useVariants||e.useVariants,v={name:e.name,docs:e.docs,displayNodeName:e.displayNodeName||e.displayName,shortDesc:"",category:"Visual",allowChildren:void 0===e.allowChildren||e.allowChildren,visualStates:e.visualStates,allowAsExportRoot:e.allowAsExportRoot,singleton:e.singleton,useVariants:y,usePortAsLabel:e.usePortAsLabel,portLabelTruncationMode:e.portLabelTruncationMode,connectionPanel:e.connectionPanel,nodeDoubleClickAction:e.nodeDoubleClickAction,initialize(){this.reactKey="key"+z,z++,this.children=[],S&&(this.childrenCount=0),this.props={styles:{}},this.outputPropValues={},this.style=Object.assign({},g);for(const e in f)this.props.styles[e]=Object.assign({},f[e]);this.childIndex=0,this.clientBoundingRect={},this.noodlNodeAsProp=!!e.noodlNodeAsProp;const t=this.context&&this.context.runningInCanvas?300:0;this.boundingBoxObserver=new h(m.bind(this),t),this.wantsToBeMounted=!0,this.useFrame=!!n;for(const e in s){const t=s[e];t.propPath&&!this.props.hasOwnProperty(t.propPath)&&(this.props[t.propPath]={});const n=t.propPath?this.props[t.propPath]:this.props;t.hasOwnProperty("default")&&(t.type.defaultUnit&&void 0!==t.default?n[e]=t.default+t.type.defaultUnit:n[e]=t.default)}for(const e in u){const t=u[e];t.propPath&&!this.props.hasOwnProperty(t.propPath)&&(this.props[t.propPath]={}),t.props?j(this,t.props,t.propPath):F(this,e,t)}this.reactComponentRef=null,this.reactComponent=e.getReactComponent.call(this),i&&i.call(this)},getInspectInfo:e.getInspectInfo,nodeScopeDidInitialize:e.nodeScopeDidInitialize,dynamicports:d,inputs:{cssClassName:{index:100010,displayName:"CSS Class",group:"Advanced HTML",type:"string",default:"",set(e){this.props.className=e,this.forceUpdate()}},styleCss:{index:100011,displayName:"CSS Style",group:"Advanced HTML",type:{name:"string",codeeditor:"text",allowEditOnly:!0},default:"/* background-color: red; */",set(e){this.updateAdvancedStyle({content:e})}}},outputs:{childIndex:{displayName:"Child Index",type:"number",get(){return this.childIndex}},this:{displayName:"This",type:"reference",get(){return this}},screenPositionX:{group:"Bounding Box",displayName:"Screen Position X",type:"number",get(){return this.clientBoundingRect.x},onFirstConnectionAdded(){this.boundingBoxObserver.addObserver()},onLastConnectionRemoved(){this.boundingBoxObserver.removeObserver()}},screenPositionY:{group:"Bounding Box",displayName:"Screen Position Y",type:"number",get(){return this.clientBoundingRect.y},onFirstConnectionAdded(){this.boundingBoxObserver.addObserver()},onLastConnectionRemoved(){this.boundingBoxObserver.removeObserver()}},boundingWidth:{group:"Bounding Box",displayName:"Width",type:"number",get(){return this.clientBoundingRect.width},onFirstConnectionAdded(){this.boundingBoxObserver.addObserver()},onLastConnectionRemoved(){this.boundingBoxObserver.removeObserver()}},boundingHeight:{group:"Bounding Box",displayName:"Height",type:"number",get(){return this.clientBoundingRect.height},onFirstConnectionAdded(){this.boundingBoxObserver.addObserver()},onLastConnectionRemoved(){this.boundingBoxObserver.removeObserver()}},didMount:{group:"Mounted",displayName:"Did Mount",type:"signal"},willUnmount:{group:"Mounted",displayName:"Will Unmount",type:"signal"}},methods:{updateAdvancedStyle(e){let t;this.customCssStyles&&(this.removeStyle(Object.keys(this.customCssStyles)),this.customCssStyles=void 0);let n="",o=(e.content||"").replace("\n",""),i="";for(;o.length;){let e=o.indexOf("/*");if(-1===e&&(e=o.length),i+=o.substring(0,e),o=o.substring(e),o.length){let e=o.indexOf("*/");-1===e&&(e=o.length),o=o.substring(e+2)}}function r(e){return e.replace(/^\s+|\s+$/gm,"")}const s=i.split(";").map(r).filter((e=>e.length));t={};for(const e of s){const o=e.split(":").map(r);if(-1!==e.indexOf("\n"))n+="Missing semicolon: "+e.split("\n")[0];else if(2!==o.length)n+="Syntax error: "+e;else{const e=o[0].split("-");for(let t=1;t<e.length;t++)e[t]=e[t][0].toUpperCase()+e[t].substring(1);t[e.join("")]=o[1]}}n?this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"css-parse-waring",{message:"Error in CSS Style<br>"+n}):(this.context.editorConnection.clearWarning(this.nodeScope.componentOwner.name,this.id,"css-parse-waring"),t&&this.setStyle(t),this.customCssStyles=t)},setChildIndex(e){this.childIndex=e,this.flagOutputDirty("childIndex")},updateChildIndices(){let e=0;for(let t=0;t<this.children.length;t++){const n=this.children[t];"For Each"!==n.name&&"Component Children"!==n.name||e--,n.setChildIndex&&n.setChildIndex(t+e)}},updateChildrenCount(){let e=0;this.children.forEach((t=>{"For Each"===t?.model?.type?e+=t.model.children.length:e++})),this.childrenCount=e,this.flagOutputDirty("childrenCount")},addChild(e,t){void 0===t&&(t=this.children.length),e.parent=this,this.children.splice(t,0,e),this.cachedChildren=void 0,this.scheduleUpdateChildCountAndIndicies(),this.forceUpdate()},removeChild(e){const t=this.children.indexOf(e);-1!==t&&(this.children.splice(t,1),e.parent=void 0,this.cachedChildren=void 0,this.scheduleUpdateChildCountAndIndicies(),this.forceUpdate())},contains(e){return-1!==this.children.indexOf(e)||this.children.some((t=>t.contains&&t.contains(e)))},scheduleUpdateChildCountAndIndicies(){this.updateChildIndiciesScheduled||(this.updateChildIndiciesScheduled=!0,this.scheduleAfterInputsHaveUpdated((()=>{this.updateChildIndices(),S&&this.updateChildrenCount(),this.updateChildIndiciesScheduled=!1})))},getChildren(){return this.children},isChild(e){return-1!==this.children.indexOf(e)},getChildRoot(){return this},forceUpdate(){!0!==this.forceUpdateScheduled&&(this.forceUpdateScheduled=!0,this.context.eventEmitter.once("frameEnd",(()=>{this.forceUpdateScheduled=!1,this.renderedAtFrame!==this.context.frameNumber&&this.reactComponentRef&&this.reactComponentRef.setState({})})),this.context.scheduleUpdate())},_resetReactVirtualDOM(){this.reactKey="key"+z,z++;const e=this.getVisualParentNode();e&&(e.cachedChildren=void 0,e.forceUpdate())},triggerDidMount(){this.wantsToBeMounted&&!this.didCallTriggerDidMount&&(this.didCallTriggerDidMount=!0,this.hasOutput("didMount")&&this.sendSignalOnOutput("didMount"),this.props.didMount&&this.props.didMount(),this.didMount&&this.didMount()),this.children.forEach((e=>{e.triggerDidMount&&e.triggerDidMount()}))},render(){if(this.wantsToBeMounted)return t().createElement(W,{key:this.reactKey,noodlNode:this,ref:e=>{this.reactComponentRef=e,this.boundingBoxObserver.setTarget(o().findDOMNode(e))}})},renderChildren(){if(!this.cachedChildren){let e=[];U(e,this.children.map((e=>e.render()))),0===e.length?e=null:1===e.length&&(e=e[0]),this.cachedChildren=e}return this.cachedChildren},setStyle(e,t){const n=t?this.props.styles[t]:this.style;for(const t in e)n[t]=e[t];const o=this.getDOMElement();if(!o)return;let i=!1;if(!t){if(e.hasOwnProperty("opacity")&&(i=e.hasOwnProperty("opacity")&&("0"===o.style.opacity&&e.opacity>0||"0"!==o.style.opacity&&0===e.opacity)),e.transform){let t=e.transform;const n=this.getVisualParentNode();"absolute"!==this.style.position&&n&&n.style.flexDirection||("center"!==this.props.alignX||o.style.marginLeft&&o.style.marginRight||(t="translateX(-50%) "+t),"center"!==this.props.alignY||o.style.marginTop&&o.style.marginBottom||(t="translateY(-50%) "+t)),e.transform=t}const t=e.hasOwnProperty("marginLeft")||e.hasOwnProperty("marginRight")||e.hasOwnProperty("marginTop")||e.hasOwnProperty("marginBottom");(this.props.width&&"%"===this.props.width[this.props.width.length-1]||this.props.height&&"%"===this.props.height[this.props.height.length-1])&&t&&(i=!0),(e.position||e.flexDirection||e.clip)&&(i=!0)}i?this.forceUpdate():B(o,e,t)},removeStyle(e,t){const n=t?this.props.styles[t]:this.style;for(const t of e)delete n[t];const o=this.getDOMElement();let i=!1;if(!t&&o){const t={marginTop:!0,marginBottom:!0,marginLeft:!0,marginRight:!0};for(const n of e)t[n]&&(i=!0)}if(o){const n={};for(const t of e)n[t]="";B(o,n,t)}i&&this.forceUpdate()},getStyle(e){return this.style[e]},getRef(){return this.reactComponentRef},getDOMElement(){const e=this.getRef();if(e)return o().findDOMNode(e)},getVisualParentNode(){if(this.parent)return this.parent;let e=this.nodeScope.componentOwner;for(;!e.parent&&e.parentNodeScope;)e=e.parentNodeScope.componentOwner;return e?e.parent:void 0},setVariant(e){this._stopStateTransitions(),this.variant=e;const t={};e&&b(t,e.parameters),b(t,this.model.parameters),this.currentVisualStates&&b(t,this.getParametersForStates(this.currentVisualStates));const n=Object.keys(t).filter((e=>!this._hasInputBeenSetFromAConnection(e)));for(const e of n)this.registerInputIfNeeded(e),this.hasInput(e)&&this.queueInput(e,t[e])},getParameter(e){return this.model.parameters.hasOwnProperty(e)?this.model.parameters[e]:this.variant&&this.variant.parameters.hasOwnProperty(e)?this.variant.parameters[e]:this.context.getDefaultValueForInput(this.model.type,e)},getParametersForStates(e){const t={};if(this.variant)for(const n of e)this.variant.stateParameters&&this.variant.stateParameters.hasOwnProperty(n)&&b(t,this.variant.stateParameters[n]);for(const e in t)this.model.parameters.hasOwnProperty(e)&&((n=t[e])&&"object"==typeof n&&!Array.isArray(n)?b(t[e],this.model.parameters[e]):t[e]=this.model.parameters[e]);var n;if(this.model.stateParameters)for(const n of e)this.model.stateParameters.hasOwnProperty(n)&&b(t,this.model.stateParameters[n]);return t},_getNewState(e,t){const n=t.filter((t=>!(e||[]).includes(t))),o=n.length?n[0]:"neutral";return""===o?"neutral":o},_getDefaultTransition(e){return this.model.defaultStateTransitions&&this.model.defaultStateTransitions[e]&&this.model.defaultStateTransitions[e].curve?this.model.defaultStateTransitions[e]:this.variant&&this.variant.defaultStateTransitions&&this.variant.defaultStateTransitions[e]&&this.variant.defaultStateTransitions[e].curve?this.variant.defaultStateTransitions[e]:void 0},_getStateTransition(e){let t={};return this.model.stateTransitions&&this.model.stateTransitions[e]&&Object.assign(t,this.model.stateTransitions[e]),this.variant&&this.variant.stateTransitions&&this.variant.stateTransitions[e]&&Object.assign(t,this.variant.stateTransitions[e]),t},setVisualStates(e){if(!this.model)return;if(this.currentVisualStates&&e.length===this.currentVisualStates.length&&e.every(((e,t)=>e===this.currentVisualStates[t])))return;const t=this.currentVisualStates?this.getParametersForStates(this.currentVisualStates):{},n=this.getParametersForStates(e),o=this._getNewState(this.currentVisualStates,e);this.currentVisualStates=e;const i={};for(const e in t)n.hasOwnProperty(e)||this._hasInputBeenSetFromAConnection(e)||void 0!==this.getParameter(e)&&(i[e]=this.getParameter(e));for(const e in n)this._hasInputBeenSetFromAConnection(e)||void 0===n[e]||(i[e]=n[e]);const r=this._getDefaultTransition(o),s=this._getStateTransition(o);for(const e in i)s[e]&&s[e].curve?R(this,e,i[e],s[e]):!s[e]&&r?R(this,e,i[e],r):(this._transitions&&this._transitions[e]&&(this._transitions[e].stop(),delete this._transitions[e]),this.queueInput(e,i[e]))},_getVisualStates(){return this.currentVisualStates||[]},_stopStateTransitions(){if(this._transitions)for(const e in this._transitions)this._transitions[e].stop(),delete this._transitions[e]}}};y&&(v.inputs.variant={displayName:"Variant",group:"General",type:{name:"string",allowConnectionsOnly:!0},set(e){if(this.variant&&this.variant.name===e)return;const t=this.context.variants.getVariant(this.model.type,e);t&&this.setVariant(t)}}),!1!==e.mountedInput&&(v.inputs.mounted={displayName:"Mounted",index:9999,type:"boolean",group:"General",default:!0,set(e){if(e=!!e,this.wantsToBeMounted!==e){this.wantsToBeMounted=e;const t=this.getVisualParentNode();t&&(t.cachedChildren=void 0,t.forceUpdate())}}});const S=v.allowChildren||v.displayName;S&&(v.outputs.childrenCount={displayName:"Children Count",type:"number",get(){return this.childrenCount}});for(const e in r)v.inputs[e]=r[e];for(const t in s){const n=s[t];"node"===n.type?(n.type="reference",n.set=function(e){const o=n.propPath?this.props[n.propPath]:this.props;void 0!==e?o[t]=e.render():delete o[t],this.forceUpdate()}):"signal"===n.type?console.error(`Error: Signals not supported as a react prop. node: '${e.name}' input: '${t}'`):L(n,t),v.inputs[t]=n}for(const e in a){const t=a[e],n=t.targetStyleProperty||e;t.type.units?t.set=function(e){"object"!=typeof e&&t.type.defaultUnit&&(e={value:e,unit:t.type.defaultUnit}),"object"==typeof e&&void 0!==e.value?this.setStyle({[n]:e.value+e.unit},t.styleTag):void 0!==e?this.setStyle({[n]:e},t.styleTag):this.removeStyle([n],t.styleTag),t.onChange&&t.onChange.call(this,e)}:t.set=function(e){void 0!==e?this.setStyle({[n]:e},t.styleTag):this.removeStyle([n],t.styleTag),t.onChange&&t.onChange.call(this,e)},v.inputs[e]=t}for(const e in l)v.outputs[e]=l[e];for(const e in u){const t=u[e];"signal"!==t.type&&(t.get=function(){return this.outputPropValues[e]}),v.outputs[e]=t}for(const e in p)v.methods[e]=p[e];return{node:v,setup:e.setup}}const q=["onClick","onMouseDown","onMouseMove","onMouseUp","onMouseEnter","onMouseLeave","onMouseOver","onMouseOut","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel","onPointerDown","onPointerMove","onPointerUp","onPointerCancel"],X=new Set(["onMouseLeave","onMouseOut"]);function G(e){const t={};for(const n of q)e.blockTouch&&!X.has(n)?e.pointer&&e.pointer[n]?t[n]=t=>{e.pointer[n](t),t.stopPropagation()}:e[n]?t[n]=t=>{e[n](t),t.stopPropagation()}:t[n]=e=>{e.stopPropagation()}:e[n]?t[n]=e[n]:e.pointer&&(t[n]=e.pointer[n]);if(e.noodlNode)for(const n in t){const o=t[n];o&&(t[n]=t=>{o.call(this,t),e.noodlNode.context.updateDirtyNodes()})}return t}var $={};function Y(e,t,n){for(var o in e[t]||(e[t]={}),n)e[t][o]=n[o]}const J=function(e,t,n){if($[e])(function(e,t){var n;for(n in e)if(e.hasOwnProperty(n)&&e[n]!==t[n])return!1;for(n in t)if(t.hasOwnProperty(n)&&e[n]!==t[n])return!1;return!0})(t,$[e].props)||($[e].style.innerHTML=n(e,t),$[e].props=Object.assign({},t));else{var o=document.createElement("style");o.innerHTML=n(e,t),document.head.appendChild(o),$[e]={style:o,props:Object.assign({},t)}}},K=function(e,t){t=t||{},e.visualStates=[{name:"neutral",label:"Neutral"},{name:"hover",label:"Hover"},{name:"pressed",label:"Pressed"},{name:"focused",label:"Focused"},{name:"disabled",label:"Disabled"}],t.checked&&e.visualStates.splice(3,0,{name:"checked",label:"Checked"}),function(e,t){Y(e,"inputs",{enabled:{type:"boolean",displayName:"Enabled",group:"General",default:!0,set:function(e){var t=(e=!!e)!==this._internal.enabled;this.props.enabled=this._internal.enabled=e,t&&(this._updateVisualState(),this.forceUpdate(),this.flagOutputDirty("enabled"))}}})}(e),function(e,t){Y(e,"inputProps",{blockTouch:{index:450,displayName:"Block Pointer Events",type:"boolean",group:"Pointer Events"}})}(e),e.methods._updateVisualState=function(){var e=[];this._internal.enabled&&(this.outputPropValues.hoverState&&e.push("hover"),this.outputPropValues.pressedState&&e.push("pressed"),this.outputPropValues.focusState&&e.push("focused")),t.checked&&this._internal.checked&&e.push("checked"),this._internal.enabled||e.push("disabled"),this.setVisualStates(e)},function(e,t){Y(e,"outputProps",{focusState:{displayName:"Focused",group:"States",type:"boolean",props:{onFocus:function(){this.outputPropValues.focusState=!0,this.flagOutputDirty("focusState"),this._updateVisualState()},onBlur:function(){this.outputPropValues.focusState=!1,this.flagOutputDirty("focusState"),this._updateVisualState()}}},onFocus:{displayName:"Focused",group:"Focus Events",type:"signal",props:{onFocus:function(){this.sendSignalOnOutput("onFocus")}}},onBlur:{displayName:"Blurred",group:"Focus Events",type:"signal",props:{onBlur:function(){this.sendSignalOnOutput("onBlur")}}},hoverState:{displayName:"Hover",group:"States",type:"boolean",props:{onMouseOver:function(){this.outputPropValues.hoverState=!0,this.flagOutputDirty("hoverState"),this._updateVisualState()},onMouseLeave:function(){this.outputPropValues.hoverState=!1,this.flagOutputDirty("hoverState"),this._updateVisualState()}}},hoverStart:{displayName:"Hover Start",group:"Pointer Events",type:"signal",props:{onMouseOver:function(){this.sendSignalOnOutput("hoverStart")}}},hoverEnd:{displayName:"Hover End",group:"Pointer Events",type:"signal",props:{onMouseLeave:function(){this.sendSignalOnOutput("hoverEnd")}}},pressedState:{displayName:"Pressed",group:"States",type:"boolean",props:{onMouseDown:function(){this.outputPropValues.pressedState=!0,this.flagOutputDirty("pressedState"),this._updateVisualState()},onTouchStart:function(){this.outputPropValues.pressedState=!0,this.flagOutputDirty("pressedState"),this._updateVisualState()},onMouseUp:function(){this.outputPropValues.pressedState=!1,this.flagOutputDirty("pressedState"),this._updateVisualState()},onTouchEnd:function(){this.outputPropValues.pressedState=!1,this.flagOutputDirty("pressedState"),this._updateVisualState()},onTouchCancel:function(){this.outputPropValues.pressedState=!1,this.flagOutputDirty("pressedState"),this._updateVisualState()},onMouseLeave:function(){this.outputPropValues.pressedState=!1,this.flagOutputDirty("pressedState"),this._updateVisualState()}}},pointerDown:{displayName:"Pointer Down",group:"Pointer Events",type:"signal",props:{onMouseDown:function(){this.sendSignalOnOutput("pointerDown")},onTouchStart:function(){this.sendSignalOnOutput("pointerDown")}}},pointerUp:{displayName:"Pointer Up",group:"Pointer Events",type:"signal",props:{onMouseUp:function(){this.sendSignalOnOutput("pointerUp")},onTouchEnd:function(){this.sendSignalOnOutput("pointerUp")},onTouchCancel:function(){this.sendSignalOnOutput("pointerUp")}}}})}(e),function(e,t){Y(e,"outputs",{enabled:{type:"boolean",displayName:"Enabled",group:"States",getter:function(){return this._internal.enabled}}})}(e);var n=e.initialize;e.initialize=function(){n&&n.call(this),this.props.enabled=this._internal.enabled=!0,this.outputPropValues.hoverState=this.outputPropValues.focusState=this.outputPropValues.pressedState=!1}},Q=function(e){return Object.assign({},{onFocus:e.onFocus,onBlur:e.onBlur},G(e))};var Z=function(){return Z=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Z.apply(this,arguments)};function ee(e){var n=Z({},e.style);function o(){var n={};return e.useLabel&&("left"===e.iconPlacement||void 0===e.iconPlacement?n.marginRight=e.iconSpacing:n.marginLeft=e.iconSpacing),"image"===e.iconSourceType&&void 0!==e.iconImageSource?(n.width=e.iconSize,n.height=e.iconSize,t().createElement("img",{alt:"",src:e.iconImageSource,style:n})):"icon"===e.iconSourceType&&void 0!==e.iconIconSource?(n.fontSize=e.iconSize,n.color=e.iconColor,!0===e.iconIconSource.codeAsClass?t().createElement("span",{className:[e.iconIconSource.class,e.iconIconSource.code].join(" "),style:n}):t().createElement("span",{className:e.iconIconSource.class,style:n},e.iconIconSource.code)):null}y.size(n,e),y.align(n,e),void 0!==e.textStyle&&((n=Object.assign({},e.textStyle,n)).color=e.noodlNode.context.styles.resolveColor(n.color));var i="ndl-controls-button";e.className&&(i=i+" "+e.className);var r=null;return e.useLabel&&e.useIcon?r=t().createElement(t().Fragment,null,"left"===e.iconPlacement?o():null,String(e.label),"right"===e.iconPlacement?o():null):e.useLabel?r=String(e.label):e.useIcon&&(r=o()),t().createElement("button",Z({},e.attrs,{className:i,disabled:!e.enabled},Q(e),{type:e.buttonType,style:n,onClick:e.onClick}),r,e.children)}var te={name:"net.noodl.controls.button",displayName:"Button",docs:"https://docs.noodl.net/nodes/ui-controls/button",allowChildren:!0,noodlNodeAsProp:!0,usePortAsLabel:"label",portLabelTruncationMode:"length",nodeDoubleClickAction:{focusPort:"label"},connectionPanel:{groupPriority:["General","Style","Actions","Events","States","Mounted","Label","Label Text Style","Hover Events","Pointer Events","Focus Events"]},initialize:function(){this.props.attrs={},this.props.layout="row"},getReactComponent:function(){return ee},inputs:{testId:{index:100009,displayName:"Test ID Attribute",group:"Advanced HTML",type:"string",set:function(e){this.props.attrs["data-testid"]=e,this.forceUpdate()}}},inputCss:{backgroundColor:{index:100,displayName:"Background Color",group:"Style",type:"color",default:"#000000",allowVisualStates:!0}},outputProps:{onClick:{displayName:"Click",group:"Events",type:"signal"}}};T.addDimensions(te,{defaultSizeMode:"contentSize",contentLabel:"Content"}),T.addTextStyleInputs(te),T.addAlignInputs(te),T.addTransformInputs(te),T.addPaddingInputs(te,{defaults:{paddingTop:5,paddingRight:20,paddingBottom:5,paddingLeft:20}}),T.addMarginInputs(te),T.addLabelInputs(te,{defaults:{useLabel:!0}}),T.addIconInputs(te,{enableIconPlacement:!0,defaults:{useIcon:!1}}),T.addSharedVisualInputs(te),T.addBorderInputs(te),T.addShadowInputs(te),K(te);const ne=H(te);var oe=function(){return oe=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},oe.apply(this,arguments)};function ie(n){var o=(0,e.useState)(n.checked),i=o[0],r=o[1];(0,e.useEffect)((function(){r(!!n.checked)}),[]),(0,e.useEffect)((function(){r(!!n.checked)}),[n.checked]);var s=oe({},n.style);"none"===n.parentLayout&&(s.position="absolute"),y.align(s,n);var a=oe(oe({},n.attrs),{id:n.id,className:[n.className,"ndl-controls-checkbox-2"].join(" "),disabled:!n.enabled,style:{width:n.styles.checkbox.width,height:n.styles.checkbox.height}}),l=oe({display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,position:"relative"},n.styles.checkbox);n.useLabel||(Object.assign(a,Q(n)),Object.assign(l,s));var u=t().createElement("div",{className:"ndl-controls-pointer",style:l,"noodl-style-tag":"checkbox"},n.useIcon?function(){if("image"===n.iconSourceType&&void 0!==n.iconImageSource)return t().createElement("img",{alt:"",src:n.iconImageSource,style:{width:n.iconSize,height:n.iconSize,position:"absolute"}});if("icon"===n.iconSourceType&&void 0!==n.iconIconSource){var e={fontSize:n.iconSize,color:n.iconColor,position:"absolute"};return!0===n.iconIconSource.codeAsClass?t().createElement("span",{className:[n.iconIconSource.class,n.iconIconSource.code].join(" "),style:e}):t().createElement("span",{className:n.iconIconSource.class,style:e},n.iconIconSource.code)}return null}():null,t().createElement("input",oe({type:"checkbox"},a,{checked:i,onChange:function(e){r(e.target.checked),n.checkedChanged&&n.checkedChanged(e.target.checked)}})));if(n.useLabel){var d=oe(oe({marginLeft:n.labelSpacing},n.labeltextStyle),n.styles.label);return n.enabled||(d.cursor="default"),d.color=n.noodlNode.context.styles.resolveColor(d.color),t().createElement("div",oe({style:oe({display:"flex",alignItems:"center"},s)},Q(n)),u,t().createElement("label",{className:"ndl-controls-pointer",style:d,htmlFor:n.id,"noodl-style-tag":"label"},n.label))}return u}var re=__webpack_require__(1436),se=__webpack_require__.n(re),ae={name:"net.noodl.controls.checkbox",displayName:"Checkbox",docs:"https://docs.noodl.net/nodes/ui-controls/checkbox",allowChildren:!1,noodlNodeAsProp:!0,nodeDoubleClickAction:{focusPort:"label"},usePortAsLabel:"label",portLabelTruncationMode:"length",connectionPanel:{groupPriority:["General","Style","Actions","Events","States","Mounted","Label","Label Text Style","Hover Events","Pointer Events","Focus Events"]},initialize:function(){var e=this;this.props.attrs={},this.props.sizeMode="explicit",this.props.id="input-"+se()(),this.props.checked=this._internal.checked=!1,this.props.checkedChanged=function(t){var n=e._internal.checked!==t;e._internal.checked=t,n&&(e.flagOutputDirty("checked"),e.sendSignalOnOutput("onChange"),e._updateVisualState())}},getReactComponent:function(){return ie},inputs:{checked:{type:"boolean",displayName:"Checked",group:"General",default:!1,index:100,set:function(e){var t=(e=!!e)!==this._internal.checked;this.props.checked=this._internal.checked=e,t&&(this.forceUpdate(),this.flagOutputDirty("checked"),this._updateVisualState())}},check:{type:"signal",displayName:"Check",group:"Actions",valueChangedToTrue:function(){!0!==this._internal.checked&&(this.props.checked=this._internal.checked=!0,this.forceUpdate(),this.flagOutputDirty("checked"),this._updateVisualState())}},uncheck:{type:"signal",displayName:"Uncheck",group:"Actions",valueChangedToTrue:function(){!1!==this._internal.checked&&(this.props.checked=this._internal.checked=!1,this.forceUpdate(),this.flagOutputDirty("checked"),this._updateVisualState())}},testId:{index:100009,displayName:"Test ID Attribute",group:"Advanced HTML",type:"string",set:function(e){this.props.attrs["data-testid"]=e,this.forceUpdate()}}},inputCss:{backgroundColor:{index:201,displayName:"Background Color",group:"Style",type:"color",default:"transparent",applyDefault:!1,allowVisualStates:!0,styleTag:"checkbox"},width:{index:11,group:"Dimensions",displayName:"Width",type:{name:"number",units:["px","vw","vh"],defaultUnit:"px"},default:32,allowVisualStates:!0,styleTag:"checkbox"},height:{index:12,group:"Dimensions",displayName:"Height",type:{name:"number",units:["px","vw","vh"],defaultUnit:"px"},default:32,allowVisualStates:!0,styleTag:"checkbox"}},outputs:{checked:{type:"boolean",displayName:"Checked",group:"States",getter:function(){return this._internal.checked}},onChange:{displayName:"Changed",group:"Events",type:"signal"}}};T.addAlignInputs(ae),T.addTransformInputs(ae),T.addMarginInputs(ae),T.addPaddingInputs(ae),T.addIconInputs(ae),T.addLabelInputs(ae,{enableSpacing:!0,styleTag:"label"}),T.addSharedVisualInputs(ae),T.addBorderInputs(ae,{defaults:{borderStyle:"solid",borderWidth:2,borderColor:"#000000",borderRadius:3},styleTag:"checkbox"}),T.addShadowInputs(ae,{styleTag:"checkbox"}),K(ae,{checked:!0});const le=H(ae);var ue=function(){return ue=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},ue.apply(this,arguments)};function de(n){var o=(0,e.useState)(n.value),i=o[0],r=o[1];(0,e.useEffect)((function(){r(n.value),n.valueChanged(n.value)}),[n.value,n.items]);var s=ue({},n.style);y.size(s,n),y.align(s,n),void 0!==n.textStyle&&((s=Object.assign({},n.textStyle,s)).color=n.noodlNode.context.styles.resolveColor(s.color));var a=n.items&&void 0!==i?n.items.findIndex((function(e){return e.Value===i})):-1,l=s.height,u=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]])}return n}(s,["height"]);function d(){if("image"===n.iconSourceType&&void 0!==n.iconImageSource)return t().createElement("img",{alt:"",src:n.iconImageSource,style:{width:n.iconSize,height:n.iconSize}});if("icon"===n.iconSourceType&&void 0!==n.iconIconSource){var e={fontSize:n.iconSize,color:n.iconColor};return"left"===n.iconPlacement||void 0===n.iconPlacement?e.marginRight=n.iconSpacing:e.marginLeft=n.iconSpacing,!0===n.iconIconSource.codeAsClass?t().createElement("span",{className:[n.iconIconSource.class,n.iconIconSource.code].join(" "),style:e}):t().createElement("span",{className:n.iconIconSource.class,style:e},n.iconIconSource.code)}return null}var c=ue(ue({},n.attrs),{id:n.id,className:n.className,style:{inset:0,opacity:0,position:"absolute",textTransform:"inherit",cursor:n.enabled?"":"default","-webkit-appearance":"none"},onClick:n.onClick}),p=ue(ue({display:"flex",alignItems:"center"},n.styles.inputWrapper),{cursor:n.enabled?"":"default"}),h=l&&"%"===l[String(l).length-1];n.useLabel?h?p.flexGrow=1:p.height=l:(Object.assign(p,u),p.height=l);var g=[];n.items&&(g=n.items.map((function(e){return t().createElement("option",{key:e.Value,value:e.Value,disabled:"true"===e.Disabled||!0===e.Disabled||void 0},e.Label)})));var f=null;a>=0&&a<n.items.items.length?f=t().createElement("span",null,n.items.items[a].Label):n.placeholder&&(f=t().createElement("span",{style:{opacity:n.placeholderOpacity}},n.placeholder));var m=t().createElement("div",{className:"ndl-controls-pointer",style:p,"noodl-style-tag":"inputWrapper"},n.useIcon&&"left"===n.iconPlacement?d():null,t().createElement("div",{style:{width:"100%",height:"100%",alignItems:"center",display:"flex"}},f),n.useIcon&&"right"===n.iconPlacement?d():null,t().createElement("select",ue({},c,{disabled:!n.enabled,value:g.find((function(e){return e.props.value===i}))?i:void 0},Q(n),{onChange:function(e){r(e.target.value),n.valueChanged&&n.valueChanged(e.target.value)}}),t().createElement("option",{value:"",disabled:!0,selected:!0,hidden:!0}),g));if(n.useLabel){var v=ue(ue({},u),{display:"flex",flexDirection:"column"});return h&&(v.height=l),t().createElement("div",{style:v},t().createElement("label",{htmlFor:n.id,style:ue(ue(ue({},n.labeltextStyle),n.styles.label),{marginBottom:n.labelSpacing}),"noodl-style-tag":"label"},n.label),m)}return m}var ce={name:"net.noodl.controls.options",displayName:"Dropdown",docs:"https://docs.noodl.net/nodes/ui-controls/dropdown",allowChildren:!1,noodlNodeAsProp:!0,usePortAsLabel:"label",nodeDoubleClickAction:{focusPort:"label"},connectionPanel:{groupPriority:["General","Style","Actions","Events","States","Mounted","Text Style","Label","Label Text Style","Hover Events","Pointer Events","Focus Events"]},initialize:function(){var e=this;this.props.attrs={},this._itemsChanged=function(){e.forceUpdate()},this.props.id="input-"+se()(),this.props.valueChanged=function(t){var n=e._internal.value!==t;e._internal.value=t,n&&(e.flagOutputDirty("value"),e.sendSignalOnOutput("onChange"))}},getReactComponent:function(){return de},inputs:{items:{type:"array",displayName:"Items",group:"General",set:function(e){this._internal.items!==e&&void 0!==this._internal.items&&this._internal.items.off("change",this._itemsChanged),this._internal.items=e,this._internal.items.on("change",this._itemsChanged),this.props.items=this._internal.items,this.forceUpdate()}},value:{type:"string",displayName:"Value",group:"General",set:function(e){if(void 0!==e&&"string"!=typeof e){if(void 0===(null==e?void 0:e.toString))return;e=e.toString()}var t=e!==this._internal.value;this.props.value=this._internal.value=e,t&&(this.forceUpdate(),this.flagOutputDirty("value"))}},testId:{index:100009,displayName:"Test ID Attribute",group:"Advanced HTML",type:"string",set:function(e){this.props.attrs["data-testid"]=e,this.forceUpdate()}}},inputProps:{placeholder:{displayName:"Placeholder",type:"string",group:"Placeholder"},placeholderOpacity:{group:"Placeholder",displayName:"Placeholder opacity",type:"number",default:.5}},outputs:{value:{type:"string",displayName:"Value",group:"States",getter:function(){return this._internal.value}},onChange:{type:"signal",displayName:"Changed",group:"Events"}},inputCss:{backgroundColor:{index:100,displayName:"Background Color",group:"Style",type:"color",default:"transparent",styleTag:"inputWrapper",allowVisualStates:!0}}};T.addDimensions(ce,{defaultSizeMode:"contentSize",contentLabel:"Content"}),T.addAlignInputs(ce),T.addTextStyleInputs(ce),T.addTransformInputs(ce),T.addPaddingInputs(ce,{styleTag:"inputWrapper"}),T.addMarginInputs(ce),T.addIconInputs(ce,{enableIconPlacement:!0,defaults:{useIcon:!1,iconColor:"#000000"}}),T.addLabelInputs(ce,{enableSpacing:!0,styleTag:"label"}),T.addSharedVisualInputs(ce),T.addBorderInputs(ce,{defaults:{borderStyle:"solid",borderWidth:2,borderColor:"#000000",borderRadius:5},styleTag:"inputWrapper"}),T.addShadowInputs(ce,{styleTag:"inputWrapper"}),K(ce);const pe=H(ce),he=t().createContext({name:void 0,selected:void 0,checkedChanged:void 0});var ge=function(){return ge=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},ge.apply(this,arguments)};function fe(e){return e&&"%"===e[e.length-1]}function me(n){var o=(0,e.useContext)(he),i=ge({},n.style);"none"===n.parentLayout&&(i.position="absolute"),y.align(i,n),n.checkedChanged&&n.checkedChanged(!!o&&o.selected===n.value);var r=ge(ge({},n.attrs),{id:n.id,disabled:!n.enabled,className:[n.className,"ndl-controls-radio-2"].join(" "),style:{width:n.styles.radio.width,height:n.styles.radio.height}}),s=ge({display:"flex",alignItems:"center",justifyContent:"center",position:"relative",flexShrink:0},n.styles.radio);n.useLabel?fe(n.styles.radio.width)&&(delete s.width,s.flexGrow=1):(Object.assign(r,Q(n)),Object.assign(s,i));var a={left:n.fillSpacing,right:n.fillSpacing,top:n.fillSpacing,bottom:n.fillSpacing,backgroundColor:n.styles.fill.backgroundColor,borderRadius:"inherit",position:"absolute"},l=t().createElement("div",{className:"ndl-controls-pointer",style:s,"noodl-style-tag":"radio"},t().createElement("div",{style:a,"noodl-style-tag":"fill"}),n.useIcon?function(){if("image"===n.iconSourceType&&void 0!==n.iconImageSource)return t().createElement("img",{alt:"",src:n.iconImageSource,style:{width:n.iconSize,height:n.iconSize}});if("icon"===n.iconSourceType&&void 0!==n.iconIconSource){var e={fontSize:n.iconSize,color:n.iconColor};return!0===n.iconIconSource.codeAsClass?t().createElement("span",{className:["ndl-controls-abs-center",n.iconIconSource.class,n.iconIconSource.code].join(" "),style:e}):t().createElement("span",{className:["ndl-controls-abs-center",n.iconIconSource.class].join(" "),style:e},n.iconIconSource.code)}return null}():null,t().createElement("input",ge({type:"radio",name:o?o.name:void 0},r,{checked:!!o&&o.selected===n.value,onChange:function(e){o&&o.checkedChanged&&o.checkedChanged(n.value)}})));if(n.useLabel){var u=ge(ge(ge({marginLeft:n.labelSpacing},n.labeltextStyle),n.styles.label),{cursor:n.enabled?void 0:"default"});u.color=n.noodlNode.context.styles.resolveColor(u.color);var d=ge({display:"flex",alignItems:"center"},i);return fe(n.styles.radio.width)&&(d.width=n.styles.radio.width),fe(n.styles.radio.height)&&(d.height=n.styles.radio.height),t().createElement("div",ge({style:d},Q(n)),l,t().createElement("label",{className:"ndl-controls-pointer",style:u,htmlFor:n.id,"noodl-style-tag":"label"},n.label))}return l}var ye={name:"net.noodl.controls.radiobutton",displayName:"Radio Button",docs:"https://docs.noodl.net/nodes/ui-controls/radio-button",allowChildren:!1,noodlNodeAsProp:!0,usePortAsLabel:"label",nodeDoubleClickAction:{focusPort:"label"},connectionPanel:{groupPriority:["General","Style","Fill Style","Actions","Events","States","Mounted","Label","Label Text Style","Hover Events","Pointer Events","Focus Events"]},initialize:function(){var e=this;this.props.attrs={},this.props.sizeMode="explicit",this.props.id="input-"+se()(),this._internal.checked=!1,this.props.checkedChanged=function(t){var n=e._internal.checked!==t;e._internal.checked=t,n&&(e.flagOutputDirty("checked"),e._updateVisualState())},this.props.styles.fill={}},getReactComponent:function(){return me},inputs:{fillColor:{index:19,displayName:"Fill Color",group:"Fill Style",type:"color",allowVisualStates:!0,styleTag:"fill",set:function(e){this.setStyle({backgroundColor:e},"fill")}},testId:{index:100009,displayName:"Test ID Attribute",group:"Advanced HTML",type:"string",set:function(e){this.props.attrs["data-testid"]=e,this.forceUpdate()}}},inputProps:{value:{type:"string",displayName:"Value",group:"General",index:100},fillSpacing:{displayName:"Fill Spacing",group:"Fill Style",type:{name:"number",units:["px","vw","vh"],defaultUnit:"px"},allowVisualStates:!0,default:2}},inputCss:{width:{index:11,group:"Dimensions",displayName:"Width",type:{name:"number",units:["px","%","vw","vh"],defaultUnit:"px"},default:32,allowVisualStates:!0,styleTag:"radio",onChange:function(){this.forceUpdate()}},height:{index:12,group:"Dimensions",displayName:"Height",type:{name:"number",units:["px","%"],defaultUnit:"px"},default:32,allowVisualStates:!0,styleTag:"radio",onChange:function(){this.forceUpdate()}},backgroundColor:{index:201,displayName:"Background Color",group:"Style",type:"color",allowVisualStates:!0,styleTag:"radio",default:"transparent",applyDefault:!1}},outputs:{checked:{type:"boolean",displayName:"Checked",group:"States",get:function(){return this._internal.checked}}}};T.addAlignInputs(ye),T.addTransformInputs(ye),T.addMarginInputs(ye),T.addPaddingInputs(ye),T.addIconInputs(ye),T.addLabelInputs(ye,{enableSpacing:!0,styleTag:"label"}),T.addSharedVisualInputs(ye),T.addBorderInputs(ye,{defaults:{borderStyle:"solid",borderWidth:2,borderRadius:16},styleTag:"radio"}),T.addShadowInputs(ye,{styleTag:"radio"}),K(ye,{checked:!0});const ve=H(ye);var be=function(){return be=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},be.apply(this,arguments)};function Se(n){var o=(0,e.useState)(n.value),i=o[0],r=o[1],s={selected:i,name:n.name,checkedChanged:function(e){r(e),n.valueChanged&&n.valueChanged(e)}};(0,e.useEffect)((function(){r(n.value)}),[n.value]);var a=be({},n.style);y.size(a,n),y.align(a,n);var l="ndl-controls-radiobuttongroup";return n.className&&(l=l+" "+n.className),t().createElement(he.Provider,{value:s},t().createElement("div",{className:l,style:a},n.children))}const _e=["row","row-reverse","column","column-reverse","inherit","initial","revert","unset"];var Ce={name:"Radio Button Group",displayName:"Radio Button Group",docs:"https://docs.noodl.net/nodes/ui-controls/radio-button-group",allowChildren:!0,noodlNodeAsProp:!0,useVariants:!1,connectionPanel:{groupPriority:["General","Style","Actions","Events","Mounted","States"]},initialize:function(){var e=this;this.props.name="radio-"+se()(),this.props.valueChanged=function(t){var n=e._internal.value!==t;e._internal.value=t,e.props.value=t,n&&(e.forceUpdate(),e.flagOutputDirty("value"),e.sendSignalOnOutput("onChange"))}},getReactComponent:function(){return Se},defaultCss:{display:"flex",position:"relative",flexDirection:"column"},inputs:{flexDirection:{index:11,displayName:"Layout",group:"Layout",type:{name:"enum",enums:[{label:"Vertical",value:"column"},{label:"Horizontal",value:"row"}]},default:"column",set:function(e){this.props.layout=e,"none"!==e?this.setStyle({flexDirection:e}):this.removeStyle(["flexDirection"]),this.context.editorConnection&&("none"===e||_e.includes(e)?this.context.editorConnection.clearWarning(this.nodeScope.componentOwner.name,this.id,"layout-warning"):this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"layout-warning",{message:"Invalid Layout value has to be a valid flex-direction value."})),this.forceUpdate()}},value:{index:20,type:"string",displayName:"Value",group:"General",set:function(e){if("string"!=typeof e&&void 0!==e.toString&&(e=e.toString()),"string"==typeof e){var t=e!==this._internal.value;this.props.value=this._internal.value=e,t&&(this.forceUpdate(),this.flagOutputDirty("value"))}}}},outputs:{value:{type:"string",displayName:"Value",group:"States",getter:function(){return this._internal.value}},onChange:{type:"signal",displayName:"Changed",group:"Events"}},inputProps:{},outputProps:{}};T.addDimensions(Ce,{defaultSizeMode:"contentSize",contentLabel:"Content"}),T.addAlignInputs(Ce),T.addTransformInputs(Ce),T.addMarginInputs(Ce),T.addPaddingInputs(Ce),T.addSharedVisualInputs(Ce);const Ne=Ce=H(Ce);var we=function(){return we=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},we.apply(this,arguments)};function Oe(e,t){return".".concat(e,"::-webkit-slider-thumb {\n  width: ").concat(t.thumbWidth,";\n}")}function xe(e,t,n){function o(e,o){var i="".concat(t,"Border").concat(o,"Width"),r="".concat(t,"Border").concat(o,"Color"),s="".concat(t,"Border").concat(o,"Style"),a=n[i]||n["".concat(t,"BorderWidth")];void 0!==a&&(e["border".concat(o,"Width")]=a);var l=e[r]=n[r]||n["".concat(t,"BorderColor")];void 0!==l&&(e["border".concat(o,"Color")]=l);var u=n[s]||n["".concat(t,"BorderStyle")];void 0!==u&&(e["border".concat(o,"Style")]=u)}o(e,"Top"),o(e,"Right"),o(e,"Bottom"),o(e,"Left")}function Ie(e,t,n){var o=n["".concat(t,"BorderRadius")],i=n["".concat(t,"BorderTopLeftRadius")]||o,r=n["".concat(t,"BorderTopRightRadius")]||o,s=n["".concat(t,"BorderBottomRightRadius")]||o,a=n["".concat(t,"BorderBottomLeftRadius")]||o;e.borderRadius="".concat(i," ").concat(r," ").concat(s," ").concat(a)}function Pe(e,t,n){if(n["".concat(t,"BoxShadowEnabled")]){var o=n["".concat(t,"BoxShadowInset")],i=n["".concat(t,"BoxShadowOffsetX")],r=n["".concat(t,"BoxShadowOffsetY")],s=n["".concat(t,"BoxShadowBlurRadius")],a=n["".concat(t,"BoxShadowSpreadRadius")],l=n["".concat(t,"BoxShadowColor")];e.boxShadow="".concat(o?"inset ":"").concat(i," ").concat(r," ").concat(s," ").concat(a," ").concat(l)}}function Te(e){return e&&"x"===e[e.length-1]}function Ee(n){var o=(0,e.useState)(n.value),i=o[0],r=o[1];function s(e){r(e),n.updateOutputValue(e)}(0,e.useEffect)((function(){s(n.value)}),[n.value]);var a=we({},n.style);y.size(a,n),y.align(a,n);var l="ndl-controls-range-"+n._nodeId;J(l,n,Oe);var u="ndl-controls-range2 ".concat(l," ").concat(n.className?n.className:""," "),d=we(we({},n.attrs),{id:n.id,style:{width:"100%",opacity:0},onClick:n.onClick,min:n.min,max:n.max});if(n.step&&(d.step=n.step),Te(n.thumbHeight))if(Te(n.trackHeight)){var c=Number(n.thumbHeight.slice(0,-2)),p=Number(n.trackHeight.slice(0,-2));d.style.height=Math.max(c,p)+"px"}else d.style.height=n.thumbHeight;else d.style.height=n.trackHeight;var h=we({display:"flex",alignItems:"center"},a),g=(i-n.min)/(n.max-n.min),f={position:"absolute",width:"100%",height:n.trackHeight,background:"linear-gradient(to right, ".concat(n.trackActiveColor," 0%, ").concat(n.trackActiveColor," ").concat(100*g,"%, ").concat(n.trackColor," ").concat(100*g,"%, ").concat(n.trackColor," 100%)")};xe(f,"track",n),Ie(f,"track",n),Pe(f,"track",n);var m={position:"absolute",left:"calc((100% - "+n.thumbWidth+") * "+g+")",width:n.thumbWidth,height:n.thumbHeight,backgroundColor:n.thumbColor};return xe(m,"thumb",n),Ie(m,"thumb",n),Pe(m,"thumb",n),t().createElement("div",{style:h},t().createElement("div",{style:f}),t().createElement("div",{style:m}),t().createElement("input",we({className:u},Q(n),{type:"range"},d,{value:i,disabled:!n.enabled,onChange:function(e){return s(Number(e.target.value))}})))}var ke={group:"thumb-styles",label:"Thumb Styles"},De={group:"track-styles",label:"Track Styles"},Re={name:"net.noodl.controls.range",displayNodeName:"Slider",docs:"https://docs.noodl.net/nodes/ui-controls/slider",allowChildren:!1,noodlNodeAsProp:!0,connectionPanel:{groupPriority:["General","Style","Actions","Events","States","Mounted","Hover Events","Pointer Events","Focus Events"]},initialize:function(){var e=this;this.props.attrs={},this.props.sizeMode="contentHeight",this.props.id="input-"+se()(),this.props.value=this.props.min,this._internal.outputValue=0,this.props._nodeId=this.id,this.props.updateOutputValue=function(t){t="string"==typeof t?parseFloat(t):t,e._internal.outputValue!==t&&(e._internal.outputValue=t,e.flagOutputDirty("value"),e._updateOutputValuePercent(t),e.sendSignalOnOutput("onChange")),e._internal.valuePercent||e._updateOutputValuePercent(t)},this.props.updateOutputValue(this.props.value)},getReactComponent:function(){return Ee},inputs:{value:{type:"string",displayName:"Value",group:"General",index:100,set:function(e){this._setInputValue(e)}},testId:{index:100009,displayName:"Test ID Attribute",group:"Advanced HTML",type:"string",set:function(e){this.props.attrs["data-testid"]=e,this.forceUpdate()}}},outputs:{value:{type:"number",displayName:"Value",group:"States",get:function(){return this._internal.outputValue}},valuePercent:{type:"number",displayName:"Value Percent",group:"States",get:function(){return this._internal.valuePercent}},onChange:{type:"signal",displayName:"Changed",group:"Events"}},inputProps:{min:{type:"number",displayName:"Min",group:"General",default:0,index:100,onChange:function(){this._setInputValue(this.props.value)}},max:{type:"number",displayName:"Max",group:"General",default:100,index:100,onChange:function(){this._setInputValue(this.props.value)}},step:{type:"number",displayName:"Step",group:"General",default:1,index:100},width:{index:11,group:"Dimensions",displayName:"Width",type:{name:"number",units:["%","px","vw"],defaultUnit:"%"},default:100,allowVisualStates:!0},thumbWidth:{group:"Thumb Style",displayName:"Width",type:{name:"number",units:["px","vw","%"],defaultUnit:"px",allowEditOnly:!0},default:16,popout:ke,allowVisualStates:!0},thumbHeight:{group:"Thumb Style",displayName:"Height",type:{name:"number",units:["px","vh","%"],defaultUnit:"px",allowEditOnly:!0},default:16,popout:ke,allowVisualStates:!0},thumbColor:{group:"Thumb Style",displayName:"Color",type:{name:"color",allowEditOnly:!0},default:"#000000",popout:ke,allowVisualStates:!0},trackHeight:{group:"Track Style",displayName:"Height",type:{name:"number",units:["px","vh","%"],defaultUnit:"px",allowEditOnly:!0},default:6,popout:De,allowVisualStates:!0},trackColor:{group:"Track Style",displayName:"Inactive Color",type:{name:"color",allowEditOnly:!0},default:"#f0f0f0",popout:De,allowVisualStates:!0},trackActiveColor:{group:"Track Style",displayName:"Active Color",type:{name:"color",allowEditOnly:!0},default:"#f0f0f0",popout:De,allowVisualStates:!0}},methods:{_updateOutputValuePercent:function(e){var t=this.props.min,n=this.props.max,o=Math.floor((e-t)/(n-t)*100),i=this._internal.valuePercentChanged!==o;this._internal.valuePercent=o,i&&this.flagOutputDirty("valuePercent")},_setInputValue:function(e){var t=Math.max(this.props.min,Math.min(this.props.max,e||0));t!==this.props.value&&(this.props.value=t,this.forceUpdate())}}};function Me(e,t){var n=(t=t||{}).defaults||{},o=t.popout;n.borderStyle="none",n.borderWidth=0,n.borderColor="#000000";var i=t.propPrefix[0].toUpperCase()+t.propPrefix.slice(1);function r(e,r,s,a){var l,u=t.propPrefix+"Border".concat(r,"Style"),d=t.propPrefix+"Border".concat(r,"Width"),c=t.propPrefix+"Border".concat(r,"Color"),p="none"!==n.borderStyle?"OR borderStyle NOT SET":"";r?(n[u]&&"none"!==n[u]&&(p+="OR ".concat(u," NOT SET")),T.addDynamicInputPorts(e,"".concat(u," = solid OR ").concat(u," = dashed OR ").concat(u," = dotted OR borderStyle = solid OR borderStyle = dashed OR borderStyle = dotted ").concat(p),["".concat(d),"".concat(c)])):T.addDynamicInputPorts(e,"".concat(u," = solid OR ").concat(u," = dashed OR ").concat(u," = dotted ").concat(p),["".concat(d),"".concat(c)]);var h={group:t.propPrefix+"-border-styles",tab:s,label:r},g=function(e){return"".concat(i," ").concat(e," ").concat(r?"("+r+")":"")},f=202+4*a,m=i+" Border Style";T.addInputProps(e,((l={})[u]={index:f+1,displayName:"Border Style",editorName:g("Border Style"),group:m,type:{name:"enum",enums:[{label:"None",value:"none"},{label:"Solid",value:"solid"},{label:"Dotted",value:"dotted"},{label:"Dashed",value:"dashed"}]},default:n["border".concat(r,"Style")],tab:h,popout:o,allowVisualStates:!0},l[d]={index:f+2,displayName:"Border Width",editorName:g("Border Width"),group:m,type:{name:"number",units:["px"],defaultUnit:"px"},default:n["border".concat(r,"Width")],tab:h,popout:o,allowVisualStates:!0},l[c]={index:f+3,displayName:"Border Color",editorName:g("Border Color"),group:m,type:"color",default:n["border".concat(r,"Color")],tab:h,popout:o,allowVisualStates:!0},l))}r(e,"","borders-all",0),r(e,"Left","borders-left",1),r(e,"Top","borders-top",2),r(e,"Right","borders-right",3),r(e,"Bottom","borders-bottom",4)}function Ae(e,t){var n=(t=t||{}).defaults||{},o=t.popout;n.borderRadius||(n.borderRadius=0);var i=t.propPrefix[0].toUpperCase()+t.propPrefix.slice(1);function r(e,r,s,a){var l,u={group:t.propPrefix+"-corners",tab:s,label:r},d="Border".concat(r,"Radius");T.addInputProps(e,((l={})[t.propPrefix+d]={index:240+a,displayName:"Corner Radius",editorName:("Corner Radius","".concat(i," ").concat("Corner Radius"," ").concat(r?"("+r+")":"")),group:i+" Corner Radius",type:{name:"number",units:["px","%"],defaultUnit:"px"},default:n["border".concat(r,"Radius")],tab:u,popout:o},l))}r(e,"","corners-all",0),r(e,"TopLeft","corners-top-left",1),r(e,"TopRight","corners-top-right",2),r(e,"BottomRight","corners-bottom-right",3),r(e,"BottomLeft","corners-bottom-left",4)}function Ve(e,t){var n,o=(t=t||{}).popout,i=t.propPrefix;T.addDynamicInputPorts(e,"".concat(i,"BoxShadowEnabled = true"),["".concat(i,"BoxShadowOffsetX"),"".concat(i,"BoxShadowOffsetY"),"".concat(i,"BoxShadowInset"),"".concat(i,"BoxShadowBlurRadius"),"".concat(i,"BoxShadowSpreadRadius"),"".concat(i,"BoxShadowColor")]);var r=t.propPrefix[0].toUpperCase()+t.propPrefix.slice(1),s=function(e){return"".concat(r," ").concat(e)};T.addInputProps(e,((n={})["".concat(i,"BoxShadowEnabled")]={index:250,group:t.group||"Box Shadow",displayName:"Shadow Enabled",editorName:s("Shadow Enabled"),type:"boolean",allowVisualStates:!0,popout:o},n["".concat(i,"BoxShadowOffsetX")]={index:251,group:t.group||"Box Shadow",displayName:"Offset X",editorName:s("Offset X"),default:0,type:{name:"number",units:["px"],defaultUnit:"px"},allowVisualStates:!0,popout:o},n["".concat(i,"BoxShadowOffsetY")]={index:252,group:t.group||"Box Shadow",displayName:"Offset Y",editorName:s("Offset Y"),default:0,type:{name:"number",units:["px"],defaultUnit:"px"},allowVisualStates:!0,popout:o},n["".concat(i,"BoxShadowBlurRadius")]={index:253,group:t.group||"Box Shadow",displayName:"Blur Radius",editorName:s("Blur Radius"),default:5,type:{name:"number",units:["px"],defaultUnit:"px"},allowVisualStates:!0,popout:o},n["".concat(i,"BoxShadowSpreadRadius")]={index:254,group:t.group||"Box Shadow",displayName:"Spread Radius",editorName:s("Spread Radius"),default:2,type:{name:"number",units:["px"],defaultUnit:"px"},allowVisualStates:!0,popout:o},n["".concat(i,"BoxShadowInset")]={index:255,group:t.group||"Box Shadow",displayName:"Inset",editorName:s("Inset"),type:"boolean",default:!1,allowVisualStates:!0,popout:o},n["".concat(i,"BoxShadowColor")]={index:256,group:t.group||"Box Shadow",displayName:"Shadow Color",editorName:s("Shadow Color"),type:"color",default:"#00000033",allowVisualStates:!0,popout:o},n))}T.addAlignInputs(Re),T.addTransformInputs(Re),T.addMarginInputs(Re),T.addPaddingInputs(Re),T.addSharedVisualInputs(Re),Me(Re,{propPrefix:"track",popout:De}),Ae(Re,{propPrefix:"track",popout:De}),Ve(Re,{propPrefix:"track",popout:De,group:"Track Box Shadow"}),Me(Re,{propPrefix:"thumb",popout:ke}),Ae(Re,{propPrefix:"thumb",popout:ke}),Ve(Re,{propPrefix:"thumb",popout:ke,group:"Thumb Box Shadow"}),K(Re);const je=H(Re);var Fe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Le=function(){return Le=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Le.apply(this,arguments)};function Ue(e){e.stopPropagation(),window.removeEventListener("click",Ue,!0)}var We=function(e){function n(n){var o=e.call(this,n)||this;return o.state={value:n.startValue},o.ref=t().createRef(),o}return Fe(n,e),n.prototype.setText=function(e){this.setState({value:e}),this.props.onTextChanged&&this.props.onTextChanged(e)},n.prototype.componentDidMount=function(){this.ref.current.noodlNode=this.props.noodlNode,this.setText(this.props.startValue)},n.prototype.render=function(){var e=this,n=Le({},this.props.style);y.size(n,this.props),y.align(n,this.props),0===n.opacity&&(n.pointerEvents="none");var o,i=n.height,r=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]])}return n}(n,["height"]),s=this.props,a=function(){if("image"===s.iconSourceType&&void 0!==s.iconImageSource)return t().createElement("img",{alt:"",src:s.iconImageSource,style:{width:s.iconSize,height:s.iconSize},onClick:function(){return e.focus()}});if("icon"===s.iconSourceType&&void 0!==s.iconIconSource){var n={userSelect:"none",fontSize:s.iconSize,color:s.iconColor};return"left"===s.iconPlacement||void 0===s.iconPlacement?n.marginRight=s.iconSpacing:n.marginLeft=s.iconSpacing,!0===s.iconIconSource.codeAsClass?t().createElement("span",{className:[s.iconIconSource.class,s.iconIconSource.code].join(" "),style:n}):t().createElement("span",{className:s.iconIconSource.class,style:n},s.iconIconSource.code)}return null},l="ndl-controls-textinput "+s.id;s.className&&(l=l+" "+s.className);var u=Le(Le(Le({},s.textStyle),s.styles.input),{width:"100%",height:"100%"});u.color=s.noodlNode.context.styles.resolveColor(u.color);var d=Le(Le(Le(Le({},s.attrs),{id:s.id,value:this.state.value}),Q(s)),{disabled:!s.enabled,style:u,className:l,placeholder:s.placeholder,maxLength:s.maxLength,onChange:function(t){return e.onChange(t)}});"textArea"!==s.type?o=t().createElement("input",Le({ref:function(t){return e.ref.current=t},type:this.props.type},d,{onKeyDown:function(t){return e.onKeyDown(t)},onMouseDown:function(){return window.addEventListener("click",Ue,!0)},"noodl-style-tag":"input"})):(d.style.resize="none",o=t().createElement("textarea",Le({ref:function(t){return e.ref.current=t}},d,{onKeyDown:function(t){return e.onKeyDown(t)},"noodl-style-tag":"input"})));var c=Le({display:"flex",alignItems:"center"},s.styles.inputWrapper),p=i&&"%"===i[String(i).length-1];s.useLabel?p?c.flexGrow=1:c.height=i:(Object.assign(c,r),c.height=i),"textArea"!==s.type&&(c.alignItems="center");var h=t().createElement("div",{style:c,"noodl-style-tag":"inputWrapper"},s.useIcon&&"left"===s.iconPlacement?a():null,o,s.useIcon&&"right"===s.iconPlacement?a():null);if(s.useLabel){r.display="flex",r.flexDirection="column",p&&(r.height=i);var g=Le(Le(Le({},s.labeltextStyle),s.styles.label),{marginBottom:s.labelSpacing});return g.color=s.noodlNode.context.styles.resolveColor(g.color),t().createElement("div",{style:r},t().createElement("label",{htmlFor:s.id,style:g,"noodl-style-tag":"label"},s.label),h)}return h},n.prototype.onKeyDown=function(e){"Enter"!==e.key&&13!==e.which||this.props.onEnter&&this.props.onEnter()},n.prototype.onChange=function(e){var t=e.target.value;this.setText(t)},n.prototype.focus=function(){this.ref.current&&this.ref.current.focus()},n.prototype.blur=function(){this.ref.current&&this.ref.current.blur()},n.prototype.hasFocus=function(){return document.activeElement===this.ref.current},n}(t().Component);function Be(e,t){return"\n    .".concat(e,"::placeholder {\n        opacity: ").concat(t.placeholderOpacity,";\n    }\n    ")}var ze={name:"net.noodl.controls.textinput",displayName:"Text Input",docs:"https://docs.noodl.net/nodes/ui-controls/text-input",allowChildren:!1,noodlNodeAsProp:!0,usePortAsLabel:"label",nodeDoubleClickAction:{focusPort:"label"},connectionPanel:{groupPriority:["General","Text","Style","Actions","Events","States","Mounted","Text Style","Label","Label Text Style","Hover Events","Pointer Events","Focus Events"]},getReactComponent:function(){return We},initialize:function(){this.props.attrs={},this.props.startValue="",this.props.id=this._internal.controlId="input-"+se()()},inputProps:{type:{displayName:"Type",group:"Text",index:19,type:{name:"enum",enums:[{label:"Text",value:"text"},{label:"Text Area",value:"textArea"},{label:"Email",value:"email"},{label:"Number",value:"number"},{label:"Password",value:"password"},{label:"URL",value:"url"}]},default:"text"},placeholder:{index:22,group:"Text",displayName:"Placeholder",default:"Type here...",type:{name:"string"}},maxLength:{group:"Text",displayName:"Max length",type:"number",index:24}},inputs:{placeHolderOpacity:{index:23,group:"Text",displayName:"Placeholder opacity",type:"number",default:.5,set:function(e){var t=this._internal.controlId;J(t,{placeholderOpacity:e},Be)}},set:{group:"Actions",displayName:"Set",type:"signal",valueChangedToTrue:function(){var e=this;this.scheduleAfterInputsHaveUpdated((function(){e.setText(e._internal.text)}))}},startValue:{index:18,displayName:"Text",type:"string",group:"Text",set:function(e){this._internal.text!==e&&(this._internal.text=e,!1===this.isInputConnected("set")&&this.setText(e))}},clear:{type:"signal",group:"Actions",displayName:"Clear",valueChangedToTrue:function(){this.clear()}},focus:{type:"signal",group:"Actions",displayName:"Focus",valueChangedToTrue:function(){this.context.setNodeFocused(this,!0)}},blur:{type:"signal",group:"Actions",displayName:"Blur",valueChangedToTrue:function(){this.context.setNodeFocused(this,!1)}},textAlignX:{group:"Text Alignment",index:13,displayName:"Text Horizontal Align",type:{name:"enum",enums:[{label:"left",value:"left"},{label:"center",value:"center"},{label:"right",value:"right"}],alignComp:"justify"},default:"left",set:function(e){switch(e){case"left":this.setStyle({textAlign:"left"},"input");break;case"center":this.setStyle({textAlign:"center"},"input");break;case"right":this.setStyle({textAlign:"right"},"input")}}},testId:{index:100009,displayName:"Test ID Attribute",group:"Advanced HTML",type:"string",set:function(e){this.props.attrs["data-testid"]=e,this.forceUpdate()}}},inputCss:{backgroundColor:{index:100,displayName:"Background Color",group:"Style",type:"color",default:"transparent",allowVisualStates:!0,styleTag:"inputWrapper"}},outputProps:{onTextChanged:{group:"General",displayName:"Text",type:"string",index:1,onChange:function(){this.sendSignalOnOutput("textChanged")}},onEnter:{group:"Events",displayName:"On Enter",type:"signal"}},outputs:{textChanged:{displayName:"Text Changed",type:"signal",group:"General",index:2}},methods:{_focus:function(){this.innerReactComponentRef&&this.innerReactComponentRef.focus()},_blur:function(){this.innerReactComponentRef&&this.innerReactComponentRef.blur()},clear:function(){this.props.startValue="",this.innerReactComponentRef&&this.innerReactComponentRef.setText("")},setText:function(e){this.props.startValue=e,this.innerReactComponentRef?!1===this.innerReactComponentRef.hasFocus()&&this.innerReactComponentRef.setText(e):this.outputPropValues.onTextChanged!==e&&(this.outputPropValues.onTextChanged=e,this.flagOutputDirty("onTextChanged"))}}};T.addDimensions(ze,{defaultSizeMode:"contentSize",contentLabel:"Text"}),T.addIconInputs(ze,{enableIconPlacement:!0,defaults:{useIcon:!1,iconColor:"#000000"}}),T.addLabelInputs(ze,{enableSpacing:!0,styleTag:"label",displayName:"Label"}),T.addTextStyleInputs(ze,{styleTag:"input",portPrefix:"",portIndex:18,popout:{group:"input-text-style",label:"Text Style",parentGroup:"Text"}}),T.addAlignInputs(ze),T.addTransformInputs(ze),T.addPaddingInputs(ze,{styleTag:"inputWrapper"}),T.addMarginInputs(ze),T.addSharedVisualInputs(ze),T.addBorderInputs(ze,{styleTag:"inputWrapper"}),T.addShadowInputs(ze,{styleTag:"inputWrapper"}),K(ze);const He=H(ze);class qe{constructor(){this.queue=[],this.pendingPromise=!1}enqueue(e){return new Promise(((t,n)=>{this.queue.push({promise:e,resolve:t,reject:n}),this.dequeue()}))}dequeue(){if(this.workingOnPromise)return!1;const e=this.queue.shift();if(!e)return!1;try{this.workingOnPromise=!0,e.promise().then((t=>{this.workingOnPromise=!1,e.resolve(t),this.dequeue()})).catch((t=>{this.workingOnPromise=!1,e.reject(t),this.dequeue()}))}catch(t){this.workingOnPromise=!1,e.reject(t),this.dequeue()}return!0}}const{useEffect:Xe}=__webpack_require__(7363),Ge=__webpack_require__(1436),$e=__webpack_require__(7993),Ye=__webpack_require__(3948),Je=__webpack_require__(7667);function Ke(e){const{didMount:t,willUnmount:n,style:o,children:i}=e;return Xe((()=>(t(),()=>{n()})),[]),React.createElement("div",{style:o},i)}const Qe={name:"Page Stack",displayNodeName:"Component Stack",category:"Visuals",docs:"https://docs.noodl.net/nodes/component-stack/component-stack-node",useVariants:!1,initialize(){this._internal.stack=[],this._internal.topPageName="",this._internal.stackDepth=0,this._internal.pageInfo={},this._internal.asyncQueue=new qe,this.onScheduleReset=()=>{this.scheduleReset()},this.props.didMount=()=>{this._internal.isMounted=!0,window.history&&window.history.pushState?window.addEventListener("popstate",this.onScheduleReset):window.addEventListener("hashchange",this.onScheduleReset),this._registerPageStack()},this.props.willUnmount=()=>{this._internal.isMounted=!1,window.removeEventListener("popstate",this.onScheduleReset),window.removeEventListener("hashchange",this.onScheduleReset),this._deregisterPageStack()}},getInspectInfo(){return 0===this._internal.stack.length?"No active page":[{type:"text",value:"Active Components:"}].concat(this._internal.stack.map(((e,t)=>({type:"text",value:"- "+this._internal.pages.find((t=>t.id===e.pageId)).label}))))},defaultCss:{width:"100%",flex:"1 1 100%",position:"relative",display:"flex",flexDirection:"column"},getReactComponent:()=>Ke,inputs:{name:{type:{name:"string",identifierOf:"PackStack"},displayName:"Name",group:"General",default:"Main",set:function(e){this._deregisterPageStack(),this._internal.name=e,this._internal.isMounted&&this._registerPageStack()}},useRoutes:{type:"boolean",displayName:"Use Routes",group:"General",default:!1,set:function(e){this._internal.useRoutes=!!e}},clip:{displayName:"Clip Content",type:"boolean",group:"Layout",default:!0,set(e){e?this.setStyle({overflow:"hidden"}):this.removeStyle(["overflow"])}},pages:{type:"proplist",displayName:"Components",group:"Components",set:function(e){this._internal.pages=e,this._internal.isMounted&&this.scheduleReset()}},reset:{type:"signal",displayName:"Reset",group:"Actions",valueChangedToTrue:function(){this.scheduleReset()}}},inputCss:{backgroundColor:{type:"color",displayName:"Background Color",group:"Style",default:"transparent",applyDefault:!1}},outputs:{topPageName:{type:"string",displayName:"Top Component Name",get(){return this._internal.topPageName}},stackDepth:{type:"number",displayName:"Stack Depth",get(){return this._internal.stackDepth}}},methods:{_registerPageStack(){$e.instance.registerPageStack(this._internal.name,this)},_deregisterPageStack(){$e.instance.deregisterPageStack(this._internal.name,this)},_pageNameForId(e){if(void 0===this._internal.pages)return;const t=this._internal.pages.find((t=>t.id===e));return void 0!==t?t.label:void 0},setPageOutputs(e){for(const t in e)this._internal[t]=e[t],this.flagOutputDirty(t)},scheduleReset(){var e=this._internal;e.hasScheduledReset||(e.hasScheduledReset=!0,this.scheduleAfterInputsHaveUpdated((()=>{e.hasScheduledReset=!1,this.reset()})))},createPageContainer(){const e=this.nodeScope.createPrimitiveNode("Group");return e.setStyle({flex:"1 0 100%"}),e},reset(){this._internal.asyncQueue.enqueue(this.resetAsync.bind(this))},async resetAsync(){var e=this.getChildren();for(var t in e){var n=e[t];this.removeChild(n),this.nodeScope.deleteNode(n)}if(void 0===this._internal.pages||0===this._internal.pages.length)return;var o,i={},r=this.matchPageFromUrl();void 0!==r?(o=r.pageId,i=Object.assign({},r.query,r.params)):void 0===(o=this._internal.startPageId)&&(o=this._internal.pages[0].id);var s=this._internal.pageInfo[o];if(void 0===s||void 0===s.component)return;var a=await this.nodeScope.createNode(s.component,Ge());for(var l in i)a.setInputValue(l,i[l]);const u=this.createPageContainer();u.addChild(a),this.addChild(u),this._internal.stack=[{from:null,page:u,pageId:o,pageInfo:s,params:i,componentName:this._internal.startPage}],this.setPageOutputs({topPageName:this._pageNameForId(o),stackDepth:this._internal.stack.length})},getRelativeURL(){var e=this._internal.stack[this._internal.stack.length-1];if(void 0!==e){var t=e.pageInfo.path;if(void 0===t){var n=this._internal.pages.find((t=>t.id==e.pageId));if(void 0===n)return;t=n.label.replace(/\s+/g,"-").toLowerCase()}var o=t.match(/{([^}]+)}/g),i=Object.assign({},e.params);if(o)for(var r of o){var s=r.replace(/[{}]/g,"");void 0!==e.params[s]&&(t=t.replace(r,encodeURIComponent(i[s])),delete i[s])}var a=[];for(var s in i)a.push({name:s,value:i[s]});return t.startsWith("/")&&(t=t.substring(1)),{path:t,query:a}}},getNavigationAbsoluteURL(){for(var e=this.parent;void 0!==e&&"function"!=typeof e.getNavigationAbsoluteURL;)e=e.getVisualParentNode();if(void 0===e)var t={path:"",query:[]};else t=e.getNavigationAbsoluteURL();var n=this.getRelativeURL();return void 0===n?t:{path:t.path+(t.path.endsWith("/")?"":"/")+n.path,query:t.query.concat(n.query)}},_getLocationPath:function(){var e=Ye.instance.getProjectSettings().navigationPathType;if(void 0===e||"hash"===e){var t=location.hash;return t&&("#"===t[0]&&(t=t.substring(1)),"/"===t[0]&&(t=t.substring(1))),t}var n=location.pathname;return n&&"/"===n[0]&&(n=n.substring(1)),n},_getSearchParams:function(){for(var e,t=/\+/g,n=/([^&=]+)=?([^&]*)/g,o=function(e){return decodeURIComponent(e.replace(t," "))},i=window.location.search.substring(1),r={};e=n.exec(i);)r[o(e[1])]=o(e[2]);return r},getNavigationRemainingPath(){return this._internal.remainingNavigationPath},matchPageFromUrl(e){if(this._internal.useRoutes&&void 0!==this._internal.pages&&0!==this._internal.pages.length){for(var t=this.parent;void 0!==t&&"function"!=typeof t.getNavigationRemainingPath;)t=t.getVisualParentNode();if(void 0===t){var n=this._getLocationPath();"/"===n[0]&&(n=n.substring(1));var o=n.split("/")}else o=t.getNavigationRemainingPath();if(void 0!==o){var i=this._getSearchParams();for(var r of this._internal.pages){var s=this._internal.pageInfo[r.id];if(void 0===s)continue;var a=s.path;void 0===a&&(a=r.label.replace(/\s+/g,"-").toLowerCase()),"/"===a[0]&&(a=a.substring(1));let e=l(o,a.split("/"));if(e)return this._internal.remainingNavigationPath=e.remainingPathParts,{pageId:r.id,params:e.params,query:i}}}}function l(e,t){for(var n={},o=0;o<t.length;o++){if(void 0===e[o])return;var i=t[o];if("{"===i[0]&&"}"===i[i.length-1])n[i.substring(1,i.length-1)]=decodeURIComponent(e[o]);else if(i!==e[o])return}return{params:n,remainingPathParts:e.splice(t.length)}}},_updateUrlWithTopPage(){if(this._internal.useRoutes&&void 0!==window.history){var e,t,n=this.getNavigationAbsoluteURL(),o=Ye.instance.getProjectSettings().navigationPathType;void 0===o||"hash"===o?t=n.path:e=n.path;var i=n.query.map((e=>e.name+"="+e.value)),r=(void 0!==e?e:"")+(i.length>=1?"?"+i.join("&"):"")+(void 0!==t?"#"+t:"");this._internal.remainingNavigationPath=void 0,window.history.pushState({},"",r)}},replace(e){this._internal.asyncQueue.enqueue(this.replaceAsync.bind(this,e))},async replaceAsync(e){if(void 0===this._internal.pages||0===this._internal.pages.length)return;if(this._internal.isTransitioning)return;var t=e.target||this._internal.pages[0].id,n=this._internal.pageInfo[t];if(void 0===n||void 0===n.component)return;var o=this.getChildren();for(var i in o){var r=o[i];this.removeChild(r),this.nodeScope.deleteNode(r)}const s=this.createPageContainer(),a=await this.nodeScope.createNode(n.component,Ge());for(var l in e.params)a.setInputValue(l,e.params[l]);s.addChild(a),this.addChild(s),this._internal.stack=[{from:null,page:s,pageId:t,pageInfo:n,params:e.params,componentName:e.target}],this.setPageOutputs({topPageName:this._pageNameForId(t),stackDepth:this._internal.stack.length}),this._updateUrlWithTopPage(),e.hasNavigated&&e.hasNavigated()},navigate(e){this._internal.asyncQueue.enqueue(this.navigateAsync.bind(this,e))},async navigateAsync(e){if(void 0===this._internal.pages||0===this._internal.pages.length)return;if(this._internal.isTransitioning)return;var t=e.target||this._internal.pages[0].id,n=this._internal.pageInfo[t];if(void 0===n||void 0===n.component)return;const o=this.createPageContainer();o.setInputValue("position","absolute");const i=await this.nodeScope.createNode(n.component,Ge());for(var r in e.params)i.setInputValue(r,e.params[r]);o.addChild(i);var s=i.nodeScope.getNodesWithType("PageStackNavigateBack");if(s&&s.length>0)for(var a=0;a<s.length;a++)s[a]._setBackCallback(this.back.bind(this));var l=this._internal.stack[this._internal.stack.length-1],u={from:l.page,page:o,pageInfo:n,pageId:t,params:e.params,transition:new Je[e.transition.type||"Push"](l.page,o,e.transition),backCallback:e.backCallback,componentName:e.target};this._internal.stack.push(u),this.setPageOutputs({topPageName:this._pageNameForId(e.target),stackDepth:this._internal.stack.length}),this._updateUrlWithTopPage(),u.transition.forward(0),this._internal.isTransitioning=!0,u.transition.start({end:()=>{this._internal.isTransitioning=!1,this.removeChild(l.page),o.setInputValue("position","relative")}}),this.addChild(o),e.hasNavigated&&e.hasNavigated()},back(e){if(!(this._internal.stack.length<=1||this._internal.isTransitioning)){var t=this._internal.stack[this._internal.stack.length-1];t.page.setInputValue("position","absolute"),this.addChild(t.from,0),t.backCallback&&t.backCallback(e.backAction,e.results),this.setPageOutputs({topPageName:this._pageNameForId(this._internal.stack[this._internal.stack.length-2].pageId),stackDepth:this._internal.stack.length-1}),this._internal.isTransitioning=!0,t.transition.start({end:()=>{this._internal.isTransitioning=!1,t.page.setInputValue("position","relative"),this.removeChild(t.page),this.nodeScope.deleteNode(t.page),this._internal.stack.pop(),this._updateUrlWithTopPage()},back:!0})}},setPageComponent(e,t){var n=this._internal;n.pageInfo[e]||(n.pageInfo[e]={}),n.pageInfo[e].component=t},setPagePath(e,t){var n=this._internal;n.pageInfo[e]||(n.pageInfo[e]={}),n.pageInfo[e].path=t},setStartPage(e){this._internal.startPageId=e},registerInputIfNeeded:function(e){if(!this.hasInput(e))return e.startsWith("pageComp-")?this.registerInput(e,{set:this.setPageComponent.bind(this,e.substring(9))}):e.startsWith("pagePath-")?this.registerInput(e,{set:this.setPagePath.bind(this,e.substring(9))}):"startPage"===e?this.registerInput(e,{set:this.setStartPage.bind(this)}):void 0}},setup(e,t){function n(t){function n(){var n=[];void 0!==t.parameters.pages&&t.parameters.pages.length>0&&(t.parameters.pages.forEach((e=>{n.push({name:"pageComp-"+e.id,displayName:"Component",editorName:e.label+" | Component",plug:"input",type:"component",parent:"pages",parentItemId:e.id}),!0===t.parameters.useRoutes&&n.push({name:"pagePath-"+e.id,displayName:"Path",editorName:e.label+" | Path",plug:"input",type:"string",default:e.label.replace(/\s+/g,"-").toLowerCase(),parent:"pages",parentItemId:e.id})})),n.push({plug:"input",type:{name:"enum",enums:t.parameters.pages.map((e=>({label:e.label,value:e.id}))),allowEditOnly:!0},group:"General",displayName:"Start Page",name:"startPage",default:t.parameters.pages[0].id})),e.editorConnection.sendDynamicPorts(t.id,n)}n(),t.on("parameterUpdated",(function(e){"pages"!==e.name&&"useRoutes"!==e.name||n()}))}e.editorConnection&&e.editorConnection.isRunningLocally()&&t.on("editorImportComplete",(()=>{t.on("nodeAdded.Page Stack",(function(e){n(e)}));for(const e of t.getNodesWithType("Page Stack"))n(e)}))}},Ze=H(Qe);var et={group:"seo-og",label:"Open Graph",parentGroup:"Experimental SEO"},tt={group:"seo-twitter",label:"Twitter",parentGroup:"Experimental SEO"},nt=[{isProperty:!0,key:"description",displayName:"Description",group:"Experimental SEO"},{isProperty:!0,key:"robots",displayName:"Robots",group:"Experimental SEO"},{isProperty:!0,key:"og:title",displayName:"Title",editorName:"OG Title",group:"General",popout:et},{isProperty:!0,key:"og:description",displayName:"Description",editorName:"OG Description",group:"General",popout:et},{isProperty:!0,key:"og:url",displayName:"Url",editorName:"OG Url",group:"General",popout:et},{isProperty:!0,key:"og:type",displayName:"Type",editorName:"OG Type",group:"General",popout:et},{isProperty:!0,key:"og:image",displayName:"Image",editorName:"OG Image",group:"Image",popout:et},{isProperty:!0,key:"og:image:width",displayName:"Image Width",editorName:"OG Image Width",group:"Image",popout:et},{isProperty:!0,key:"og:image:height",displayName:"Image Height",editorName:"OG Image Height",group:"Image",popout:et},{isProperty:!1,key:"twitter:card",displayName:"Card",editorName:"Twitter Card",group:"General",popout:tt},{isProperty:!1,key:"twitter:title",displayName:"Title",editorName:"Twitter Title",group:"General",popout:tt},{isProperty:!1,key:"twitter:description",displayName:"Description",editorName:"Twitter Description",group:"General",popout:tt},{isProperty:!1,key:"twitter:image",displayName:"Image",editorName:"Twitter Image",group:"General",popout:tt}];function ot(e){var n=e.style,o=e.children;return y.size(n,e),y.align(n,e),nt.forEach((function(t){var n=e.metatags&&e.metatags[t.key];Noodl.SEO.setMeta(t.key,n)})),t().createElement("div",{style:n,className:e.className},o)}const it={name:"Page",displayNodeName:"Page",category:"Visuals",docs:"https://docs.noodl.net/nodes/navigation/page",useVariants:!1,mountedInput:!1,allowAsExportRoot:!1,singleton:!0,connectionPanel:{groupPriority:["General","Mounted"]},initialize:function(){this.props.layout="column",this.isInputConnected("onPageReady")&&this.nodeScope.context.eventEmitter.emit("SSR_PageLoading",this.id)},defaultCss:{display:"flex",flexDirection:"column",position:"relative",alignItems:"flex-start",flex:"1 1",alignSelf:"stretch"},getReactComponent:()=>ot,inputs:{sitemapIncluded:{index:80001,displayName:"Included",group:"Experimental Sitemap",default:!0,type:{name:"boolean",allowEditOnly:!0}},sitemapChangefreq:{index:80002,displayName:"Change Freq",group:"Experimental Sitemap",default:"weekly",type:{name:"enum",allowEditOnly:!0,enums:[{label:"always",value:"always"},{label:"hourly",value:"hourly"},{label:"daily",value:"daily"},{label:"weekly",value:"weekly"},{label:"monthly",value:"monthly"},{label:"yearly",value:"yearly"},{label:"never",value:"never"}]}},sitemapPriority:{index:80003,displayName:"Priority",group:"Experimental Sitemap",default:.5,type:{name:"number",allowEditOnly:!0}}},inputProps:nt.reduce(((e,t,n)=>(e[t.key]={index:8e4+n,displayName:t.displayName,editorName:t.editorName||t.displayName,propPath:"metatags",group:t.group,popout:t.popout,type:t.type||"string"},e)),{}),methods:{getUrlPath:function(){return this._internal.urlPath},getTitle:function(){return this._internal.title},setTitle:function(e){this._internal.title=e},setUrlPath:function(e){this._internal.urlPath=e},registerInputIfNeeded:function(e){if(!this.hasInput(e))return"title"===e?this.registerInput(e,{set:this.setTitle.bind(this)}):"urlPath"===e?this.registerInput(e,{set:this.setUrlPath.bind(this)}):void 0}},setup(e,t){function n(t){function n(){var n=[];const o=t.component.name.split("/");n.push({name:"title",displayName:"Title",type:"string",group:"General",plug:"input",default:o[o.length-1]});const i=(t.parameters.title||o[o.length-1]).replace(/\s+/g,"-").toLowerCase();n.push({name:"urlPath",displayName:"Url Path",type:"string",group:"General",plug:"input",default:i}),e.editorConnection.sendDynamicPorts(t.id,n)}n(),t.on("parameterUpdated",(function(e){"title"===e.name&&n()}))}e.editorConnection&&e.editorConnection.isRunningLocally()&&t.on("editorImportComplete",(()=>{t.on("nodeAdded.Page",(function(e){n(e)})),t.on("componentRenamed",(function(e){const o=t.getNodesWithType("Page").filter((t=>e.roots.includes(t.id)));o.length>0&&n(o[0])}));for(const e of t.getNodesWithType("Page"))n(e)}))}};T.addPaddingInputs(it);const rt=H(it);var st=__webpack_require__(2681),at=function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function s(e){try{l(o.next(e))}catch(e){r(e)}}function a(e){try{l(o.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((o=o.apply(e,t||[])).next())}))},lt=function(e,t){var n,o,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,a[0]&&(s=0)),s;)try{if(n=1,o&&(i=2&a[0]?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,o=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],o=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}};function ut(n){var o=n.didMount,i=n.willUnmount,r=n.children,s=n.style;return(0,e.useEffect)((function(){return o(),function(){i()}}),[]),t().createElement("div",{className:n.className,style:s},r)}function dt(e){return"/"===e[0]&&(e=e.substring(1)),"/"===e[e.length-1]&&(e=e.substring(0,e.length-1)),e}var ct={name:"Router",displayNodeName:"Page Router",category:"Visuals",docs:"https://docs.noodl.net/nodes/navigation/page-router",useVariants:!1,connectionPanel:{groupPriority:["General","Actions","Events","Mounted"]},initialize:function(){var e=this;this._internal.asyncQueue=new qe,this.onScheduleReset=function(){e.scheduleReset()},this.props.didMount=function(){e._internal.isMounted=!0,"undefined"!=typeof window&&(window.history&&window.history.pushState?window.addEventListener("popstate",e.onScheduleReset):window.addEventListener("hashchange",e.onScheduleReset)),e._registerRouter()},this.props.willUnmount=function(){e._internal.isMounted=!1,window.removeEventListener("popstate",e.onScheduleReset),window.removeEventListener("hashchange",e.onScheduleReset),e._deregisterRouter()},this.props.layout="column"},getInspectInfo:function(){return this._internal.currentUrl},defaultCss:{flex:"1 1",alignSelf:"stretch",position:"relative",display:"flex",flexDirection:"column"},getReactComponent:function(){return ut},inputs:{name:{type:"string",displayName:"Name",group:"General",set:function(e){this._deregisterRouter(),this._internal.name=e,this._internal.isMounted&&this._registerRouter()}},pages:{type:{name:"pages",allowEditOnly:!0},displayName:"Pages",group:"Pages",set:function(e){this._internal.pages=e,this._internal.isMounted&&this.scheduleReset()}},urlPath:{type:"string",displayName:"Url path",group:"General",set:function(e){this._internal.urlPath=e}},clip:{displayName:"Clip Behavior",type:{name:"enum",enums:[{value:"contentHeight",label:"Expand to content size"},{value:"scroll",label:"Scroll"},{value:"clip",label:"Clip content"}]},group:"Layout",default:"contentHeight",set:function(e){switch(e){case"scroll":this.setStyle({overflow:"auto"});break;case"clip":this.setStyle({overflow:"hidden"});break;default:this.removeStyle(["overflow"])}}},reset:{type:"signal",displayName:"Reset",group:"Actions",valueChangedToTrue:function(){this.scheduleReset()}}},inputCss:{backgroundColor:{type:"color",displayName:"Background Color",group:"Style",default:"transparent",applyDefault:!1}},outputs:{currentPageTitle:{type:"string",group:"General",displayName:"Current Page Title",getter:function(){return void 0!==this._internal.currentPage?this._internal.currentPage.title:void 0}},currentPageComponent:{type:"string",group:"General",displayName:"Current Page Component",getter:function(){return void 0!==this._internal.currentPage?this._internal.currentPage.component:void 0}}},methods:{_registerRouter:function(){st.RouterHandler.instance.registerRouter(this._internal.name,this)},_deregisterRouter:function(){st.RouterHandler.instance.deregisterRouter(this._internal.name,this)},setPageOutputs:function(e){for(var t in e)this._internal[t]=e[t],this.flagOutputDirty(t)},scheduleReset:function(){var e=this,t=this._internal;t.hasScheduledReset||(t.hasScheduledReset=!0,this.scheduleAfterInputsHaveUpdated((function(){t.hasScheduledReset=!1,e.reset()})))},createPageContainer:function(){var e=this.nodeScope.createPrimitiveNode("Group");return e.setStyle({flex:"1 0 100%"}),e},reset:function(){this._internal.asyncQueue.enqueue(this.resetAsync.bind(this))},scrollToTop:function(){var e=this.getDOMElement();e&&(e.scrollTop=0,r().instance.getProjectSettings().bodyScroll&&e.scrollIntoView())},resetAsync:function(){return at(this,void 0,void 0,(function(){var e,t,n,o,i,r,s,a,l,u;return lt(this,(function(d){switch(d.label){case 0:if(t={},(n=this.matchPageFromUrl())?n.page?(e=n.page.component,t=Object.assign({},n.params,n.query)):(e=void 0!==this._internal.pages?this._internal.pages.startPage:void 0,t=Object.assign({},n.params,n.query)):(e=this._internal.pages.startPage,t={}),void 0===e)return[2];if(o=st.RouterHandler.instance.getPageInfoForComponent(e),this._internal.currentPage===o)return c=this._internal.currentParams,p=t,h=Object.keys(c||{}),g=Object.keys(p||{}),h.length===g.length&&h.every((function(e){return c[e]===p[e]}))||(this._internal.currentParams=t,this._updatePageInputs(this._internal.currentPageComponent.nodeScope,t)),[2];for(r in this.scrollToTop(),i=this.getChildren())s=i[r],this.removeChild(s),this.nodeScope.deleteNode(s);return[4,this.nodeScope.createNode(e,se()())];case 1:return a=d.sent(),this._internal.currentPageComponent=a,void 0===(l=a.nodeScope.getNodesWithType("Page"))||1!==l.length||(this._internal.currentPage=st.RouterHandler.instance.getPageInfoForComponent(e),this._internal.currentParams=t,this.flagOutputDirty("currentPageTitle"),this.flagOutputDirty("currentPageComponent"),Noodl.SEO.setTitle(this._internal.currentPage.title),this._updatePageInputs(this._internal.currentPageComponent.nodeScope,t),(u=this.createPageContainer()).addChild(a),this.addChild(u)),[2]}var c,p,h,g}))}))},_updatePageInputs:function(e,t){for(var n=0,o=e.getNodesWithType("PageInputs");n<o.length;n++)o[n]._setPageParams(t)},getRelativeURL:function(e,t){if(e){var n=e.path;if(void 0!==n){var o=n.match(/{([^}]+)}/g),i=Object.assign({},t);if(o)for(var r=0,s=o;r<s.length;r++){var a=s[r];void 0!==t[u=a.replace(/[{}]/g,"")]&&(n=n.replace(a,encodeURIComponent(i[u])),delete i[u])}var l=[];for(var u in i)l.push({name:u,value:encodeURIComponent(i[u])});return n=dt(n),void 0!==this._internal.urlPath&&(n=dt(this._internal.urlPath)+"/"+n),{path:n,query:l}}}},getNavigationAbsoluteURL:function(e,t){for(var n=this.parent,o={path:"",query:[]};void 0!==n&&"function"!=typeof n.getNavigationAbsoluteURL;)n=n.getVisualParentNode();n&&(o=n.getNavigationAbsoluteURL(n._internal.currentPage,n._internal.currentParams));var i=this.getRelativeURL(e,t);if(i){var r=o.path.endsWith("/")||i.path.startsWith("/");return{path:o.path+(r?"":"/")+i.path,query:o.query.concat(i.query)}}return o},_getLocationPath:function(){var e=r().instance.getProjectSettings().navigationPathType;if(void 0===e||"hash"===e){var t=location.hash;return t&&("#"===t[0]&&(t=t.substring(1)),"/"===t[0]&&(t=t.substring(1))),decodeURI(t)}var n=location.pathname;if(n&&"/"===n[0]){var o=Noodl.Env.BaseUrl;if(o){var i=function(e){if(!e.startsWith("/"))try{return new URL(e).pathname.length}catch(e){}return e.length}(o);n=n.substring(i)}else n=n.substring(1)}return decodeURI(n)},_getSearchParams:function(){for(var e,t=/\+/g,n=/([^&=]+)=?([^&]*)/g,o=function(e){return decodeURIComponent(e.replace(t," "))},i=location.search.substring(1),r={};e=n.exec(i);)r[o(e[1])]=o(e[2]);return r},getNavigationRemainingPath:function(){return this._internal.remainingNavigationPath},matchPageFromUrl:function(){for(var e=this.parent;void 0!==e&&"function"!=typeof e.getNavigationRemainingPath;)e=e.getVisualParentNode();var t=void 0;if(void 0===e){var n=this._getLocationPath();"/"===n[0]&&(n=n.substring(1)),t=n.split("/")}else t=e.getNavigationRemainingPath();if(void 0!==t){var o=this._getSearchParams(),i=st.RouterHandler.instance.getPagesForRouter(this._internal.name);if(void 0!==i&&0!==i.length){for(var r,s=9999,a=0,l=i;a<l.length;a++){var u=l[a],d=u.path;if(void 0!==d){d=dt(d),void 0!==this._internal.urlPath&&(d=dt(this._internal.urlPath)+"/"+d);var c=d.split("/"),p=g(t,c),h=Math.abs(c.length-t.length);p&&s>h&&(r={match:p,pageInfo:u},s=h)}}return r?(this._internal.remainingNavigationPath=r.match.remainingPathParts,{page:r.pageInfo,params:r.match.params,query:o}):{page:void 0,params:{},query:o}}}function g(e,t){for(var n={},o=0;o<t.length;o++){var i=t[o];if("{"===i[0]&&"}"===i[i.length-1])void 0!==e[o]&&(n[i.substring(1,i.length-1)]=decodeURIComponent(e[o]));else if(void 0===e[o]||i!==e[o])return}return{params:n,remainingPathParts:e.slice().splice(t.length)}}},_getCompleteUrlToPage:function(e,t){var n,o,i=this.getNavigationAbsoluteURL(e,t),s=r().instance.getProjectSettings().navigationPathType;void 0===s||"hash"===s?o=i.path:n=i.path;var a=i.query.map((function(e){return e.name+"="+e.value}));return(void 0!==n?n:"")+(a.length>=1?"?"+a.join("&"):"")+(void 0!==o?"#"+o:"")},_updateUrlWithTopPage:function(){if(void 0!==window.history){this._internal.remainingNavigationPath=void 0;var e=this._getCompleteUrlToPage(this._internal.currentPage,this._internal.currentParams);window.history.pushState({},"",e)}},navigate:function(e){this._internal.asyncQueue.enqueue(this.navigateAsync.bind(this,e))},navigateAsync:function(e){return at(this,void 0,void 0,(function(){var t,n;return lt(this,(function(o){switch(o.label){case 0:return void 0===e.target?[2]:(t=st.RouterHandler.instance.getPageInfoForComponent(e.target))?e.openInNewTab?(n=this._getCompleteUrlToPage(t,e.params),window.open(n,"_blank"),e.hasNavigated&&e.hasNavigated(),[3,3]):[3,1]:[2];case 1:return[4,this._navigateInCurrentWindow(t,e)];case 2:o.sent(),o.label=3;case 3:return[2]}}))}))},_navigateInCurrentWindow:function(e,t){return at(this,void 0,void 0,(function(){var n,o,i,r,s,a;return lt(this,(function(l){switch(l.label){case 0:for(o in this.scrollToTop(),n=this.getChildren())i=n[o],this.removeChild(i),this.nodeScope.deleteNode(i);return r=this.createPageContainer(),[4,this.nodeScope.createNode(t.target,se()())];case 1:return s=l.sent(),this._internal.currentPage=e,this._internal.currentParams=t.params,this.flagOutputDirty("currentPageTitle"),this.flagOutputDirty("currentPageComponent"),Noodl.SEO.setTitle(this._internal.currentPage.title),void 0!==(a=s.nodeScope.getNodesWithType("PageInputs"))&&a.length>0&&a.forEach((function(e){e._setPageParams(t.params)})),r.addChild(s),this.addChild(r),this._updateUrlWithTopPage(),t.hasNavigated&&t.hasNavigated(),st.RouterHandler.instance.onNavigated(this._internal.name,e),[2]}}))}))},registerInputIfNeeded:function(e){this.hasInput(e)}}};const pt=H(ct),ht={node:{name:"net.noodl.externallink",displayNodeName:"External Link",docs:"https://docs.noodl.net/nodes/navigation/external-link",category:"Navigation",nodeDoubleClickAction:{focusPort:"link"},inputs:{link:{type:"string",displayName:"Link"},openInNewTab:{type:"boolean",displayName:"Open In New Tab",default:!0},do:{type:"signal",displayName:"Do",valueChangedToTrue(){const e=this.getInputValue("openInNewTab"),t=e?"noopener,noreferrer":"",n=!0===e||void 0===e?"_blank":"_self";window.open(this.getInputValue("link"),n,t)}}}}};var gt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ft=function(){return ft=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},ft.apply(this,arguments)};function mt(e,t,n,o){var i=(o-90)*Math.PI/180;return{x:e+n*Math.cos(i),y:t+n*Math.sin(i)}}function yt(e,t,n,o,i){i%360==o%360&&(i-=1e-4);var r=mt(e,t,n,i),s=mt(e,t,n,o),a=i-o<=180?"0":"1";return["M",r.x,r.y,"A",n,n,0,a,0,s.x,s.y,"L",e,t,"L",r.x,r.y].join(" ")}var vt=function(e){function n(t){return e.call(this,t)||this}return gt(n,e),n.prototype.render=function(){var e,n,o=this.props.size/2,i=this.props,r=i.startAngle,s=i.endAngle;if(this.props.fillEnabled){var a=this.props.size/2;e=t().createElement("path",{d:yt(a,a,a,r,s),fill:this.props.fillColor})}if(this.props.strokeEnabled){var l=this.props,u=l.strokeColor,d=l.strokeWidth,c=l.strokeLineCap,p=function(e,t,n,o,i){i%360==o%360&&(i-=1e-4);var r=mt(e,t,n,i),s=mt(e,t,n,o),a=i-o<=180?"0":"1";return["M",r.x,r.y,"A",n,n,0,a,0,s.x,s.y].join(" ")}(o,o,o-this.props.strokeWidth/2,r,s);n=t().createElement("path",{d:p,stroke:u,strokeWidth:d,fill:"transparent",strokeLinecap:c})}var h=ft({},this.props.style);return y.size(h,this.props),y.align(h,this.props),0===h.opacity&&(h.pointerEvents="none"),t().createElement("div",ft({className:this.props.className},this.props.dom,G(this.props),{style:h}),t().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:this.props.size,height:this.props.size},e,n))},n}(t().Component);const bt={name:"Circle",docs:"https://docs.noodl.net/nodes/basic-elements/circle",connectionPanel:{groupPriority:["General","Fill","Stroke","Dimensions","Style","Actions","Events","Mounted","Margin and padding","Pointer Events","Hover Events"]},getReactComponent:()=>vt,noodlNodeAsProp:!0,allowChildren:!1,defaultCss:{flexShrink:0,position:"relative",display:"flex"},inputProps:{size:{displayName:"Size",default:"100",group:"Dimension",type:{name:"number"},index:10,allowVisualStates:!0},fillEnabled:{group:"Fill",displayName:"Fill",default:!0,type:"boolean",index:20,allowVisualStates:!0},fillColor:{group:"Fill",displayName:"Fill Color",default:"red",type:"color",index:21,allowVisualStates:!0},strokeEnabled:{index:23,group:"Stroke",default:!1,displayName:"Stroke",type:"boolean",allowVisualStates:!0},strokeWidth:{index:24,group:"Stroke",displayName:"Stroke Width",default:10,type:{name:"number"},allowVisualStates:!0},strokeColor:{index:25,group:"Stroke",displayName:"Stroke Color",type:"color",default:"black",allowVisualStates:!0},strokeLineCap:{index:26,group:"Stroke",displayName:"Line Cap",type:{name:"enum",enums:[{label:"Butt",value:"butt"},{label:"Round",value:"round"}]},default:"butt",allowVisualStates:!0},startAngle:{displayName:"Start Angle",type:"number",default:0,group:"Style",index:198,allowVisualStates:!0},endAngle:{displayName:"End Angle",type:"number",default:360,group:"Style",index:199,allowVisualStates:!0}}};T.addTransformInputs(bt),T.addMarginInputs(bt),T.addSharedVisualInputs(bt),T.addAlignInputs(bt),T.addPointerEventOutputs(bt);const St=H(bt);var _t=__webpack_require__(8979),Ct=function(){return Ct=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Ct.apply(this,arguments)};function Nt(e,t,n,o){var i=wt(e,t,n,o),r=wt(i.layout,t,n,o);return i.totalFractions===r.totalFractions?i:Nt(r.layout,t,n,o)}function wt(e,t,n,o){var i=100/e.reduce((function(e,t){return e+t}),0),r=e.reduce((function(e,r,s){return{expected:e.expected+i/100*n*r,min:e.min+parseFloat(t)+o}}),{expected:0,min:0,max:null}),s=e;r.expected<r.min&&s.pop();var a=s.reduce((function(e,t){return e+t}),0);return{layout:s,totalFractions:a,fractionSize:100/a,columnAmount:s.length}}function Ot(n){if(!n.children)return null;var o=null,i=(0,e.useRef)(null),r=(0,e.useState)(null),s=r[0],a=r[1];switch((0,e.useEffect)((function(){var e=null==i?void 0:i.current;if(e){var t=new ResizeObserver((function(){var e=i.current;e&&a(e.offsetWidth)}));return t.observe(e),function(){t.disconnect()}}}),[]),typeof n.layoutString){case"string":o=n.layoutString.trim();break;case"number":o=String(n.layoutString).trim();break;default:o=null}if(!o)return t().createElement(t().Fragment,null,n.children);var l=Nt(o.split(" ").map((function(e){return parseInt(e)})),n.minWidth,s,n.marginX),u=l.layout,d=l.columnAmount,c=l.fractionSize,p=[],h=null;return Array.isArray(n.children)?(p=n.children.filter((function(e){return e.type!==_t.ForEachComponent})),h=n.children.find((function(e){return e.type===_t.ForEachComponent}))):n.children.type!==_t.ForEachComponent&&(p=[n.children]),t().createElement("div",Ct({},n.attrs,{className:["columns-container",n.className].join(" "),ref:i,style:Ct({visibility:null===s?"hidden":"visible",marginTop:-1*parseFloat(n.marginY),marginLeft:-1*parseFloat(n.marginX),display:"flex",flexWrap:"wrap",alignItems:"stretch",justifyContent:n.justifyContent,flexDirection:n.direction,width:"calc(100% + (".concat(parseFloat(n.marginX),"px)"),boxSizing:"border-box"},n.style)}),h&&h,p.map((function(e,o){return t().createElement("div",{className:"column-item",key:o,style:{boxSizing:"border-box",paddingTop:n.marginY,paddingLeft:n.marginX,width:u[o%d]*c+"%",flexShrink:0,flexGrow:0,minWidth:n.minWidth}},t().cloneElement(e))})))}const xt=H({name:"net.noodl.visual.columns",displayName:"Columns",docs:"https://docs.noodl.net/nodes/basic-elements/columns",allowChildren:!0,noodlNodeAsProp:!0,connectionPanel:{groupPriority:["General","Style","Actions","Events","States","Mounted","Label","Label Text Style","Hover Events","Pointer Events","Focus Events"]},initialize(){this.props.attrs={},this.props.layoutString="1 2 1",this.props.minWidth=0,this.props.marginX=16,this.props.marginY=16,this.props.direction="row",this.props.justifyContent="flex-start"},getReactComponent:()=>Ot,inputs:{layoutString:{group:"Layout Settings",displayName:"Layout String",type:"string",default:"1 2 1",set(e){this.props.layoutString=e,"string"!=typeof e?this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"layout-type-warning",{message:"Layout String needs to be a string."}):this.context.editorConnection.clearWarning(this.nodeScope.componentOwner.name,this.id,"layout-type-warning"),this.forceUpdate()}},testId:{index:100009,displayName:"Test ID Attribute",group:"Advanced HTML",type:"string",set(e){this.props.attrs["data-testid"]=e,this.forceUpdate()}}},inputProps:{marginX:{group:"Layout Settings",displayName:"Horizontal Gap",type:{name:"number",units:["px"],defaultUnit:"px"},default:16},marginY:{group:"Layout Settings",displayName:"Vertical Gap",type:{name:"number",units:["px"],defaultUnit:"px"},default:16},minWidth:{group:"Constraints",displayName:"Min Column Width",type:{name:"number",units:["px"],defaultUnit:"px"},default:0},direction:{group:"Layout Settings",displayName:"Layout Direction",type:{name:"enum",enums:[{label:"Horizontal",value:"row"},{label:"Vertical",value:"column"}]},default:"row"},justifyContent:{group:"Justify Content",displayName:"Justify Content",type:{name:"enum",enums:[{label:"Start",value:"flex-start"},{label:"End",value:"flex-end"},{label:"Center",value:"center"}],alignComp:"align-items"},default:"flex-start"}}});var It=__webpack_require__(8136),Pt=__webpack_require__.n(It),Tt=__webpack_require__(1327),Et=__webpack_require__.n(Tt),kt=__webpack_require__(4442),Dt=__webpack_require__.n(kt),Rt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();function Mt(e,t){t.positionX&&t.positionX(e.x),t.positionY&&t.positionY(e.y),t.deltaX&&t.deltaX(e.deltaX),t.deltaY&&t.deltaY(e.deltaY)}var At=function(e){function n(t){var n=e.call(this,t)||this;return n.state={x:0,y:0},n}return Rt(n,e),n.prototype.snapToPosition=function(e){var t=e.timerScheduler,n=e.propCallback,o=e.duration,i=e.axis,r=e.endValue,s=this;return t.createTimer({duration:void 0===o?300:o,startValue:this.state[i],endValue:r,ease:Dt().easeOut,onRunning:function(e){var t,o=this.ease(this.startValue,this.endValue,e);s.setState(((t={})[i]=o,t)),n&&n(o)}}).start()},n.prototype.componentDidMount=function(){var e=this.props.inputPositionX?this.props.inputPositionX:0,t=this.props.inputPositionY?this.props.inputPositionY:0;this.setState({x:e,y:t}),Mt({x:e,y:t,deltaX:0,deltaY:0},this.props)},n.prototype.UNSAFE_componentWillReceiveProps=function(e){var t=this.props;t.inputPositionX!==e.inputPositionX&&(this.setState({x:e.inputPositionX}),t.positionX&&t.positionX(e.inputPositionX),t.deltaX&&t.deltaX(e.inputPositionX-t.inputPositionX)),t.inputPositionY!==e.inputPositionY&&(this.setState({y:e.inputPositionY}),t.positionY&&t.positionY(e.inputPositionY),t.deltaY&&t.deltaY(e.inputPositionY-t.inputPositionY))},n.prototype.snapToPositionX=function(e,t){this.state.x!==e&&(this.snapToPositionXTimer&&this.snapToPositionXTimer.stop(),this.snapToPositionXTimer=this.snapToPosition({timerScheduler:this.props.noodlNode.context.timerScheduler,propCallback:this.props.positionX,duration:t,axis:"x",endValue:e}))},n.prototype.snapToPositionY=function(e,t){this.state.y!==e&&(this.snapToPositionYTimer&&this.snapToPositionYTimer.stop(),this.snapToPositionYTimer=this.snapToPosition({timerScheduler:this.props.noodlNode.context.timerScheduler,propCallback:this.props.positionY,duration:t,axis:"y",endValue:e}))},n.prototype.render=function(){var e,n=this,o=this.props,i=o.useParentBounds?"parent":void 0;return t().Children.count(o.children)>0?(e=t().Children.toArray(o.children)[0],t().createElement(Et(),{axis:o.axis,bounds:i,disabled:!1===o.enabled,scale:o.scale||0,position:{x:this.state.x,y:this.state.y},onStart:function(e,t){Mt(t,o),o.onStart&&o.onStart(),n.snapToPositionXTimer&&n.snapToPositionXTimer.stop(),n.snapToPositionYTimer&&n.snapToPositionYTimer.stop()},onStop:function(e,t){"x"!==o.axis&&"both"!==o.axis||n.setState({x:t.x}),"y"!==o.axis&&"both"!==o.axis||n.setState({y:t.y}),o.positionX&&o.positionX(t.x),o.positionY&&o.positionY(t.y),o.onStop&&o.onStop()},onDrag:function(e,t){Mt(t,o),o.onDrag&&o.onDrag()}},t().cloneElement(e,{parentLayout:o.parentLayout}))):null},n}(t().Component);const Vt=H({name:"Drag",docs:"https://docs.noodl.net/nodes/utilities/drag",allowChildren:!0,noodlNodeAsProp:!0,getReactComponent:()=>At,initialize(){this._internal.snapPositionX=0,this._internal.snapPositionY=0,this._internal.snapDurationX=300,this._internal.snapDurationY=300},inputs:{"snapToPositionX.do":{group:"Snap To Position X",displayName:"Do",editorName:"Do|Snap To Position X",type:"signal",valueChangedToTrue(){this.scheduleAfterInputsHaveUpdated((()=>{const{snapPositionX:e,snapDurationX:t}=this._internal;this.innerReactComponentRef&&this.innerReactComponentRef.snapToPositionX(e,t)}))}},"snapToPositionX.value":{default:0,group:"Snap To Position X",displayName:"Value",editorName:"Value|Snap To Position X",type:"number",set(e){this._internal.snapPositionX=e}},"snapToPositionX.duration":{default:300,group:"Snap To Position X",displayName:"Duration",editorName:"Duration|Snap To Position X",type:"number",set(e){this._internal.snapDurationX=e}},"snapToPositionY.do":{group:"Snap To Position Y",displayName:"Do",editorName:"Do|Snap To Position Y",type:"signal",valueChangedToTrue(){this.scheduleAfterInputsHaveUpdated((()=>{const{snapPositionY:e,snapDurationY:t}=this._internal;this.innerReactComponentRef&&this.innerReactComponentRef.snapToPositionY(e,t)}))}},"snapToPositionY.value":{default:0,group:"Snap To Position Y",displayName:"Value",editorName:"Value|Snap To Position Y",type:"number",set(e){this._internal.snapPositionY=e}},"snapToPositionY.duration":{default:300,group:"Snap To Position Y",displayName:"Duration",editorName:"Duration|Snap To Position Y",type:"number",set(e){this._internal.snapDurationY=e}}},inputProps:{enabled:{group:"Drag",displayName:"Enabled",type:"boolean",default:!0},axis:{group:"Drag",displayName:"Axis",type:{name:"enum",enums:[{label:"X",value:"x"},{label:"Y",value:"y"},{label:"Both",value:"both"}]},default:"x"},useParentBounds:{group:"Drag",displayName:"Constrain to parent",type:"boolean",default:!0},inputPositionX:{displayName:"Start Drag X",type:{name:"number"}},inputPositionY:{displayName:"Start Drag Y",type:{name:"number"}},scale:{displayName:"Scale",default:1,type:{name:"number"}}},outputProps:{onStart:{group:"Signals",type:"signal",displayName:"Drag Started"},onStop:{group:"Signals",type:"signal",displayName:"Drag Ended"},onDrag:{group:"Signals",type:"signal",displayName:"Drag Moved"},positionX:{group:"Values",displayName:"Drag X",type:"number"},positionY:{group:"Values",displayName:"Drag Y",type:"number"},deltaX:{group:"Values",displayName:"Delta X",type:"number"},deltaY:{group:"Values",displayName:"Delta Y",type:"number"}}});var jt=function(e,t){return jt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},jt(e,t)};function Ft(e,t){function n(){this.constructor=e}jt(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Lt=function(){return Lt=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Lt.apply(this,arguments)};function Ut(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var o=Array(e),i=0;for(t=0;t<n;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,i++)o[i]=r[s];return o}var Wt=[{sourceKey:"scroller.scrollBehaviorX.currentPos",key:"x"},{sourceKey:"scroller.scrollBehaviorY.currentPos",key:"y"},{sourceKey:"scroller.scrollBehaviorX.hasScroll",key:"hasHorizontalScroll"},{sourceKey:"scroller.scrollBehaviorY.hasScroll",key:"hasVerticalScroll"},{sourceKey:"scroller.scrollBehaviorX.contentSize",key:"scrollerWidth"},{sourceKey:"scroller.scrollBehaviorY.contentSize",key:"scrollerHeight"},{sourceKey:"scroller.scrollBehaviorX.maxScrollPos",key:"maxScrollX"},{sourceKey:"scroller.scrollBehaviorY.maxScrollPos",key:"maxScrollY"},{sourceKey:"scroller.scrollBehaviorX.minScrollPos",key:"minScrollX"},{sourceKey:"scroller.scrollBehaviorY.minScrollPos",key:"minScrollY"},{sourceKey:"scroller.scrollBehaviorX.movingDirection",key:"movingDirectionX"},{sourceKey:"scroller.scrollBehaviorY.movingDirection",key:"movingDirectionY"},{sourceKey:"scroller.scrollBehaviorX.direction",key:"directionX"},{sourceKey:"scroller.scrollBehaviorY.direction",key:"directionY"},{sourceKey:"scroller.actions.enabled",key:"enabled"},{sourceKey:"scroller.animater.pending",key:"pending"},{sourceKey:"scroller.animater.stop",key:"stop"},{sourceKey:"scroller.scrollTo",key:"scrollTo"},{sourceKey:"scroller.scrollBy",key:"scrollBy"},{sourceKey:"scroller.scrollToElement",key:"scrollToElement"},{sourceKey:"scroller.resetPosition",key:"resetPosition"}];function Bt(e){console.error("[BScroll warn]: "+e)}var zt="undefined"!=typeof window,Ht=zt&&navigator.userAgent.toLowerCase(),qt=!(!Ht||!/wechatdevtools/.test(Ht)),Xt=Ht&&Ht.indexOf("android")>0,Gt=function(){if("string"==typeof Ht){var e=/os (\d\d?_\d(_\d)?)/.exec(Ht);if(!e)return!1;var t=e[1].split("_").map((function(e){return parseInt(e,10)}));return!!(13===t[0]&&t[1]>=4)}return!1}(),$t=!1;if(zt)try{var Yt={};Object.defineProperty(Yt,"passive",{get:function(){$t=!0}}),window.addEventListener("test-passive",(function(){}),Yt)}catch(e){}function Jt(){return window.performance&&window.performance.now&&window.performance.timing?window.performance.now()+window.performance.timing.navigationStart:+new Date}var Kt=function(e,t){for(var n in t)e[n]=t[n];return e};function Qt(e){return null==e}function Zt(e,t,n){return e<t?t:e>n?n:e}var en=zt&&document.createElement("div").style,tn=function(){if(!zt)return!1;for(var e=0,t=[{key:"standard",value:"transform"},{key:"webkit",value:"webkitTransform"},{key:"Moz",value:"MozTransform"},{key:"O",value:"OTransform"},{key:"ms",value:"msTransform"}];e<t.length;e++){var n=t[e];if(void 0!==en[n.value])return n.key}return!1}();function nn(e){return!1===tn?e:"standard"===tn?"transitionEnd"===e?"transitionend":e:tn+e.charAt(0).toUpperCase()+e.substr(1)}function on(e){return"string"==typeof e?document.querySelector(e):e}function rn(e,t,n,o){var i=$t?{passive:!1,capture:!!o}:!!o;e.addEventListener(t,n,i)}function sn(e,t,n,o){e.removeEventListener(t,n,{capture:!!o})}function an(e){for(var t=0,n=0;e;)t-=e.offsetLeft,n-=e.offsetTop,e=e.offsetParent;return{left:t,top:n}}tn&&"standard"!==tn&&tn.toLowerCase();var ln=nn("transform"),un=nn("transition"),dn=zt&&nn("perspective")in en,cn=zt&&("ontouchstart"in window||qt),pn=zt&&un in en,hn={transform:ln,transition:un,transitionTimingFunction:nn("transitionTimingFunction"),transitionDuration:nn("transitionDuration"),transitionDelay:nn("transitionDelay"),transformOrigin:nn("transformOrigin"),transitionEnd:nn("transitionEnd"),transitionProperty:nn("transitionProperty")},gn={touchstart:1,touchmove:1,touchend:1,touchcancel:1,mousedown:2,mousemove:2,mouseup:2};function fn(e){if(e instanceof window.SVGElement){var t=e.getBoundingClientRect();return{top:t.top,left:t.left,width:t.width,height:t.height}}return{top:e.offsetTop,left:e.offsetLeft,width:e.offsetWidth,height:e.offsetHeight}}function mn(e,t){for(var n in t)if(t[n].test(e[n]))return!0;return!1}var yn=mn;function vn(e,t){var n;void 0===t&&(t="click"),"mouseup"===e.type?n=e:"touchend"!==e.type&&"touchcancel"!==e.type||(n=e.changedTouches[0]);var o,i={};n&&(i.screenX=n.screenX||0,i.screenY=n.screenY||0,i.clientX=n.clientX||0,i.clientY=n.clientY||0);var r={ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,altKey:e.altKey,metaKey:e.metaKey};if("undefined"!=typeof MouseEvent)try{o=new MouseEvent(t,Kt(Lt({bubbles:!0,cancelable:!0},r),i))}catch(e){s()}else s();function s(){(o=document.createEvent("Event")).initEvent(t,!0,!0),Kt(o,i)}o.forwardedTouchEvent=!0,o._constructed=!0,e.target.dispatchEvent(o)}var bn={swipe:{style:"cubic-bezier(0.23, 1, 0.32, 1)",fn:function(e){return 1+--e*e*e*e*e}},swipeBounce:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(e){return e*(2-e)}},bounce:{style:"cubic-bezier(0.165, 0.84, 0.44, 1)",fn:function(e){return 1- --e*e*e*e}}},Sn=zt&&window;function _n(){}var Cn,Nn,wn,On,xn=zt?Sn.requestAnimationFrame||Sn.webkitRequestAnimationFrame||Sn.mozRequestAnimationFrame||Sn.oRequestAnimationFrame||function(e){return window.setTimeout(e,e.interval||16.666666666666668)}:_n,In=zt?Sn.cancelAnimationFrame||Sn.webkitCancelAnimationFrame||Sn.mozCancelAnimationFrame||Sn.oCancelAnimationFrame||function(e){window.clearTimeout(e)}:_n,Pn=function(e){},Tn={enumerable:!0,configurable:!0,get:Pn,set:Pn},En=function(){function e(e){this.events={},this.eventTypes={},this.registerType(e)}return e.prototype.on=function(e,t,n){return void 0===n&&(n=this),this.hasType(e),this.events[e]||(this.events[e]=[]),this.events[e].push([t,n]),this},e.prototype.once=function(e,t,n){var o=this;void 0===n&&(n=this),this.hasType(e);var i=function(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];o.off(e,i);var a=t.apply(n,r);if(!0===a)return a};return i.fn=t,this.on(e,i),this},e.prototype.off=function(e,t){if(!e&&!t)return this.events={},this;if(e){if(this.hasType(e),!t)return this.events[e]=[],this;var n=this.events[e];if(!n)return this;for(var o=n.length;o--;)(n[o][0]===t||n[o][0]&&n[o][0].fn===t)&&n.splice(o,1);return this}},e.prototype.trigger=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.hasType(e);var o=this.events[e];if(o)for(var i,r=o.length,s=Ut(o),a=0;a<r;a++){var l=s[a],u=l[0],d=l[1];if(u&&!0===(i=u.apply(d,t)))return i}},e.prototype.registerType=function(e){var t=this;e.forEach((function(e){t.eventTypes[e]=e}))},e.prototype.destroy=function(){this.events={},this.eventTypes={}},e.prototype.hasType=function(e){var t=this.eventTypes;t[e]===e||Bt('EventEmitter has used unknown event type: "'+e+'", should be oneof ['+Object.keys(t).map((function(e){return JSON.stringify(e)}))+"]")},e}(),kn=function(){function e(e,t){this.wrapper=e,this.events=t,this.addDOMEvents()}return e.prototype.destroy=function(){this.removeDOMEvents(),this.events=[]},e.prototype.addDOMEvents=function(){this.handleDOMEvents(rn)},e.prototype.removeDOMEvents=function(){this.handleDOMEvents(sn)},e.prototype.handleDOMEvents=function(e){var t=this,n=this.wrapper;this.events.forEach((function(o){e(n,o.name,t,!!o.capture)}))},e.prototype.handleEvent=function(e){var t=e.type;this.events.some((function(n){return n.name===t&&(n.handler(e),!0)}))},e}(),Dn=function(e){function t(){var t=e.call(this)||this;return t.startX=0,t.startY=0,t.scrollX=!1,t.scrollY=!0,t.freeScroll=!1,t.directionLockThreshold=0,t.eventPassthrough="",t.click=!1,t.dblclick=!1,t.tap="",t.bounce={top:!0,bottom:!0,left:!0,right:!0},t.bounceTime=800,t.momentum=!0,t.momentumLimitTime=300,t.momentumLimitDistance=15,t.swipeTime=2500,t.swipeBounceTime=500,t.deceleration=.0015,t.flickLimitTime=200,t.flickLimitDistance=100,t.resizePolling=60,t.probeType=0,t.stopPropagation=!1,t.preventDefault=!0,t.preventDefaultException={tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT|AUDIO)$/},t.tagException={tagName:/^TEXTAREA$/},t.HWCompositing=!0,t.useTransition=!0,t.bindToWrapper=!1,t.bindToTarget=!1,t.disableMouse=cn,t.disableTouch=!cn,t.autoBlur=!0,t.autoEndDistance=5,t.outOfBoundaryDampingFactor=1/3,t.specifiedIndexAsContent=0,t.quadrant=1,t}return Ft(t,e),t.prototype.merge=function(e){if(!e)return this;for(var t in e)"bounce"!==t?this[t]=e[t]:this.bounce=this.resolveBounce(e[t]);return this},t.prototype.process=function(){return this.translateZ=this.HWCompositing&&dn?" translateZ(1px)":"",this.useTransition=this.useTransition&&pn,this.preventDefault=!this.eventPassthrough&&this.preventDefault,this.scrollX="horizontal"!==this.eventPassthrough&&this.scrollX,this.scrollY="vertical"!==this.eventPassthrough&&this.scrollY,this.freeScroll=this.freeScroll&&!this.eventPassthrough,this.scrollX=!!this.freeScroll||this.scrollX,this.scrollY=!!this.freeScroll||this.scrollY,this.directionLockThreshold=this.eventPassthrough?0:this.directionLockThreshold,this},t.prototype.resolveBounce=function(e){var t={top:!0,right:!0,bottom:!0,left:!0};return"object"==typeof e?Kt(t,e):e?t:{top:!1,right:!1,bottom:!1,left:!1}},t}((function(){})),Rn=function(){function e(e,t){this.wrapper=e,this.options=t,this.hooks=new En(["beforeStart","start","move","end","click"]),this.handleDOMEvents()}return e.prototype.handleDOMEvents=function(){var e=this.options,t=e.bindToWrapper,n=e.disableMouse,o=e.disableTouch,i=e.click,r=this.wrapper,s=t?r:window,a=[],l=[],u=!o,d=!n;i&&a.push({name:"click",handler:this.click.bind(this),capture:!0}),u&&(a.push({name:"touchstart",handler:this.start.bind(this)}),l.push({name:"touchmove",handler:this.move.bind(this)},{name:"touchend",handler:this.end.bind(this)},{name:"touchcancel",handler:this.end.bind(this)})),d&&(a.push({name:"mousedown",handler:this.start.bind(this)}),l.push({name:"mousemove",handler:this.move.bind(this)},{name:"mouseup",handler:this.end.bind(this)})),this.wrapperEventRegister=new kn(r,a),this.targetEventRegister=new kn(s,l)},e.prototype.beforeHandler=function(e,t){var n=this.options,o=n.preventDefault,i=n.stopPropagation,r=n.preventDefaultException;({start:function(){return o&&!mn(e.target,r)},end:function(){return o&&!mn(e.target,r)},move:function(){return o}})[t]()&&e.preventDefault(),i&&e.stopPropagation()},e.prototype.setInitiated=function(e){void 0===e&&(e=0),this.initiated=e},e.prototype.start=function(e){var t=gn[e.type];if(!this.initiated||this.initiated===t)if(this.setInitiated(t),yn(e.target,this.options.tagException))this.setInitiated();else if((2!==t||0===e.button)&&!this.hooks.trigger(this.hooks.eventTypes.beforeStart,e)){this.beforeHandler(e,"start");var n=e.touches?e.touches[0]:e;this.pointX=n.pageX,this.pointY=n.pageY,this.hooks.trigger(this.hooks.eventTypes.start,e)}},e.prototype.move=function(e){if(gn[e.type]===this.initiated){this.beforeHandler(e,"move");var t=e.touches?e.touches[0]:e,n=t.pageX-this.pointX,o=t.pageY-this.pointY;if(this.pointX=t.pageX,this.pointY=t.pageY,!this.hooks.trigger(this.hooks.eventTypes.move,{deltaX:n,deltaY:o,e})){var i=document.documentElement.scrollLeft||window.pageXOffset||document.body.scrollLeft,r=document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop,s=this.pointX-i,a=this.pointY-r,l=this.options.autoEndDistance;(s>document.documentElement.clientWidth-l||a>document.documentElement.clientHeight-l||s<l||a<l)&&this.end(e)}}},e.prototype.end=function(e){gn[e.type]===this.initiated&&(this.setInitiated(),this.beforeHandler(e,"end"),this.hooks.trigger(this.hooks.eventTypes.end,e))},e.prototype.click=function(e){this.hooks.trigger(this.hooks.eventTypes.click,e)},e.prototype.setContent=function(e){e!==this.wrapper&&(this.wrapper=e,this.rebindDOMEvents())},e.prototype.rebindDOMEvents=function(){this.wrapperEventRegister.destroy(),this.targetEventRegister.destroy(),this.handleDOMEvents()},e.prototype.destroy=function(){this.wrapperEventRegister.destroy(),this.targetEventRegister.destroy(),this.hooks.destroy()},e}(),Mn={x:["translateX","px"],y:["translateY","px"]},An=function(){function e(e){this.setContent(e),this.hooks=new En(["beforeTranslate","translate"])}return e.prototype.getComputedPosition=function(){var e=window.getComputedStyle(this.content,null)[hn.transform].split(")")[0].split(", ");return{x:+(e[12]||e[4])||0,y:+(e[13]||e[5])||0}},e.prototype.translate=function(e){var t=[];Object.keys(e).forEach((function(n){if(Mn[n]){var o=Mn[n][0];if(o){var i=Mn[n][1],r=e[n];t.push(o+"("+r+i+")")}}})),this.hooks.trigger(this.hooks.eventTypes.beforeTranslate,t,e),this.style[hn.transform]=t.join(" "),this.hooks.trigger(this.hooks.eventTypes.translate,e)},e.prototype.setContent=function(e){this.content!==e&&(this.content=e,this.style=e.style)},e.prototype.destroy=function(){this.hooks.destroy()},e}(),Vn=function(){function e(e,t,n){this.translater=t,this.options=n,this.timer=0,this.hooks=new En(["move","end","beforeForceStop","forceStop","callStop","time","timeFunction"]),this.setContent(e)}return e.prototype.translate=function(e){this.translater.translate(e)},e.prototype.setPending=function(e){this.pending=e},e.prototype.setForceStopped=function(e){this.forceStopped=e},e.prototype.setCallStop=function(e){this.callStopWhenPending=e},e.prototype.setContent=function(e){this.content!==e&&(this.content=e,this.style=e.style,this.stop())},e.prototype.clearTimer=function(){this.timer&&(In(this.timer),this.timer=0)},e.prototype.destroy=function(){this.hooks.destroy(),In(this.timer)},e}(),jn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ft(t,e),t.prototype.startProbe=function(e,t){var n=this,o=e,i=function(){var r=n.translater.getComputedPosition();(function(e,t,n,o){var i=function(e,t){var n=e-t;return n>0?-1:n<0?1:0},r=i(t.x,e.x),s=i(t.y,e.y),a=n.x-o.x,l=n.y-o.y;return r*a<=0&&s*l<=0})(e,t,r,o)&&n.hooks.trigger(n.hooks.eventTypes.move,r),n.pending||(n.callStopWhenPending?n.callStopWhenPending=!1:n.hooks.trigger(n.hooks.eventTypes.end,r)),o=r,n.pending&&(n.timer=xn(i))};this.callStopWhenPending&&this.setCallStop(!1),In(this.timer),i()},t.prototype.transitionTime=function(e){void 0===e&&(e=0),this.style[hn.transitionDuration]=e+"ms",this.hooks.trigger(this.hooks.eventTypes.time,e)},t.prototype.transitionTimingFunction=function(e){this.style[hn.transitionTimingFunction]=e,this.hooks.trigger(this.hooks.eventTypes.timeFunction,e)},t.prototype.transitionProperty=function(){this.style[hn.transitionProperty]=hn.transform},t.prototype.move=function(e,t,n,o){this.setPending(n>0),this.transitionTimingFunction(o),this.transitionProperty(),this.transitionTime(n),this.translate(t);var i=3===this.options.probeType;n&&i&&this.startProbe(e,t),n||(this._reflow=this.content.offsetHeight,i&&this.hooks.trigger(this.hooks.eventTypes.move,t),this.hooks.trigger(this.hooks.eventTypes.end,t))},t.prototype.doStop=function(){var e=this.pending;if(this.setForceStopped(!1),this.setCallStop(!1),e){this.setPending(!1),In(this.timer);var t=this.translater.getComputedPosition(),n=t.x,o=t.y;this.transitionTime(),this.translate({x:n,y:o}),this.setForceStopped(!0),this.setCallStop(!0),this.hooks.trigger(this.hooks.eventTypes.forceStop,{x:n,y:o})}return e},t.prototype.stop=function(){this.doStop()&&this.hooks.trigger(this.hooks.eventTypes.callStop)},t}(Vn),Fn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ft(t,e),t.prototype.move=function(e,t,n,o){if(!n)return this.translate(t),3===this.options.probeType&&this.hooks.trigger(this.hooks.eventTypes.move,t),void this.hooks.trigger(this.hooks.eventTypes.end,t);this.animate(e,t,n,o)},t.prototype.animate=function(e,t,n,o){var i=this,r=Jt(),s=r+n,a=3===this.options.probeType,l=function(){var u=Jt();if(u>=s)return i.translate(t),a&&i.hooks.trigger(i.hooks.eventTypes.move,t),void i.hooks.trigger(i.hooks.eventTypes.end,t);var d=o(u=(u-r)/n),c={};Object.keys(t).forEach((function(n){var o=e[n],i=t[n];c[n]=(i-o)*d+o})),i.translate(c),a&&i.hooks.trigger(i.hooks.eventTypes.move,c),i.pending&&(i.timer=xn(l)),i.pending||(i.callStopWhenPending?i.callStopWhenPending=!1:i.hooks.trigger(i.hooks.eventTypes.end,t))};this.setPending(!0),this.callStopWhenPending&&this.setCallStop(!1),In(this.timer),l()},t.prototype.doStop=function(){var e=this.pending;if(this.setForceStopped(!1),this.setCallStop(!1),e){this.setPending(!1),In(this.timer);var t=this.translater.getComputedPosition();this.setForceStopped(!0),this.setCallStop(!0),this.hooks.trigger(this.hooks.eventTypes.forceStop,t)}return e},t.prototype.stop=function(){this.doStop()&&this.hooks.trigger(this.hooks.eventTypes.callStop)},t}(Vn),Ln=function(){function e(e,t,n){this.wrapper=e,this.options=n,this.hooks=new En(["beforeComputeBoundary","computeBoundary","momentum","end","ignoreHasScroll"]),this.refresh(t)}return e.prototype.start=function(){this.dist=0,this.setMovingDirection(0),this.setDirection(0)},e.prototype.move=function(e){return e=this.hasScroll?e:0,this.setMovingDirection(e),this.performDampingAlgorithm(e,this.options.outOfBoundaryDampingFactor)},e.prototype.setMovingDirection=function(e){this.movingDirection=e>0?-1:e<0?1:0},e.prototype.setDirection=function(e){this.direction=e>0?-1:e<0?1:0},e.prototype.performDampingAlgorithm=function(e,t){var n=this.currentPos+e;return(n>this.minScrollPos||n<this.maxScrollPos)&&(n=n>this.minScrollPos&&this.options.bounces[0]||n<this.maxScrollPos&&this.options.bounces[1]?this.currentPos+e*t:n>this.minScrollPos?this.minScrollPos:this.maxScrollPos),n},e.prototype.end=function(e){var t={duration:0},n=Math.abs(this.currentPos-this.startPos);if(this.options.momentum&&e<this.options.momentumLimitTime&&n>this.options.momentumLimitDistance){var o=-1===this.direction&&this.options.bounces[0]||1===this.direction&&this.options.bounces[1]?this.wrapperSize:0;t=this.hasScroll?this.momentum(this.currentPos,this.startPos,e,this.maxScrollPos,this.minScrollPos,o,this.options):{destination:this.currentPos,duration:0}}else this.hooks.trigger(this.hooks.eventTypes.end,t);return t},e.prototype.momentum=function(e,t,n,o,i,r,s){void 0===s&&(s=this.options);var a=e-t,l=Math.abs(a)/n,u=s.deceleration,d=s.swipeBounceTime,c=s.swipeTime,p={destination:e+l*l/u*(a<0?-1:1),duration:Math.min(c,2*l/u),rate:15};return this.hooks.trigger(this.hooks.eventTypes.momentum,p,a),p.destination<o?(p.destination=r?Math.max(o-r/4,o-r/p.rate*l):o,p.duration=d):p.destination>i&&(p.destination=r?Math.min(i+r/4,i+r/p.rate*l):i,p.duration=d),p.destination=Math.round(p.destination),p},e.prototype.updateDirection=function(){var e=this.currentPos-this.absStartPos;this.setDirection(e)},e.prototype.refresh=function(e){var t=this.options.rect,n=t.size,o=t.position,i="static"===window.getComputedStyle(this.wrapper,null).position,r=fn(this.wrapper);this.wrapperSize=this.wrapper["width"===n?"clientWidth":"clientHeight"],this.setContent(e);var s=fn(this.content);this.contentSize=s[n],this.relativeOffset=s[o],i&&(this.relativeOffset-=r[o]),this.computeBoundary(),this.setDirection(0)},e.prototype.setContent=function(e){e!==this.content&&(this.content=e,this.resetState())},e.prototype.resetState=function(){this.currentPos=0,this.startPos=0,this.dist=0,this.setDirection(0),this.setMovingDirection(0),this.resetStartPos()},e.prototype.computeBoundary=function(){this.hooks.trigger(this.hooks.eventTypes.beforeComputeBoundary);var e={minScrollPos:0,maxScrollPos:this.wrapperSize-this.contentSize};e.maxScrollPos<0&&(e.maxScrollPos-=this.relativeOffset,0===this.options.specifiedIndexAsContent&&(e.minScrollPos=-this.relativeOffset)),this.hooks.trigger(this.hooks.eventTypes.computeBoundary,e),this.minScrollPos=e.minScrollPos,this.maxScrollPos=e.maxScrollPos,this.hasScroll=this.options.scrollable&&this.maxScrollPos<this.minScrollPos,!this.hasScroll&&this.minScrollPos<this.maxScrollPos&&(this.maxScrollPos=this.minScrollPos,this.contentSize=this.wrapperSize)},e.prototype.updatePosition=function(e){this.currentPos=e},e.prototype.getCurrentPos=function(){return this.currentPos},e.prototype.checkInBoundary=function(){var e=this.adjustPosition(this.currentPos);return{position:e,inBoundary:e===this.getCurrentPos()}},e.prototype.adjustPosition=function(e){return this.hasScroll||this.hooks.trigger(this.hooks.eventTypes.ignoreHasScroll)?e>this.minScrollPos?e=this.minScrollPos:e<this.maxScrollPos&&(e=this.maxScrollPos):e=this.minScrollPos,e},e.prototype.updateStartPos=function(){this.startPos=this.currentPos},e.prototype.updateAbsStartPos=function(){this.absStartPos=this.currentPos},e.prototype.resetStartPos=function(){this.updateStartPos(),this.updateAbsStartPos()},e.prototype.getAbsDist=function(e){return this.dist+=e,Math.abs(this.dist)},e.prototype.destroy=function(){this.hooks.destroy()},e}(),Un=((Cn={}).yes=function(e){return!0},Cn.no=function(e){return e.preventDefault(),!1},Cn),Wn=((Nn={}).horizontal=((wn={}).yes="horizontal",wn.no="vertical",wn),Nn.vertical=((On={}).yes="vertical",On.no="horizontal",On),Nn),Bn=function(){function e(e,t,n){this.directionLockThreshold=e,this.freeScroll=t,this.eventPassthrough=n,this.reset()}return e.prototype.reset=function(){this.directionLocked=""},e.prototype.checkMovingDirection=function(e,t,n){return this.computeDirectionLock(e,t),this.handleEventPassthrough(n)},e.prototype.adjustDelta=function(e,t){return"horizontal"===this.directionLocked?t=0:"vertical"===this.directionLocked&&(e=0),{deltaX:e,deltaY:t}},e.prototype.computeDirectionLock=function(e,t){""!==this.directionLocked||this.freeScroll||(e>t+this.directionLockThreshold?this.directionLocked="horizontal":t>=e+this.directionLockThreshold?this.directionLocked="vertical":this.directionLocked="none")},e.prototype.handleEventPassthrough=function(e){var t=Wn[this.directionLocked];if(t){if(this.eventPassthrough===t.yes)return Un.yes(e);if(this.eventPassthrough===t.no)return Un.no(e)}return!1},e}(),zn=function(){function e(e,t,n,o,i){this.hooks=new En(["start","beforeMove","scrollStart","scroll","beforeEnd","end","scrollEnd","contentNotMoved","detectMovingDirection","coordinateTransformation"]),this.scrollBehaviorX=e,this.scrollBehaviorY=t,this.actionsHandler=n,this.animater=o,this.options=i,this.directionLockAction=new Bn(i.directionLockThreshold,i.freeScroll,i.eventPassthrough),this.enabled=!0,this.bindActionsHandler()}return e.prototype.bindActionsHandler=function(){var e=this;this.actionsHandler.hooks.on(this.actionsHandler.hooks.eventTypes.start,(function(t){return!e.enabled||e.handleStart(t)})),this.actionsHandler.hooks.on(this.actionsHandler.hooks.eventTypes.move,(function(t){var n=t.deltaX,o=t.deltaY,i=t.e;if(!e.enabled)return!0;var r=function(e,t,n){return 2===n?[t,-e]:3===n?[-e,-t]:4===n?[-t,e]:[e,t]}(n,o,e.options.quadrant),s={deltaX:r[0],deltaY:r[1]};return e.hooks.trigger(e.hooks.eventTypes.coordinateTransformation,s),e.handleMove(s.deltaX,s.deltaY,i)})),this.actionsHandler.hooks.on(this.actionsHandler.hooks.eventTypes.end,(function(t){return!e.enabled||e.handleEnd(t)})),this.actionsHandler.hooks.on(this.actionsHandler.hooks.eventTypes.click,(function(t){e.enabled&&!t._constructed&&e.handleClick(t)}))},e.prototype.handleStart=function(e){var t=Jt();this.fingerMoved=!1,this.contentMoved=!1,this.startTime=t,this.directionLockAction.reset(),this.scrollBehaviorX.start(),this.scrollBehaviorY.start(),this.animater.doStop(),this.scrollBehaviorX.resetStartPos(),this.scrollBehaviorY.resetStartPos(),this.hooks.trigger(this.hooks.eventTypes.start,e)},e.prototype.handleMove=function(e,t,n){if(!this.hooks.trigger(this.hooks.eventTypes.beforeMove,n)){var o=this.scrollBehaviorX.getAbsDist(e),i=this.scrollBehaviorY.getAbsDist(t),r=Jt();if(this.checkMomentum(o,i,r))return!0;if(this.directionLockAction.checkMovingDirection(o,i,n))return this.actionsHandler.setInitiated(),!0;var s=this.directionLockAction.adjustDelta(e,t),a=this.scrollBehaviorX.getCurrentPos(),l=this.scrollBehaviorX.move(s.deltaX),u=this.scrollBehaviorY.getCurrentPos(),d=this.scrollBehaviorY.move(s.deltaY);if(!this.hooks.trigger(this.hooks.eventTypes.detectMovingDirection)){this.fingerMoved||(this.fingerMoved=!0);var c=l!==a||d!==u;this.contentMoved||c||this.hooks.trigger(this.hooks.eventTypes.contentNotMoved),!this.contentMoved&&c&&(this.contentMoved=!0,this.hooks.trigger(this.hooks.eventTypes.scrollStart)),this.contentMoved&&c&&(this.animater.translate({x:l,y:d}),this.dispatchScroll(r))}}},e.prototype.dispatchScroll=function(e){e-this.startTime>this.options.momentumLimitTime&&(this.startTime=e,this.scrollBehaviorX.updateStartPos(),this.scrollBehaviorY.updateStartPos(),1===this.options.probeType&&this.hooks.trigger(this.hooks.eventTypes.scroll,this.getCurrentPos())),this.options.probeType>1&&this.hooks.trigger(this.hooks.eventTypes.scroll,this.getCurrentPos())},e.prototype.checkMomentum=function(e,t,n){return n-this.endTime>this.options.momentumLimitTime&&t<this.options.momentumLimitDistance&&e<this.options.momentumLimitDistance},e.prototype.handleEnd=function(e){if(!this.hooks.trigger(this.hooks.eventTypes.beforeEnd,e)){var t=this.getCurrentPos();if(this.scrollBehaviorX.updateDirection(),this.scrollBehaviorY.updateDirection(),this.hooks.trigger(this.hooks.eventTypes.end,e,t))return!0;t=this.ensureIntegerPos(t),this.animater.translate(t),this.endTime=Jt();var n=this.endTime-this.startTime;this.hooks.trigger(this.hooks.eventTypes.scrollEnd,t,n)}},e.prototype.ensureIntegerPos=function(e){this.ensuringInteger=!0;var t=e.x,n=e.y,o=this.scrollBehaviorX,i=o.minScrollPos,r=o.maxScrollPos,s=this.scrollBehaviorY,a=s.minScrollPos,l=s.maxScrollPos;return t=t>0?Math.ceil(t):Math.floor(t),n=n>0?Math.ceil(n):Math.floor(n),{x:t=Zt(t,r,i),y:n=Zt(n,l,a)}},e.prototype.handleClick=function(e){mn(e.target,this.options.preventDefaultException)||(e.preventDefault(),e.stopPropagation())},e.prototype.getCurrentPos=function(){return{x:this.scrollBehaviorX.getCurrentPos(),y:this.scrollBehaviorY.getCurrentPos()}},e.prototype.refresh=function(){this.endTime=0},e.prototype.destroy=function(){this.hooks.destroy()},e}();function Hn(e,t,n,o){var i=["momentum","momentumLimitTime","momentumLimitDistance","deceleration","swipeBounceTime","swipeTime","outOfBoundaryDampingFactor","specifiedIndexAsContent"].reduce((function(t,n){return t[n]=e[n],t}),{});return i.scrollable=!!e[t],i.bounces=n,i.rect=o,i}function qn(e,t,n){n.forEach((function(n){var o,i;"string"==typeof n?o=i=n:(o=n.source,i=n.target),e.on(o,(function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.trigger.apply(t,Ut([i],e))}))}))}var Xn=function(){function e(e,t,n){this.wrapper=e,this.content=t,this.resizeTimeout=0,this.hooks=new En(["beforeStart","beforeMove","beforeScrollStart","scrollStart","scroll","beforeEnd","scrollEnd","resize","touchEnd","end","flick","scrollCancel","momentum","scrollTo","minDistanceScroll","scrollToElement","beforeRefresh"]),this.options=n;var o,i=this.options.bounce,r=i.left,s=i.right,a=i.top,l=i.bottom;this.scrollBehaviorX=new Ln(e,t,Hn(n,"scrollX",[r,s],{size:"width",position:"left"})),this.scrollBehaviorY=new Ln(e,t,Hn(n,"scrollY",[a,l],{size:"height",position:"top"})),this.translater=new An(this.content),this.animater=function(e,t,n){var o=n.useTransition,i={};return Object.defineProperty(i,"probeType",{enumerable:!0,configurable:!1,get:function(){return n.probeType}}),o?new jn(e,t,i):new Fn(e,t,i)}(this.content,this.translater,this.options),this.actionsHandler=new Rn(this.options.bindToTarget?this.content:e,(o=this.options,["click","bindToWrapper","disableMouse","disableTouch","preventDefault","stopPropagation","tagException","preventDefaultException","autoEndDistance"].reduce((function(e,t){return e[t]=o[t],e}),{}))),this.actions=new zn(this.scrollBehaviorX,this.scrollBehaviorY,this.actionsHandler,this.animater,this.options);var u=this.resize.bind(this);this.resizeRegister=new kn(window,[{name:"orientationchange",handler:u},{name:"resize",handler:u}]),this.registerTransitionEnd(),this.init()}return e.prototype.init=function(){var e=this;this.bindTranslater(),this.bindAnimater(),this.bindActions(),this.hooks.on(this.hooks.eventTypes.scrollEnd,(function(){e.togglePointerEvents(!0)}))},e.prototype.registerTransitionEnd=function(){this.transitionEndRegister=new kn(this.content,[{name:hn.transitionEnd,handler:this.transitionEnd.bind(this)}])},e.prototype.bindTranslater=function(){var e=this,t=this.translater.hooks;t.on(t.eventTypes.beforeTranslate,(function(t){e.options.translateZ&&t.push(e.options.translateZ)})),t.on(t.eventTypes.translate,(function(t){var n=e.getCurrentPos();e.updatePositions(t),!0!==e.actions.ensuringInteger?t.x===n.x&&t.y===n.y||e.togglePointerEvents(!1):e.actions.ensuringInteger=!1}))},e.prototype.bindAnimater=function(){var e=this;this.animater.hooks.on(this.animater.hooks.eventTypes.end,(function(t){e.resetPosition(e.options.bounceTime)||(e.animater.setPending(!1),e.hooks.trigger(e.hooks.eventTypes.scrollEnd,t))})),qn(this.animater.hooks,this.hooks,[{source:this.animater.hooks.eventTypes.move,target:this.hooks.eventTypes.scroll},{source:this.animater.hooks.eventTypes.forceStop,target:this.hooks.eventTypes.scrollEnd}])},e.prototype.bindActions=function(){var e=this,t=this.actions;qn(t.hooks,this.hooks,[{source:t.hooks.eventTypes.start,target:this.hooks.eventTypes.beforeStart},{source:t.hooks.eventTypes.start,target:this.hooks.eventTypes.beforeScrollStart},{source:t.hooks.eventTypes.beforeMove,target:this.hooks.eventTypes.beforeMove},{source:t.hooks.eventTypes.scrollStart,target:this.hooks.eventTypes.scrollStart},{source:t.hooks.eventTypes.scroll,target:this.hooks.eventTypes.scroll},{source:t.hooks.eventTypes.beforeEnd,target:this.hooks.eventTypes.beforeEnd}]),t.hooks.on(t.hooks.eventTypes.end,(function(n,o){return e.hooks.trigger(e.hooks.eventTypes.touchEnd,o),!!e.hooks.trigger(e.hooks.eventTypes.end,o)||!(t.fingerMoved||(e.hooks.trigger(e.hooks.eventTypes.scrollCancel),!e.checkClick(n)))||(e.resetPosition(e.options.bounceTime,bn.bounce)?(e.animater.setForceStopped(!1),!0):void 0)})),t.hooks.on(t.hooks.eventTypes.scrollEnd,(function(n,o){var i=Math.abs(n.x-e.scrollBehaviorX.startPos),r=Math.abs(n.y-e.scrollBehaviorY.startPos);if(e.checkFlick(o,i,r))return e.animater.setForceStopped(!1),void e.hooks.trigger(e.hooks.eventTypes.flick);e.momentum(n,o)?e.animater.setForceStopped(!1):(t.contentMoved&&e.hooks.trigger(e.hooks.eventTypes.scrollEnd,n),e.animater.forceStopped&&e.animater.setForceStopped(!1))}))},e.prototype.checkFlick=function(e,t,n){if(this.hooks.events.flick.length>1&&e<this.options.flickLimitTime&&t<this.options.flickLimitDistance&&n<this.options.flickLimitDistance&&(n>1||t>1))return!0},e.prototype.momentum=function(e,t){var n={time:0,easing:bn.swiper,newX:e.x,newY:e.y},o=this.scrollBehaviorX.end(t),i=this.scrollBehaviorY.end(t);if(n.newX=Qt(o.destination)?n.newX:o.destination,n.newY=Qt(i.destination)?n.newY:i.destination,n.time=Math.max(o.duration,i.duration),this.hooks.trigger(this.hooks.eventTypes.momentum,n,this),n.newX!==e.x||n.newY!==e.y)return(n.newX>this.scrollBehaviorX.minScrollPos||n.newX<this.scrollBehaviorX.maxScrollPos||n.newY>this.scrollBehaviorY.minScrollPos||n.newY<this.scrollBehaviorY.maxScrollPos)&&(n.easing=bn.swipeBounce),this.scrollTo(n.newX,n.newY,n.time,n.easing),!0},e.prototype.checkClick=function(e){var t=this.animater.forceStopped;if(this.hooks.trigger(this.hooks.eventTypes.checkClick))return this.animater.setForceStopped(!1),!0;if(!t){var n=this.options.dblclick,o=!1;if(n&&this.lastClickTime){var i=n.delay,r=void 0===i?300:i;Jt()-this.lastClickTime<r&&(o=!0,function(e){vn(e,"dblclick")}(e))}return this.options.tap&&function(e,t){var n=document.createEvent("Event");n.initEvent(t,!0,!0),n.pageX=e.pageX,n.pageY=e.pageY,e.target.dispatchEvent(n)}(e,this.options.tap),this.options.click&&!mn(e.target,this.options.preventDefaultException)&&vn(e),this.lastClickTime=o?null:Jt(),!0}return!1},e.prototype.resize=function(){var e=this;this.actions.enabled&&(Xt&&(this.wrapper.scrollTop=0),clearTimeout(this.resizeTimeout),this.resizeTimeout=window.setTimeout((function(){e.hooks.trigger(e.hooks.eventTypes.resize)}),this.options.resizePolling))},e.prototype.transitionEnd=function(e){e.target===this.content&&this.animater.pending&&(this.animater.transitionTime(),this.resetPosition(this.options.bounceTime,bn.bounce)||(this.animater.setPending(!1),3!==this.options.probeType&&this.hooks.trigger(this.hooks.eventTypes.scrollEnd,this.getCurrentPos())))},e.prototype.togglePointerEvents=function(e){void 0===e&&(e=!0);for(var t=this.content.children.length?this.content.children:[this.content],n=e?"auto":"none",o=0;o<t.length;o++){var i=t[o];i.isBScrollContainer||(i.style.pointerEvents=n)}},e.prototype.refresh=function(e){var t=this.setContent(e);this.hooks.trigger(this.hooks.eventTypes.beforeRefresh),this.scrollBehaviorX.refresh(e),this.scrollBehaviorY.refresh(e),t&&(this.translater.setContent(e),this.animater.setContent(e),this.transitionEndRegister.destroy(),this.registerTransitionEnd(),this.options.bindToTarget&&this.actionsHandler.setContent(e)),this.actions.refresh(),this.wrapperOffset=an(this.wrapper)},e.prototype.setContent=function(e){var t=e!==this.content;return t&&(this.content=e),t},e.prototype.scrollBy=function(e,t,n,o){void 0===n&&(n=0);var i=this.getCurrentPos(),r=i.x,s=i.y;o=o||bn.bounce,e+=r,t+=s,this.scrollTo(e,t,n,o)},e.prototype.scrollTo=function(e,t,n,o,i){void 0===n&&(n=0),void 0===o&&(o=bn.bounce),void 0===i&&(i={start:{},end:{}});var r=this.options.useTransition?o.style:o.fn,s=this.getCurrentPos(),a=Lt({x:s.x,y:s.y},i.start),l=Lt({x:e,y:t},i.end);if(this.hooks.trigger(this.hooks.eventTypes.scrollTo,l),!function(e,t){for(var n=0,o=Object.keys(e);n<o.length;n++){var i=o[n];if(e[i]!==t[i])return!1}return!0}(a,l)){var u=Math.abs(l.x-a.x),d=Math.abs(l.y-a.y);u<1&&d<1&&(n=0,this.hooks.trigger(this.hooks.eventTypes.minDistanceScroll)),this.animater.move(a,l,n,r)}},e.prototype.scrollToElement=function(e,t,n,o,i){var r=on(e),s=an(r),a=function(e,t,n){return"number"==typeof e?e:e?Math.round(t/2-n/2):0};n=a(n,r.offsetWidth,this.wrapper.offsetWidth),o=a(o,r.offsetHeight,this.wrapper.offsetHeight);var l=function(e,t,n,o){return e-=t,o.adjustPosition(e-n)};s.left=l(s.left,this.wrapperOffset.left,n,this.scrollBehaviorX),s.top=l(s.top,this.wrapperOffset.top,o,this.scrollBehaviorY),this.hooks.trigger(this.hooks.eventTypes.scrollToElement,r,s)||this.scrollTo(s.left,s.top,t,i)},e.prototype.resetPosition=function(e,t){void 0===e&&(e=0),void 0===t&&(t=bn.bounce);var n=this.scrollBehaviorX.checkInBoundary(),o=n.position,i=n.inBoundary,r=this.scrollBehaviorY.checkInBoundary(),s=r.position,a=r.inBoundary;return!(i&&a||(Gt&&this.reflow(),this.scrollTo(o,s,e,t),0))},e.prototype.reflow=function(){this._reflow=this.content.offsetHeight},e.prototype.updatePositions=function(e){this.scrollBehaviorX.updatePosition(e.x),this.scrollBehaviorY.updatePosition(e.y)},e.prototype.getCurrentPos=function(){return this.actions.getCurrentPos()},e.prototype.enable=function(){this.actions.enabled=!0},e.prototype.disable=function(){In(this.animater.timer),this.actions.enabled=!1},e.prototype.destroy=function(){var e=this;["resizeRegister","transitionEndRegister","actionsHandler","actions","hooks","animater","translater","scrollBehaviorX","scrollBehaviorY"].forEach((function(t){return e[t].destroy()}))},e}(),Gn=function(e){function t(t,n){var o=e.call(this,["refresh","contentChanged","enable","disable","beforeScrollStart","scrollStart","scroll","scrollEnd","scrollCancel","touchEnd","flick","destroy"])||this,i=on(t);return i?(o.plugins={},o.options=(new Dn).merge(n).process(),o.setContent(i).valid?(o.hooks=new En(["refresh","enable","disable","destroy","beforeInitialScrollTo","contentChanged"]),o.init(i),o):o):(Bt("Can not resolve the wrapper DOM."),o)}return Ft(t,e),t.use=function(e){var n=e.pluginName;return t.plugins.some((function(t){return e===t.ctor}))?t:Qt(n)?(Bt("Plugin Class must specify plugin's name in static property by 'pluginName' field."),t):(t.pluginsMap[n]=!0,t.plugins.push({name:n,applyOrder:e.applyOrder,ctor:e}),t)},t.prototype.setContent=function(e){var t=!1,n=!0,o=e.children[this.options.specifiedIndexAsContent];return o?(t=this.content!==o)&&(this.content=o):(Bt("The wrapper need at least one child element to be content element to scroll."),n=!1),{valid:n,contentChanged:t}},t.prototype.init=function(e){var t=this;this.wrapper=e,e.isBScrollContainer=!0,this.scroller=new Xn(e,this.content,this.options),this.scroller.hooks.on(this.scroller.hooks.eventTypes.resize,(function(){t.refresh()})),this.eventBubbling(),this.handleAutoBlur(),this.enable(),this.proxy(Wt),this.applyPlugins(),this.refreshWithoutReset(this.content);var n=this.options,o={x:n.startX,y:n.startY};this.hooks.trigger(this.hooks.eventTypes.beforeInitialScrollTo,o)||this.scroller.scrollTo(o.x,o.y)},t.prototype.applyPlugins=function(){var e=this,n=this.options;t.plugins.sort((function(e,t){var n,o=((n={}).pre=-1,n.post=1,n);return(e.applyOrder?o[e.applyOrder]:0)-(t.applyOrder?o[t.applyOrder]:0)})).forEach((function(t){var o=t.ctor;n[t.name]&&"function"==typeof o&&(e.plugins[t.name]=new o(e))}))},t.prototype.handleAutoBlur=function(){this.options.autoBlur&&this.on(this.eventTypes.beforeScrollStart,(function(){var e=document.activeElement;!e||"INPUT"!==e.tagName&&"TEXTAREA"!==e.tagName||e.blur()}))},t.prototype.eventBubbling=function(){qn(this.scroller.hooks,this,[this.eventTypes.beforeScrollStart,this.eventTypes.scrollStart,this.eventTypes.scroll,this.eventTypes.scrollEnd,this.eventTypes.scrollCancel,this.eventTypes.touchEnd,this.eventTypes.flick])},t.prototype.refreshWithoutReset=function(e){this.scroller.refresh(e),this.hooks.trigger(this.hooks.eventTypes.refresh,e),this.trigger(this.eventTypes.refresh,e)},t.prototype.proxy=function(e){var t=this;e.forEach((function(e){var n=e.key,o=e.sourceKey;!function(e,t,n){Tn.get=function(){return function(e,t){for(var n=t.split("."),o=0;o<n.length-1;o++)if("object"!=typeof(e=e[n[o]])||!e)return;var i=n.pop();return"function"==typeof e[i]?function(){return e[i].apply(e,arguments)}:e[i]}(this,t)},Tn.set=function(e){!function(e,t,n){for(var o,i=t.split("."),r=0;r<i.length-1;r++)e[o=i[r]]||(e[o]={}),e=e[o];e[i.pop()]=n}(this,t,e)},Object.defineProperty(e,n,Tn)}(t,o,n)}))},t.prototype.refresh=function(){var e=this.setContent(this.wrapper),t=e.contentChanged;if(e.valid){var n=this.content;this.refreshWithoutReset(n),t&&(this.hooks.trigger(this.hooks.eventTypes.contentChanged,n),this.trigger(this.eventTypes.contentChanged,n)),this.scroller.resetPosition()}},t.prototype.enable=function(){this.scroller.enable(),this.hooks.trigger(this.hooks.eventTypes.enable),this.trigger(this.eventTypes.enable)},t.prototype.disable=function(){this.scroller.disable(),this.hooks.trigger(this.hooks.eventTypes.disable),this.trigger(this.eventTypes.disable)},t.prototype.destroy=function(){this.hooks.trigger(this.hooks.eventTypes.destroy),this.trigger(this.eventTypes.destroy),this.scroller.destroy()},t.prototype.eventRegister=function(e){this.registerType(e)},t.plugins=[],t.pluginsMap={},t}(En);function $n(e,t){return new Gn(e,t)}$n.use=Gn.use,$n.plugins=Gn.plugins,$n.pluginsMap=Gn.pluginsMap;const Yn=$n;var Jn="undefined"!=typeof window,Kn=Jn&&navigator.userAgent.toLowerCase();Kn&&/wechatdevtools/.test(Kn),Kn&&Kn.indexOf("android"),function(){if("string"==typeof Kn){var e=/os (\d\d?_\d(_\d)?)/.exec(Kn);if(!e)return!1;var t=e[1].split("_").map((function(e){return parseInt(e,10)}));13===t[0]&&t[1]}}();var Qn=!1;if(Jn)try{var Zn={};Object.defineProperty(Zn,"passive",{get:function(){Qn=!0}}),window.addEventListener("test-passive",(function(){}),Zn)}catch(e){}var eo=Jn&&document.createElement("div").style,to=function(){if(!Jn)return!1;for(var e=0,t=[{key:"standard",value:"transform"},{key:"webkit",value:"webkitTransform"},{key:"Moz",value:"MozTransform"},{key:"O",value:"OTransform"},{key:"ms",value:"msTransform"}];e<t.length;e++){var n=t[e];if(void 0!==eo[n.value])return n.key}return!1}();function no(e){return!1===to?e:"standard"===to?"transitionEnd"===e?"transitionend":e:to+e.charAt(0).toUpperCase()+e.substr(1)}function oo(e,t,n,o){var i=Qn?{passive:!1,capture:!!o}:!!o;e.addEventListener(t,n,i)}function io(e,t,n,o){e.removeEventListener(t,n,{capture:!!o})}to&&"standard"!==to&&to.toLowerCase(),no("transform"),no("transition"),Jn&&no("perspective"),no("transitionTimingFunction"),no("transitionDuration"),no("transitionDelay"),no("transformOrigin"),no("transitionEnd"),no("transitionProperty");var ro=function(){function e(e,t){this.wrapper=e,this.events=t,this.addDOMEvents()}return e.prototype.destroy=function(){this.removeDOMEvents(),this.events=[]},e.prototype.addDOMEvents=function(){this.handleDOMEvents(oo)},e.prototype.removeDOMEvents=function(){this.handleDOMEvents(io)},e.prototype.handleDOMEvents=function(e){var t=this,n=this.wrapper;this.events.forEach((function(o){e(n,o.name,t,!!o.capture)}))},e.prototype.handleEvent=function(e){var t=e.type;this.events.some((function(n){return n.name===t&&(n.handler(e),!0)}))},e}(),so=function(){function e(e){this.scroll=e,this.wheelEndTimer=0,this.wheelMoveTimer=0,this.wheelStart=!1,this.init()}return e.prototype.init=function(){this.handleBScroll(),this.handleOptions(),this.handleHooks(),this.registerEvent()},e.prototype.handleBScroll=function(){this.scroll.registerType(["alterOptions","mousewheelStart","mousewheelMove","mousewheelEnd"])},e.prototype.handleOptions=function(){var e=!0===this.scroll.options.mouseWheel?{}:this.scroll.options.mouseWheel;this.mouseWheelOpt=function(e,t){for(var n in t)e[n]=t[n];return e}({speed:20,invert:!1,easeTime:300,discreteTime:400,throttleTime:0,dampingFactor:.1},e)},e.prototype.handleHooks=function(){this.hooksFn=[],this.registerHooks(this.scroll.hooks,"destroy",this.destroy)},e.prototype.registerEvent=function(){this.eventRegister=new ro(this.scroll.scroller.wrapper,[{name:"wheel",handler:this.wheelHandler.bind(this)},{name:"mousewheel",handler:this.wheelHandler.bind(this)},{name:"DOMMouseScroll",handler:this.wheelHandler.bind(this)}])},e.prototype.registerHooks=function(e,t,n){e.on(t,n,this),this.hooksFn.push([e,t,n])},e.prototype.wheelHandler=function(e){if(this.scroll.enabled){this.beforeHandler(e),this.wheelStart||(this.wheelStartHandler(e),this.wheelStart=!0);var t=this.getWheelDelta(e);this.wheelMoveHandler(t),this.wheelEndDetector(t)}},e.prototype.wheelStartHandler=function(e){this.cleanCache();var t=this.scroll.scroller,n=t.scrollBehaviorX,o=t.scrollBehaviorY;n.setMovingDirection(0),o.setMovingDirection(0),n.setDirection(0),o.setDirection(0),this.scroll.trigger(this.scroll.eventTypes.alterOptions,this.mouseWheelOpt),this.scroll.trigger(this.scroll.eventTypes.mousewheelStart)},e.prototype.cleanCache=function(){this.deltaCache=[]},e.prototype.wheelMoveHandler=function(e){var t=this,n=this.mouseWheelOpt,o=n.throttleTime,i=n.dampingFactor;if(o&&this.wheelMoveTimer)this.deltaCache.push(e);else{var r=this.deltaCache.reduce((function(e,t){return{x:e.x+t.x,y:e.y+t.y}}),{x:0,y:0});this.cleanCache();var s=this.scroll.scroller,a=s.scrollBehaviorX,l=s.scrollBehaviorY;a.setMovingDirection(-e.directionX),l.setMovingDirection(-e.directionY),a.setDirection(e.x),l.setDirection(e.y);var u=a.performDampingAlgorithm(Math.round(e.x)+r.x,i),d=l.performDampingAlgorithm(Math.round(e.y)+r.x,i);if(!this.scroll.trigger(this.scroll.eventTypes.mousewheelMove,{x:u,y:d})){var c=this.getEaseTime();u===this.scroll.x&&d===this.scroll.y||this.scroll.scrollTo(u,d,c)}o&&(this.wheelMoveTimer=window.setTimeout((function(){t.wheelMoveTimer=0}),o))}},e.prototype.wheelEndDetector=function(e){var t=this;window.clearTimeout(this.wheelEndTimer),this.wheelEndTimer=window.setTimeout((function(){t.wheelStart=!1,window.clearTimeout(t.wheelMoveTimer),t.wheelMoveTimer=0,t.scroll.trigger(t.scroll.eventTypes.mousewheelEnd,e)}),this.mouseWheelOpt.discreteTime)},e.prototype.getWheelDelta=function(e){var t=this.mouseWheelOpt,n=t.speed,o=0,i=0,r=t.invert?-1:1;switch(!0){case"deltaX"in e:1===e.deltaMode?(o=-e.deltaX*n,i=-e.deltaY*n):(o=-e.deltaX,i=-e.deltaY);break;case"wheelDeltaX"in e:o=e.wheelDeltaX/120*n,i=e.wheelDeltaY/120*n;break;case"wheelDelta"in e:o=i=e.wheelDelta/120*n;break;case"detail"in e:o=i=-e.detail/3*n}return o*=r,i*=r,this.scroll.hasVerticalScroll||(Math.abs(i)>Math.abs(o)&&(o=i),i=0),this.scroll.hasHorizontalScroll||(o=0),{x:o,y:i,directionX:o>0?-1:o<0?1:0,directionY:i>0?-1:i<0?1:0}},e.prototype.beforeHandler=function(e){var t=this.scroll.options,n=t.preventDefault,o=t.stopPropagation,i=t.preventDefaultException;n&&!function(e,t){for(var n in t)if(t[n].test(e[n]))return!0;return!1}(e.target,i)&&e.preventDefault(),o&&e.stopPropagation()},e.prototype.getEaseTime=function(){var e=this.mouseWheelOpt.easeTime;return e<100&&("easeTime should be greater than 100.If mouseWheel easeTime is too small,scrollEnd will be triggered many times.",console.error("[BScroll warn]: easeTime should be greater than 100.If mouseWheel easeTime is too small,scrollEnd will be triggered many times.")),Math.max(e,100)},e.prototype.destroy=function(){this.eventRegister.destroy(),window.clearTimeout(this.wheelEndTimer),window.clearTimeout(this.wheelMoveTimer),this.hooksFn.forEach((function(e){var t=e[0],n=e[1],o=e[2];t.off(n,o)}))},e.pluginName="mouseWheel",e.applyOrder="pre",e}();const ao=so;var lo=function(){return lo=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},lo.apply(this,arguments)},uo="undefined"!=typeof window,co=uo&&navigator.userAgent.toLowerCase();co&&/wechatdevtools/.test(co),co&&co.indexOf("android"),function(){if("string"==typeof co){var e=/os (\d\d?_\d(_\d)?)/.exec(co);if(!e)return!1;var t=e[1].split("_").map((function(e){return parseInt(e,10)}));13===t[0]&&t[1]}}();var po=!1;if(uo)try{var ho={};Object.defineProperty(ho,"passive",{get:function(){po=!0}}),window.addEventListener("test-passive",(function(){}),ho)}catch(e){}function go(){return window.performance&&window.performance.now&&window.performance.timing?window.performance.now()+window.performance.timing.navigationStart:+new Date}function fo(e,t,n){return e<t?t:e>n?n:e}var mo=uo&&document.createElement("div").style,yo=function(){if(!uo)return!1;for(var e=0,t=[{key:"standard",value:"transform"},{key:"webkit",value:"webkitTransform"},{key:"Moz",value:"MozTransform"},{key:"O",value:"OTransform"},{key:"ms",value:"msTransform"}];e<t.length;e++){var n=t[e];if(void 0!==mo[n.value])return n.key}return!1}();function vo(e){return!1===yo?e:"standard"===yo?"transitionEnd"===e?"transitionend":e:yo+e.charAt(0).toUpperCase()+e.substr(1)}function bo(e,t,n,o){var i=po?{passive:!1,capture:!!o}:!!o;e.addEventListener(t,n,i)}function So(e,t,n,o){e.removeEventListener(t,n,{capture:!!o})}yo&&"standard"!==yo&&yo.toLowerCase();var _o=vo("transform");vo("transition"),uo&&vo("perspective");var Co=_o,No=vo("transitionTimingFunction"),wo=vo("transitionDuration"),Oo=(vo("transitionDelay"),vo("transformOrigin"),vo("transitionEnd"),vo("transitionProperty"),function(){function e(e){this.events={},this.eventTypes={},this.registerType(e)}return e.prototype.on=function(e,t,n){return void 0===n&&(n=this),this.hasType(e),this.events[e]||(this.events[e]=[]),this.events[e].push([t,n]),this},e.prototype.once=function(e,t,n){var o=this;void 0===n&&(n=this),this.hasType(e);var i=function(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];o.off(e,i);var a=t.apply(n,r);if(!0===a)return a};return i.fn=t,this.on(e,i),this},e.prototype.off=function(e,t){if(!e&&!t)return this.events={},this;if(e){if(this.hasType(e),!t)return this.events[e]=[],this;var n=this.events[e];if(!n)return this;for(var o=n.length;o--;)(n[o][0]===t||n[o][0]&&n[o][0].fn===t)&&n.splice(o,1);return this}},e.prototype.trigger=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.hasType(e);var o=this.events[e];if(o)for(var i,r=o.length,s=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var o=Array(e),i=0;for(t=0;t<n;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,i++)o[i]=r[s];return o}(o),a=0;a<r;a++){var l=s[a],u=l[0],d=l[1];if(u&&!0===(i=u.apply(d,t)))return i}},e.prototype.registerType=function(e){var t=this;e.forEach((function(e){t.eventTypes[e]=e}))},e.prototype.destroy=function(){this.events={},this.eventTypes={}},e.prototype.hasType=function(e){var t,n=this.eventTypes;n[e]===e||(t='EventEmitter has used unknown event type: "'+e+'", should be oneof ['+Object.keys(n).map((function(e){return JSON.stringify(e)}))+"]",console.error("[BScroll warn]: "+t))},e}()),xo=function(){function e(e,t){this.wrapper=e,this.events=t,this.addDOMEvents()}return e.prototype.destroy=function(){this.removeDOMEvents(),this.events=[]},e.prototype.addDOMEvents=function(){this.handleDOMEvents(bo)},e.prototype.removeDOMEvents=function(){this.handleDOMEvents(So)},e.prototype.handleDOMEvents=function(e){var t=this,n=this.wrapper;this.events.forEach((function(o){e(n,o.name,t,!!o.capture)}))},e.prototype.handleEvent=function(e){var t=e.type;this.events.some((function(n){return n.name===t&&(n.handler(e),!0)}))},e}(),Io=function(){function e(e,t){this.indicator=e,this.options=t,this.hooks=new Oo(["touchStart","touchMove","touchEnd"]),this.registerEvents()}return e.prototype.registerEvents=function(){var e=this.options,t=e.disableMouse,n=e.disableTouch,o=[],i=[],r=[];t||(o.push({name:"mousedown",handler:this.start.bind(this)}),i.push({name:"mousemove",handler:this.move.bind(this)}),r.push({name:"mouseup",handler:this.end.bind(this)})),n||(o.push({name:"touchstart",handler:this.start.bind(this)}),i.push({name:"touchmove",handler:this.move.bind(this)}),r.push({name:"touchend",handler:this.end.bind(this)},{name:"touchcancel",handler:this.end.bind(this)})),this.startEventRegister=new xo(this.indicator.indicatorEl,o),this.moveEventRegister=new xo(window,i),this.endEventRegister=new xo(window,r)},e.prototype.BScrollIsDisabled=function(){return!this.indicator.scroll.enabled},e.prototype.start=function(e){if(!this.BScrollIsDisabled()){var t=e.touches?e.touches[0]:e;e.preventDefault(),e.stopPropagation(),this.initiated=!0,this.lastPoint=t[this.indicator.keysMap.point],this.hooks.trigger(this.hooks.eventTypes.touchStart)}},e.prototype.move=function(e){if(this.initiated){var t=(e.touches?e.touches[0]:e)[this.indicator.keysMap.point];e.preventDefault(),e.stopPropagation();var n=t-this.lastPoint;this.lastPoint=t,this.hooks.trigger(this.hooks.eventTypes.touchMove,n)}},e.prototype.end=function(e){this.initiated&&(this.initiated=!1,e.preventDefault(),e.stopPropagation(),this.hooks.trigger(this.hooks.eventTypes.touchEnd))},e.prototype.destroy=function(){this.startEventRegister.destroy(),this.moveEventRegister.destroy(),this.endEventRegister.destroy()},e}(),Po=function(){function e(e,t){this.scroll=e,this.options=t,this.hooksFn=[],this.wrapper=t.wrapper,this.direction=t.direction,this.indicatorEl=this.wrapper.children[0],this.keysMap=this.getKeysMap(),this.handleFade(),this.handleHooks()}return e.prototype.handleFade=function(){this.options.fade&&(this.wrapper.style.opacity="0")},e.prototype.handleHooks=function(){var e=this,t=this.options,n=t.fade,o=t.interactive,i=t.scrollbarTrackClickable,r=this.scroll,s=r.hooks,a=r.scroller.translater.hooks,l=r.scroller.animater.hooks;if(this.registerHooks(s,s.eventTypes.refresh,this.refresh),this.registerHooks(a,a.eventTypes.translate,(function(t){var n=e.keysMap.hasScroll;e.scroll[n]&&e.updatePosition(t)})),this.registerHooks(l,l.eventTypes.time,this.transitionTime),this.registerHooks(l,l.eventTypes.timeFunction,this.transitionTimingFunction),n&&(this.registerHooks(r,r.eventTypes.scrollEnd,(function(){e.fade()})),this.registerHooks(r,r.eventTypes.scrollStart,(function(){e.fade(!0)})),r.eventTypes.mousewheelStart&&r.eventTypes.mousewheelEnd&&(this.registerHooks(r,r.eventTypes.mousewheelStart,(function(){e.fade(!0)})),this.registerHooks(r,r.eventTypes.mousewheelMove,(function(){e.fade(!0)})),this.registerHooks(r,r.eventTypes.mousewheelEnd,(function(){e.fade()})))),o){var u=this.scroll.options,d=u.disableMouse,c=u.disableTouch;this.eventHandler=new Io(this,{disableMouse:d,disableTouch:c});var p=this.eventHandler.hooks;this.registerHooks(p,p.eventTypes.touchStart,this.startHandler),this.registerHooks(p,p.eventTypes.touchMove,this.moveHandler),this.registerHooks(p,p.eventTypes.touchEnd,this.endHandler)}i&&this.bindClick()},e.prototype.registerHooks=function(e,t,n){e.on(t,n,this),this.hooksFn.push([e,t,n])},e.prototype.bindClick=function(){var e=this.wrapper;this.clickEventRegister=new xo(e,[{name:"click",handler:this.handleClick.bind(this)}])},e.prototype.handleClick=function(e){var t=this.calculateclickOffsetPos(e),n=this.scroll,o=n.x,i=n.y;o="horizontal"===this.direction?t:o,i="vertical"===this.direction?t:i,this.scroll.scrollTo(o,i,this.options.scrollbarTrackOffsetTime)},e.prototype.calculateclickOffsetPos=function(e){var t=this.keysMap,n=t.point,o=t.domRect,i=this.options.scrollbarTrackOffsetType,r=e[n]-this.wrapperRect[o],s=r<this.currentPos?-1:1,a=0,l=this.currentPos;return"step"===i?a=this.scrollInfo.baseSize*s:(a=0,l=r),this.newPos(l,a,this.scrollInfo)},e.prototype.getKeysMap=function(){return"vertical"===this.direction?{hasScroll:"hasVerticalScroll",size:"height",wrapperSize:"clientHeight",scrollerSize:"scrollerHeight",maxScrollPos:"maxScrollY",pos:"y",point:"pageY",translateProperty:"translateY",domRect:"top"}:{hasScroll:"hasHorizontalScroll",size:"width",wrapperSize:"clientWidth",scrollerSize:"scrollerWidth",maxScrollPos:"maxScrollX",pos:"x",point:"pageX",translateProperty:"translateX",domRect:"left"}},e.prototype.fade=function(e){var t=this.options,n=t.fadeInTime,o=t.fadeOutTime,i=e?n:o,r=this.wrapper;r.style[wo]=i+"ms",r.style.opacity=e?"1":"0"},e.prototype.refresh=function(){var e=this.keysMap.hasScroll,t=this.scroll,n=t.x,o=t.y;if(this.wrapperRect=this.wrapper.getBoundingClientRect(),this.canScroll(t[e])){var i=this.keysMap,r=i.wrapperSize,s=i.scrollerSize,a=i.maxScrollPos;this.scrollInfo=this.refreshScrollInfo(this.wrapper[r],t[s],t[a],this.indicatorEl[r]),this.updatePosition({x:n,y:o})}},e.prototype.transitionTime=function(e){void 0===e&&(e=0),this.indicatorEl.style[wo]=e+"ms"},e.prototype.transitionTimingFunction=function(e){this.indicatorEl.style[No]=e},e.prototype.canScroll=function(e){return this.wrapper.style.display=e?"block":"none",e},e.prototype.refreshScrollInfo=function(e,t,n,o){var i=Math.max(Math.round(e*e/(t||e||1)),this.options.minSize);this.options.isCustom&&(i=o);var r=e-i;return{baseSize:i,maxScrollPos:r,minScrollPos:0,sizeRatio:r/n}},e.prototype.updatePosition=function(e){var t=this.caculatePosAndSize(e,this.scrollInfo),n=t.pos,o=t.size;this.refreshStyle(o,n),this.currentPos=n},e.prototype.caculatePosAndSize=function(e,t){var n,o=this.keysMap.pos,i=t.sizeRatio,r=t.baseSize,s=t.maxScrollPos,a=t.minScrollPos,l=this.options.minSize,u=Math.round(i*e[o]);return u<a?(n=Math.max(r+3*u,l),u=a):u>s?u=s+r-(n=Math.max(r-3*(u-s),l)):n=r,{pos:u,size:n}},e.prototype.refreshStyle=function(e,t){var n=this.keysMap,o=n.translateProperty,i=n.size,r=this.scroll.options.translateZ;this.indicatorEl.style[i]=e+"px",this.indicatorEl.style[Co]=o+"("+t+"px)"+r},e.prototype.startHandler=function(){this.moved=!1,this.startTime=go(),this.transitionTime(),this.scroll.scroller.hooks.trigger(this.scroll.scroller.hooks.eventTypes.beforeScrollStart)},e.prototype.moveHandler=function(e){if(this.moved||this.indicatorNotMoved(e)||(this.moved=!0,this.scroll.scroller.hooks.trigger(this.scroll.scroller.hooks.eventTypes.scrollStart)),this.moved){var t=this.newPos(this.currentPos,e,this.scrollInfo);this.syncBScroll(t)}},e.prototype.endHandler=function(){if(this.moved){var e=this.scroll,t=e.x,n=e.y;this.scroll.scroller.hooks.trigger(this.scroll.scroller.hooks.eventTypes.scrollEnd,{x:t,y:n})}},e.prototype.indicatorNotMoved=function(e){var t=this.currentPos,n=this.scrollInfo,o=n.maxScrollPos;return t===n.minScrollPos&&e<=0||t===o&&e>=0},e.prototype.syncBScroll=function(e){var t=go(),n=this.scroll,o=n.x,i=n.y,r=n.options,s=n.scroller,a=n.maxScrollY,l=n.minScrollY,u=n.maxScrollX,d=n.minScrollX,c=r.probeType,p=r.momentumLimitTime,h={x:o,y:i};"vertical"===this.direction?h.y=fo(e,a,l):h.x=fo(e,u,d),s.translater.translate(h),t-this.startTime>p&&(this.startTime=t,1===c&&s.hooks.trigger(s.hooks.eventTypes.scroll,h)),c>1&&s.hooks.trigger(s.hooks.eventTypes.scroll,h)},e.prototype.newPos=function(e,t,n){var o=n.maxScrollPos,i=n.sizeRatio,r=e+t;return r=fo(r,n.minScrollPos,o),Math.round(r/i)},e.prototype.destroy=function(){var e=this.options,t=e.interactive,n=e.scrollbarTrackClickable,o=e.isCustom;t&&this.eventHandler.destroy(),n&&this.clickEventRegister.destroy(),o||this.wrapper.parentNode.removeChild(this.wrapper),this.hooksFn.forEach((function(e){var t=e[0],n=e[1],o=e[2];t.off(n,o)})),this.hooksFn.length=0},e}(),To=function(){function e(e){this.scroll=e,this.handleOptions(),this.createIndicators(),this.handleHooks()}return e.prototype.handleHooks=function(){var e=this,t=this.scroll;t.hooks.on(t.hooks.eventTypes.destroy,(function(){for(var t=0,n=e.indicators;t<n.length;t++)n[t].destroy()}))},e.prototype.handleOptions=function(){var e=!0===this.scroll.options.scrollbar?{}:this.scroll.options.scrollbar;this.options=function(e,t){for(var n in t)e[n]=t[n];return e}({fade:!0,fadeInTime:250,fadeOutTime:500,interactive:!1,customElements:[],minSize:8,scrollbarTrackClickable:!1,scrollbarTrackOffsetType:"step",scrollbarTrackOffsetTime:300},e)},e.prototype.createIndicators=function(){for(var e,t=this.scroll,n=[],o=["scrollX","scrollY"],i=["horizontal","vertical"],r=this.options.customElements,s=0;s<o.length;s++){var a=o[s];if(t.options[a]){var l=r.shift(),u=i[s],d=!1,c=l||this.createScrollbarElement(u);c!==l?t.wrapper.appendChild(c):d=!0,e=lo(lo({wrapper:c,direction:u},this.options),{isCustom:d}),n.push(new Po(t,e))}}this.indicators=n},e.prototype.createScrollbarElement=function(e,t){void 0===t&&(t=this.options.scrollbarTrackClickable);var n=document.createElement("div"),o=document.createElement("div");return n.style.cssText="position:absolute;z-index:9999;overflow:hidden;",o.style.cssText="box-sizing:border-box;position:absolute;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);border-radius:3px;",o.className="bscroll-indicator","horizontal"===e?(n.style.cssText+="height:7px;left:2px;right:2px;bottom:0;",o.style.height="100%",n.className="bscroll-horizontal-scrollbar"):(n.style.cssText+="width:7px;bottom:2px;top:2px;right:1px;",o.style.width="100%",n.className="bscroll-vertical-scrollbar"),t||(n.style.cssText+="pointer-events:none;"),n.appendChild(o),n},e.pluginName="scrollbar",e}();const Eo=To;var ko={duplicateClick:function(e){var t=e[0],n=e[1];t.options.click&&n.options.click&&(n.options.click=!1)},nestedScroll:function(e){var t=e[0],n=e[1],o=t.options.scrollX,i=t.options.scrollY,r=n.options.scrollX,s=n.options.scrollY;o!==r&&i!==s||(e.forEach((function(t,n){var o=e[(n+1)%2];t.on("scrollStart",(function(){o.pending&&(o.stop(),o.resetPosition()),function(e){var t=Ro(e),n=t.hasHorizontalScroll,o=t.hasVerticalScroll,i=e.scroller,r=i.actions,s=i.scrollBehaviorX,a=i.scrollBehaviorY;r.startTime=+new Date,o?a.startPos=a.currentPos:n&&(s.startPos=s.currentPos)}(o),o.disable()})),t.on("touchEnd",(function(){o.enable()}))})),n.on("scrollStart",(function(){(function(e){var t=Ro(e),n=t.hasHorizontalScroll,o=t.hasVerticalScroll,i=e.scroller,r=i.scrollBehaviorX,s=i.scrollBehaviorY,a=e.x>=e.minScrollX&&-1===r.movingDirection,l=e.x<=e.maxScrollX&&1===r.movingDirection,u=e.y>=e.minScrollY&&-1===s.movingDirection,d=e.y<=e.maxScrollY&&1===s.movingDirection;return o?u||d:!!n&&(a||l)})(n)&&(n.disable(),t.enable())})))}};function Do(e,t){for(var n=0,o=e.parentNode;o&&o!==t;)n++,o=o.parentNode;return n}function Ro(e){return{hasHorizontalScroll:e.scroller.scrollBehaviorX.hasScroll,hasVerticalScroll:e.scroller.scrollBehaviorY.hasScroll}}const Mo=function(){function e(t){var n=e.nestedScroll;return n instanceof e||((n=e.nestedScroll=this).stores=[]),n.setup(t),n.addHooks(t),n}return e.prototype.setup=function(e){this.appendBScroll(e),this.handleContainRelationship(),this.handleCompatible()},e.prototype.addHooks=function(e){var t=this;e.on("destroy",(function(){t.teardown(e)}))},e.prototype.teardown=function(e){this.removeBScroll(e),this.handleContainRelationship(),this.handleCompatible()},e.prototype.appendBScroll=function(e){this.stores.push(e)},e.prototype.removeBScroll=function(e){var t=this.stores.indexOf(e);-1!==t&&(e.wrapper.isBScrollContainer=void 0,this.stores.splice(t,1))},e.prototype.handleContainRelationship=function(){var e=this.stores;if(e.length<=1)e[0]&&e[0].__parentInfo&&(e[0].__parentInfo=void 0);else for(var t,n,o,i,r=0;r<e.length;r++){n=(t=e[r]).wrapper;for(var s=0;s<e.length;s++)if(i=(o=e[s]).wrapper,t!==o&&i.contains(n))if(t.__parentInfo){var a=Do(n,i);t.__parentInfo.depth>a&&(t.__parentInfo={parent:o,depth:a})}else t.__parentInfo={parent:o,depth:Do(n,i)}}},e.prototype.handleCompatible=function(){var e=this.availableBScrolls(),t=["duplicateClick","nestedScroll"];e.forEach((function(e){t.forEach((function(t){ko[t](e)}))}))},e.prototype.availableBScrolls=function(){return this.stores.filter((function(e){return!!e.__parentInfo})).map((function(e){return[e.__parentInfo.parent,e]}))},e.pluginName="nestedScroll",e}();var Ao=__webpack_require__(8172),Vo=__webpack_require__.n(Ao),jo="undefined"!=typeof window,Fo=jo&&navigator.userAgent.toLowerCase();function Lo(e,t,n){return e<t?t:e>n?n:e}Fo&&/wechatdevtools/.test(Fo),Fo&&Fo.indexOf("android");var Uo=jo&&document.createElement("div").style,Wo=function(){if(!jo)return!1;var e={webkit:"webkitTransform",Moz:"MozTransform",O:"OTransform",ms:"msTransform",standard:"transform"};for(var t in e)if(void 0!==Uo[e[t]])return t;return!1}();function Bo(e){return!1===Wo?e:"standard"===Wo?"transitionEnd"===e?"transitionend":e:Wo+e.charAt(0).toUpperCase()+e.substr(1)}function zo(e){if(e instanceof window.SVGElement){var t=e.getBoundingClientRect();return{top:t.top,left:t.left,width:t.width,height:t.height}}return{top:e.offsetTop,left:e.offsetLeft,width:e.offsetWidth,height:e.offsetHeight}}function Ho(e,t){e.removeChild(t)}Wo&&"standard"!==Wo&&Wo.toLowerCase(),Bo("transform"),Bo("transition"),jo&&Bo("perspective"),Bo("transitionTimingFunction"),Bo("transitionDuration"),Bo("transitionDelay"),Bo("transformOrigin"),Bo("transitionEnd");var qo={swipe:{style:"cubic-bezier(0.23, 1, 0.32, 1)",fn:function(e){return 1+--e*e*e*e*e}},swipeBounce:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(e){return e*(2-e)}},bounce:{style:"cubic-bezier(0.165, 0.84, 0.44, 1)",fn:function(e){return 1- --e*e*e*e}}},Xo=jo&&window;jo&&(Xo.requestAnimationFrame||Xo.webkitRequestAnimationFrame||Xo.mozRequestAnimationFrame||Xo.oRequestAnimationFrame),jo&&(Xo.cancelAnimationFrame||Xo.webkitCancelAnimationFrame||Xo.mozCancelAnimationFrame||Xo.oCancelAnimationFrame);var Go=function(){function e(e,t){this.scroll=e,this.slideOpt=t,this.slideEl=null,this.init()}return e.prototype.init=function(){var e=this.scroll.scroller,t=e.scrollBehaviorX,n=e.scrollBehaviorY,o=zo(e.wrapper),i=zo(e.content);this.wrapperWidth=o.width,this.wrapperHeight=o.height,this.scrollerHeight=n.hasScroll?i.height:o.height,this.scrollerWidth=t.hasScroll?i.width:o.width;var r=this.slideOpt.stepX||this.wrapperWidth,s=this.slideOpt.stepY||this.wrapperHeight,a=e.content,l=this.slideOpt.el;"string"==typeof l&&(this.slideEl=a.querySelectorAll(l)),this.pages=this.slideEl?this.computePagePosInfoByEl(this.slideEl):this.computePagePosInfo(r,s),this.xLen=this.pages?this.pages.length:0,this.yLen=this.pages&&this.pages[0]?this.pages[0].length:0},e.prototype.hasInfo=function(){return!(!this.pages||!this.pages.length)},e.prototype.getPos=function(e,t){return this.pages[e]?this.pages[e][t]:null},e.prototype.getNearestPage=function(e,t){if(this.hasInfo()){for(var n=0,o=0,i=this.pages.length;n<i-1&&!(e>=this.pages[n][0].cx);n++);for(i=this.pages[n].length;o<i-1&&!(t>=this.pages[0][o].cy);o++);return{pageX:n,pageY:o}}},e.prototype.computePagePosInfo=function(e,t){var n,o,i,r,s=[],a=0,l=0,u=this.scroll.scroller.scrollBehaviorX.maxScrollPos,d=this.scroll.scroller.scrollBehaviorY.maxScrollPos;for(o=Math.round(e/2),i=Math.round(t/2);a>-this.scrollerWidth;){for(s[l]=[],r=0,n=0;n>-this.scrollerHeight;)s[l][r]={x:Math.max(a,u),y:Math.max(n,d),width:e,height:t,cx:a-o,cy:n-i},n-=t,r++;a-=e,l++}return s},e.prototype.computePagePosInfoByEl=function(e){for(var t,n,o,i=[],r=0,s=0,a=0,l=e.length,u=0,d=-1,c=this.scroll.scroller.scrollBehaviorX.maxScrollPos,p=this.scroll.scroller.scrollBehaviorY.maxScrollPos;a<l;a++)o=zo(e[a]),(0===a||o.left<=zo(e[a-1]).left)&&(u=0,d++),i[u]||(i[u]=[]),r=Math.max(-o.left,c),s=Math.max(-o.top,p),t=r-Math.round(o.width/2),n=s-Math.round(o.height/2),i[u][d]={x:r,y:s,width:o.width,height:o.height,cx:t,cy:n},r>c&&u++;return i},e}(),$o=function(){function e(e,t){this.scroll=e,this.slideOpt=t}return e.prototype.init=function(){this.currentPage={x:0,y:0,pageX:0,pageY:0},this.pagesPos=new Go(this.scroll,this.slideOpt),this.checkSlideLoop()},e.prototype.changeCurrentPage=function(e){this.currentPage=e},e.prototype.change2safePage=function(e,t){if(this.pagesPos.hasInfo()){e>=this.pagesPos.xLen?e=this.pagesPos.xLen-1:e<0&&(e=0),t>=this.pagesPos.yLen?t=this.pagesPos.yLen-1:t<0&&(t=0);var n=this.pagesPos.getPos(e,t);return{pageX:e,pageY:t,x:n?n.x:0,y:n?n.y:0}}},e.prototype.getInitPage=function(){return{pageX:this.loopX?1:0,pageY:this.loopY?1:0}},e.prototype.getRealPage=function(e){var t=function(e,t){for(var n=[],o=0;o<t;o++)n.push(o);return n.unshift(t-1),n.push(0),n[e]},n=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var o=0;o<t.length;o++){var i=t[o];for(var r in i)e[r]=i[r]}return e}({},e||this.currentPage);return this.loopX&&(n.pageX=t(n.pageX,this.pagesPos.xLen-2)),this.loopY&&(n.pageY=t(n.pageY,this.pagesPos.yLen-2)),{pageX:n.pageX,pageY:n.pageY}},e.prototype.getPageSize=function(){return this.pagesPos.getPos(this.currentPage.pageX,this.currentPage.pageY)},e.prototype.realPage2Page=function(e,t){if(this.pagesPos.hasInfo()){var n=this.pagesPos.xLen-1,o=this.pagesPos.yLen-1,i=0,r=0;return this.loopX&&(e+=1,i+=1,n-=1),this.loopY&&(t+=1,r+=1,o-=1),{realX:e=Lo(e,i,n),realY:t=Lo(t,r,o)}}},e.prototype.nextPage=function(){return this.changedPageNum("positive")},e.prototype.prevPage=function(){return this.changedPageNum("negative")},e.prototype.nearestPage=function(e,t,n,o){var i=this.pagesPos.getNearestPage(e,t);if(!i)return{x:0,y:0,pageX:0,pageY:0};var r=i.pageX,s=i.pageY;return r===this.currentPage.pageX&&(r=Lo(r+=n,0,this.pagesPos.xLen-1)),s===this.currentPage.pageY&&(s+=o,s=Lo(i.pageY,0,this.pagesPos.yLen-1)),{x:this.pagesPos.getPos(r,0).x,y:this.pagesPos.getPos(0,s).y,pageX:r,pageY:s}},e.prototype.getLoopStage=function(){if(!this.needLoop)return"middle";if(this.loopX){if(0===this.currentPage.pageX)return"head";if(this.currentPage.pageX===this.pagesPos.xLen-1)return"tail"}if(this.loopY){if(0===this.currentPage.pageY)return"head";if(this.currentPage.pageY===this.pagesPos.yLen-1)return"tail"}return"middle"},e.prototype.resetLoopPage=function(){if(this.loopX){if(0===this.currentPage.pageX)return{pageX:this.pagesPos.xLen-2,pageY:this.currentPage.pageY};if(this.currentPage.pageX===this.pagesPos.xLen-1)return{pageX:1,pageY:this.currentPage.pageY}}if(this.loopY){if(0===this.currentPage.pageY)return{pageX:this.currentPage.pageX,pageY:this.pagesPos.yLen-2};if(this.currentPage.pageY===this.pagesPos.yLen-1)return{pageX:this.currentPage.pageX,pageY:1}}},e.prototype.isSameWithCurrent=function(e){return e.pageX===this.currentPage.pageX&&e.pageY===this.currentPage.pageY},e.prototype.changedPageNum=function(e){var t=this.currentPage.pageX,n=this.currentPage.pageY;return this.slideX&&(t="negative"===e?t-1:t+1),this.slideY&&(n="negative"===e?n-1:n+1),{pageX:t,pageY:n}},e.prototype.checkSlideLoop=function(){this.needLoop=this.slideOpt.loop,this.pagesPos.xLen>1&&(this.slideX=!0),this.pagesPos.pages[0]&&this.pagesPos.yLen>1&&(this.slideY=!0),this.loopX=this.needLoop&&this.slideX,this.loopY=this.needLoop&&this.slideY,this.slideX&&this.slideY&&("slide does not support two direction at the same time.",console.error("[BScroll warn]: slide does not support two direction at the same time."))},e}(),Yo=[{key:"next",name:"next"},{key:"prev",name:"prev"},{key:"goToPage",name:"goToPage"},{key:"getCurrentPage",name:"getCurrentPage"}].map((function(e){return{key:e.key,sourceKey:"plugins.slide."+e.name}})),Jo=function(){function e(e){this.scroll=e,this.resetLooping=!1,this.isTouching=!1,this.scroll.proxy(Yo),this.scroll.registerType(["slideWillChange"]),this.slideOpt=this.scroll.options.slide,this.page=new $o(e,this.slideOpt),this.hooksFn=[],this.willChangeToPage={pageX:0,pageY:0},this.init()}return e.prototype.init=function(){var e=this,t=this.slideOpt,n=this.scroll.scroller.content,o=!1;t.loop&&(n.children.length>1?(this.cloneSlideEleForLoop(n),o=!0):t.loop=!1);var i=this.setSlideWidth(n),r=this.setSlideHeight(this.scroll.scroller.wrapper,n),s=i||r,a=this.scroll.hooks,l=this.scroll.scroller.hooks;this.registorHooks(a,"refresh",this.initSlideState),this.registorHooks(a,"destroy",this.destroy),this.registorHooks(l,"momentum",this.modifyScrollMetaHandler),this.registorHooks(this.scroll,"scrollEnd",this.amendCurrentPage),this.registorHooks(l,"beforeStart",this.setTouchFlag),this.registorHooks(l,"scroll",this.scrollMoving),this.registorHooks(l,"resize",this.resize),this.scroll.eventTypes.mousewheelMove&&this.scroll.eventTypes.mousewheelEnd&&(this.registorHooks(this.scroll,"mousewheelMove",(function(){return!0})),this.registorHooks(this.scroll,"mousewheelEnd",(function(t){1!==t.directionX&&1!==t.directionY||e.next(),-1!==t.directionX&&-1!==t.directionY||e.prev()}))),!1!==t.listenFlick&&this.registorHooks(l,"flick",this.flickHandler),o||s?this.scroll.refresh():this.initSlideState()},e.prototype.resize=function(){var e=this,t=this.scroll.scroller.content,n=this.scroll.scroller.wrapper;return clearTimeout(this.resizeTimeout),this.resizeTimeout=window.setTimeout((function(){e.clearSlideWidth(t),e.clearSlideHeight(t),e.setSlideWidth(t),e.setSlideHeight(n,t),e.scroll.refresh()}),this.scroll.options.resizePolling),!0},e.prototype.next=function(e,t){var n=this.page.nextPage(),o=n.pageX,i=n.pageY;this.goTo(o,i,e,t)},e.prototype.prev=function(e,t){var n=this.page.prevPage(),o=n.pageX,i=n.pageY;this.goTo(o,i,e,t)},e.prototype.goToPage=function(e,t,n,o){var i=this.page.realPage2Page(e,t);i&&this.goTo(i.realX,i.realY,n,o)},e.prototype.getCurrentPage=function(){return this.page.getRealPage()},e.prototype.nearestPage=function(e,t){var n=this.scroll.scroller.scrollBehaviorX,o=this.scroll.scroller.scrollBehaviorY,i=!0;return Math.abs(e-n.absStartPos)<=this.thresholdX&&Math.abs(t-o.absStartPos)<=this.thresholdY&&(i=!1),i?this.page.nearestPage(Lo(e,n.maxScrollPos,n.minScrollPos),Lo(t,o.maxScrollPos,o.minScrollPos),n.direction,o.direction):this.page.currentPage},e.prototype.destroy=function(){var e=this.scroll.scroller.content;if(this.slideOpt.loop){var t=e.children;t.length>2&&(Ho(e,t[t.length-1]),Ho(e,t[0]))}this.hooksFn.forEach((function(e){var t=e[0],n=e[1],o=e[2];t.eventTypes[n]&&t.off(n,o)})),this.hooksFn.length=0},e.prototype.initSlideState=function(){const e=this.page.currentPage;if(this.page.init(),e)this.page.currentPage=e;else{var t=this.page.getInitPage();this.goTo(t.pageX,t.pageY,0)}this.initThreshold()},e.prototype.initThreshold=function(){var e=this.slideOpt.threshold||.1;if(e%1==0)this.thresholdX=e,this.thresholdY=e;else{var t=this.page.getPageSize();t&&(this.thresholdX=Math.round(t.width*e),this.thresholdY=Math.round(t.height*e))}},e.prototype.cloneSlideEleForLoop=function(e){var t,n,o,i=e.children;t=i[i.length-1].cloneNode(!0),(o=(n=e).firstChild)?function(e,t){t.parentNode.insertBefore(e,t)}(t,o):n.appendChild(t),e.appendChild(i[1].cloneNode(!0))},e.prototype.amendCurrentPage=function(){if(this.isTouching=!1,this.slideOpt.loop)if(this.resetLooping)this.resetLooping=!1;else{var e=!1;if(!this.page.loopX||this.scroll.x!==this.scroll.scroller.scrollBehaviorX.minScrollPos&&this.scroll.x!==this.scroll.scroller.scrollBehaviorX.maxScrollPos||(e=!0),!this.page.loopY||this.scroll.y!==this.scroll.scroller.scrollBehaviorY.minScrollPos&&this.scroll.y!==this.scroll.scroller.scrollBehaviorY.maxScrollPos||(e=!0),e){var t=this.scroll.scroller.scrollBehaviorX,n=this.scroll.scroller.scrollBehaviorY,o=this.page.nearestPage(Lo(this.scroll.x,t.maxScrollPos,t.minScrollPos),Lo(this.scroll.y,n.maxScrollPos,n.minScrollPos),0,0),i={x:o.x,y:o.y,pageX:o.pageX,pageY:o.pageY};this.page.isSameWithCurrent(i)||this.page.changeCurrentPage(i)}var r=this.page.resetLoopPage();if(r)return this.resetLooping=!0,this.goTo(r.pageX,r.pageY,0),!0;this.pageWillChangeTo(this.page.currentPage)}},e.prototype.shouldSetWidthHeight=function(e){var t={width:["scrollX","disableSetWidth"],height:["scrollY","disableSetHeight"]}[e];return!!this.scroll.options[t[0]]&&!this.slideOpt[t[1]]},e.prototype.clearSlideWidth=function(e){if(this.shouldSetWidthHeight("width")){for(var t=e.children,n=0;n<t.length;n++)t[n].removeAttribute("style");e.removeAttribute("style")}},e.prototype.setSlideWidth=function(e){if(!this.shouldSetWidthHeight("width"))return!1;for(var t=e.children,n=t[0].clientWidth,o=0;o<t.length;o++)t[o].style.width=n+"px";return e.style.width=n*t.length+"px",!0},e.prototype.clearSlideHeight=function(e){if(this.shouldSetWidthHeight("height")){for(var t=e.children,n=0;n<t.length;n++)t[n].removeAttribute("style");e.removeAttribute("style")}},e.prototype.setSlideHeight=function(e,t){if(!this.shouldSetWidthHeight("height"))return!1;for(var n=e.clientHeight,o=t.children,i=0;i<o.length;i++)o[i].style.height=n+"px";return t.style.height=n*o.length+"px",!0},e.prototype.goTo=function(e,t,n,o){void 0===t&&(t=0);var i=this.page.change2safePage(e,t);if(i){var r=o||this.slideOpt.easing||qo.bounce,s=i.x,a=i.y,l=s-this.scroll.scroller.scrollBehaviorX.currentPos,u=a-this.scroll.scroller.scrollBehaviorY.currentPos;(l||u)&&(n=void 0===n?this.getAnimateTime(l,u):n,this.page.changeCurrentPage({x:s,y:a,pageX:i.pageX,pageY:i.pageY}),this.pageWillChangeTo(this.page.currentPage),this.scroll.scroller.scrollTo(s,a,n,r))}},e.prototype.flickHandler=function(){var e=this.scroll.scroller.scrollBehaviorX,t=this.scroll.scroller.scrollBehaviorY,n=e.currentPos-e.startPos,o=t.currentPos-t.startPos,i=this.getAnimateTime(n,o);this.goTo(this.page.currentPage.pageX+e.direction,this.page.currentPage.pageY+t.direction,i)},e.prototype.getAnimateTime=function(e,t){return this.slideOpt.speed?this.slideOpt.speed:Math.max(Math.max(Math.min(Math.abs(e),1e3),Math.min(Math.abs(t),1e3)),300)},e.prototype.modifyScrollMetaHandler=function(e){var t=this.nearestPage(e.newX,e.newY);e.time=this.getAnimateTime(e.newX-t.x,e.newY-t.y),e.newX=t.x,e.newY=t.y,e.easing=this.slideOpt.easing||qo.bounce,this.page.changeCurrentPage({x:e.newX,y:e.newY,pageX:t.pageX,pageY:t.pageY}),this.pageWillChangeTo(this.page.currentPage)},e.prototype.scrollMoving=function(e){if(this.isTouching){var t=this.nearestPage(e.x,e.y);this.pageWillChangeTo(t)}},e.prototype.pageWillChangeTo=function(e){var t=this.page.getRealPage(e);t.pageX===this.willChangeToPage.pageX&&t.pageY===this.willChangeToPage.pageY||(this.willChangeToPage=t,this.scroll.trigger("slideWillChange",this.willChangeToPage))},e.prototype.setTouchFlag=function(){this.isTouching=!0},e.prototype.registorHooks=function(e,t,n){e.on(t,n,this),this.hooksFn.push([e,t,n])},e.pluginName="slide",e}();const Ko=Jo;var Qo=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Zo=function(){return Zo=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Zo.apply(this,arguments)};Yn.use(Eo),Yn.use(Mo),Yn.use(ao),Yn.use(Ko);var ei=function(e){function n(n){var o=e.call(this,n)||this;return o.scrollNeedsToInit=!1,o.scrollRef=t().createRef(),o}return Qo(n,e),n.prototype.componentDidMount=function(){this.props.scrollEnabled&&!0!==this.props.nativeScroll&&this.setupIScroll(),this.scrollRef.current.noodlNode=this.props.noodlNode},n.prototype.componentWillUnmount=function(){this.iScroll&&(this.iScroll.destroy(),this.iScroll=void 0),this.props.noodlNode.context.setNodeFocused(this.props.noodlNode,!1)},n.prototype.componentDidUpdate=function(){var e=this;this.scrollNeedsToInit&&(this.setupIScroll(),this.scrollNeedsToInit=!1),this.iScroll&&setTimeout((function(){e.iScroll&&e.iScroll.refresh()}),0)},n.prototype.scrollToIndex=function(e,t){var n;this.iScroll?(n=this.scrollRef.current.children[0].children[e])&&this.iScroll.scrollToElement(n,t,0,0):(n=this.scrollRef.current.children[e])&&n.scrollIntoView({behavior:"smooth"})},n.prototype.scrollToElement=function(e,t){if(e){var n=o().findDOMNode(e.getRef());n&&n.scrollIntoView&&(this.iScroll?this.iScroll.scrollToElement(n,t,0,0):n.scrollIntoView({behavior:"smooth"}))}},n.prototype.setupIScroll=function(){var e=this,t=this.props.scrollSnapEnabled,n=this.getScrollDirection(),o={disableSetWidth:!0,disableSetHeight:!0,loop:!1},i=this.scrollRef.current;this.iScroll=new Yn(i,{bounceTime:500,swipeBounceTime:300,scrollbar:this.props.showScrollbar?{}:void 0,momentum:!t||!this.props.scrollSnapToEveryItem,bounce:this.props.scrollBounceEnabled&&!(t&&o.loop),scrollX:"x"===n||"both"===n,scrollY:"y"===n||"both"===n,slide:t?o:void 0,probeType:this.props.onScrollPositionChanged?3:1,click:!0,nestedScroll:!0,useTransition:!1});var r=this.iScroll.scroller;r.scrollBehaviorX&&(r.scrollBehaviorX.momentum=Vo().bind(r.scrollBehaviorX)),r.scrollBehaviorY&&(r.scrollBehaviorY.momentum=Vo().bind(r.scrollBehaviorY)),this.iScroll.on("beforeScrollStart",(function(){e.iScroll.refresh()})),this.iScroll.on("scrollStart",(function(){e.props.onScrollStart&&e.props.onScrollStart()})),this.iScroll.on("scrollEnd",(function(){e.props.onScrollEnd&&e.props.onScrollEnd()})),this.props.onScrollPositionChanged&&this.iScroll.on("scroll",(function(){e.props.onScrollPositionChanged("x"===n?-e.iScroll.x:-e.iScroll.y)}))},n.prototype.UNSAFE_componentWillReceiveProps=function(e){(this.props.scrollSnapEnabled!==e.scrollSnapEnabled||this.props.onScrollPositionChanged!==e.onScrollPositionChanged||this.props.onScrollStart!==e.onScrollStart||this.props.onScrollEnd!==e.onScrollEnd||this.props.showScrollbar!==e.showScrollbar||this.props.scrollEnabled!==e.scrollEnabled||this.props.nativeScroll!==e.nativeScroll||this.props.scrollSnapToEveryItem!==e.scrollSnapToEveryItem||this.props.layout!==e.layout||this.props.flexWrap!==e.flexWrap||this.props.scrollBounceEnabled!==e.scrollBounceEnabled)&&(this.iScroll&&(this.iScroll.destroy(),this.iScroll=void 0),this.scrollNeedsToInit=e.scrollEnabled&&!e.nativeScroll)},n.prototype.renderIScroll=function(){var e=this.props.style,n=e.flexDirection,o=e.flexWrap,i={display:"inline-flex",flexShrink:0,flexDirection:n,flexWrap:o,touchAction:"none"};return"row"===n?"wrap"===o?i.width="100%":i.height="100%":"wrap"===o?i.height="100%":i.width="100%",t().createElement("div",{className:"scroll-wrapper-internal",style:i},this.props.children)},n.prototype.getScrollDirection=function(){return"wrap"===this.props.flexWrap||"wrap-reverse"===this.props.flexWrap?"row"===this.props.layout?"y":"x":"row"===this.props.layout?"x":"y"},n.prototype.render=function(){var e=this.props,n=e.as,o=void 0===n?"div":n,i=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]])}return n}(e,["as"]),r=i.scrollEnabled&&!i.nativeScroll?this.renderIScroll():i.children,s=Zo({},i.style);if(y.size(s,i),y.align(s,i),i.clip&&(s.overflowX="hidden",s.overflowY="hidden"),i.scrollEnabled&&i.nativeScroll){var a=this.getScrollDirection();"y"===a?s.overflowY="auto":"x"===a?s.overflowX="auto":"both"===a&&(s.overflowX="auto",s.overflowY="auto")}return 0===s.opacity&&(s.pointerEvents="none"),t().createElement(o,Zo({className:i.className},i.attrs,i.dom,G(i),{style:s,ref:this.scrollRef}),r)},n}(t().Component);const ti={name:"Group",docs:"https://docs.noodl.net/nodes/basic-elements/group",connectionPanel:{groupPriority:["General","Style","Events","Mounted","Hover Events","Pointer Events","Focus","Scroll"]},initialize(){this.props.attrs={},this._internal={scrollElementDuration:500,scrollIndexDuration:500,scrollIndex:0},this.props.layout="column"},getReactComponent:()=>ei,noodlNodeAsProp:!0,visualStates:[{name:"neutral",label:"Neutral"},{name:"hover",label:"Hover"}],defaultCss:{display:"flex",position:"relative",flexDirection:"column"},inputs:{flexDirection:{index:12,displayName:"Layout",group:"Layout",type:{name:"enum",enums:[{label:"None",value:"none"},{label:"Vertical",value:"column"},{label:"Horizontal",value:"row"}]},default:"column",set(e){this.props.layout=e,"none"!==e?this.setStyle({flexDirection:e}):this.removeStyle(["flexDirection"]),this.context.editorConnection&&("none"===e||_e.includes(e)?this.context.editorConnection.clearWarning(this.nodeScope.componentOwner.name,this.id,"layout-warning"):this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"layout-warning",{message:"Invalid Layout value has to be a valid flex-direction value."})),this.forceUpdate()}},"scrollToIndex.do":{displayName:"Scroll To Index - Do",group:"Scroll To Index",type:"signal",index:505,valueChangedToTrue(){this.scheduleAfterInputsHaveUpdated((()=>{if(!this.innerReactComponentRef)return;const e=this._internal.scrollIndex,t=this._internal.scrollIndexDuration;this.innerReactComponentRef.scrollToIndex(e,t)}))}},"scrollToElement.do":{displayName:"Scroll To Element - Do",group:"Scroll To Element",type:"signal",index:500,valueChangedToTrue(){this.innerReactComponentRef&&this.scheduleAfterInputsHaveUpdated((()=>{const e=this._internal.scrollElement,t=this._internal.scrollElementDuration;this.innerReactComponentRef.scrollToElement(e,t)}))}},"scrollToElement.element":{displayName:"Scroll To Element - Element",group:"Scroll To Element",type:"reference",index:501,set(e){this._internal.scrollElement=e}},"scrollToElement.duration":{displayName:"Scroll To Element - Duration",group:"Scroll To Element",type:"number",default:500,index:502,set(e){this._internal.scrollElementDuration=e}},"scrollToIndex.index":{displayName:"Scroll To Index - Index",group:"Scroll To Index",type:"number",default:0,index:506,set(e){this._internal.scrollIndex=e}},"scrollToIndex.duration":{displayName:"Scroll To Index - Duration",group:"Scroll To Index",type:"number",default:500,index:507,set(e){this._internal.scrollIndexDuration=e}},focus:{displayName:"Focus",type:"signal",group:"Focus",valueChangedToTrue(){this.context.setNodeFocused(this,!0)}},testId:{index:100009,displayName:"Test ID Attribute",group:"Advanced HTML",type:"string",set(e){this.props.attrs["data-testid"]=e,this.forceUpdate()}}},inputProps:{clip:{index:19,displayName:"Clip Content",type:"boolean",group:"Layout",default:!1},scrollEnabled:{index:54,group:"Scroll",displayName:"Enable Scroll",type:"boolean",default:!1},scrollSnapEnabled:{index:55,displayName:"Snap",group:"Scroll",type:"boolean",default:!1},scrollSnapToEveryItem:{index:56,displayName:"Snap To Every Item",group:"Scroll",type:"boolean",default:!1},showScrollbar:{index:57,displayName:"Show Scrollbar",group:"Scroll",type:"boolean",default:!1},scrollBounceEnabled:{index:58,displayName:"Bounce at boundaries",group:"Scroll",type:"boolean",default:!0},nativeScroll:{index:60,group:"Scroll",displayName:"Native platform scroll",type:"boolean",default:!0},as:{index:1e5,group:"Advanced HTML",displayName:"Tag",type:{name:"enum",enums:[{label:"<div>",value:"div"},{label:"<section>",value:"section"},{label:"<article>",value:"article"},{label:"<aside>",value:"aside"},{label:"<nav>",value:"nav"},{label:"<header>",value:"header"},{label:"<footer>",value:"footer"},{label:"<main>",value:"main"},{label:"<span>",value:"span"}]},default:"div"}},inputCss:{alignItems:{index:13,group:"Align and justify content",displayName:"Align Items",type:{name:"enum",enums:[{label:"Start",value:"flex-start"},{label:"End",value:"flex-end"},{label:"Center",value:"center"}],alignComp:"align-items"},default:"flex-start"},justifyContent:{index:14,group:"Align and justify content",displayName:"Justify Content",type:{name:"enum",enums:[{label:"Start",value:"flex-start"},{label:"End",value:"flex-end"},{label:"Center",value:"center"},{label:"Space Between",value:"space-between"},{label:"Space Around",value:"space-around"},{label:"Space Evenly",value:"space-evenly"}],alignComp:"justify-content"},default:"flex-start",applyDefault:!1},flexWrap:{index:15,displayName:"Multi Line Wrap",group:"Layout",type:{name:"enum",enums:[{label:"Off",value:"nowrap"},{label:"On",value:"wrap"},{label:"On Reverse",value:"wrap-reverse"}]},default:"nowrap",onChange(e){this.props.flexWrap=e,this.forceUpdate()},applyDefault:!1},alignContent:{index:16,group:"Layout",displayName:"Align Content",type:{name:"enum",enums:[{label:"Start",value:"flex-start"},{label:"End",value:"flex-end"},{label:"Center",value:"center"},{label:"Space Between",value:"space-between"},{label:"Space Around",value:"space-around"},{label:"Space Evenly",value:"space-evenly"}],alignComp:"align-content"}},rowGap:{index:17,displayName:"Vertical Gap",group:"Layout",type:{name:"number",units:["px","%","em"],defaultUnit:"px"},default:0,applyDefault:!1},columnGap:{index:18,displayName:"Horizontal Gap",group:"Layout",type:{name:"number",units:["px","%","em"],defaultUnit:"px"},default:0,applyDefault:!1},backgroundColor:{index:201,displayName:"Background Color",group:"Style",type:"color",default:"transparent",applyDefault:!1,allowVisualStates:!0}},outputProps:{onScrollPositionChanged:{displayName:"Scroll Position",type:"number",group:"Scroll"},onScrollStart:{displayName:"Scroll Start",type:"signal",group:"Scroll"},onScrollEnd:{displayName:"Scroll End",type:"signal",group:"Scroll"}},outputs:{focused:{displayName:"Focused",type:"signal",group:"Focus"},focusLost:{displayName:"Focus Lost",type:"signal",group:"Focus"}},dynamicports:[{condition:"flexDirection != none",inputs:["scrollEnabled"]},{condition:"flexDirection != none AND scrollEnabled = true",inputs:["nativeScroll"]},{condition:"flexDirection != none AND scrollEnabled = true AND nativeScroll = false",inputs:["scrollBounceEnabled","scrollSnapEnabled","showScrollbar","scrollToElement.do","scrollToElement.element","scrollToElement.duration","scrollToIndex.do","scrollToIndex.index","scrollToIndex.duration"]},{condition:"flexDirection != none AND scrollEnabled = true AND scrollSnapEnabled = true",inputs:["scrollSnapToEveryItem"]},{condition:"flexDirection != none",inputs:["flexWrap"]},{condition:"flexWrap = wrap OR flexWrap = wrap-reverse",inputs:["alignContent"]},{condition:"flexDirection = row OR flexWrap = wrap OR flexWrap = wrap-reverse",inputs:["columnGap"]},{condition:"flexDirection = column OR flexWrap = wrap OR flexWrap = wrap-reverse",inputs:["rowGap"]}],methods:{_focus(){this.sendSignalOnOutput("focused")},_blur(){this.sendSignalOnOutput("focusLost")}}};var ni;T.addDimensions(ti),T.addTransformInputs(ti),T.addSharedVisualInputs(ti),T.addPaddingInputs(ti),T.addMarginInputs(ti),T.addAlignInputs(ti),T.addPointerEventOutputs(ti),T.addBorderInputs(ti),T.addShadowInputs(ti),Noodl.runDeployed||((ni=ti).inputProps.clip.tooltip=N({title:"Clip content",body:"Controls if elements that are too big to fit will be clipped",images:[{src:"clip-enabled.svg",label:"Enabled"},{src:"clip-disabled.svg",label:"Disabled"}]}),ni.inputCss.flexWrap.tooltip=N({title:"Multiline wrap",body:"Elements will wrap to the next line when there's not enough space",images:[{src:"multiline-h.svg",body:"Using a horizontal layout"},{src:"multiline-v.svg",body:"Using a vertical layout"}]}));const oi=H(ti);var ii=function(){return ii=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},ii.apply(this,arguments)};function ri(e){var n=ii({userSelect:"none"},e.style);y.size(n,e),y.align(n,e);var o="ndl-visual-icon";return e.className&&(o=o+" "+e.className),t().createElement("div",{className:o,style:n},function(){var n={};return"image"===e.iconSourceType&&void 0!==e.iconImageSource?(n.width=e.iconSize,n.height=e.iconSize,t().createElement("img",{alt:"",src:e.iconImageSource,style:n})):"icon"===e.iconSourceType&&void 0!==e.iconIconSource?(n.fontSize=e.iconSize,n.color=e.iconColor,n.lineHeight=1,t().createElement("div",{style:{lineHeight:0}},!0===e.iconIconSource.codeAsClass?t().createElement("span",{className:[e.iconIconSource.class,e.iconIconSource.code].join(" "),style:n}):t().createElement("span",{className:e.iconIconSource.class,style:n},e.iconIconSource.code))):null}())}const si={name:"net.noodl.visual.icon",displayName:"Icon",docs:"https://docs.noodl.net/nodes/basic-elements/icon",allowChildren:!1,noodlNodeAsProp:!0,connectionPanel:{groupPriority:["General","Style","Actions","Events","States","Mounted","Hover Events","Pointer Events","Focus Events"]},getReactComponent:()=>ri};T.addAlignInputs(si),T.addTransformInputs(si),T.addPaddingInputs(si,{defaults:{paddingTop:5,paddingRight:5,paddingBottom:5,paddingLeft:5}}),T.addMarginInputs(si),T.addIconInputs(si,{hideEnableIconInput:!0,defaults:{useIcon:!0}}),T.addSharedVisualInputs(si);const ai=H(si);var li=function(){return li=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},li.apply(this,arguments)};function ui(e){var n,o,i=li({},e.style);if(y.size(i,e),y.align(i,e),0===i.opacity&&(i.pointerEvents="none"),null===(o=null===(n=e.dom)||void 0===n?void 0:n.src)||void 0===o?void 0:o.startsWith("/")){var r=Noodl.Env.BaseUrl;r&&(e.dom.src=r+e.dom.src.substring(1))}return t().createElement("img",li({},e.attrs,{className:e.className},e.dom,G(e),{style:i}))}const di={name:"Image",docs:"https://docs.noodl.net/nodes/basic-elements/image",noodlNodeAsProp:!0,visualStates:[{name:"neutral",label:"Neutral"},{name:"hover",label:"Hover"}],connectionPanel:{groupPriority:["General","Image","Style","Actions","Events","Mounted","Pointer Events","Hover Events","Dimensions","Margin and padding"]},initialize(){this.props.attrs={},this.props.default=""},getReactComponent:()=>ui,getInspectInfo(){if(this.props.dom.srcSet)return this.props.dom.srcSet;if(this.props.dom.src){const e=this.props.dom.src.toString();return[{type:"text",value:e},{type:"image",value:e}]}},allowChildren:!1,defaultCss:{display:"block",flexShrink:0},inputCss:{objectFit:{displayName:"Image Fit",group:"Dimensions",type:{name:"enum",enums:[{label:"Fill",value:"fill"},{label:"Contain",value:"contain"},{label:"Cover",value:"cover"},{label:"None",value:"none"},{label:"Scale Down",value:"scale-down"}]},default:"contain",allowVisualStates:!0}},dynamicports:[{condition:"sizeMode = explicit",inputs:["objectFit"]}],inputs:{src:{displayName:"Source",group:"Image",propPath:"dom",type:{name:"image"},index:30,allowVisualStates:!0,set(e){this.props.dom.src=(0,S.getAbsoluteUrl)(e),this.forceUpdate()}},testId:{index:100009,displayName:"Test ID Attribute",group:"Advanced HTML",type:"string",set(e){this.props.attrs["data-testid"]=e,this.forceUpdate()}}},inputProps:{srcSet:{displayName:"Source Set",group:"Image",propPath:"dom",type:{name:"string"},index:31,allowVisualStates:!0},alt:{displayName:"Alternate text",tooltip:"The alt text is used by screen readers, or if the image can't be downloaded or displayed",type:"string",propPath:"dom",index:1e3,default:""}},outputProps:{onLoad:{displayName:"On Load",propPath:"dom",type:"signal",group:"Events"},onError:{displayName:"On Error",propPath:"dom",type:"signal",group:"Events"}}};T.addDimensions(di,{defaultSizeMode:"contentSize",contentLabel:"Image"}),T.addTransformInputs(di),T.addMarginInputs(di),T.addSharedVisualInputs(di),T.addAlignInputs(di),T.addPointerEventOutputs(di),T.addBorderInputs(di),T.addShadowInputs(di);const ci=H(di);var pi=function(){return pi=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},pi.apply(this,arguments)};function hi(e){var n=e.as,o=void 0===n?"div":n,i=pi(pi({},e.textStyle),e.style);return y.size(i,e),y.align(i,e),i.color=e.noodlNode.context.styles.resolveColor(i.color),"contentSize"===e.sizeMode||"contentWidth"===e.sizeMode?i.whiteSpace="pre":(i.whiteSpace="pre-wrap",i.overflowWrap="anywhere"),0===i.opacity&&(i.pointerEvents="none"),t().createElement(o,pi({className:["ndl-visual-text",e.className].join(" ")},e.attrs,e.dom,G(e),{style:i}),String(e.text))}const gi={name:"Text",docs:"https://docs.noodl.net/nodes/basic-elements/text",visualStates:[{name:"neutral",label:"Neutral"},{name:"hover",label:"Hover"}],allowChildren:!1,noodlNodeAsProp:!0,usePortAsLabel:"text",portLabelTruncationMode:"length",connectionPanel:{groupPriority:["General","Text","Text Style","Style","Events","Mounted","Hover Events","Pointer Events"]},nodeDoubleClickAction:{focusPort:"text"},initialize(){this.props.attrs={}},getReactComponent:()=>hi,getInspectInfo(){return this.props.text},defaultCss:{position:"relative",display:"flex"},inputProps:{text:{index:19,group:"Text",displayName:"Text",default:"Text",type:{name:"string",multiline:!0}},as:{index:1e5,group:"Advanced HTML",displayName:"Tag",type:{name:"enum",enums:[{label:"<div>",value:"div"},{label:"<h1>",value:"h1"},{label:"<h2>",value:"h2"},{label:"<h3>",value:"h3"},{label:"<h4>",value:"h4"},{label:"<h5>",value:"h5"},{label:"<h6>",value:"h6"},{label:"<p>",value:"p"},{label:"<span>",value:"span"}]},default:"div"}},inputCss:{wordBreak:{index:27,group:"Text",displayName:"Word Break",applyDefault:!1,type:{name:"enum",enums:[{label:"Normal",value:"normal"},{label:"Break All",value:"break-all"}]},default:"normal"}},inputs:{textAlignX:{group:"Text Alignment",index:13,displayName:"Text Horizontal Align",type:{name:"enum",enums:[{label:"left",value:"left"},{label:"center",value:"center"},{label:"right",value:"right"}],alignComp:"justify"},default:"left",set(e){switch(e){case"left":this.setStyle({textAlign:"left",justifyContent:"flex-start"});break;case"center":this.setStyle({textAlign:"center",justifyContent:"center"});break;case"right":this.setStyle({textAlign:"right",justifyContent:"flex-end"})}}},textAlignY:{group:"Text Alignment",index:14,displayName:"Text Vertical Align",type:{name:"enum",enums:[{label:"Top",value:"top"},{label:"Center",value:"center"},{label:"Bottom",value:"bottom"}],alignComp:"vertical"},default:"top",set(e){switch(e){case"top":this.setStyle({alignItems:"flex-start"});break;case"center":this.setStyle({alignItems:"center"});break;case"bottom":this.setStyle({alignItems:"flex-end"})}}},testId:{index:100009,displayName:"Test ID Attribute",group:"Advanced HTML",type:"string",set(e){this.props.attrs["data-testid"]=e,this.forceUpdate()}}}};T.addDimensions(gi,{defaultSizeMode:"contentHeight",contentLabel:"Text"}),T.addTextStyleInputs(gi),T.addAlignInputs(gi),T.addTransformInputs(gi),T.addMarginInputs(gi),T.addSharedVisualInputs(gi),T.addPointerEventOutputs(gi),Noodl.runDeployed||function(e){e.inputCss.wordBreak.tooltip=N({title:"Word break",body:["Control where line breaks are allowed","- Normal: Break on spaces and other whitespace characters","- Break All: Allow line breaks between any two characters, including inside words"]})}(gi);const fi=H(gi);var mi=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),yi=function(){return yi=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},yi.apply(this,arguments)},vi=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return mi(n,e),n.prototype.componentDidUpdate=function(){this.video&&(this.video.muted=this.props.muted,this.video.loop=this.props.loop,this.video.volume=this.props.volume,this.video.autoplay=this.props.autoplay,this.video.controls=this.props.controls)},n.prototype.render=function(){var e=this,n=this.props.src?this.props.src.toString():void 0;if(n&&(-1===n.indexOf("#t=")&&(n+="#t=0.01"),n.startsWith("/"))){var o=Noodl.Env.BaseUrl;o&&(n=o+n.substring(1))}return t().createElement("video",yi({},this.props,{playsInline:!0,src:n},G(this.props),{ref:function(t){e.video=t,e.props.innerRef(t)}}))},n}(t().PureComponent),bi=function(e){function n(t){var n=e.call(this,t)||this;return n.wantToPlay=!1,n.canPlay=!1,n}return mi(n,e),n.prototype.componentWillUnmount=function(){this.canPlay=!1},n.prototype.setSourceObject=function(e){this.video.srcObject!==e&&(this.video.srcObject=e,this.canPlay=!1)},n.prototype.play=function(){this.wantToPlay=!0,this.canPlay&&this.video.play()},n.prototype.restart=function(){this.wantToPlay=!0,this.canPlay&&(this.video.currentTime=0,this.video.play())},n.prototype.pause=function(){this.wantToPlay=!1,this.video&&this.video.pause()},n.prototype.reset=function(){this.wantToPlay=!1,this.video&&(this.video.currentTime=0,this.video.pause())},n.prototype.render=function(){var e=this,n=this.props,o=yi({},n.style);return y.size(o,n),y.align(o,n),0===o.opacity&&(o.pointerEvents="none"),o.objectPosition="".concat(n.objectPositionX," ").concat(n.objectPositionY),t().createElement(vi,yi({},n.dom,{className:n.className,style:o,innerRef:function(t){e.video=t,e.props.onVideoElementCreated&&e.props.onVideoElementCreated(t)},onCanPlay:function(){e.canPlay=!0,e.wantToPlay&&e.video.play(),e.props.onCanPlay&&e.props.onCanPlay(),e.props.videoWidth&&e.props.videoWidth(e.video.videoWidth),e.props.videoHeight&&e.props.videoHeight(e.video.videoHeight)}}))},n}(t().Component);const Si={name:"Video",docs:"https://docs.noodl.net/nodes/basic-elements/video",connectionPanel:{groupPriority:["General","Video","Video Actions","Style","Actions","Events","Mounted","Playback","Pointer Events","Hover Events","Dimensions","Margin and padding"]},getReactComponent:()=>bi,allowChildren:!1,noodlNodeAsProp:!0,defaultCss:{display:"block"},inputs:{srcObject:{displayName:"Source Object",group:"Video",type:"mediastream",default:null,set(e){this.innerReactComponentRef&&this.innerReactComponentRef.setSourceObject(e)}},play:{type:"signal",group:"Video Actions",displayName:"Play",tooltip:{standard:"Play the video"},valueChangedToTrue(){this.innerReactComponentRef&&this.innerReactComponentRef.play()}},restart:{type:"signal",group:"Video Actions",displayName:"Restart",tooltip:{standard:"Restart the video from the beginning"},valueChangedToTrue(){this.innerReactComponentRef&&this.innerReactComponentRef.restart()}},pause:{type:"boolean",group:"Video Actions",displayName:"Pause",valueChangedToTrue(){this.innerReactComponentRef&&this.innerReactComponentRef.pause()}},reset:{type:"boolean",group:"Video Actions",displayName:"Reset",valueChangedToTrue(){this.innerReactComponentRef&&this.innerReactComponentRef.reset()}},src:{displayName:"Source",group:"Video",type:"string",set(e){this.props.dom.src=(0,S.getAbsoluteUrl)(e),this.forceUpdate()}},poster:{displayName:"Poster",group:"Video",type:"image",set(e){this.props.dom.poster=(0,S.getAbsoluteUrl)(e),this.forceUpdate()}}},inputProps:{autoplay:{displayName:"Autoplay",propPath:"dom",group:"Video",type:"boolean"},controls:{displayName:"Controls",propPath:"dom",group:"Video",type:"boolean"},volume:{displayName:"Volume",propPath:"dom",group:"Video",type:"number",default:1},muted:{displayName:"Muted",propPath:"dom",group:"Video",type:"boolean"},loop:{displayName:"Loop",propPath:"dom",group:"Video",type:"boolean"},objectPositionX:{displayName:"Video Position X",group:"Video Layout",type:{name:"number",units:["%","px"],defaultUnit:"%"},default:50},objectPositionY:{displayName:"Video Position Y",group:"Video Layout",type:{name:"number",units:["%","px"],defaultUnit:"%"},default:50}},inputCss:{objectFit:{displayName:"Object Fit",group:"Video Layout",type:{name:"enum",enums:[{label:"Contain",value:"contain"},{label:"Cover",value:"cover"},{label:"Fill",value:"fill"},{label:"None",value:"none"}]},default:"contain"}},outputProps:{onCanPlay:{type:"signal",group:"Events",displayName:"On Can Play"},onTimeUpdate:{group:"Playback",displayName:"Playback Position",type:"number",propPath:"dom",getValue:e=>e.target.currentTime},onPlay:{group:"Events",displayName:"On Play",type:"signal",propPath:"dom"},onPause:{group:"Events",displayName:"On Pause",type:"signal",propPath:"dom"},onVideoElementCreated:{type:"domelement",displayName:"DOM Element"},videoWidth:{group:"Playback",type:"number",displayName:"Video Width"},videoHeight:{group:"Playback",type:"number",displayName:"Video Height"}}};T.addDimensions(Si,{defaultSizeMode:"contentSize",contentLabel:"Video"}),T.addTransformInputs(Si),T.addMarginInputs(Si),T.addSharedVisualInputs(Si),T.addAlignInputs(Si),T.addPointerEventOutputs(Si),T.addBorderInputs(Si);const _i=H(Si);var Ci=__webpack_require__(3379),Ni=__webpack_require__.n(Ci),wi=__webpack_require__(3812);Ni()(wi.Z,{insert:"head",singleton:!1}),wi.Z.locals;const Oi={};function xi(e,t,n){e[t]||(e[t]={});for(const o in n)e[t][o]=n[o]}const Ii=function(e,t,n){if(Oi[e])(function(e,t){for(var n in e)if(e.hasOwnProperty(n)&&e[n]!==t[n])return!1;for(var n in t)if(t.hasOwnProperty(n)&&e[n]!==t[n])return!1;return!0})(t,Oi[e].props)||(Oi[e].style.innerHTML=n(e,t),Oi[e].props=Object.assign({},t));else{var o=document.createElement("style");o.innerHTML=n(e,t),document.head.appendChild(o),Oi[e]={style:o,props:Object.assign({},t)}}},Pi=function(e){!function(e,t){xi(e,"inputProps",{blockTouch:{index:450,displayName:"Block Pointer Events",type:"boolean"}})}(e),function(e,t){xi(e,"outputProps",{focusState:{displayName:"Focused",group:"States",type:"boolean",props:{onFocus(){this.outputPropValues.focusState=!0,this.flagOutputDirty("focusState"),this.hasOutput("onFocus")&&this.sendSignalOnOutput("onFocus")},onBlur(){this.outputPropValues.focusState=!1,this.flagOutputDirty("focusState"),this.hasOutput("onBlur")&&this.sendSignalOnOutput("onBlur")}}},onFocus:{displayName:"Focused",group:"Events",type:"signal",props:{onFocus(){this.outputPropValues.focusState=!0,this.flagOutputDirty("focusState"),this.sendSignalOnOutput("onFocus")}}},onBlur:{displayName:"Blurred",group:"Events",type:"signal",props:{onBlur(){this.outputPropValues.focusState=!1,this.flagOutputDirty("focusState"),this.sendSignalOnOutput("onBlur")}}},hoverState:{displayName:"Hover",group:"States",type:"boolean",props:{onMouseOver(){this.outputPropValues.hoverState=!0,this.flagOutputDirty("hoverState"),this.hasOutput("hoverStart")&&this.sendSignalOnOutput("hoverStart")},onMouseLeave(){this.outputPropValues.hoverState=!1,this.flagOutputDirty("hoverState"),this.hasOutput("hoverEnd")&&this.sendSignalOnOutput("hoverEnd")}}},hoverStart:{displayName:"Hover Start",group:"Events",type:"signal",props:{onMouseOver(){this.outputPropValues.hoverState=!0,this.flagOutputDirty("hoverState"),this.sendSignalOnOutput("hoverStart")}}},hoverEnd:{displayName:"Hover End",group:"Events",type:"signal",props:{onMouseLeave(){this.outputPropValues.hoverState=!1,this.flagOutputDirty("hoverState"),this.sendSignalOnOutput("hoverEnd")}}},pressedState:{displayName:"Pressed",group:"States",type:"boolean",props:{onMouseDown(){this.outputPropValues.pressedState=!0,this.flagOutputDirty("pressedState"),this.hasOutput("pointerDown")&&this.sendSignalOnOutput("pointerDown")},onTouchStart(){this.outputPropValues.pressedState=!0,this.flagOutputDirty("pressedState"),this.hasOutput("pointerDown")&&this.sendSignalOnOutput("pointerDown")},onMouseUp(){this.outputPropValues.pressedState=!1,this.flagOutputDirty("pressedState"),this.hasOutput("pointerUp")&&this.sendSignalOnOutput("pointerUp")},onTouchEnd(){this.outputPropValues.pressedState=!1,this.flagOutputDirty("pressedState"),this.hasOutput("pointerUp")&&this.sendSignalOnOutput("pointerUp")},onTouchCancel(){this.outputPropValues.pressedState=!1,this.flagOutputDirty("pressedState"),this.hasOutput("pointerUp")&&this.sendSignalOnOutput("pointerUp")}}},pointerDown:{displayName:"Pointer Down",group:"Events",type:"signal",props:{onMouseDown(){this.outputPropValues.pressedState=!0,this.flagOutputDirty("pressedState"),this.sendSignalOnOutput("pointerDown")},onTouchStart(){this.outputPropValues.pressedState=!0,this.flagOutputDirty("pressedState"),this.sendSignalOnOutput("pointerDown")}}},pointerUp:{displayName:"Pointer Up",group:"Events",type:"signal",props:{onMouseUp(){this.outputPropValues.pressedState=!1,this.flagOutputDirty("pressedState"),this.sendSignalOnOutput("pointerUp")},onTouchEnd(){this.outputPropValues.pressedState=!1,this.flagOutputDirty("pressedState"),this.sendSignalOnOutput("pointerUp")},onTouchCancel(){this.outputPropValues.pressedState=!1,this.flagOutputDirty("pressedState"),this.sendSignalOnOutput("pointerUp")}}}})}(e)},Ti=function(e){return Object.assign({},{onFocus:e.onFocus,onBlur:e.onBlur},G(e))};function Ei(){return Ei=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Ei.apply(this,arguments)}function ki(n){(0,e.useEffect)((()=>{n.focusChanged&&n.focusChanged(!1),n.hoverChanged&&n.hoverChanged(!1),n.pressedChanged&&n.pressedChanged(!1)}),[]);var o={...n.style};y.size(o,n),y.align(o,n),void 0!==n.textStyle&&(o=Object.assign({},n.textStyle,o)),n.boxShadowEnabled&&(o.boxShadow=`${n.boxShadowInset?"inset ":""}${n.boxShadowOffsetX} ${n.boxShadowOffsetY} ${n.boxShadowBlurRadius} ${n.boxShadowSpreadRadius} ${n.boxShadowColor}`);let i="ndl-controls-button";return n.className&&(i=i+" "+n.className),t().createElement("button",Ei({className:i,disabled:!n.enabled},Ti(n),{type:n.buttonType,style:o,onClick:n.onClick}),n.label,n.children)}var Di={name:"Button",docs:"https://docs.noodl.net/nodes/visual/button",allowChildren:!0,noodlNodeAsProp:!0,initialize(){this.outputPropValues.hoverState=this.outputPropValues.focusState=this.outputPropValues.pressedState=!1,this.props.id=this._internal.controlId="input-"+se()(),this.props.enabled=this._internal.enabled=!0},getReactComponent:()=>ki,inputs:{enabled:{type:"boolean",displayName:"Enabled",group:"General",default:!0,set:function(e){const t=(e=!!e)!==this._internal.enabled;this.props.enabled=this._internal.enabled=e,t&&(this.forceUpdate(),this.flagOutputDirty("enabled"))}},textStyle:{index:20,type:"textStyle",group:"Text",displayName:"Text Style",default:"None",set(e){this.props.textStyle=this.context.styles.getTextStyle(e),this.forceUpdate()}},fontFamily:{index:21,type:"font",group:"Text",displayName:"Font Family",set(e){if(e){let t=e;t.split(".").length>1&&(t=t.replace(/\.[^/.]+$/,""),t=t.split("/").pop()),this.setStyle({fontFamily:t})}else this.removeStyle(["fontFamily"]);this.props.textStyle&&this.forceUpdate()}}},outputs:{controlId:{type:"string",displayName:"Control Id",group:"General",getter:function(){return this._internal.controlId}},enabled:{type:"boolean",displayName:"Enabled",group:"States",getter:function(){return this._internal.enabled}}},inputCss:{fontSize:{index:21,group:"Text",displayName:"Font Size",type:{name:"number",units:["px"],defaultUnit:"px"},onChange(){this.props.textStyle&&this.forceUpdate()}},color:{index:24,group:"Text",displayName:"Color",type:"color",default:"#FFFFFF"},backgroundColor:{index:100,displayName:"Background Color",group:"Style",type:"color",default:"#000000"},paddingLeft:{index:64,group:"Margin and padding",default:20,applyDefault:!1,displayName:"Pad Left",type:{name:"number",units:["px"],defaultUnit:"px",marginPaddingComp:"padding-left"}},paddingRight:{index:65,group:"Margin and padding",default:20,applyDefault:!1,displayName:"Pad Right",type:{name:"number",units:["px"],defaultUnit:"px",marginPaddingComp:"padding-right"}},paddingTop:{index:66,group:"Margin and padding",displayName:"Pad Top",default:5,applyDefault:!1,type:{name:"number",units:["px"],defaultUnit:"px",marginPaddingComp:"padding-top"}},paddingBottom:{index:67,group:"Margin and padding",displayName:"Pad Bottom",default:5,applyDefault:!1,type:{name:"number",units:["px"],defaultUnit:"px",marginPaddingComp:"padding-bottom"}},borderRadius:{index:202,displayName:"Border Radius",group:"Style",type:{name:"number",units:["px"],defaultUnit:"px"},default:0,applyDefault:!1},borderStyle:{index:203,displayName:"Border Style",group:"Style",type:{name:"enum",enums:[{label:"None",value:"none"},{label:"Solid",value:"solid"},{label:"Dotted",value:"dotted"},{label:"Dashed",value:"dashed"}]},default:"none",applyDefault:!1},borderWidth:{index:204,displayName:"Border Width",group:"Style",type:{name:"number",units:["px"],defaultUnit:"px"},default:0,applyDefault:!1},borderColor:{index:205,displayName:"Border Color",group:"Style",type:"color",default:"#000000"}},inputProps:{label:{type:"string",displayName:"Label",group:"General",default:"Label"},buttonType:{type:{name:"enum",enums:[{label:"Button",value:"button"},{label:"Submit",value:"submit"}]},displayName:"Type",default:"button",group:"General"},boxShadowEnabled:{index:250,group:"Box Shadow",displayName:"Shadow Enabled",type:"boolean",default:!1},boxShadowOffsetX:{index:251,group:"Box Shadow",displayName:"Offset X",default:0,type:{name:"number",units:["px"],defaultUnit:"px"}},boxShadowOffsetY:{index:252,group:"Box Shadow",displayName:"Offset Y",default:0,type:{name:"number",units:["px"],defaultUnit:"px"}},boxShadowBlurRadius:{index:253,group:"Box Shadow",displayName:"Blur Radius",default:5,type:{name:"number",units:["px"],defaultUnit:"px"}},boxShadowSpreadRadius:{index:254,group:"Box Shadow",displayName:"Spread Radius",default:2,type:{name:"number",units:["px"],defaultUnit:"px"}},boxShadowInset:{index:255,group:"Box Shadow",displayName:"Inset",type:"boolean",default:!1},boxShadowColor:{index:256,group:"Box Shadow",displayName:"Shadow Color",type:"color",default:"rgba(0,0,0,0.2)"}},outputProps:{onClick:{displayName:"Click",group:"Events",type:"signal"}},dynamicports:[{condition:"boxShadowEnabled = true",inputs:["boxShadowOffsetX","boxShadowOffsetY","boxShadowInset","boxShadowBlurRadius","boxShadowSpreadRadius","boxShadowColor"]}],methods:{}};T.addDimensions(Di,{defaultSizeMode:"contentSize",contentLabel:"Content",useDimensionConstraints:!1}),T.addAlignInputs(Di),T.addTransformInputs(Di),T.addMarginInputs(Di),T.addSharedVisualInputs(Di),Pi(Di),(Di=H(Di)).setup=function(e,t){t.on("nodeAdded.Button",(function(e){e.parameters.fontFamily&&e.parameters.fontFamily.split(".").length>1&&C().instance.loadFont(e.parameters.fontFamily),e.on("parameterUpdated",(function(e){"fontFamily"===e.name&&e.value&&e.value.split(".").length>1&&C().instance.loadFont(e.value)}))}))};const Ri=Di;function Mi(){return Mi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Mi.apply(this,arguments)}function Ai(e,t){return`\n    .${e}:checked {\n        background-color: ${t.checkedBackgroundColor};\n    }  \n    `}function Vi(n){const[o,i]=(0,e.useState)(n.checked);(0,e.useEffect)((()=>{i(!!n.checked)}),[]),(0,e.useEffect)((()=>{i(!!n.checked)}),[n.checked]);var r={...n.style};y.size(r,n),y.align(r,n),n.boxShadowEnabled&&(r.boxShadow=`${n.boxShadowInset?"inset ":""}${n.boxShadowOffsetX} ${n.boxShadowOffsetY} ${n.boxShadowBlurRadius} ${n.boxShadowSpreadRadius} ${n.boxShadowColor}`);const s={id:n.id,style:r};Ii("ndl-controls-checkbox-"+n._nodeId,{checkedBackgroundColor:n.checkedBackgroundColor},Ai);let a="ndl-controls-checkbox-"+n._nodeId+" ndl-controls-checkbox";return n.className&&(a=a+" "+n.className),t().createElement("input",Mi({className:a,type:"checkbox"},s,Ti(n),{checked:o,disabled:!n.enabled,onChange:e=>{i(e.target.checked),n.checkedChanged&&n.checkedChanged(e.target.checked)}}))}var ji={name:"Checkbox",displayName:"Checkbox",docs:"https://docs.noodl.net/nodes/visual/checkbox",allowChildren:!1,noodlNodeAsProp:!0,initialize(){this.props.sizeMode="explicit",this.props.id=this._internal.controlId="input-"+se()(),this.props.enabled=this._internal.enabled=!0,this.props.checked=this._internal.checked=!1,this.props._nodeId=this.id,this.outputPropValues.hoverState=this.outputPropValues.focusState=this.outputPropValues.pressedState=!1,this.props.checkedChanged=e=>{const t=this._internal.checked!==e;this._internal.checked=e,t&&(this.flagOutputDirty("checked"),this.sendSignalOnOutput("onChange"))}},getReactComponent:()=>Vi,inputs:{enabled:{type:"boolean",displayName:"Enabled",group:"General",default:!0,set:function(e){const t=(e=!!e)!==this._internal.enabled;this.props.enabled=this._internal.enabled=e,t&&(this.forceUpdate(),this.flagOutputDirty("enabled"))}},checked:{type:"boolean",displayName:"Checked",group:"General",default:!1,set:function(e){const t=(e=!!e)!==this._internal.checked;this.props.checked=this._internal.checked=e,t&&(this.forceUpdate(),this.flagOutputDirty("checked"))}}},outputs:{controlId:{type:"string",displayName:"Control Id",group:"General",getter:function(){return this._internal.controlId}},enabled:{type:"boolean",displayName:"Enabled",group:"States",getter:function(){return this._internal.enabled}},checked:{type:"boolean",displayName:"Checked",group:"States",getter:function(){return this._internal.checked}},onChange:{displayName:"Changed",group:"Events",type:"signal"}},inputProps:{width:{index:11,group:"Dimensions",displayName:"Width",type:{name:"number",units:["%","px","vw"],defaultUnit:"px"},default:32},height:{index:12,group:"Dimensions",displayName:"Height",type:{name:"number",units:["%","px","vh"],defaultUnit:"px"},default:32},checkedBackgroundColor:{displayName:"Background color",group:"Checked Style",type:{name:"color",allowEditOnly:!0},default:"#000000"},boxShadowEnabled:{index:250,group:"Box Shadow",displayName:"Shadow Enabled",type:"boolean",default:!1},boxShadowOffsetX:{index:251,group:"Box Shadow",displayName:"Offset X",default:0,type:{name:"number",units:["px"],defaultUnit:"px"}},boxShadowOffsetY:{index:252,group:"Box Shadow",displayName:"Offset Y",default:0,type:{name:"number",units:["px"],defaultUnit:"px"}},boxShadowBlurRadius:{index:253,group:"Box Shadow",displayName:"Blur Radius",default:5,type:{name:"number",units:["px"],defaultUnit:"px"}},boxShadowSpreadRadius:{index:254,group:"Box Shadow",displayName:"Spread Radius",default:2,type:{name:"number",units:["px"],defaultUnit:"px"}},boxShadowInset:{index:255,group:"Box Shadow",displayName:"Inset",type:"boolean",default:!1},boxShadowColor:{index:256,group:"Box Shadow",displayName:"Shadow Color",type:"color",default:"rgba(0,0,0,0.2)"}},inputCss:{backgroundColor:{index:201,displayName:"Background Color",group:"Style",type:"color"},borderRadius:{index:202,displayName:"Border Radius",group:"Style",type:{name:"number",units:["px"],defaultUnit:"px"},default:2,applyDefault:!1},borderStyle:{index:203,displayName:"Border Style",group:"Style",type:{name:"enum",enums:[{label:"None",value:"none"},{label:"Solid",value:"solid"},{label:"Dotted",value:"dotted"},{label:"Dashed",value:"dashed"}]},default:"solid",applyDefault:!1},borderWidth:{index:204,displayName:"Border Width",group:"Style",type:{name:"number",units:["px"],defaultUnit:"px"},default:1,applyDefault:!1},borderColor:{index:205,displayName:"Border Color",group:"Style",type:"color",default:"#000000"}},outputProps:{},methods:{}};T.addAlignInputs(ji),T.addTransformInputs(ji),T.addMarginInputs(ji),T.addSharedVisualInputs(ji),Pi(ji);const Fi=ji=H(ji);function Li(e){var n={...e.style};y.size(n,e),y.align(n,e);let o="ndl-controls-fieldset";return e.className&&(o=o+" "+e.className),t().createElement("fieldset",{className:o,style:n},e.children)}var Ui={name:"Field Set",docs:"https://docs.noodl.net/nodes/visual/fieldset",allowChildren:!0,noodlNodeAsProp:!0,deprecated:!0,initialize(){},defaultCss:{display:"flex",position:"relative",flexDirection:"column"},getReactComponent:()=>Li,inputs:{flexDirection:{index:11,displayName:"Layout",group:"Layout",type:{name:"enum",enums:[{label:"Vertical",value:"column"},{label:"Horizontal",value:"row"}]},default:"column",set(e){this.props.layout=e,"none"!==e?this.setStyle({flexDirection:e}):this.removeStyle(["flexDirection"]),this.context.editorConnection&&("none"===e||_e.includes(e)?this.context.editorConnection.clearWarning(this.nodeScope.componentOwner.name,this.id,"layout-warning"):this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"layout-warning",{message:"Invalid Layout value has to be a valid flex-direction value."})),this.forceUpdate()}}},inputProps:{},outputProps:{}};T.addDimensions(Ui,{defaultSizeMode:"contentSize",contentLabel:"Content"}),T.addAlignInputs(Ui),T.addTransformInputs(Ui),T.addMarginInputs(Ui),T.addPaddingInputs(Ui),T.addSharedVisualInputs(Ui);const Wi=Ui=H(Ui);function Bi(e){var n={...e.style};y.size(n,e),y.align(n,e);let o="ndl-controls-form";return e.className&&(o=o+" "+e.className),t().createElement("form",{className:o,style:n,onSubmit:t=>{t.preventDefault(),e.onSubmit&&e.onSubmit()}},e.children)}var zi={name:"Form",docs:"https://docs.noodl.net/nodes/visual/form",allowChildren:!0,noodlNodeAsProp:!0,deprecated:!0,initialize(){},defaultCss:{display:"flex",position:"relative",flexDirection:"column"},getReactComponent:()=>Bi,inputs:{flexDirection:{index:11,displayName:"Layout",group:"Layout",type:{name:"enum",enums:[{label:"None",value:"none"},{label:"Vertical",value:"column"},{label:"Horizontal",value:"row"}]},default:"column",set(e){this.props.layout=e,"none"!==e?this.setStyle({flexDirection:e}):this.removeStyle(["flexDirection"]),this.context.editorConnection&&("none"===e||_e.includes(e)?this.context.editorConnection.clearWarning(this.nodeScope.componentOwner.name,this.id,"layout-warning"):this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"layout-warning",{message:"Invalid Layout value has to be a valid flex-direction value."})),this.forceUpdate()}}},inputProps:{},outputProps:{onSubmit:{type:"signal",displayName:"Submit",group:"Events"}}};T.addDimensions(zi,{defaultSizeMode:"contentSize",contentLabel:"Content"}),T.addAlignInputs(zi),T.addTransformInputs(zi),T.addMarginInputs(zi),T.addPaddingInputs(zi),T.addSharedVisualInputs(zi);const Hi=zi=H(zi);function qi(){return qi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},qi.apply(this,arguments)}function Xi(e){var n={...e.style};y.size(n,e),y.align(n,e),void 0!==e.textStyle&&(n=Object.assign({},e.textStyle,n));const o={for:e.for,onClick:e.onClick};let i="ndl-controls-label";return e.className&&(i=i+" "+e.className),t().createElement("label",qi({className:i,style:n},o),e.text)}const Gi={name:"Label",displayName:"Label",docs:"https://docs.noodl.net/nodes/visual/label",allowChildren:!0,noodlNodeAsProp:!0,deprecated:!0,getReactComponent:()=>Xi,defaultCss:{position:"relative",display:"flex"},inputProps:{for:{type:"string",displayName:"For",group:"General"},text:{type:"string",displayName:"Text",group:"General"}}};T.addDimensions(Gi,{defaultSizeMode:"contentSize",contentLabel:"Content"}),T.addAlignInputs(Gi),T.addTextStyleInputs(Gi),T.addTransformInputs(Gi),T.addMarginInputs(Gi),T.addSharedVisualInputs(Gi),T.addBorderInputs(Gi);const $i=H(Gi);function Yi(){return Yi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Yi.apply(this,arguments)}function Ji(n){const[o,i]=(0,e.useState)(n.value);(0,e.useEffect)((()=>{i(n.value)}),[]),(0,e.useEffect)((()=>{i(n.value)}),[n.value]);var r={...n.style};y.size(r,n),y.align(r,n),void 0!==n.textStyle&&(r=Object.assign({},n.textStyle,r)),n.boxShadowEnabled&&(r.boxShadow=`${n.boxShadowInset?"inset ":""}${n.boxShadowOffsetX} ${n.boxShadowOffsetY} ${n.boxShadowBlurRadius} ${n.boxShadowSpreadRadius} ${n.boxShadowColor}`);const s=void 0===o||""===o||void 0===n.items?-1:n.items.findIndex((e=>e.Value===o)),a={id:n.id,style:r,onClick:n.onClick};let l="ndl-controls-select";return n.className&&(l=l+" "+n.className),t().createElement("select",Yi({className:l,ref:e=>{e&&(e.selectedIndex=s)}},a,{disabled:!n.enabled,value:o},Ti(n),{onChange:e=>{i(e.target.value),n.valueChanged&&n.valueChanged(e.target.value)}}),void 0!==n.items?n.items.map((e=>t().createElement("option",{value:e.Value,disabled:"true"===e.Disabled||!0===e.Disabled||void 0,selected:e.Value===o},e.Label))):null)}var Ki={name:"Options",displayName:"Options",docs:"https://docs.noodl.net/nodes/visual/options",allowChildren:!1,noodlNodeAsProp:!0,initialize:function(){this._itemsChanged=()=>{this.forceUpdate()},this.props.id=this._internal.controlId="input-"+se()(),this.props.enabled=this._internal.enabled=!0,this.outputPropValues.hoverState=this.outputPropValues.focusState=this.outputPropValues.pressedState=!1,this.props.valueChanged=e=>{const t=this._internal.value!==e;this._internal.value=e,t&&(this.flagOutputDirty("value"),this.sendSignalOnOutput("onChange"))}},getReactComponent:()=>Ji,inputs:{enabled:{type:"boolean",displayName:"Enabled",group:"General",default:!0,set:function(e){const t=(e=!!e)!==this._internal.enabled;this.props.enabled=this._internal.enabled=e,t&&(this.forceUpdate(),this.flagOutputDirty("enabled"))}},items:{type:"array",displayName:"Items",group:"General",set:function(e){this._internal.items!==e&&void 0!==this._internal.items&&this._internal.items.off("change",this._itemsChanged),this._internal.items=e,this._internal.items.on("change",this._itemsChanged),this.props.items=this._internal.items}},value:{type:"*",displayName:"Value",group:"General",set:function(e){if(void 0!==e&&"string"!=typeof e){if(void 0===e.toString)return;e=e.toString()}const t=e!==this._internal.value;this.props.value=this._internal.value=e,t&&(this.forceUpdate(),this.flagOutputDirty("value"))}},textStyle:{index:20,type:"textStyle",group:"Text",displayName:"Text Style",default:"None",set(e){this.props.textStyle=this.context.styles.getTextStyle(e),this.forceUpdate()}},fontFamily:{index:21,type:"font",group:"Text",displayName:"Font Family",set(e){if(e){let t=e;t.split(".").length>1&&(t=t.replace(/\.[^/.]+$/,""),t=t.split("/").pop()),this.setStyle({fontFamily:t})}else this.removeStyle(["fontFamily"]);this.props.textStyle&&this.forceUpdate()}}},outputs:{controlId:{type:"string",displayName:"Control Id",group:"General",getter:function(){return this._internal.controlId}},enabled:{type:"boolean",displayName:"Enabled",group:"States",getter:function(){return this._internal.enabled}},value:{type:"string",displayName:"Value",group:"States",getter:function(){return this._internal.value}},onChange:{type:"signal",displayName:"Changed",group:"Events"}},inputCss:{fontSize:{index:21,group:"Text",displayName:"Font Size",type:{name:"number",units:["px"],defaultUnit:"px"},onChange(){this.props.textStyle&&this.forceUpdate()}},color:{index:24,group:"Text",displayName:"Color",type:"color"},backgroundColor:{index:100,displayName:"Background Color",group:"Style",type:"color",default:"transparent"},borderRadius:{index:202,displayName:"Border Radius",group:"Style",type:{name:"number",units:["px"],defaultUnit:"px"},default:0,applyDefault:!1},borderStyle:{index:203,displayName:"Border Style",group:"Style",type:{name:"enum",enums:[{label:"None",value:"none"},{label:"Solid",value:"solid"},{label:"Dotted",value:"dotted"},{label:"Dashed",value:"dashed"}]},default:"solid",applyDefault:!1},borderWidth:{index:204,displayName:"Border Width",group:"Style",type:{name:"number",units:["px"],defaultUnit:"px"},default:1,applyDefault:!1},borderColor:{index:205,displayName:"Border Color",group:"Style",type:"color",default:"#000000"}},inputProps:{boxShadowEnabled:{index:250,group:"Box Shadow",displayName:"Shadow Enabled",type:"boolean",default:!1},boxShadowOffsetX:{index:251,group:"Box Shadow",displayName:"Offset X",default:0,type:{name:"number",units:["px"],defaultUnit:"px"}},boxShadowOffsetY:{index:252,group:"Box Shadow",displayName:"Offset Y",default:0,type:{name:"number",units:["px"],defaultUnit:"px"}},boxShadowBlurRadius:{index:253,group:"Box Shadow",displayName:"Blur Radius",default:5,type:{name:"number",units:["px"],defaultUnit:"px"}},boxShadowSpreadRadius:{index:254,group:"Box Shadow",displayName:"Spread Radius",default:2,type:{name:"number",units:["px"],defaultUnit:"px"}},boxShadowInset:{index:255,group:"Box Shadow",displayName:"Inset",type:"boolean",default:!1},boxShadowColor:{index:256,group:"Box Shadow",displayName:"Shadow Color",type:"color",default:"rgba(0,0,0,0.2)"}},outputProps:{},dynamicports:[{condition:"boxShadowEnabled = true",inputs:["boxShadowOffsetX","boxShadowOffsetY","boxShadowInset","boxShadowBlurRadius","boxShadowSpreadRadius","boxShadowColor"]}],methods:{}};T.addDimensions(Ki,{defaultSizeMode:"contentSize",contentLabel:"Content"}),T.addAlignInputs(Ki),T.addTransformInputs(Ki),T.addPaddingInputs(Ki),T.addMarginInputs(Ki),T.addSharedVisualInputs(Ki),Pi(Ki),(Ki=H(Ki)).setup=function(e,t){t.on("nodeAdded.Options",(function(e){e.parameters.fontFamily&&e.parameters.fontFamily.split(".").length>1&&C().instance.loadFont(e.parameters.fontFamily),e.on("parameterUpdated",(function(e){"fontFamily"===e.name&&e.value&&e.value.split(".").length>1&&C().instance.loadFont(e.value)}))}))};const Qi=Ki;function Zi(){return Zi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Zi.apply(this,arguments)}function er(e,t){return`\n    .${e}:checked {\n        background-color: ${t.checkedBackgroundColor};\n    }  \n    `}function tr(n){const o=(0,e.useContext)(he);var i={...n.style};y.size(i,n),y.align(i,n),n.boxShadowEnabled&&(i.boxShadow=`${n.boxShadowInset?"inset ":""}${n.boxShadowOffsetX} ${n.boxShadowOffsetY} ${n.boxShadowBlurRadius} ${n.boxShadowSpreadRadius} ${n.boxShadowColor}`);const r={id:n.id,style:i};n.checkedChanged&&n.checkedChanged(!!o&&o.selected===n.value),Ii("ndl-controls-radiobutton-"+n._nodeId,{checkedBackgroundColor:n.checkedBackgroundColor},er);let s="ndl-controls-radiobutton-"+n._nodeId+" ndl-controls-radiobutton";return n.className&&(s=s+" "+n.className),t().createElement("input",Zi({className:s},Ti(n),{type:"radio",name:o?o.name:void 0},r,{disabled:!n.enabled,checked:!!o&&o.selected===n.value,onChange:e=>{o&&o.checkedChanged&&o.checkedChanged(n.value)}}))}var nr={name:"Radio Button",displayName:"Radio Button",docs:"https://docs.noodl.net/nodes/visual/radiobutton",allowChildren:!1,noodlNodeAsProp:!0,initialize(){this.props.sizeMode="explicit",this.props.id=this._internal.controlId="input-"+se()(),this.props.enabled=this._internal.enabled=!0,this.props._nodeId=this.id,this._internal.checked=!1,this.outputPropValues.hoverState=this.outputPropValues.focusState=this.outputPropValues.pressedState=!1,this.props.checkedChanged=e=>{const t=this._internal.checked!==e;this._internal.checked=e,t&&this.flagOutputDirty("checked")}},getReactComponent:()=>tr,inputs:{enabled:{type:"boolean",displayName:"Enabled",group:"General",default:!0,set:function(e){const t=(e=!!e)!==this._internal.enabled;this.props.enabled=this._internal.enabled=e,t&&(this.forceUpdate(),this.flagOutputDirty("enabled"))}}},outputs:{controlId:{type:"string",displayName:"Control Id",group:"General",getter:function(){return this._internal.controlId}},enabled:{type:"boolean",displayName:"Enabled",group:"States",getter:function(){return this._internal.enabled}},checked:{type:"boolean",displayName:"Checked",group:"States",getter:function(){return this._internal.checked}}},inputProps:{value:{type:"string",displayName:"Value",group:"General"},width:{index:11,group:"Dimensions",displayName:"Width",type:{name:"number",units:["%","px","vw"],defaultUnit:"px"},default:32},height:{index:12,group:"Dimensions",displayName:"Height",type:{name:"number",units:["%","px","vh"],defaultUnit:"px"},default:32},checkedBackgroundColor:{displayName:"Background color",group:"Checked Style",type:{name:"color",allowEditOnly:!0},default:"#000000"},boxShadowEnabled:{index:250,group:"Box Shadow",displayName:"Shadow Enabled",type:"boolean",default:!1},boxShadowOffsetX:{index:251,group:"Box Shadow",displayName:"Offset X",default:0,type:{name:"number",units:["px"],defaultUnit:"px"}},boxShadowOffsetY:{index:252,group:"Box Shadow",displayName:"Offset Y",default:0,type:{name:"number",units:["px"],defaultUnit:"px"}},boxShadowBlurRadius:{index:253,group:"Box Shadow",displayName:"Blur Radius",default:5,type:{name:"number",units:["px"],defaultUnit:"px"}},boxShadowSpreadRadius:{index:254,group:"Box Shadow",displayName:"Spread Radius",default:2,type:{name:"number",units:["px"],defaultUnit:"px"}},boxShadowInset:{index:255,group:"Box Shadow",displayName:"Inset",type:"boolean",default:!1},boxShadowColor:{index:256,group:"Box Shadow",displayName:"Shadow Color",type:"color",default:"rgba(0,0,0,0.2)"}},inputCss:{backgroundColor:{index:201,displayName:"Background Color",group:"Style",type:"color"},borderRadius:{index:202,displayName:"Border Radius",group:"Style",type:{name:"number",units:["px"],defaultUnit:"px"},default:16,applyDefault:!1},borderStyle:{index:203,displayName:"Border Style",group:"Style",type:{name:"enum",enums:[{label:"None",value:"none"},{label:"Solid",value:"solid"},{label:"Dotted",value:"dotted"},{label:"Dashed",value:"dashed"}]},default:"solid",applyDefault:!1},borderWidth:{index:204,displayName:"Border Width",group:"Style",type:{name:"number",units:["px"],defaultUnit:"px"},default:1,applyDefault:!1},borderColor:{index:205,displayName:"Border Color",group:"Style",type:"color",default:"#000000"}},outputProps:{},methods:{}};T.addAlignInputs(nr),T.addTransformInputs(nr),T.addMarginInputs(nr),T.addSharedVisualInputs(nr),Pi(nr);const or=nr=H(nr);function ir(){return ir=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},ir.apply(this,arguments)}function rr(e,t){return`\n    .${e}::-webkit-slider-thumb {\n        width: ${t.thumbWidth};\n        height: ${t.thumbHeight};\n        background: ${t.thumbColor};\n        border: 0;\n        border-radius: ${t.thumbRadius};\n        cursor: pointer;\n        -webkit-appearance: none;\n        margin-top:calc(${t.trackHeight}/2 - ${t.thumbHeight}/2);\n    }\n    \n    .${e}::-moz-range-thumb {\n        width: ${t.thumbWidth};\n        height: ${t.thumbHeight};\n        background: ${t.thumbColor};\n        border: none;\n        border-radius: ${t.thumbRadius};\n        cursor: pointer;\n    }\n    \n    .${e}::-ms-thumb {\n        width: ${t.thumbWidth};\n        height: ${t.thumbHeight};\n        background: ${t.thumbColor};\n        border: none;\n        border-radius: ${t.thumbRadius};\n        cursor: pointer;\n        margin-top: 0px;\n    }\n    \n    .${e}::-webkit-slider-runnable-track {\n        background: ${t.trackColor};\n        border: none;\n        width: 100%;\n        height: ${t.trackHeight};\n        cursor: pointer;\n        margin-top:0px;\n    }\n    \n    .${e}:focus::-webkit-slider-runnable-track {\n        background: ${t.trackColor};\n    }\n    \n    .${e}::-moz-range-track {\n        background: ${t.trackColor};\n        border: none;\n        width: 100%;\n        height: ${t.trackHeight};\n        cursor: pointer;\n    }\n    \n    .${e}::-ms-track {\n        background: transparent;\n        border:none;\n        color: transparent;\n        width: 100%;\n        height: ${t.trackHeight};\n        cursor: pointer;\n    }\n    \n    .${e}::-ms-fill-lower {\n        background: ${t.trackColor};\n        border: none;\n    }\n    .${e}::-ms-fill-upper {\n        background: ${t.trackColor};\n        border: none;\n    }    \n    `}function sr(n){const[o,i]=(0,e.useState)(n.value);(0,e.useEffect)((()=>{i(n.value)}),[]),(0,e.useEffect)((()=>{i(n.value)}),[n.value]);var r={...n.style};y.size(r,n),y.align(r,n);const s={id:n.id,min:n.min,max:n.max,step:n.step,style:r};Ii("ndl-controls-range-"+n._nodeId,n,rr);let a="ndl-controls-range-"+n._nodeId+" ndl-controls-range";return n.className&&(a=a+" "+n.className),t().createElement("input",ir({className:a},Ti(n),{type:"range"},s,{value:o,disabled:!n.enabled,onChange:e=>{i(e.target.value),n.valueChanged&&n.valueChanged(e.target.value)}}))}var ar={name:"Range",docs:"https://docs.noodl.net/nodes/visual/range",allowChildren:!1,noodlNodeAsProp:!0,initialize(){this.props.sizeMode="explicit",this.props.id=this._internal.controlId="input-"+se()(),this.props.enabled=this._internal.enabled=!0,this._internal.value=this.props.value=this.props.min,this.props._nodeId=this.id,this.props.valueChanged=e=>{e="string"==typeof e?parseFloat(e):e;const t=this._internal.value!==e;this._internal.value=e,this._updateValuePercent(e),t&&(this.flagOutputDirty("value"),this.sendSignalOnOutput("onChange"))},this.props.valueChanged(this.props.value),this.outputPropValues.hoverState=this.outputPropValues.focusState=this.outputPropValues.pressedState=!1},getReactComponent:()=>sr,inputs:{enabled:{type:"boolean",displayName:"Enabled",group:"General",default:!0,set:function(e){const t=(e=!!e)!==this._internal.enabled;this.props.enabled=this._internal.enabled=e,t&&(this.forceUpdate(),this.flagOutputDirty("enabled"))}},value:{type:"string",displayName:"Value",group:"General",set:function(e){const t=e!==this._internal.value;this.props.value=this._internal.value=e,this._updateValuePercent(e),t&&(this.forceUpdate(),this.flagOutputDirty("value"))}}},outputs:{controlId:{type:"string",displayName:"Control Id",group:"General",getter:function(){return this._internal.controlId}},enabled:{type:"boolean",displayName:"Enabled",group:"States",getter:function(){return this._internal.enabled}},value:{type:"number",displayName:"Value",group:"States",getter:function(){return this._internal.value}},valuePercent:{type:"number",displayName:"Value Percent",group:"States",getter:function(){return this._internal.valuePercent}},onChange:{type:"signal",displayName:"Changed",group:"Events"}},inputProps:{min:{type:"number",displayName:"Min",group:"General",default:0},max:{type:"number",displayName:"Max",group:"General",default:100},step:{type:"number",displayName:"Step",group:"General",default:1},width:{index:11,group:"Dimensions",displayName:"Width",type:{name:"number",units:["%","px","vw"],defaultUnit:"%"},default:100},height:{index:12,group:"Dimensions",displayName:"Height",type:{name:"number",units:["%","px","vh"],defaultUnit:"%"},default:100},thumbWidth:{group:"Thumb Style",displayName:"Width",type:{name:"number",units:["px","vw","%"],defaultUnit:"px",allowEditOnly:!0},default:16},thumbHeight:{group:"Thumb Style",displayName:"Height",type:{name:"number",units:["px","vh","%"],defaultUnit:"px",allowEditOnly:!0},default:16},thumbRadius:{group:"Thumb Style",displayName:"Radius",type:{name:"number",units:["px","%"],defaultUnit:"px",allowEditOnly:!0},default:8},thumbColor:{group:"Thumb Style",displayName:"Color",type:{name:"color",allowEditOnly:!0},default:"#000000"},trackHeight:{group:"Track Style",displayName:"Height",type:{name:"number",units:["px","vh","%"],defaultUnit:"px",allowEditOnly:!0},default:6},trackColor:{group:"Track Style",displayName:"Color",type:{name:"color",allowEditOnly:!0},default:"#f0f0f0"}},inputCss:{backgroundColor:{index:201,displayName:"Background Color",group:"Style",type:"color"},borderRadius:{index:202,displayName:"Border Radius",group:"Style",type:{name:"number",units:["px"],defaultUnit:"px"},default:1,applyDefault:!1},borderStyle:{index:203,displayName:"Border Style",group:"Style",type:{name:"enum",enums:[{label:"None",value:"none"},{label:"Solid",value:"solid"},{label:"Dotted",value:"dotted"},{label:"Dashed",value:"dashed"}]},default:"none",applyDefault:!1},borderWidth:{index:204,displayName:"Border Width",group:"Style",type:{name:"number",units:["px"],defaultUnit:"px"},default:1,applyDefault:!1},borderColor:{index:205,displayName:"Border Color",group:"Style",type:"color",default:"#000000"}},outputProps:{},methods:{_updateValuePercent(e){const t=this.props.min,n=this.props.max,o=Math.floor((e-t)/(n-t)*100),i=this._internal.valuePercentChanged!==o;this._internal.valuePercent=o,i&&this.flagOutputDirty("valuePercent")}}};T.addAlignInputs(ar),T.addTransformInputs(ar),T.addMarginInputs(ar),T.addSharedVisualInputs(ar),Pi(ar);const lr=ar=H(ar);function ur(){return ur=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},ur.apply(this,arguments)}function dr(e){e.stopPropagation(),window.removeEventListener("click",dr,!0)}class cr extends t().Component{constructor(e){super(e),this.state={value:e.startValue},this.ref=t().createRef()}setText(e){this.setState({value:e}),this.props.onTextChanged&&this.props.onTextChanged(e)}componentDidMount(){this.ref.current.noodlNode=this.props.noodlNode,this.setText(this.props.startValue)}render(){const e={...this.props.textStyle,...this.props.style};y.size(e,this.props),y.align(e,this.props),0===e.opacity&&(e.pointerEvents="none");const n=this.props,o={id:n.id,value:this.state.value,...Ti(n),disabled:!n.enabled,style:e,className:n.className,placeholder:n.placeholder,onChange:e=>this.onChange(e)};return"textArea"!==this.props.type?t().createElement("input",ur({ref:this.ref,type:this.props.type},o,{onKeyDown:e=>this.onKeyDown(e),onMouseDown:()=>window.addEventListener("click",dr,!0)})):(o.style.resize="none",t().createElement("textarea",ur({ref:this.ref},o,{onKeyDown:e=>this.onKeyDown(e)})))}onKeyDown(e){"Enter"!==e.key&&13!==e.which||this.props.onEnter&&this.props.onEnter()}onChange(e){const t=e.target.value;this.setText(t)}focus(){this.ref.current&&this.ref.current.focus()}blur(){this.ref.current&&this.ref.current.blur()}}const pr={name:"Text Input",docs:"https://docs.noodl.net/nodes/visual/text-input",allowChildren:!1,noodlNodeAsProp:!0,getReactComponent:()=>cr,defaultCss:{outline:"none",borderStyle:"solid",padding:0},initialize(){this.props.startValue="",this.props.id=this._internal.controlId="input-"+se()(),this.props.enabled=this._internal.enabled=!0,this.outputPropValues.hoverState=this.outputPropValues.focusState=this.outputPropValues.pressedState=!1},inputProps:{type:{displayName:"Type",group:"Text",index:19,type:{name:"enum",enums:[{label:"Text",value:"text"},{label:"Text Area",value:"textArea"},{label:"Email",value:"email"},{label:"Number",value:"number"},{label:"Password",value:"password"},{label:"URL",value:"url"}]},default:"text"},placeholder:{index:22,group:"Text",displayName:"Placeholder",default:"Type here...",type:{name:"string"}},boxShadowEnabled:{index:250,group:"Box Shadow",displayName:"Shadow Enabled",type:"boolean",default:!1},boxShadowOffsetX:{index:251,group:"Box Shadow",displayName:"Offset X",default:0,type:{name:"number",units:["px"],defaultUnit:"px"}},boxShadowOffsetY:{index:252,group:"Box Shadow",displayName:"Offset Y",default:0,type:{name:"number",units:["px"],defaultUnit:"px"}},boxShadowBlurRadius:{index:253,group:"Box Shadow",displayName:"Blur Radius",default:5,type:{name:"number",units:["px"],defaultUnit:"px"}},boxShadowSpreadRadius:{index:254,group:"Box Shadow",displayName:"Spread Radius",default:2,type:{name:"number",units:["px"],defaultUnit:"px"}},boxShadowInset:{index:255,group:"Box Shadow",displayName:"Inset",type:"boolean",default:!1},boxShadowColor:{index:256,group:"Box Shadow",displayName:"Shadow Color",type:"color",default:"rgba(0,0,0,0.2)"}},inputs:{enabled:{type:"boolean",displayName:"Enabled",group:"General",default:!0,set:function(e){const t=(e=!!e)!==this._internal.enabled;this.props.enabled=this._internal.enabled=e,t&&(this.forceUpdate(),this.flagOutputDirty("enabled"))}},set:{group:"Actions",displayName:"Set",type:"signal",valueChangedToTrue(){this.scheduleAfterInputsHaveUpdated((()=>{this.setText(this._internal.text)}))}},startValue:{index:18,displayName:"Text",type:"string",group:"Text",set(e){this._internal.text!==e&&(this._internal.text=e,!1===this.isInputConnected("set")&&this.setText(e))}},textStyle:{index:19,type:"textStyle",group:"Text",displayName:"Text Style",default:"None",set(e){this.props.textStyle=this.context.styles.getTextStyle(e),this.forceUpdate()}},fontFamily:{index:20,type:"font",group:"Text",displayName:"Font Family",set(e){if(e){let t=e;t.split(".").length>1&&(t=t.replace(/\.[^/.]+$/,""),t=t.split("/").pop()),this.setStyle({fontFamily:t})}else this.removeStyle(["fontFamily"]);this.props.textStyle&&this.forceUpdate()}},clear:{type:"signal",group:"Actions",displayName:"Clear",valueChangedToTrue(){this.setText("")}},focus:{type:"signal",group:"Actions",displayName:"Focus",valueChangedToTrue(){this.context.setNodeFocused(this,!0)}},blur:{type:"signal",group:"Actions",displayName:"Blur",valueChangedToTrue(){this.context.setNodeFocused(this,!1)}}},inputCss:{fontSize:{index:21,group:"Text",displayName:"Font Size",type:{name:"number",units:["px"],defaultUnit:"px"},onChange(){this.props.textStyle&&this.forceUpdate()}},color:{index:99,type:"color",displayName:"Font Color",group:"Style"},backgroundColor:{index:100,displayName:"Background Color",group:"Style",type:"color",default:"transparent"},borderColor:{index:101,displayName:"Border Color",group:"Style",type:"color",default:"black"},borderWidth:{index:102,displayName:"Border Width",group:"Style",type:{name:"number",units:["px"],defaultUnit:"px"},default:0}},outputs:{controlId:{type:"string",displayName:"Control Id",group:"General",getter:function(){return this._internal.controlId}},enabled:{type:"boolean",displayName:"Enabled",group:"States",getter:function(){return this._internal.enabled}}},outputProps:{onTextChanged:{group:"Value",displayName:"Text",type:"string"},onEnter:{group:"Events",displayName:"On Enter",type:"signal"}},dynamicports:[{condition:"boxShadowEnabled = true",inputs:["boxShadowOffsetX","boxShadowOffsetY","boxShadowInset","boxShadowBlurRadius","boxShadowSpreadRadius","boxShadowColor"]}],methods:{_focus(){this.innerReactComponentRef&&this.innerReactComponentRef.focus()},_blur(){this.innerReactComponentRef&&this.innerReactComponentRef.blur()},setText(e){this.props.startValue=e,this.innerReactComponentRef?this.innerReactComponentRef.setText(e):this.outputPropValues.onTextChanged!==e&&(this.outputPropValues.onTextChanged=e,this.flagOutputDirty("onTextChanged"))}}};T.addDimensions(pr,{defaultSizeMode:"contentSize",contentLabel:"Text"}),T.addAlignInputs(pr),T.addTransformInputs(pr),T.addPaddingInputs(pr),T.addMarginInputs(pr),T.addSharedVisualInputs(pr),Pi(pr);const hr=H(pr);hr.setup=function(e,t){t.on("nodeAdded.Text Input",(function(e){e.parameters.fontFamily&&e.parameters.fontFamily.split(".").length>1&&C().instance.loadFont(e.parameters.fontFamily),e.on("parameterUpdated",(function(e){"fontFamily"===e.name&&e.value&&e.value.split(".").length>1&&C().instance.loadFont(e.value)}))}))};const gr=hr;var fr=function(){function e(e){var t=e.graphModel,n=e.nodeRegister,o=e.getNodeScope,i=this;this.getNodeScope=o,this.graphModel=t,this.nodeRegister=n,this.setStyles(t.getMetaData("styles")||{}),t.on("metadataChanged.styles",(function(e){return i.setStyles(e)}))}return e.prototype.setStyles=function(e){this.styles=e;var t=e.text||{};for(var n in Object.values(t).filter((function(e){return e.fontFamily})).forEach((function(e){var t=e.fontFamily;t.split(".").length>1&&(C().instance.loadFont(t),t=(t=t.replace(/\.[^/.]+$/,"")).split("/").pop(),e.fontFamily=t)})),t){var o=t[n];for(var i in o){var r=o[i];"object"==typeof r&&(o[i]=r.value+r.unit)}}for(var s in t)(o=t[s]).hasOwnProperty("color")&&!o.color&&delete o.color;var a=this.getNodeScope&&this.getNodeScope();if(a){for(var l=this.graphModel.getVariants(),u=function(e){d._variantHasInputsWithTypes(e,["color","textStyle"])&&a.getAllNodesWithVariantRecursive(e).forEach((function(t){return t.setVariant(e)}))},d=this,c=0,p=l;c<p.length;c++)u(p[c]);["color","textStyle"].forEach((function(e){(function(e,t){var n=[];return e.getAllNodesRecursive().forEach((function(e){var o=[];for(var i in e._inputs)e._inputs[i].type===t&&o.push(i);o.length&&n.push({node:e,inputs:o})})),n})(a,e).forEach((function(e){var t=e.node;e.inputs.forEach((function(e){t.getInputValue(e)&&t.setInputValue(e,t.getInputValue(e))}))}))}))}},e.prototype.resolveColor=function(e){return this.styles.colors&&this.styles.colors[e]||e},e.prototype.getTextStyle=function(e){return this.styles.text&&this.styles.text[e]||{}},e.prototype._variantHasInputsWithTypes=function(e,t){if(this.nodeRegister.hasNode(e.typename)){var n=this.nodeRegister.getNodeMetadata(e.typename),o=new Set(Object.keys(e.parameters));for(var i in e.stateParameters)Object.keys(e.stateParameters[i]).forEach((function(e){return o.add(e)}));for(var r=0,s=Array.from(o);r<s.length;r++){var a=s[r],l=n.inputs[a]&&n.inputs[a].type;if(t.includes(l))return!0}return!1}},e}();const mr=fr;"undefined"!=typeof window&&window.NoodlEditor&&(window.NoodlEditorInspectorAPI={enabled:!1,inspector:null,setInspector(e){this.inspector=e,this.enabled?this.inspector.enable():this.inspector.disable()},setEnabled(e){this.enabled=e,this.inspector&&(this.enabled?this.inspector.enable():this.inspector.disable()),window.NoodlEditorHighlightAPI.highlighter&&window.NoodlEditorHighlightAPI.highlighter.setWindowSelected(e)}},window.NoodlEditorHighlightAPI={highlighter:null,setHighlighter(e){this.highlighter=e,this.highlighter.setWindowSelected(window.NoodlEditorInspectorAPI.enabled)},selectNode(e){this.highlighter.deselectNodes(),e&&"null"!==e?this.highlighter.selectNodesWithId(e):window.NoodlEditorInspectorAPI.enabled&&this.highlighter.setWindowSelected(!0)}});class yr extends t().Component{constructor(e){super(e),this.state={popups:[]};const{noodlRuntime:t}=e;this.runningDeployed=void 0!==this.props.projectData,this.focusedNoodlNodes=[],t.context.setNodeFocused=this.setNodeFocused.bind(this);const n="undefined"!=typeof document&&-1!==document.location.href.indexOf("forceDebugger=true")||Noodl.enableDebugInspectors;if(t.setDebugInspectorsEnabled(n),t.context.setPopupCallbacks({onShow:e=>{const n=this.state.popups.concat([e]);t.getProjectSettings().bodyScroll&&1===n.length&&(document.body.style.width=document.body.clientWidth+"px",document.body.style.top=`-${window.scrollY}px`,document.body.style.position="fixed"),this.setState({popups:n})},onClose:e=>{const n=this.state.popups.filter((t=>t!==e));if(this.setState({popups:n}),t.getProjectSettings().bodyScroll&&0===n.length){const e=document.body.style.top;document.body.style.position="",document.body.style.top="",document.body.style.width="100%",window.scrollTo(0,-1*parseInt(e||"0"))}}}),function(e){[__webpack_require__(2500),__webpack_require__(349),__webpack_require__(7513),__webpack_require__(4091),__webpack_require__(7991),__webpack_require__(4337),__webpack_require__(4885),__webpack_require__(6220),__webpack_require__(6893),__webpack_require__(4213),__webpack_require__(8979),__webpack_require__(4759),__webpack_require__(9414),__webpack_require__(8695),__webpack_require__(7513),__webpack_require__(9273),__webpack_require__(8177),__webpack_require__(2530),__webpack_require__(2005),__webpack_require__(7784),__webpack_require__(8765),__webpack_require__(671),__webpack_require__(4273),__webpack_require__(6852),__webpack_require__(4195),__webpack_require__(5319),__webpack_require__(1469),__webpack_require__(1581),__webpack_require__(1979),__webpack_require__(3075),__webpack_require__(2354),__webpack_require__(6697),__webpack_require__(1077),__webpack_require__(7132),__webpack_require__(6523),__webpack_require__(3021),__webpack_require__(1466),__webpack_require__(2594),__webpack_require__(4645),__webpack_require__(4139),__webpack_require__(3357),__webpack_require__(7706),__webpack_require__(4557),__webpack_require__(9789),__webpack_require__(1038),__webpack_require__(3784),__webpack_require__(9193),__webpack_require__(6065),__webpack_require__(1645),__webpack_require__(46),__webpack_require__(4685),__webpack_require__(5553),__webpack_require__(4533),__webpack_require__(452),__webpack_require__(1220),__webpack_require__(4146),__webpack_require__(6295),__webpack_require__(8157),__webpack_require__(272),__webpack_require__(851),__webpack_require__(4470),__webpack_require__(3086)].forEach((function(t){e.registerNode(t)})),e.registerNode(Pt()),e.registerNode(oi),e.registerNode(fi),e.registerNode(ci),e.registerNode(ai),e.registerNode(St),e.registerNode(_i),e.registerNode(Vt),e.registerNode(ht),e.registerNode(xt),e.registerNode(Ri),e.registerNode(Fi),e.registerNode(or),e.registerNode(Qi),e.registerNode(lr),e.registerNode($i),e.registerNode(gr),e.registerNode(Hi),e.registerNode(Wi),e.registerNode(ne),e.registerNode(le),e.registerNode(Ne),e.registerNode(ve),e.registerNode(pe),e.registerNode(je),e.registerNode(He),e.registerNode(Ze),e.registerNode(rt),e.registerNode(pt)}(t),function(e){const t="undefined"!=typeof window?window:globalThis;t.Noodl.getProjectSettings=e.getProjectSettings.bind(e),t.Noodl.getMetaData=e.getMetaData.bind(e),t.Noodl.Collection=t.Noodl.Array=__webpack_require__(9160),t.Noodl.Model=t.Noodl.Object=__webpack_require__(3839),t.Noodl.Variables=t.Noodl.Object.get("--ndl--global-variables"),t.Noodl.Events=t.Noodl.eventEmitter=e.context.eventSenderEmitter,t.Noodl.Records=__webpack_require__(4552)(),t.Noodl.Users=__webpack_require__(1651),t.Noodl.CloudFunctions=__webpack_require__(8656),t.Noodl.Navigation=__webpack_require__(2869),t.Noodl.Navigation._noodlRuntime=e,t.Noodl.Files=__webpack_require__(9597),t.Noodl.SEO=new c,t.Noodl.Env||(t.Noodl.Env={}),t.Noodl.Arrays=new Proxy(t.Noodl.Array,{get:(e,t,n)=>Noodl.Array.get(t),set(e,t,n){if(!Array.isArray(n))throw new Error("Cannot assign non array value to array with id "+t);Noodl.Array.get(t).set(n)}}),t.Noodl.Objects=new Proxy(t.Noodl.Object,{get:(e,t,n)=>Noodl.Object.get(t),set(e,t,n){Noodl.Object.get(t).setAll(n)}})}(t),t.setProjectSettings(p),this.props.noodlModules)for(const e of this.props.noodlModules){if(e.reactNodes){const t=[];for(const n of e.reactNodes)t.push(H(n));const n=e.nodes||[];e.nodes=n.concat(t)}t.registerModule(e)}if(t.eventEmitter.on("rootComponentUpdated",(()=>{requestAnimationFrame((()=>this.forceUpdate()))})),t.graphModel.on("projectSettingsChanged",(e=>{"undefined"!=typeof document&&(e.bodyScroll?document.body.classList.add("body-scroll"):document.body.classList.remove("body-scroll"))})),this.styles=new mr({graphModel:t.graphModel,getNodeScope:()=>t.context.rootComponent&&t.context.rootComponent.nodeScope,nodeRegister:t.context.nodeRegister}),t.context.styles=this.styles,this.state.waitingForExport=!this.runningDeployed,this.runningDeployed){this.props.noodlRuntime.setData(this.props.projectData);const e=Object.keys(this.props.projectData.componentIndex);e.length<30&&setTimeout((()=>{this.props.noodlRuntime.prefetchBundles(e,3)}),1e4)}else t.graphModel.on("editorImportComplete",(()=>{this.setState({waitingForExport:!1})})),this.connectToEditor();this.focusedNoodlNodes=[]}connectToEditor(){const{noodlRuntime:e}=this.props,t=((Noodl.host||location.protocol+"//"+location.host)+location.pathname+(location.search?location.search:"")).replace("http","ws");e.connectToEditor(t),this.highlightedNodes=new Map,this.isUpdatingHighlights=!1,"undefined"!=typeof window&&window.NoodlEditor&&(this.highlighter=new a(e),NoodlEditorHighlightAPI.setHighlighter(this.highlighter),e.editorConnection.on("hoverStart",(e=>{this.highlighter.highlightNodesWithId(e)})),e.editorConnection.on("hoverEnd",(e=>{this.highlighter.disableHighlight()})),this.inspector=new u({onDisableHighlight:()=>this.highlighter.disableHighlight(),onHighlight:e=>this.highlighter.highlightNodesWithId(e),onInspect:e=>{NoodlEditor.inspectNodes(e)}}),NoodlEditorInspectorAPI.setInspector(this.inspector)),e.editorConnection.on("debuggingEnabledChanged",(t=>{e.setDebugInspectorsEnabled(t)})),this.graphWarnings=new s(e.graphModel,e.editorConnection)}setNodeFocused(e,t){if(t&&-1===this.focusedNoodlNodes.indexOf(e))this.focusedNoodlNodes.filter((t=>!t.contains(e))).forEach((e=>{e._blur()})),e._focus(),this.focusedNoodlNodes.push(e);else if(!t){const t=this.focusedNoodlNodes.indexOf(e);if(-1!==t)return;e._blur(),this.focusedNoodlNodes.filter((t=>t.contains(e))).forEach((e=>{e._blur()})),this.focusedNoodlNodes.splice(t,1)}}onClickCapture(e){const t=[];let n=e.target;for(;n;)n.noodlNode&&n.noodlNode._focus&&t.push(n.noodlNode),n=n.parentNode;this.focusedNoodlNodes.filter((e=>-1===t.indexOf(e))).forEach((e=>e._blur())),t.filter((e=>-1===this.focusedNoodlNodes.indexOf(e))).forEach((e=>e._focus())),this.focusedNoodlNodes=t}render(){const e=this.props.noodlRuntime.rootComponent;if(this.state.waitingForExport)return null;if(!e)return this.runningDeployed?null:t().createElement("div",{style:{overflowY:"auto",padding:"24px",fontFamily:"Open Sans",fontSize:"16px",width:"100vw",height:"100vh",backgroundColor:"#F57569"}},t().createElement("div",{style:{marginBottom:"50px",fontWeight:"bold",display:"flex",alignItems:"center"}},t().createElement("span",null,"ERROR"),t().createElement("img",{src:"ndl_assets/noodl-logo-black.svg",style:{marginLeft:"auto"}})),t().createElement("div",{style:{margin:"0 auto",alignItems:"center",display:"flex",flexDirection:"column"}},t().createElement("div",{style:{fontSize:"24px",textAlign:"center",marginBottom:"50px"}},"No ",t().createElement("img",{src:"ndl_assets/home-icon.svg",style:{marginRight:"-6px"}})," ",t().createElement("span",{style:{fontWeight:"bold"}},"HOME")," component selected"),t().createElement("div",{style:{textAlign:"center"}},"Click ",t().createElement("span",{style:{fontWeight:"bold"}},"Make home")," as shown below."),t().createElement("img",{style:{marginTop:"24px"},srcSet:"ndl_assets/make-home-instructions@2x.png 2x"})));if(this.props.noodlRuntime.getProjectSettings().bodyScroll){const n={margin:0,padding:0,minHeight:"100vh",alignSelf:"stretch",display:"flex",flexDirection:"column"};return t().createElement("div",{style:n,onClickCapture:e=>this.onClickCapture(e)},t().createElement("div",{style:{...n,isolation:"isolate"}},e.render()),this.state.popups.length?t().createElement("div",{style:{...n,isolation:"isolate"}},this.state.popups.map((e=>e.render()))):null)}return t().createElement("div",{style:{margin:0,padding:0,overflow:"hidden",width:"100%",height:"100%"},onClickCapture:e=>this.onClickCapture(e)},e.render(),this.state.popups.map((e=>e.render())))}}function vr(){return"undefined"==typeof window?{type:"browser",platform:{requestUpdate:e=>setImmediate(e),getCurrentTime:()=>0,objectToString:e=>JSON.stringify(e,null,2)},componentFilter:e=>!e.name.startsWith("/#__cloud__/")}:{type:"browser",platform:{requestUpdate:e=>window.requestAnimationFrame(e),getCurrentTime:()=>window.performance.now(),objectToString:e=>JSON.stringify(e,null,2)},componentFilter:e=>!e.name.startsWith("/#__cloud__/")}}String.prototype.matchAll||(String.prototype.matchAll=function(e){var t=new RegExp(e,"g"),n=[],o=this.match(t);for(let t in o){var i=o[t];n[t]=i.match(new RegExp(e))}return n});const br={render(e,n,{isLocal:i=!1}){const s=vr();i&&(s.platform.isRunningLocally=()=>!0);const a=new(r())(s);o().render(t().createElement(yr,{noodlRuntime:a,noodlModules:n},null),e)},renderDeployed(e,t,n){e.children.length>0&&e.children[0].hasAttribute("data-reactroot")?o().hydrate(this.createElement(t,n),e):o().render(this.createElement(t,n),e)},createElement(e,n){const o=new(r())({...vr(),runDeployed:!0});return t().createElement(yr,{noodlRuntime:o,noodlModules:e,projectData:n},null)}};window.Noodl._viewerReact=br})()})();